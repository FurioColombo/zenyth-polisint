{"version":3,"file":"js/app.ff360c06.js","mappings":"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","sources":["webpack://zenyth-polisint/./src/App.vue","webpack://zenyth-polisint/./src/App.vue?7ccd","webpack://zenyth-polisint/./src/views/MainHost.vue","webpack://zenyth-polisint/./src/views/Synth/Oscillators/OscHost.vue","webpack://zenyth-polisint/./src/views/Synth/Oscillators/Osc.vue","webpack://zenyth-polisint/./src/views/Synth/Oscillators/MyPolySynth.js","webpack://zenyth-polisint/./src/views/Synth/Oscillators/Osc.vue?83b5","webpack://zenyth-polisint/./src/views/Synth/Oscillators/OscHost.vue?d815","webpack://zenyth-polisint/./src/views/Synth/Filters/FilterHost.vue","webpack://zenyth-polisint/./src/views/Synth/Filters/FilterChain.vue","webpack://zenyth-polisint/./src/views/Synth/Filters/Filter.vue","webpack://zenyth-polisint/./src/views/Synth/Filters/MyFilter.js","webpack://zenyth-polisint/./src/views/Synth/Filters/Filter.vue?c1b3","webpack://zenyth-polisint/./src/views/Synth/Filters/FilterChain.vue?d0d3","webpack://zenyth-polisint/./src/views/Synth/Filters/FilterHost.vue?2cd0","webpack://zenyth-polisint/./src/views/Synth/Effects/FxHost.vue","webpack://zenyth-polisint/./src/views/Synth/Effects/FxCell.vue","webpack://zenyth-polisint/./src/views/Synth/Effects/MyFx.js","webpack://zenyth-polisint/./src/views/Synth/Effects/FxCell.vue?8c66","webpack://zenyth-polisint/./src/views/Synth/Effects/FxHost.vue?c3f2","webpack://zenyth-polisint/./src/views/Synth/Tools/ToolsHost.vue","webpack://zenyth-polisint/./src/views/Synth/Tools/Meter.vue","webpack://zenyth-polisint/./src/views/Synth/Tools/Meter.vue?40dd","webpack://zenyth-polisint/./src/views/Synth/Tools/Oscilloscope.vue","webpack://zenyth-polisint/./src/views/Synth/Tools/Oscilloscope.vue?f6a7","webpack://zenyth-polisint/./src/views/Synth/Tools/SpecAnalyzer.vue","webpack://zenyth-polisint/./src/views/Synth/Tools/SpecAnalyzer.vue?01c1","webpack://zenyth-polisint/./src/views/Synth/Tools/ToolsHost.vue?776e","webpack://zenyth-polisint/./src/views/Synth/Modulators/ModHost.vue","webpack://zenyth-polisint/./src/views/Synth/Modulators/Envelope.vue","webpack://zenyth-polisint/./src/views/Synth/Modulators/Knobs.vue","webpack://zenyth-polisint/./src/views/Synth/Modulators/Knobs.vue?22e9","webpack://zenyth-polisint/./src/views/Synth/Modulators/EnvelopeVisualizer.vue","webpack://zenyth-polisint/./src/views/Synth/Modulators/EnvelopeVisualizer.vue?6078","webpack://zenyth-polisint/./src/views/Synth/Modulators/Envelope.vue?43eb","webpack://zenyth-polisint/./src/views/Synth/Modulators/Lfo.vue","webpack://zenyth-polisint/./src/views/Synth/Modulators/LfoVisualizer.vue","webpack://zenyth-polisint/./src/views/Synth/Modulators/LfoVisualizer.vue?ff68","webpack://zenyth-polisint/./src/views/Synth/Modulators/Lfo.vue?aca2","webpack://zenyth-polisint/./src/views/Synth/Modulators/VolEnvelope.vue","webpack://zenyth-polisint/./src/views/Synth/Modulators/VolEnvelope.vue?3e34","webpack://zenyth-polisint/./src/views/Synth/Modulators/ModSelector.vue","webpack://zenyth-polisint/./src/views/Synth/Modulators/ModSelector.vue?9635","webpack://zenyth-polisint/./src/views/Synth/Modulators/ModHost.vue?a17d","webpack://zenyth-polisint/./src/views/Synth/Keyboard/PianoKeyboard.vue","webpack://zenyth-polisint/./src/views/Synth/Keyboard/MIDIKeyboard.vue","webpack://zenyth-polisint/./src/views/Synth/Keyboard/MIDIKeyboard.vue?854b","webpack://zenyth-polisint/./src/views/Synth/Keyboard/Octave.vue","webpack://zenyth-polisint/./src/views/Synth/Keyboard/Octave.vue?c297","webpack://zenyth-polisint/./src/views/Synth/Keyboard/PianoKeyboard.vue?3c01","webpack://zenyth-polisint/./src/views/MainHost.vue?2950","webpack://zenyth-polisint/./src/views/AboutView.vue","webpack://zenyth-polisint/./src/views/AboutView.vue?d56f","webpack://zenyth-polisint/./src/router/index.js","webpack://zenyth-polisint/./src/main.js","webpack://zenyth-polisint/webpack/bootstrap","webpack://zenyth-polisint/webpack/runtime/chunk loaded","webpack://zenyth-polisint/webpack/runtime/compat get default export","webpack://zenyth-polisint/webpack/runtime/define property getters","webpack://zenyth-polisint/webpack/runtime/global","webpack://zenyth-polisint/webpack/runtime/hasOwnProperty shorthand","webpack://zenyth-polisint/webpack/runtime/publicPath","webpack://zenyth-polisint/webpack/runtime/jsonp chunk loading","webpack://zenyth-polisint/webpack/startup"],"sourcesContent":["<template>\r\n  <router-view/>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nexport default {\r\n  mounted() {\r\n\r\n  },\r\n  methods: {\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  width: 100%;\r\n  height: 100%;\r\n  margin: auto;\r\n}\r\n\r\nnav {\r\n  width: 100%;\r\n  aspect-ratio: 24/1;\r\n  font-size: 2vw;\r\n  padding-top: 1vw;\r\n}\r\n\r\nnav a {\r\n  font-weight: bold;\r\n  color: #2c3e50;\r\n}\r\n\r\nnav a.router-link-exact-active {\r\n  color: #42b983;\r\n}\r\n\r\ndiv {\r\n  user-select: none;\r\n}\r\n</style>\r\n","import { render } from \"./App.vue?vue&type=template&id=2c65f8b8\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=2c65f8b8&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"appContainer\" @mouseup=\"handleMouseUp\" @mousemove=\"handleMouseMove\">\r\n    <div class=\"content_grid\">\r\n    <div class=\"info_column\" :style=\"infoColumn\">\r\n      <img className=\"app_logo\" src=\"@/img/zenyth_logo.png\" draggable=\"false\">\r\n      <div class=\"info_column_items\" :style=\"infoColumnsItemsSection\">\r\n        <div class=\"info_column_item\" :style=\"infoColumnItem\" @click=\"infoBtnClick\">INFO</div>\r\n        <div class=\"info_column_item\" :style=\"infoColumnItem\" @click=\"demoBtnClick\">DEMO</div>\r\n        <div class=\"info_column_item\" :style=\"infoColumnItem\" @click=\"songBtnClick\">SONG</div>\r\n      </div>\r\n    </div>\r\n    <div class=\"mainHost\">\r\n      <OscHost ref=\"oscHost\" @newOsc=\"handleNewOsc\" />\r\n      <FilterHost ref=\"filterHost\" @filterInitialized=\"initOscConnections\"/>\r\n      <FxHost ref=\"fxHost\"/>\r\n      <ToolHost ref=\"toolsHost\" />\r\n      <ModHost ref=\"modHost\"/>\r\n      <PianoKeyboard\r\n        ref=\"pianoKeyboard\"\r\n        @noteDown=\"noteDownHandle\"\r\n        @noteUp=\"noteUpHandle\"\r\n      />\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport OscHost from \"./Synth/Oscillators/OscHost.vue\";\r\nimport FilterHost from \"./Synth/Filters/FilterHost.vue\";\r\nimport FxHost from \"./Synth/Effects/FxHost.vue\";\r\nimport ToolHost from \"./Synth/Tools/ToolsHost.vue\";\r\nimport ModHost from \"./Synth/Modulators/ModHost.vue\"; // Envelope Strip\r\nimport PianoKeyboard from \"./Synth/Keyboard/PianoKeyboard.vue\";\r\n\r\nexport default {\r\n  name: \"mainHost\",\r\n  components: {\r\n    OscHost,\r\n    FilterHost,\r\n    FxHost,\r\n    ToolHost,\r\n    ModHost,\r\n    PianoKeyboard,\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      draggedInfo: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    Tone.Transport.start(\"+0.1\")\r\n  },\r\n\r\n  computed: {\r\n    infoColumnsItemsSection(){\r\n      return {\r\n        backgroundColor: this.colors.azure.glow,\r\n        opacity: 0.7,\r\n      }\r\n    },\r\n    infoColumnItem(){\r\n      return {\r\n        color: this.colors.gray.dark,\r\n        opacity: 0.8,\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // -------------- INIT ROUTING (connections) ------------\r\n    initOscConnections(){\r\n      this.$refs.oscHost.initConnections()\r\n    },\r\n    handleNewOsc(){\r\n      //initialize volEnvelope on all synth when a new oscillator is added\r\n      this.$refs.modHost.handleNewOsc();\r\n    },\r\n    handleMouseUp(e) {\r\n      //Actions to execute when mouseup happens on any part of the screen\r\n      this.$refs.pianoKeyboard.handleMouseUp();\r\n      this.$refs.modHost.handleMouseUp(e);\r\n      this.$refs.fxHost.handleMouseUp(e);\r\n\r\n      //If something has been dragged and not claimed after 100ms infos are deleted\r\n      if (this.draggedInfo) {\r\n        setTimeout(() => this.deleteDraggedInfo(\"MainHost\"), 100);\r\n      }\r\n    },\r\n    handleMouseMove(e){\r\n      //console.log(this.$refs.modHost)\r\n      this.$refs.modHost.handleMouseMove(e);\r\n      this.$refs.fxHost.handleMouseMove(e);\r\n\r\n    },\r\n    noteDownHandle(note) {\r\n      this.$refs[\"toolsHost\"].setOscilloscopeTiming(note);\r\n    },\r\n\r\n\r\n    noteUpHandle(note) {\r\n\r\n    },\r\n\r\n    // ----------- USER INTERACTION ----------\r\n    infoBtnClick(){\r\n      window.open(\"/about\")\r\n    },\r\n    demoBtnClick(){\r\n      window.open('https://www.youtube.com/watch?v=3jTYMbAtMqI', '_blank').focus();\r\n    },\r\n    songBtnClick(){\r\n      window.open('https://www.youtube.com/watch?v=cjMXcdHnGRU', '_blank').focus();\r\n    },\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.content_grid{\r\n  display: grid;\r\n  width: 100%;\r\n  padding: 4vw;\r\n  box-sizing: border-box;\r\n  grid-template-columns: 10% 85%;\r\n  justify-content: center;\r\n  justify-items: center;\r\n}\r\n\r\n.info_column {\r\n  display: flex;\r\n  flex-direction: column;\r\n\r\n}\r\n\r\n.app_logo {\r\n  flex: 1;\r\n  width: 13vw;\r\n  margin-bottom: 1vw;\r\n  object-fit: scale-down;\r\n}\r\n\r\n.info_column_items {\r\n  flex: 3.5;\r\n  margin: 1vw;\r\n  padding-top: 1.8vw;\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n\r\n}\r\n\r\n.info_column_item {\r\n  margin-top: 1vw;\r\n  margin-bottom: 2vw;\r\n  align-self: center;\r\n  font-size: 1vw;\r\n}\r\n\r\n.mainHost {\r\n  display: grid; /* no more flex display because we need Env Strip to be longer */\r\n  grid-template-rows: 55% 30% 15%; /* grid display row sizes*/\r\n  grid-template-columns: 20% 55% 25%; /*  ...   ...   column sizes fr is like unit */\r\n  width: 85%;\r\n  justify-content: center;\r\n  aspect-ratio: 4 / 3;\r\n  background-color: transparent;\r\n}\r\n.appContainer {\r\n  text-align: center;\r\n  width: 100%;\r\n  height: 80%;\r\n  margin: auto;\r\n}\r\n\r\n</style>","<template>\r\n  <div class=\"oscHost\" :style=\"this.oscHost\">\r\n    <div class=\"scrollable\">\r\n      <template v-for=\"(osc) in this.oscList\" :key=\"osc.id\" :item=\"osc\">\r\n        <Osc\r\n            :ref=\"osc.ref\"\r\n            :id=\"osc.id\"\r\n            @disposed=\"removeOsc\"\r\n            @newOsc=\"handleNewOsc\"\r\n        />\r\n      </template>\r\n      <div class=\"voidContainer\" @click=\"addOsc\">\r\n        <div class=\"voidBorder\" :style=\"voidBorder\">\r\n          <div class=\"oscVoid\">+</div>\r\n        </div>\r\n      </div>\r\n      <div  v-if=\"this.oscList.length <= 1\" class=\"voidContainer\" @click=\"addOsc\">\r\n        <div class=\"voidBorder\" :style=\"voidBorder\">\r\n          <div class=\"oscVoid\">+</div>\r\n        </div>\r\n      </div>\r\n      <div  v-if=\"this.oscList.length <= 0\" class=\"voidContainer\" @click=\"addOsc\">\r\n        <div class=\"voidBorder\" :style=\"voidBorder\">\r\n          <div class=\"oscVoid\" >+</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Osc from \"./Osc.vue\";\r\nimport { toRaw } from \"vue\";\r\n\r\nexport default {\r\n  components: {\r\n    Osc,\r\n  },\r\n\r\n  data() {\r\n    // data structure oscillators list\r\n    return {\r\n      oscList: [],\r\n      name: \"oscHost\",\r\n      i: 0,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.addOsc();\r\n    this.addOsc();\r\n  },\r\n\r\n  methods: {\r\n    handleNewOsc(){\r\n      this.$emit(\"newOsc\")\r\n    },\r\n    initConnections() {\r\n      for (let key in this.$refs) {\r\n        //console.log(toRaw(this.$refs[key][0]))\r\n        toRaw(this.$refs[key][0]).initConnections()\r\n\r\n      }\r\n    },\r\n    addOsc() {\r\n      //TO-DO REWRITE\r\n      let ref = \"osc\" + this.i;\r\n      this.oscList.push({id: this.i, ref: ref});\r\n      //console.log(\"adding osc\" + this.i)\r\n      //console.log(this.oscList);\r\n      this.i += 1;\r\n    },\r\n\r\n    removeOsc(id) {\r\n      //console.log(\"removing oscillator\" + id);\r\n      // Remove the oscillator from the list\r\n      let index = 0\r\n      this.oscList.forEach(osc => {\r\n        if (osc.id === id) index = this.oscList.indexOf(osc)\r\n      });\r\n      this.oscList.splice(index, 1);\r\n    },\r\n  },\r\n  unmounted() {\r\n  },\r\n  computed: {\r\n    oscHost(){\r\n      return{\r\n        background: '#f8e7e6',\r\n      }\r\n    },\r\n    voidBorder(){\r\n      return{\r\n        background: this.colors.pink.glow,\r\n        border: '.1vw solid' + this.colors.pink.dark\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.scrollable {\r\n  font-size: 2vw;\r\n  justify-content: center;\r\n  overflow-y: scroll;\r\n  /* Add a vertical scrollbar */\r\n  overflow-x: hidden;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.voidContainer {\r\n  width: 100%;\r\n  height: calc(100% / 3);\r\n  position: relative\r\n}\r\n\r\n.voidBorder {\r\n  height: 100%;\r\n  padding: 0.3vw;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.oscVoid {\r\n  border: 0.1vw solid #c2847b;\r\n  color: #c2847b;\r\n  background: #f8e7e6;\r\n  border-radius: 0.3vw;\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 2vw;\r\n}\r\n.oscVoid:hover {\r\n  border: 0.1vw solid #63443e;\r\n  color: #63443e;\r\n  border-radius: 0.3vw;\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 2vw;\r\n}\r\n\r\n/*  hide the scrollbar because cannot be resized in Chrome, Safari (breaks % layout)*/\r\n.scrollable::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n</style>","<template>\r\n  <!-- PLEASE DON'T GO CRAZY TRYING UNDERSTAND THIS DIVs LAYER STACKS XD, Look into OSC MIDDLE-->\r\n  <!-- IN \"osc_middle\" there are the movable circle slider crowns : : 'mod_slider' / 'volume_slider' -->\r\n  <div class=\"main_container\" @click.shift=\"dispose\">\r\n    <div class=\"type_button\" @click=\"nextOscType\" :style=\"this.type_button\">\r\n      <div class=\"innertext\" :style=\"this.type_text\">{{\r\n        osc_types[true] === \"\" ? 'std' : osc_types[this.oscTypeIndex]\r\n      }}\r\n      </div>\r\n    </div>\r\n    <!-- DO NOT TOUCH EVER AGAIN HTML STRUCTURE / CSS !!!!!!!!!!!!-->\r\n    <div class=\"osc_container\" :style=\"osc_container\">\r\n      <div class=\"osc\">\r\n        <div class=\"osc_back\">\r\n          <div class=\"mod_area\" :style=\"this.mod_area\"></div>\r\n          <div class=\"volume_area\" :style=\"this.volume_area\"></div>\r\n          <div class=\"pitch_slider\" :style=\"this.pitch_slider\"></div>\r\n        </div>\r\n        <div class=\"osc_middle\">\r\n\r\n          <div class=\"mod_slider\" ref=\"modulation\" :style=\"this.mod_slider\"></div>\r\n          <div class=\"volume_slider\" ref=\"volume\" :style=\"this.volume_slider\"></div>\r\n        </div>\r\n        <div class=\"osc_front\">\r\n          <div class=\"pitch_area\" :style=\"this.pitch_area\"></div>\r\n          <div class=\"pitch_hand\" ref=\"pitch\" :style=\"this.pitch_hand\"></div>\r\n          <div class=\"lineL\" :style=\"this.lineL\"></div>\r\n          <div class=\"lineU\" :style=\"this.lineU\"></div>\r\n          <div class=\"lineR\" :style=\"this.lineR\"></div>\r\n        </div>\r\n        <div class=\"draggable left\" @dragenter=\"handleDragEnter('mod')\" @dragleave=\"handleDragLeave('mod')\"\r\n          @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'mod')\" @mousedown=\"modulationDown\">\r\n          <div class=\"modDot\" :style=\"computedModulation('mod')\" @click.shift.stop=\"unlinkMod('mod')\"\r\n            v-text=\"computedModText('mod')\"></div>\r\n        </div>\r\n        <div class=\"draggable right\" @dragenter=\"handleDragEnter('vol')\" @dragleave=\"handleDragLeave('vol')\"\r\n          @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'vol')\" @mousedown=\"volumeDown\">\r\n          <div class=\"modDot\" :style=\"computedModulation('vol')\" @click.shift.stop=\"unlinkMod('vol')\"\r\n            v-text=\"computedModText('vol')\"></div>\r\n        </div>\r\n        <div class=\"draggable low\" @dragenter=\"handleDragEnter('pitch')\" @dragleave=\"handleDragLeave('pitch')\"\r\n          @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'pitch')\" @mousedown=\"pitchDown\">\r\n          <div class=\"modDot\" :style=\"computedModulation('pitch')\" @click.shift.stop=\"unlinkMod('pitch')\"\r\n            v-text=\"computedModText('pitch')\"></div>\r\n        </div>\r\n        <div class=\"osc_wave\" @click=\"nextWaveform\" :style=\"this.osc_wave\">\r\n          <img v-if=\"this.oscWaveIndex === 0\" src=\"@/icons/sine.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.oscWaveIndex === 1\" src=\"@/icons/triangle.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.oscWaveIndex === 2\" src=\"@/icons/saw.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.oscWaveIndex === 3\" src=\"@/icons/square.svg\" alt=\"\" draggable=\"false\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"chain_buttons\" :style=\"chain_buttons\">\r\n      <div></div>\r\n      <div class=\"button_1\" :style=\"button_1\" @click=\"this.onChainclick(0)\"></div>\r\n      <div class=\"button_2\" :style=\"button_2\" @click=\"this.onChainclick(1)\"></div>\r\n      <div class=\"button_3\" :style=\"button_3\" @click=\"this.onChainclick(2)\"></div>\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport SineIcon from \"vue-material-design-icons/SineWave\";\r\nimport SquareIcon from \"vue-material-design-icons/SquareWave\";\r\nimport TriangleIcon from \"vue-material-design-icons/TriangleWave\";\r\nimport SawtoothIcon from \"vue-material-design-icons/SawtoothWave\";\r\nimport {gainToDb} from \"tone\";\r\nimport MyPolySynth from \"./MyPolySynth.js\";\r\n\r\nconst wave_types = [\"sine\", \"triangle\", \"sawtooth\", \"square\"];\r\nconst osc_types = [\"\", \"fm\", \"am\", \"fat\"];\r\n\r\nexport default {\r\n  components: {\r\n    SineIcon,\r\n    SquareIcon,\r\n    TriangleIcon,\r\n    SawtoothIcon,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      // todo: UPDATE ALL COLOR DEPENDING ON THIS:\r\n      color: {\r\n        vol: this.colors.pink,\r\n        mod: this.colors.azure,\r\n        pitch: this.colors.green\r\n      },\r\n\r\n\r\n      // waveform_btn_style: osc_background_colors[0], todo: colors?\r\n      osc_types: [\"std\", \"fm\", \"am\", \"fat\"],\r\n      volume: 0.5,\r\n      modulation: 1,\r\n      pitch: 0,\r\n      pan: 0,\r\n      attack: 0.01,\r\n      decay: 0.1,\r\n      sustain: 1,\r\n      release: 0.2,\r\n      maxPitch: 24,\r\n      minPitch: -24,\r\n      partials: \"\",\r\n      oscWaveIndex: 0, // wave currently selected from  ['sine','triangle', ...]\r\n      oscTypeIndex: 0, // type of osc selected from ['std', 'fm', ...];\r\n      waveform_btn_style: \"lightblue\",\r\n      wave_icon_size: 32,\r\n      is_modulationDown: false,\r\n      is_volumeDown: false,\r\n      is_pitchDown: false,\r\n      isFilterChainRouteActive: [true, false, false],\r\n      modulators: {\r\n        vol: null,\r\n        mod: null,\r\n        pitch: null\r\n      },\r\n    };\r\n  },\r\n  props: [\"id\"],\r\n\r\n  mounted() {\r\n    document.addEventListener(\"mousemove\", this.onMouseMove);\r\n    document.addEventListener(\"mouseup\", this.onMouseUp);\r\n    window.addEventListener(\"resize\", this.resizeGraphics);\r\n\r\n    // resize graphics\r\n    this.resizeGraphics();\r\n    this.gainNode = new Tone.Gain();\r\n    //console.log(this.polyphonyVoices)\r\n    this.synth = new MyPolySynth(this.gainNode, this.polyphonyVoices);\r\n    this.synth.setParameters({ volume: gainToDb(1 - this.volume) });\r\n\r\n    this.synths.list.push(this.synth)\r\n    //console.log(this.synths.list)\r\n    // we need to init connection to first filter chain\r\n    // in the first osc case we need to make sure we connect after the chain is created , so we handle that with events\r\n    // emitted from the filter chain - in all other cases we can just normally connect to the chain\r\n    if (this.id > 1) {\r\n      this.initConnections()\r\n    }\r\n    //communicate to parent that a new osc has been created (to update volEnvelope from ModHost)\r\n    this.$emit(\"newOsc\")\r\n\r\n  },\r\n\r\n  computed: {\r\n\r\n    osc_container() {\r\n      return {\r\n        background: '#f8e7e6'\r\n      }\r\n    },\r\n    /*------------ TYPE BUTTON ------------*/\r\n    type_button() {\r\n      return {\r\n        fontSize: '.5vw',\r\n        background: this.colors.pink.glow\r\n      }\r\n    },\r\n    type_text() {\r\n      return {\r\n        color: this.colors.gray.dark\r\n      }\r\n    },\r\n    /*--------------- OSC -----------------*/\r\n    volume_area() {\r\n      return {\r\n        background: this.colors.pink.dark\r\n      }\r\n    },\r\n    mod_area() {\r\n      return {\r\n        background: this.colors.azure.medium\r\n      }\r\n    },\r\n    pitch_area() {\r\n      return {\r\n        background: this.colors.green.glow\r\n      }\r\n    },\r\n    mod_slider() {\r\n      return {\r\n        transform: \"rotate(-\" + this.modulation * 111 + \"deg)\",\r\n        background: 'white',\r\n        opacity: '60%'\r\n      }\r\n    },\r\n    volume_slider() {\r\n      return {\r\n        backgroundColor: 'white',\r\n        opacity: '60%',\r\n        transform: \"rotate(\" + this.volume * 112 + \"deg)\",\r\n      }\r\n    },\r\n    pitch_slider() {\r\n      return {\r\n        background: this.colors.green.medium\r\n      }\r\n    },\r\n    pitch_hand() {\r\n      return {\r\n        transform: \"rotate(\" + (this.pitch * 50) / this.maxPitch + \"deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    osc_wave() {\r\n      return {\r\n        border: '.1vw solid ' + this.colors.green.dark,\r\n        background: this.colors.green.glow\r\n      }\r\n    },\r\n    lineL() {\r\n      return {\r\n        transform: \"rotate(66deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    lineU() {\r\n      return {\r\n        transform: \"rotate(-66deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    lineR() {\r\n      return {\r\n        transform: \"rotate(180deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    /*------------ CHAIN BUTTONS ------------*/\r\n    chain_buttons() {\r\n      return {\r\n        background: this.colors.pink.glow\r\n      }\r\n    },\r\n    button_1() {\r\n      let color = ''\r\n      if (this.isFilterChainRouteActive[0])\r\n        color = this.colors.purple.light\r\n      else {\r\n        color = this.colors.pink.glow\r\n      }\r\n      return {\r\n        background: color, \r\n        border: '.1vw solid ' + this.colors.gray.dark \r\n      }\r\n    },\r\n    button_2() {\r\n      let color = ''\r\n      if (this.isFilterChainRouteActive[1])\r\n        color = this.colors.green.medium\r\n      else {\r\n        color = this.colors.pink.glow\r\n      }\r\n      return {\r\n        background: color, \r\n        border: '.1vw solid ' + this.colors.gray.dark \r\n      }\r\n    },\r\n    button_3() {\r\n      let color = ''\r\n      if (this.isFilterChainRouteActive[2])\r\n        color = this.colors.pink.light\r\n      else {\r\n        color = this.colors.pink.glow\r\n      }\r\n      return {\r\n        background: color, \r\n        border: '.1vw solid ' + this.colors.gray.dark \r\n      }\r\n    },\r\n  },\r\n\r\n  methods: {\r\n\r\n    //--------DRAG AND DROP METHODS--------\r\n    handleDrop(event, target) {\r\n      if (this.modulators[target] === null) {\r\n        let data = JSON.parse(event.dataTransfer.getData(\"data\"));\r\n        //if i'm not trying to link an evelope to volume\r\n        if (!(target === 'vol' && data.type === 'envelope')) {\r\n          //console.log(\"Dropping on \" + target)\r\n          //console.log(data)\r\n          this.modulators[target] = {color: data.color, id: data.id, type: data.type}\r\n          document.dispatchEvent(new CustomEvent(\"link\", {\r\n                detail: {\r\n                  object: this.synth,\r\n                  target: target,\r\n                  color: this.color[target][\"medium\"],\r\n                  modulator: {type: this.modulators[target].type, id: this.modulators[target].id}\r\n                }\r\n              }\r\n          ))\r\n        }\r\n      }\r\n\r\n    },\r\n    handleDragEnter(target) {\r\n      //todo: highlight object when dragging on it\r\n      //console.log(\"Dragging over \" + target)\r\n    },\r\n    handleDragLeave(target) {\r\n      //console.log(\"Dragging out of \" + target)\r\n    },\r\n    unlinkMod(target) {\r\n      //todo: CALL BACK ENVELOPS TO UNLINK\r\n      document.dispatchEvent(new CustomEvent(\"unLink\", {\r\n            detail: {\r\n              object: this.synth,\r\n              target: target,\r\n              modulator: {type: this.modulators[target].type, id: this.modulators[target].id}\r\n            }\r\n          }\r\n      ))\r\n\r\n      //re-hide link dot\r\n      this.modulators[target] = null;\r\n\r\n    },\r\n    //--------DRAG AND DROP STYLING--------\r\n    computedModulation(target) {\r\n      switch (target) {\r\n        case \"vol\":\r\n          if (this.modulators[target]) {\r\n            return {\r\n              width: \"1vw\",\r\n              height: \"1vw\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: this.modulators[target].color,\r\n              position: \"absolute\",\r\n              right: \"0%\",\r\n            };\r\n          } else {\r\n            return {\r\n              display: \"none\",\r\n              width: \"0%\",\r\n              height: \"0%\",\r\n            }\r\n          }\r\n\r\n        case \"mod\":\r\n          if (this.modulators[target]) {\r\n            return {\r\n              width: \"1vw\",\r\n              height: \"1vw\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: this.modulators[target].color,\r\n              position: \"absolute\",\r\n            };\r\n          } else {\r\n            return {\r\n              display: \"none\",\r\n              width: \"0%\",\r\n              height: \"0%\",\r\n            }\r\n          }\r\n        case \"pitch\":\r\n          if (this.modulators[target]) {\r\n            return {\r\n              width: \"1vw\",\r\n              height: \"1vw\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: this.modulators[target].color,\r\n              position: \"absolute\",\r\n              left: \"0%\",\r\n              bottom: \"0%\"\r\n            };\r\n          } else {\r\n            return {\r\n              display: \"none\",\r\n              width: \"0%\",\r\n              height: \"0%\",\r\n            }\r\n          }\r\n      }\r\n    },\r\n    computedModText(target) {\r\n      if (this.modulators[target]) {\r\n        return this.modulators[target].id\r\n      } else return \"\";\r\n    },\r\n\r\n\r\n\r\n    //-----------------\r\n    dispose() {\r\n      //unlink linked modulators\r\n      for (let key in this.modulators) {\r\n        if (this.modulators[key])\r\n          this.unlinkMod(key)\r\n      }\r\n\r\n      this.$emit(\"disposed\", this.id)\r\n      this.synth.disconnectDispose()\r\n      this.synths.list.splice(this.synths.list.indexOf(this.synth), 1)\r\n\r\n\r\n      //console.log(\"Synth to remove is at index: \" + this.synths.list.indexOf(this.synth))\r\n      //console.log(\"list of synths remaining:\")\r\n      //console.log(this.synths.list)\r\n    },\r\n    initConnections() {\r\n      this.gainNode.connect(this.filterChains[0][0].getToneFilter())\r\n    },\r\n\r\n    // ----------- GRAPHIC HELPERS -----------\r\n    resizeGraphics() {\r\n      let width = document.body.clientWidth;\r\n      if (width >= 500) {\r\n        this.wave_icon_size = (32 * width) / 1500;\r\n      } else {\r\n        this.wave_icon_size = 0;\r\n      }\r\n    },\r\n\r\n    // ---------- USER EVENTS ---------------\r\n    // Audio routing changed clicking the dots that represent the filter chains\r\n    onChainclick(id) {\r\n      //console.log(\"chain click - id: \" + id);\r\n      try {\r\n        if (this.isFilterChainRouteActive[id]) {\r\n          /*\r\n          console.log(\r\n              \"disconnect from: \" +\r\n              this.filterChains[id][0] + \" \" + id\r\n          );\r\n          */\r\n          this.gainNode.disconnect(\r\n              this.filterChains[id][0].getToneFilter()\r\n          );\r\n        } else {\r\n          /*\r\n          console.log(\r\n            \"connect to: \" +\r\n            this.filterChains[id][0] + \" \" + id\r\n          );\r\n          */\r\n          this.gainNode.connect(\r\n              this.filterChains[id][0].getToneFilter()\r\n          );\r\n        }\r\n      } catch (e) {\r\n        console.log(\r\n          \"error: \" + e + \"\\nCHAIN CONNECTION TO OSC UNSUCCESSFUL. Can't connect to \" + this.filterChains[id][0]\r\n        );\r\n      }\r\n      this.isFilterChainRouteActive[id] = !this.isFilterChainRouteActive[id];\r\n    },\r\n\r\n    onMouseMove(event) {\r\n      if (this.is_volumeDown) {\r\n        // RIGHT FADER - volume\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving up\r\n          this.volume = Math.max(this.volume + event.movementY / 100, 0);\r\n        } else {\r\n          // Mouse is moving down\r\n          this.volume = Math.min(this.volume + event.movementY / 100, 1);\r\n        }\r\n        // -------------- modify here synth audio ----------------\r\n        // this.synth.volume.value = gainToDb(1 - this.volume);\r\n        this.synth.setParameters({ volume: gainToDb(1 - this.volume) });\r\n        //console.log(\"synth volume: \" + this.volume.toFixed(2) + \" dB\");\r\n      } else if (this.is_modulationDown) {\r\n        // LEFT FADER - modulation\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving down\r\n          this.modulation = Math.max(this.modulation + event.movementY / 100, 0);\r\n        } else {\r\n          // Mouse is moving up\r\n          this.modulation = Math.min(this.modulation + event.movementY / 100, 1);\r\n        }\r\n        // -------------- modify here synth audio ----------------\r\n        // (1- this.modulation) needed because the graphics return a value of 1 for the minimum and 0 for the max\r\n        this.synth.setParameters({modulation: 1 - this.modulation })\r\n        //console.log(\"modulation: \" + (1 -  this.modulation.toFixed(2)));\r\n      } else if (this.is_pitchDown) {\r\n        // BOTTOM FADER - pitch shift\r\n        if (event.movementX < 0) {\r\n          // Mouse is moving right\r\n          this.pitch = Math.min(this.pitch - Math.floor(event.movementX), this.maxPitch);\r\n        } else if (event.movementX > 0) {\r\n          // Mouse is moving left\r\n          this.pitch = Math.max(this.pitch - Math.floor(event.movementX), this.minPitch);\r\n        }\r\n        // ----------- modify here synth audio -------------\r\n        // todo: pitch max a dx e min a sx - meglio il contrario, secondo me - segue possibile ma brutto fix\r\n        // console.log(\"pitch shift: \" + this.pitch * -1)\r\n        // this.synth.set({detune: this.pitch * -100});\r\n        //console.log(\"pitch shift: \" + this.pitch);\r\n        this.synth.setParameters({ transpose: this.pitch });\r\n        // -------------------------------------------------\r\n      }\r\n    },\r\n    onMouseUp(event) {\r\n      if (this.is_modulationDown) this.is_modulationDown = false;\r\n      if (this.is_volumeDown) this.is_volumeDown = false;\r\n      if (this.is_pitchDown) this.is_pitchDown = false;\r\n    },\r\n\r\n    modulationDown(event) {\r\n      if (!this.is_modulationDown) this.is_modulationDown = true;\r\n    },\r\n    volumeDown(event) {\r\n      if (!this.is_volumeDown) this.is_volumeDown = true;\r\n    },\r\n    pitchDown(event) {\r\n      if (!this.is_pitchDown) this.is_pitchDown = true;\r\n    },\r\n\r\n    // ----------- AUDIO -----------\r\n    // Update osc waveform\r\n    nextOscType() {\r\n      // go circularly on along the list osc_types list\r\n      this.oscTypeIndex++;\r\n      if (this.oscTypeIndex >= osc_types.length) this.oscTypeIndex = 0;\r\n\r\n      this.synth.setParameters({ type: osc_types[this.oscTypeIndex] })\r\n\r\n      //console.log(\"osc type: \" + osc_types[this.oscTypeIndex]);\r\n    },\r\n\r\n    nextWaveform() {\r\n      // update selected wavetype changing the current index\r\n      this.oscWaveIndex++;\r\n      if (this.oscWaveIndex >= wave_types.length) this.oscWaveIndex = 0;\r\n\r\n      //console.log(wave_types[this.oscWaveIndex])\r\n      // set new waveform\r\n      this.synth.setParameters({ waveform: wave_types[this.oscWaveIndex] })\r\n    },\r\n\r\n    // set routing\r\n    connect(route) {\r\n      this.synth.connect(route);\r\n    },\r\n  },\r\n\r\n  unmounted() {\r\n    // remove event listeners\r\n    window.removeEventListener(\"resize\", this.resizeGraphics);\r\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\r\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modDot {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 0.8vw;\r\n  text-align: center;\r\n  box-sizing: border-box;\r\n  border: .06vw solid black;\r\n}\r\n\r\n.main_container {\r\n  border: .1vw solid #c2847b ;\r\n  box-sizing: border-box;\r\n  height: calc(100% / 3);\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.main_container:hover {\r\n  border: .1vw solid #63443e;\r\n  box-sizing: border-box;\r\n  height: calc(100% / 3);\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.osc_container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  flex: 4;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n/*---------- MOD TYPE BUTTON ----------*/\r\n.type_button {\r\n  border: .1vw solid #c2847b;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex: 1;\r\n  height: 100%;\r\n}\r\n.type_button:hover {\r\n  border: .1vw solid #63443e;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex: 1;\r\n  height: 100%;\r\n}\r\n\r\n.type_button .innertext {\r\n  font-size: .8vw;\r\n  writing-mode: vertical-rl;\r\n  text-orientation: upright;\r\n  text-transform: uppercase;\r\n}\r\n\r\n/*--------------- OSC -----------------*/\r\n.osc {\r\n  width: 90%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  display: flex;\r\n  position: relative;\r\n  aspect-ratio: 1/1;\r\n}\r\n\r\n.osc_back {\r\n  margin: auto;\r\n  width: 100%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 1;\r\n}\r\n\r\n.pitch_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 100%, 100% 100%, 100% 72%, 50% 50%, 0% 72%, 0% 100%);\r\n  z-index: 27;\r\n}\r\n\r\n.mod_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 0% 0%, 0% 100%, 50% 50%);\r\n  z-index: 2;\r\n}\r\n\r\n.volume_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 100% 0%, 100% 100%, 50% 50%);\r\n  z-index: 3;\r\n}\r\n\r\n.osc_middle {\r\n  margin: auto;\r\n  height: 95%;\r\n  top: 2.5%;\r\n  left: 2.5%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 25;\r\n}\r\n\r\n.mod_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 0% 0%, 0% 100%, 50% 50%);\r\n  z-index: 27;\r\n}\r\n\r\n.volume_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 100% 0%, 100% 100%, 50% 50%);\r\n  z-index: 26;\r\n}\r\n\r\n.osc_front {\r\n  margin: auto;\r\n  height: 96%;\r\n  top: 2%;\r\n  left: 2%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 50;\r\n}\r\n\r\n.pitch_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 100%,\r\n      100% 100%,\r\n      100% 72%,\r\n      50% 50%,\r\n      0% 72%,\r\n      0% 100%,\r\n      50% 100%);\r\n  z-index: 10;\r\n}\r\n\r\n.pitch_hand {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 40%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n.lineL {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 100%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n\r\n.lineU {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 100%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n.lineR {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 100%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n\r\n\r\n.osc_wave {\r\n  display: flex;\r\n  position: relative;\r\n  aspect-ratio: 1;\r\n  width: 45%;\r\n  border-radius: 50%;\r\n  left: 0;\r\n  top: 0;\r\n  z-index: 101;\r\n}\r\n\r\n.osc_wave img {\r\n  position: relative;\r\n  aspect-ratio: 1/1;\r\n  width: 100%;\r\n  left: 0;\r\n  top: 0;\r\n  clip-path: circle(20%);\r\n  z-index: 102;\r\n}\r\n\r\n.draggable {\r\n  position: absolute;\r\n  z-index: 75;\r\n}\r\n\r\n.left {\r\n  width: 50%;\r\n  height: 70%;\r\n  left: 0;\r\n  bottom: 30%;\r\n  background-color: transparent;\r\n}\r\n\r\n.right {\r\n  width: 50%;\r\n  height: 70%;\r\n  background-color: transparent;\r\n  left: 50%;\r\n  bottom: 30%\r\n}\r\n\r\n.low {\r\n  width: 100%;\r\n  height: 30%;\r\n  top: 70%;\r\n  background-color: transparent;\r\n}\r\n\r\n/*------------ CHAIN BUTTONS ------------*/\r\n.chain_buttons {\r\n  border: .1vw solid #c2847b;\r\n  flex: .5;\r\n  display: grid;\r\n  grid-template-rows: .3fr 1fr 1fr 1fr .3fr;\r\n  height: 100%;\r\n  align-items: center;\r\n  padding-left: 3%;\r\n  padding-right: 3%;\r\n}\r\n.chain_buttons:hover {\r\n  border: .1vw solid #63443e;\r\n  flex: .5;\r\n  display: grid;\r\n  grid-template-rows: .3fr 1fr 1fr 1fr .3fr;\r\n  height: 100%;\r\n  align-items: center;\r\n  padding-left: 3%;\r\n  padding-right: 3%;\r\n}\r\n\r\n\r\n.button_1,\r\n.button_2,\r\n.button_3 {\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  border: .1vw solid black;\r\n  border-radius: 50%;\r\n}\r\n</style>","import {Synth, Envelope, Gain, Meter, Frequency, LFO} from 'tone'\r\nimport {nextTick} from 'vue';\r\nimport * as Tone from 'tone'\r\nimport { toRaw} from 'vue';\r\n\r\nconst vol_damp_factor = 0.5;\r\n\r\nexport default class MyPolySynth {\r\n    constructor(destination = null, nVoices = 16) {\r\n\r\n        this.destination = destination;\r\n\r\n\r\n        //data of all modulators that could potentially be linked to the parameters of the synth\r\n        this.modulatorsData = {\r\n            envelope: {\r\n                vol: {\r\n                    amount: 1,\r\n                    parameters: {\r\n                        attack: 1,\r\n                        decay: 0.3,\r\n                        sustain: 0.8,\r\n                        release: 1\r\n                    }\r\n                },\r\n                mod: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        attack: 0.05,\r\n                        decay: 0.1,\r\n                        sustain: 1,\r\n                        release: 0.2\r\n                    }\r\n                },\r\n                pitch: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        attack: 0.05,\r\n                        decay: 0.1,\r\n                        sustain: 1,\r\n                        release: 0.2\r\n                    }\r\n                },\r\n            },\r\n            lfo: {\r\n                vol: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        waveform: \"sine\",\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n                mod: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        waveform: \"sine\",\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n                pitch: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        waveform: \"sine\",\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n            }\r\n        }\r\n\r\n        //preset with which all voices of polyphony will be created\r\n        this.synthPreset = {\r\n            type: \"\",\r\n            waveform: \"sine\",\r\n            vol: -12,\r\n            transpose: 0,\r\n            mod: 0,\r\n            partials: \"\",\r\n            pan: \"\"\r\n        }\r\n\r\n\r\n        //modulation effect\r\n        //this.crusher = new Tone.BitCrusher(3)\r\n\r\n\r\n        this.dampNode = new Gain(vol_damp_factor);\r\n        //all polyphony voices are connected here\r\n\r\n        //console.log(Tone.dbToGain(this.synthPreset.vol))\r\n        this.gainNode = new Gain(1);\r\n\r\n        //list of polyphony voices\r\n        this.allVoices = [] //always holds reference to all voices\r\n        this.freeVoices = []    //holds reference to free voices\r\n        this.busyVoices = {}    //holds reference to busy voices, key=note, value=voice\r\n        this.nVoices = nVoices  //used to initialize, taken from globalProperties\r\n        this.lastNotes = Array(this.nVoices)  //stores last nVoices played\r\n\r\n        //INIT VOICES\r\n        this.initVoices()\r\n\r\n\r\n        // connect gainNode to destination\r\n            this.gainNode.connect(this.dampNode)\r\n            //this.crusher.connect(this.dampNode)\r\n            this.dampNode.connect(this.destination)\r\n    }\r\n\r\n    initVoices() {\r\n        //for each voice\r\n\r\n        for (let index = 0; index < this.nVoices; index++) {\r\n\r\n            //initializing empty modulators matrix\r\n            let modulators = {\r\n                envelope: {\r\n                    vol: {amount: 1, signal: null, scale: null},\r\n                    mod: {amount: 0, signal: null, scale: null},\r\n                    pitch: {amount: 0, signal: null, scale: null},\r\n                },\r\n                lfo: {\r\n                    vol: {amount: 0, signal: null, scale: null},\r\n                    mod: {amount: 0, signal: null, scale: null},\r\n                    pitch: {amount: 0, signal: null, scale: null},\r\n                }\r\n            }\r\n\r\n            let lfoGain = new Gain()\r\n            lfoGain.connect(this.gainNode) //USED TO CONNECT LFO TO VOICE VOLUME\r\n\r\n\r\n            //creating gain and synth\r\n            let gain = new Gain(1).connect(lfoGain)\r\n            //synth is created and initialized with preset parameters\r\n            let synth = this.createSynth()\r\n            synth.oscillator.disconnect()\r\n            synth.oscillator.connect(gain)\r\n\r\n            //disconnect and dispose synth inner envelope\r\n            synth.envelope.disconnect()\r\n            synth.envelope.dispose()\r\n\r\n            //thanks to noiseAdsrGain we can lower to zero the volume of the synth and still hear the noise, bypassing the synth volume\r\n            let noiseAdsrGain = new Gain()  //used to have the same main adsr of synth on the noise too\r\n            let noiseGain = new Gain()\r\n            let noise = new Tone.Noise(\"pink\")\r\n            noise.connect(noiseGain)\r\n            noiseGain.connect(noiseAdsrGain)\r\n            noiseAdsrGain.connect(this.dampNode)\r\n\r\n\r\n\r\n\r\n            let voice = {synth: synth, gain: gain, lfoGain: lfoGain, modulators: modulators, noise: noise, noiseGain: noiseGain, noiseAdsrGain: noiseAdsrGain}\r\n\r\n            //creating and connecting every modulator\r\n            for (let type in modulators) {\r\n                for (let target in modulators[type]) {\r\n                    let tempMod = this.createModulator(type)\r\n                    modulators[type][target].signal = tempMod\r\n                    modulators[type][target].scale = this.createScale(target)\r\n                    this.connectModulator(modulators[type][target], type, target, voice)\r\n                }\r\n            }\r\n            //pushing voice into freeVoices array\r\n            this.freeVoices.push(voice)\r\n            this.allVoices.push(voice)\r\n        }\r\n\r\n        this.initialized = false\r\n        //setting all parameters of modulators\r\n        this.updateModulators();\r\n        this.initialized = true\r\n\r\n    }\r\n\r\n    playNote(note, velocity) {\r\n        //console.log(this.freeVoices)\r\n        if (this.initialized) {\r\n\r\n            this.lastNotes.push(note);\r\n            if (this.lastNotes.length > this.nVoices) {\r\n                this.lastNote = this.lastNotes.shift();\r\n            }\r\n\r\n            //removing first free voice from array\r\n            let voice = this.freeVoices.shift()\r\n            if (!voice) {\r\n                //console.log(\"NEW NOTE OVERWRITE: \" + this.lastNote)\r\n                voice = this.busyVoices[this.lastNote]\r\n                delete this.busyVoices[this.lastNote]\r\n            }\r\n            this.busyVoices[note] = voice\r\n\r\n            //trigger attack in each modulator\r\n            for (let type in voice.modulators) {\r\n                for (let target in voice.modulators[type]) {\r\n                    if (voice.modulators[type][target].amount>0 ) {\r\n                    switch (type) {\r\n                        case \"envelope\":\r\n                            //console.log(\"TRIGGERING ATTACK IN \"+type+\" connected to \"+target)\r\n                            //console.log(voice.modulators[type][target].signal)\r\n                            toRaw(voice.modulators[type][target].signal).cancel(Tone.now())\r\n                            toRaw(voice.modulators[type][target].signal).triggerAttack(Tone.now())\r\n                            break;\r\n                        case \"lfo\":\r\n                            toRaw(voice.modulators[type][target]).signal.stop()\r\n                            toRaw(voice.modulators[type][target]).signal.start()\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    }\r\n                }\r\n            }\r\n            voice.synth.oscillator.stop(Tone.now())\r\n            voice.synth.envelope.cancel(Tone.now())\r\n            //trigger attack in synth and noise\r\n            voice.noise.start()\r\n            voice.synth.triggerAttack(note, Tone.now(), velocity / 128)\r\n        }\r\n    }\r\n\r\n    stopNote(note) {\r\n        if (this.initialized) {\r\n            if (this.busyVoices[note]) {\r\n                let voice = this.busyVoices[note]\r\n                delete this.busyVoices[note]\r\n                this.freeVoices.push(voice)\r\n\r\n                //triggerRelease on all envelopes\r\n                for (let type in voice.modulators) {\r\n                    for (let target in voice.modulators[type]) {\r\n                        if (voice.modulators[type][target].signal) {\r\n                            switch (type) {\r\n                                case \"envelope\":\r\n                                    //console.log(\"Triggering release of \"+type+\" with target \"+target)\r\n                                    voice.modulators[type][target].signal.triggerRelease(Tone.now())\r\n                                    break;\r\n                                case \"lfo\":\r\n                                    //lfos are never stopped, just diminished in amount if needed\r\n                                    //fvoice.modulators[type][target].signal.stop()\r\n                                    break;\r\n                                default:\r\n                                    break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    createSynth() {\r\n        let synth = new Synth()\r\n        //Setting parameters\r\n        nextTick(() => {\r\n            synth.set({\r\n                \"volume\": this.synthPreset.vol,\r\n                \"detune\": this.synthPreset.transpose * 100,\r\n                \"oscillator\": {\r\n                    \"type\": this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials\r\n                }\r\n            })\r\n        })\r\n        //console.log(this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials)\r\n\r\n        return synth\r\n    }\r\n\r\n    createModulator(type) {\r\n        //console.log(\"creating modulator of type: \"+type)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                return new Envelope\r\n            case \"lfo\":\r\n                return new LFO\r\n            default:\r\n                console.log(\"Error creating modulator\")\r\n                return null\r\n        }\r\n    }\r\n\r\n    createScale(target) {\r\n        switch (target) {\r\n            case \"vol\":\r\n                return new Tone.Scale(0, 1);\r\n            case \"mod\":\r\n                return new Tone.Scale(0, 1);\r\n            case \"pitch\":\r\n                return new Tone.Scale(0, 1);\r\n            case \"pan\":\r\n                return new Tone.Scale(0, 1);\r\n            default:\r\n                console.log(\"Error creating scale for target \"+target)\r\n                return null\r\n        }\r\n    }\r\n\r\n    updateModulators() {\r\n        this.allVoices.forEach(voice => {\r\n                for (let type in voice.modulators) {\r\n                    for (let target in voice.modulators[type]) {\r\n                        //update amount from preset\r\n                        voice.modulators[type][target].amount = this.modulatorsData[type][target].amount\r\n                        if (!toRaw(voice.modulators[type][target].signal)) {\r\n                            //IF IT'S STILL NOT CREATED\r\n                            //console.log(\"RECREATING\")\r\n                            voice.modulators[type][target].signal = this.createModulator(type)\r\n                            voice.modulators[type][target].scale = this.createScale(target)\r\n                            this.connectModulator(toRaw(voice.modulators[type][target]), type, target, toRaw(voice))\r\n                            //console.log(voice.modulators[type][target])\r\n                        }\r\n                        this.scaleSetter(voice.modulators[type][target], target)\r\n                        this.modulatorSetter(toRaw(voice.modulators[type][target].signal), type, this.modulatorsData[type][target].parameters)\r\n                    }\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    updateSynths() {\r\n        this.allVoices.forEach(voice => {\r\n            voice.synth.set({\r\n                \"detune\": this.synthPreset.transpose * 100,\r\n                \"oscillator\": {\r\n                    \"type\": this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials\r\n                }\r\n            })\r\n            //this.gainNode.set({gain: Tone.dbToGain(this.synthPreset.vol)})\r\n            voice.noiseGain.set({\r\n                gain: this.synthPreset.mod\r\n            })\r\n        });\r\n    }\r\n\r\n    scaleSetter(modulator, target) {\r\n        switch (target) {\r\n            case \"vol\":\r\n                //ENVELOPE FOR VOL SHOULD HAVE SCALE TOO TO CENTER AROUND SELECTED FREQUENCY\r\n                toRaw(modulator.scale).set({\r\n                    min: (Math.max(Tone.dbToGain(this.synthPreset.vol) - modulator.amount,0)),\r\n                    max: (Math.min(Tone.dbToGain(this.synthPreset.vol) + modulator.amount,1)),\r\n                })\r\n\r\n\r\n                break;\r\n            case \"mod\":\r\n                toRaw(modulator.scale).set({\r\n                    min: (Math.max(this.synthPreset.mod - modulator.amount,0)),\r\n                    max: (Math.min(this.synthPreset.mod + modulator.amount,1)),\r\n                })\r\n                break;\r\n            case \"pitch\":\r\n                //TO-DO\r\n                //console.log(\"CHANGING SCALE \")\r\n                //console.log(modulator.scale)\r\n                toRaw(modulator.scale).set({\r\n                    min: ((this.synthPreset.transpose - 24 * modulator.amount) * 100),\r\n                    max: ((this.synthPreset.transpose + 24 * modulator.amount) * 100)\r\n                })\r\n                break;\r\n            case \"pan\":\r\n                //TO-DO\r\n                break;\r\n\r\n            default:\r\n                console.log(\"invalid target to connect modulator to\")\r\n                break;\r\n        }\r\n    }\r\n\r\n    modulatorSetter(modulator, type, parameters) {\r\n        if(!toRaw(parameters).waveform) toRaw(parameters).waveform = modulator.type\r\n\r\n        switch (type) {\r\n            case \"envelope\":\r\n                modulator.set({\r\n                    \"attack\": parameters.attack,\r\n                    \"decay\": parameters.decay,\r\n                    \"sustain\": parameters.sustain,\r\n                    \"release\": parameters.release + 0.001,\r\n                })\r\n                //console.log(\"JUST SET PARAMETERS OF\")\r\n                //console.log(modulator)\r\n                //console.log(\"WITH\")\r\n                //console.log(parameters)\r\n                break;\r\n            case \"lfo\":\r\n                //TO-DO\r\n                //console.log(\"PARAMETERS\")\r\n                //console.log(parameters)\r\n                modulator.set({//\r\n                    \"type\": toRaw(parameters).waveform,\r\n                    \"frequency\": toRaw(parameters).frequency\r\n                })\r\n                break;\r\n            default:\r\n                console.log(\"Error setting modulator parameters, invalid args\")\r\n                break;\r\n        }\r\n        // console.log(\"modulator.type: \", modulator.type)\r\n    }\r\n\r\n//have to pass, the modulator (tone), the type (lfo or envelope), the gain linked to the voice, the voice and the target\r\n    connectModulator(modulator, type, target, voice) {\r\n        //console.log(\"connecting\")\r\n        //console.log(modulator)\r\n        //console.log(\"to voice: \")\r\n        //console.log(voice)\r\n        //console.log(\"to target: \" + target)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                switch (target) {\r\n                    case \"vol\":\r\n                        modulator.signal.chain(modulator.scale, voice.gain.gain)\r\n                        //modulator.signal.connect(voice.gain.gain)   //SET MAIN ADSR TO SYNTH GAIN\r\n                        modulator.signal.connect(voice.noiseAdsrGain.gain)      //SET MAIN ADSR TO NOISE GAIN\r\n                        break;\r\n                    case \"mod\":\r\n                        modulator.signal.chain(modulator.scale, voice.noiseGain.gain)\r\n                        break;\r\n                    case \"pitch\":\r\n                        //TO-DO\r\n                        this.scaleSetter(modulator, target)\r\n                        modulator.signal.chain(modulator.scale, voice.synth.detune)\r\n                        break;\r\n                    case \"pan\":\r\n                        //TO-DO\r\n                        break;\r\n                    default:\r\n                        console.log(\"invalid target to connect modulator to\")\r\n                        break;\r\n                }\r\n\r\n                break;\r\n\r\n            case \"lfo\":\r\n                switch (target) {\r\n                    case \"vol\":\r\n                        this.scaleSetter(modulator, target)\r\n                        modulator.signal.chain(modulator.scale, voice.lfoGain.gain)\r\n                        break;\r\n                    case \"mod\":\r\n                        modulator.signal.chain(modulator.scale, voice.noiseGain.gain)\r\n                        break;\r\n                    case \"pitch\":\r\n                        //TO-DO\r\n                        this.scaleSetter(modulator, target)\r\n                        modulator.signal.chain(modulator.scale, voice.synth.detune)\r\n                        break;\r\n                    case \"pan\":\r\n                        //TO-DO\r\n                        break;\r\n                    default:\r\n                        console.log(\"invalid target to connect modulator to\")\r\n                        break;\r\n                }\r\n\r\n                break;\r\n\r\n            default:\r\n                console.log(\"invalid modulator type\")\r\n                break;\r\n        }\r\n    }\r\n\r\n    // setters\r\n    setModulatorParameters(type, target, parameters) {\r\n        //console.log(\"myPolysynth - setModulatorParameters\")\r\n        if (this.initialized) {\r\n            this.modulatorsData[type][target].parameters = parameters\r\n            // console.log(\"New modulatorsData for type \"+type+\" to target \"+target)\r\n            // console.log(this.modulatorsData);\r\n            // console.log(\"params: \" , this.modulatorsData[type][target].parameters,  parameters)\r\n\r\n            this.updateModulators()\r\n            //console.log(\"SETTING\")\r\n            //console.log(this.modulatorsData)\r\n        }\r\n    }\r\n\r\n    setModulatorAmount(type, target, amount) {\r\n        if (this.initialized) {\r\n            this.modulatorsData[type][target].amount = amount\r\n            //console.log(\"setting modulator amount\")\r\n            this.updateModulators()\r\n        }\r\n    }\r\n\r\n    //TO RENAME IN SET SYNTH PARAMETERS\r\n    setParameters({\r\n                      volume = this.synthPreset.vol,\r\n                      modulation = this.synthPreset.mod,\r\n                      transpose = this.synthPreset.transpose,\r\n                      pan = this.synthPreset.pan,\r\n                      type = this.synthPreset.type,\r\n                      waveform = this.synthPreset.waveform\r\n                  }) {\r\n        if (this.initialized) {\r\n            this.synthPreset.vol = volume;\r\n            this.synthPreset.mod = modulation;\r\n            this.synthPreset.transpose = transpose;\r\n            this.synthPreset.pan = pan;\r\n            this.synthPreset.type = type;\r\n            this.synthPreset.waveform = waveform;\r\n            //console.log(this.synthPreset.waveform)\r\n\r\n            this.updateSynths()\r\n            this.updateModulators()\r\n        } else {\r\n            console.log(\"Polysynth not initialized\")\r\n        }\r\n    }\r\n\r\n// connect each voice to the new routing\r\n    connect(route) {\r\n        this.gainNode.connect(route)\r\n    }\r\n\r\n    disconnectDispose() {\r\n        //for each voice\r\n        this.allVoices.forEach(voice => {\r\n            //Disconnect and dispose synth\r\n            voice = toRaw(voice)\r\n            voice.synth.disconnect()\r\n            voice.synth.dispose()\r\n            //Disconnect and dispose gain\r\n            voice.gain.disconnect()\r\n            voice.gain.dispose()\r\n            //Disconnect and dispose modulators\r\n            for (let type in voice.modulators) {\r\n                for (let target in voice.modulators[type]) {\r\n                    if (voice.modulators[type][target].signal) {\r\n                        voice.modulators[type][target].signal.disconnect()\r\n                        voice.modulators[type][target].signal.dispose()\r\n                        voice.modulators[type][target].scale.disconnect()\r\n                        voice.modulators[type][target].scale.dispose()\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        //disconnect and dispose main gainNode\r\n        this.gainNode.disconnect()\r\n        this.gainNode.dispose()\r\n\r\n        //console.log(\"MyPolySynth completely disconnected and disposed\")\r\n    }\r\n}","import { render } from \"./Osc.vue?vue&type=template&id=53f63126&scoped=true\"\nimport script from \"./Osc.vue?vue&type=script&lang=js\"\nexport * from \"./Osc.vue?vue&type=script&lang=js\"\n\nimport \"./Osc.vue?vue&type=style&index=0&id=53f63126&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-53f63126\"]])\n\nexport default __exports__","import { render } from \"./OscHost.vue?vue&type=template&id=419aee25&scoped=true\"\nimport script from \"./OscHost.vue?vue&type=script&lang=js\"\nexport * from \"./OscHost.vue?vue&type=script&lang=js\"\n\nimport \"./OscHost.vue?vue&type=style&index=0&id=419aee25&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-419aee25\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"filterHost\" :style=\"this.filterHost\">\r\n    <template v-for=\"(chain) in this.chainList\" :key=\"chain.id\" :item=\"chain\">\r\n        <FilterChain :ref=\"chain.ref\" :id=\"chain.id\" :color=\"chain.color\" @filterInitialized=\"initConnections()\"/>\r\n       <!-- todo: remove <FilterChain :ref=\"chain.ref\" :id=\"chain.id\" :color=\"chain.color\" @filterInitialized=\"handleFilterInitialized\" /> -->\r\n      </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FilterChain from './FilterChain.vue'\r\nimport { toRaw } from \"vue\";\r\n\r\nexport default {\r\n  name: \"FilterHost\",\r\n  components: {\r\n    FilterChain,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      chain_colors: [],\r\n      chainList: [],\r\n      nFilterChains: 3,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.chain_colors = [this.colors.purple.medium, this.colors.green.medium, this.colors.pink.medium]\r\n    for (let index = 0; index < this.nFilterChains; index++) {\r\n      this.chainList.push({ id: index, ref:\"chain\"+index, color: this.chain_colors[index]})\r\n    }\r\n    // console.log(this.filterChains)\r\n  },\r\n  computed: {\r\n    filterHost(){\r\n      return {\r\n        background: this.colors.yellow.glow\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    initConnections(){\r\n      //console.log(\"filter host init connections\")\r\n      for (let key in this.$refs) {\r\n        //console.log(toRaw(this.$refs[key][0]))\r\n        toRaw(this.$refs[key][0]).initConnections()\r\n      }\r\n      this.$emit('filterInitialized')\r\n      //console.log(\"filters initilised\")\r\n      //console.log(\"filters:\")\r\n      //console.log(this.filterChains)\r\n      //console.log(\"fx:\")\r\n      //console.log(this.fxChains)\r\n    }\r\n  }\r\n}\r\n\r\n// access a parameter of a vue component child from its father\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.filterHost {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>","<template>\r\n  <div class=\"filterChain\">\r\n    <div class=\"chainline\" :style=\"this.chainLine\"></div>\r\n    <div class = \"chainDot\" :style=\"this.chainDot\"></div>\r\n    <div class=\"chainHead\" ref=\"chainHead\"></div>\r\n    <template v-for=\"(filter) in this.filterList\" :key=\"filter.id\" :item=\"filter\">\r\n      <Filter :ref=\"filter.ref\" :chainId=\"this.id\" :id=\"filter.id\" :filter_type=\"filter.type\" :chainColor=\"this.color\"\r\n              @filtersMounted=\"this.handleFiltersMounted()\"/>\r\n    </template>\r\n    <div class=\"chainTail\">\r\n      <div></div>\r\n      <div class=\"routing-btn fx_chain_1\" :style=\"fx_chain_1\" @click=\"setRouting(0)\"></div>\r\n      <div class=\"routing-btn fx_chain_2\" :style=\"fx_chain_2\" @click=\"setRouting(1)\"></div>\r\n      <div class=\"routing-btn fx_chain_3\" :style=\"fx_chain_3\" @click=\"setRouting(2)\"></div>\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// I want to modify a variable of a vue component from its father that is a vue component too\r\nimport Filter from './Filter.vue'\r\n\r\nconst filterTypes = [\"highpass\", \"peaking\", \"lowpass\"]\r\n\r\nexport default {\r\n  ref: \"FilterChain\",\r\n  components: {\r\n    Filter,\r\n  },\r\n  props: [\"color\", \"id\"],\r\n  data() {\r\n    return {\r\n      filterList: [],\r\n      nFilters: 3,\r\n      isFxChainRouteActive: [true, false, false]\r\n    }\r\n  },\r\n  mounted() {\r\n    //console.log(\"mounting filter chain\" + this.id)\r\n    for (let index = 0; index < this.nFiltersXchain; index++) {\r\n      this.filterList.push({id: index, ref: \"filter\" + index, type: filterTypes[index]})\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    fx_chain_1() {\r\n      let color = ''\r\n      if (this.isFxChainRouteActive[0])\r\n        color = this.colors.purple.light\r\n      else\r\n        color = this.colors.yellow.glow\r\n      return {\r\n        background: color,\r\n        border: '.1vw solid' + this.colors.gray.dark\r\n      }\r\n    },\r\n    fx_chain_2() {\r\n      let color = ''\r\n      if (this.isFxChainRouteActive[1])\r\n        color = this.colors.green.medium\r\n      else\r\n        color = this.colors.yellow.glow\r\n      return {\r\n        background: color,\r\n        border: '.1vw solid' + this.colors.gray.dark\r\n      }\r\n    },\r\n    fx_chain_3() {\r\n      let color = ''\r\n      if (this.isFxChainRouteActive[2])\r\n        color = this.colors.pink.light\r\n      else\r\n        color = this.colors.yellow.glow\r\n      return {\r\n        background: color,\r\n        border: '.1vw solid' + this.colors.gray.dark\r\n      }\r\n    },\r\n    chainLine(){\r\n      return {\r\n        top: '49%',\r\n        left: '5%',\r\n        width: '88%',\r\n        height: '.2vw',\r\n        position:'absolute',\r\n        background: this.$props['color'],\r\n        zIndex:'0',\r\n        borderRadius:'10%'\r\n      }\r\n    },\r\n    chainDot(){\r\n      return {\r\n        top: '45%',\r\n        left: '3.5%',\r\n        height: '10%',\r\n        aspectRatio: '1/1',\r\n        position: 'absolute',\r\n        zIndex: '3',\r\n        background: this.$props['color'],\r\n        borderRadius: '50%',\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  methods: {\r\n    handleFiltersMounted() {\r\n      if (this.id === this.nFilterChains - 1) {\r\n        this.$emit(\"filterInitialized\")\r\n      }\r\n    },\r\n    // -------- AUDIO -------x\r\n    initConnections() {\r\n      //console.log(\"filter chain init connections\")\r\n      for (let index = 0; index < this.nFiltersXchain - 1; index++) {\r\n        this.filterChains[this.id][index].connect(this.filterChains[this.id][index + 1].getToneFilter());\r\n        //console.log(\"connected \" + this.filterChains[this.id][index] + \" to \" + this.filterChains[this.id][index + 1])\r\n      }\r\n      // connect chain of filters output to chain each chain of effects\r\n      this.filterChains[this.id][this.nFilters - 1].connect(this.fxChains[0][0]); // init connection to first fx chain\r\n      this.isFxChainRouteActive[0] = true;\r\n      /*for (let i = 0; i < this.nFxChains; i++) { // init connection to all chains\r\n        this.filterChains[this.id][this.nFilters - 1].connect(this.fxChains[i][0]);\r\n        this.isFxChainRouteActive[i] = true;\r\n      }*/\r\n    },\r\n\r\n    setRouting(id) {\r\n      //console.log(\"chain click - id: \" + id);\r\n      try {\r\n        if (this.isFxChainRouteActive[id]) {\r\n          //console.log(\"disconnect from: \" + this.fxChains[id][0] + \" \" + id);\r\n          this.filterChains[this.id][this.nFilters - 1].disconnect(\r\n              this.fxChains[id][0]\r\n          );\r\n        } else {\r\n          //console.log(\"connect to: \" + this.fxChains[id][0] + \" \" + id);\r\n          this.filterChains[this.id][this.nFilters - 1].connect(\r\n              this.fxChains[id][0]\r\n          );\r\n        }\r\n      } catch (e) {\r\n        console.log(\r\n            \"error: \" + e + \"\\nCHAIN FILTERS CONNECTION TO FX CHAIN \" + id + \" UNSUCCESSFUL. Can't connect to \" + this.fxChains[id][0]\r\n        );\r\n      }\r\n      this.isFxChainRouteActive[id] = !this.isFxChainRouteActive[id];\r\n    },\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.filter {\r\n  flex: 4;\r\n}\r\n\r\n.filterChain {\r\n  position:relative;\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.chainHead {\r\n  flex: 1;\r\n  background-color: transparent;\r\n}\r\n\r\n.chainTail {\r\n  flex: 1;\r\n  display: inline-grid;\r\n  align-items: center;\r\n  justify-items: center;\r\n  flex-direction: column;\r\n  background-color: transparent;\r\n}\r\n\r\n.routing-btn {\r\n  width: 50%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n}\r\n\r\n</style>","<template>\r\n  <div class=\"filter\">\r\n    <div class=\"modDot\" :style=\"computedModulation('filter')\" @click.shift.stop=\"unlinkMod('filter')\"\r\n         v-text=\"computedModText('filter')\"></div>\r\n    <div class=\"filter_back\" ref=\"filter_back\"\r\n         >\r\n\r\n    </div>\r\n    <div class=\"filter_logo\" :style=\"this.filter_logo\" @mousedown=\"logoDown\">\r\n      <div v-if=\"is_logoDown && type != 'peaking'\" class=\"logo_text\">\r\n        {{ ((1 - this.resonance) * 100).toFixed() + \"%\" }}\r\n      </div>\r\n      <div v-if=\"is_logoDown && type == 'peaking'\" class=\"logo_text\">\r\n        {{ ((1 - 2 * this.resonance) * 100).toFixed() + \"%\" }}\r\n      </div>\r\n      <!--<div v-if=\"type==='peaking'\" class=\"logo_BD_mask\" :style=\"computedBDMaks\"></div> -->\r\n      <div class=\"logo_glow\" :style=\"computedGlow\"></div>\r\n\r\n      <div class=\"logo_border\"\r\n           @dragenter=\"handleDragEnter('filter')\" @dragleave=\"handleDragLeave('filter')\"\r\n           @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'filter')\"\r\n      ></div>\r\n      <div class=\"logo\" :style=\"logo\">\r\n        <div v-if=\"is_logoDown\" class=\"logo_text_back\" :style=\"this.logo_text_back\"></div>\r\n        <div\r\n            v-if=\"type === 'lowpass'\"\r\n            class=\"logo_LP\"\r\n            :style=\"computedLP\"\r\n        ></div>\r\n        <div\r\n            v-if=\"type === 'highpass'\"\r\n            class=\"logo_HP\"\r\n            :style=\"computedHP\"\r\n        ></div>\r\n        <div v-if=\"type === 'peaking'\" class=\"logo_BD_back\"></div>\r\n        <div\r\n            v-if=\"type === 'peaking'\"\r\n            class=\"logo_BD_circle\"\r\n            :style=\"computedBDCircle\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MyFilter from \"@/views/Synth/Filters/MyFilter\";\r\n\r\nexport default {\r\n  props: [\"filter_type\", \"chainId\", \"chainColor\", \"id\"],\r\n\r\n  data() {\r\n    return {\r\n      color: this.colors.yellow,\r\n      type: this.filter_type,\r\n      cutoff: 0.5,  //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\r\n      resonance: 0.5, //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\r\n      is_logoDown: false,\r\n\r\n      modulator: null,\r\n    }\r\n  },\r\n  mounted() {\r\n    // mouse event listeners\r\n    document.addEventListener(\"mousemove\", this.onMouseMove);\r\n    document.addEventListener(\"mouseup\", this.onMouseUp);\r\n\r\n    //console.log(this.$props)\r\n\r\n    // -------------- AUDIO ---------------\r\n    this.filter = new MyFilter(this.type, this.cutoff, this.resonance);\r\n\r\n    this.cutoff = this.filter.getCutoff()\r\n    this.resonance = this.filter.getResonance()\r\n\r\n\r\n    //console.log(this.chainId+\" \"+this.id)\r\n    //Inserting filter in global variable\r\n    this.filterChains[this.chainId][this.id] = this.filter;\r\n\r\n    if (this.id === this.nFiltersXchain - 1 && this.chainId === this.nFilterChains - 1) {\r\n      this.$emit(\"filtersMounted\");\r\n    }\r\n\r\n  },\r\n\r\n  methods: {\r\n    //------------DRAG AND DROP LOGIC---------\r\n    handleDrop(event, target = \"\") {\r\n      if (this.modulator === null) {\r\n        let data = JSON.parse(event.dataTransfer.getData(\"data\"));\r\n        this.modulator = {color: data.color, id: data.id, type: data.type}\r\n        //console.log(\"RECEIVED HANDLEDROP, THIS.MODULATOR=\")\r\n        //console.log(this.modulator)\r\n        document.dispatchEvent(new CustomEvent(\"link\", {\r\n          detail: {\r\n            object: this.filter,\r\n            target: target,\r\n            color: this.color[\"light\"],\r\n            modulator: {type: this.modulator.type, id: this.modulator.id}\r\n          }}\r\n        ))\r\n      }\r\n\r\n    },\r\n    handleDragEnter(target) {\r\n      //todo: highlight object when dragging on it\r\n      //console.log(\"Dragging over \" + target)\r\n    },\r\n    handleDragLeave(target) {\r\n      //console.log(\"Dragging out of \" + target)\r\n    },\r\n    unlinkMod(target) {\r\n      //todo: CALL BACK ENVELOPS TO UNLINK\r\n      document.dispatchEvent(new CustomEvent(\"unLink\", {\r\n            detail: {\r\n              object: this.filter,\r\n              target: target,\r\n              modulator: {type: this.modulator.type, id: this.modulator.id}\r\n            }\r\n          }\r\n      ))\r\n\r\n      //re-hide link dot\r\n      this.modulator = null;\r\n\r\n    },\r\n    //--------DRAG AND DROP STYLING--------\r\n    computedModulation(target = \"\") {\r\n      if (this.modulator) {\r\n        return {\r\n          width: \"1vw\",\r\n          height: \"1vw\",\r\n          borderRadius: \"50%\",\r\n          backgroundColor: this.modulator.color,\r\n          position: \"absolute\",\r\n          left: \"10%\",\r\n          zIndex: \"1\",\r\n          top: \"10%\",\r\n        };\r\n      } else {\r\n        return {\r\n          display: \"none\",\r\n          width: \"0%\",\r\n          height: \"0%\",\r\n        }\r\n      }\r\n    },\r\n    computedModText(target = \"\") {\r\n      if (this.modulator) {\r\n        return this.modulator.id\r\n      } else return \"\";\r\n    },\r\n\r\n    //------------------------------------\r\n\r\n    // ----------- USER EVENTS -----------\r\n    onMouseMove(event) {\r\n      if (this.is_logoDown) {\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving up\r\n          this.resonance = Math.max(this.resonance + event.movementY / 100, 0);\r\n          //console.log(\"moving up\");\r\n        } else {\r\n          // Mouse is moving down\r\n          this.resonance = Math.min(this.resonance + event.movementY / 100, 1);\r\n        }\r\n        if (event.movementX < 0) {\r\n          // Mouse is moving right\r\n          this.cutoff = Math.max(\r\n              this.cutoff + Math.floor(event.movementX) / 100,\r\n              0\r\n          );\r\n        } else if (event.movementX > 0) {\r\n          // Mouse is moving left\r\n          this.cutoff = Math.min(\r\n              this.cutoff + Math.floor(event.movementX) / 100,\r\n              1\r\n          );\r\n        }\r\n        // ----------- audio ---------\r\n        this.filter.setResonance(this.resonance);\r\n        this.filter.setCutoff(this.cutoff);\r\n      }\r\n    },\r\n\r\n    onMouseUp() {\r\n      if (this.is_logoDown) this.is_logoDown = false;\r\n      document.body.style.cursor = \"pointer\";\r\n    },\r\n    logoDown() {\r\n      if (!this.is_logoDown) {\r\n        this.is_logoDown = true;\r\n        document.body.style.cursor = \"none\";\r\n      }\r\n    },\r\n\r\n    // ----------- AUDIO SETTERS--------------\r\n    setCutoff(cutoff = this.cutoff) {\r\n      this.cutoff = cutoff;\r\n      this.filter.setCutoff(this.cutoff)\r\n    },\r\n\r\n    setResonance(resonance = this.resonance) {\r\n      this.resonance = resonance\r\n      this.filter.setResonance(this.resonance)\r\n    },\r\n\r\n    connect(destination) {\r\n      this.filter.connect(destination);\r\n    },\r\n\r\n    disconnect(destination) {\r\n      this.filter.disconnect(destination)\r\n    },\r\n\r\n    // ------------ GETTERS SETTERS -------------\r\n    getToneFilter() {\r\n      return this.filter.getToneFilter();\r\n    },\r\n\r\n    getMyFilter() {\r\n      return this.filter;\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    computedHeadStyle() {\r\n      return {\r\n        left: 0.7 * this.cutoff * 100 + 13.5 + \"%\",\r\n      };\r\n    },\r\n    computedGlow() {\r\n      if (this.filter_type === \"peaking\" && this.resonance < 0.5) {\r\n        return {\r\n          opacity: 1 - 2 * this.resonance,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      } else if (this.filter_type === \"peaking\" && this.resonance >= 0.5) {\r\n        return {\r\n          opacity: 2 * this.resonance - 1,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      } else {\r\n        return {\r\n          opacity: 1 - this.resonance,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      }\r\n    },\r\n    computedLP() {\r\n      return {\r\n        transform: \"translateX(\" + (-100 + this.cutoff * 100)  + \"%)\",\r\n      };\r\n    },\r\n    computedHP() {\r\n      return {\r\n        transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\r\n      };\r\n    },\r\n    computedBDMaks() {\r\n      let clip = \"\";\r\n      if (this.resonance > 0.5)\r\n        clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\r\n      else if (this.resonance < 0.5)\r\n        clip = \"polygon(0% 50%, 0% 100%, 100% 100%, 100% 50%)\";\r\n      else clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\r\n      return {\r\n        clipPath: clip,\r\n      };\r\n    },\r\n    computedBD() {\r\n      if (1 - this.resonance >= 0.5) {\r\n        return {\r\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\r\n          height: (1 - this.resonance) * 100 + \"%\",\r\n          transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\r\n        };\r\n      } else {\r\n        return {\r\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\r\n          height: (1 - this.resonance - 0.5) * 100 + \"%\",\r\n          transform: \"translateX(\" + (this.cutoff - 0.5) * 100 + \"%)\",\r\n        };\r\n      }\r\n    },\r\n    computedBDCircle() {\r\n      return {\r\n        transform:\r\n            \"translate(\" +\r\n            (this.cutoff - 0.5) * 100 +\r\n            \"%, \" +\r\n            (this.resonance - 0.5) * 100 +\r\n            \"%)\",\r\n        //transform: 'translateX('+(this.cutoff-.5)*100+'%)'\r\n      };\r\n    },\r\n    filter_logo() {\r\n      return {\r\n        background: this.colors.yellow.glow\r\n      }\r\n    },\r\n    logo() {\r\n      return {\r\n        background: this.colors.yellow.light\r\n      }\r\n    },\r\n    logo_text_back() {\r\n      return {\r\n        background: this.colors.yellow.light,\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modDot {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 0.8vw;\r\n  text-align: center;\r\n  box-sizing: border-box;\r\n  border: .06vw solid black;\r\n}\r\n.filter {\r\n  position: relative;\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 4;\r\n}\r\n\r\n.filter_back {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 80%;\r\n  height: 80%;\r\n  background-color: transparent;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.filter_logo {\r\n  position: absolute;\r\n  display: flex;\r\n  flex: 5;\r\n\r\n  height: 100%;\r\n  top: 0;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  z-index: 0;\r\n  clip-path: circle(50%);\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.logo_border {\r\n  position: absolute;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  z-index: 5;\r\n  border-radius: 50%;\r\n  border: 0.1vw solid #3b210e;\r\n}\r\n\r\n.logo {\r\n  position: absolute;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  z-index: 3;\r\n  clip-path: circle(50%);\r\n}\r\n\r\n.logo_glow {\r\n  position: absolute;\r\n  height: 90%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  z-index: 1;\r\n  filter: blur(0.3vw);\r\n}\r\n\r\n.logo_text {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1vw;\r\n  font-weight: bold;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  color: black;\r\n  opacity: 100%;\r\n  background-color: black;\r\n  z-index: 5;\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.logo_text_back {\r\n  position: absolute;\r\n  z-index: 6;\r\n  left: 15%;\r\n  top: 30%;\r\n  width: 70%;\r\n  height: 40%;\r\n  opacity: 100%;\r\n  border-radius: 10%;\r\n}\r\n\r\n.logo_LP {\r\n  opacity: 60%;\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  border: .1vw solid black;\r\n  background-color: #faf8ef;\r\n  z-index: 1;\r\n}\r\n\r\n.logo_HP {\r\n  opacity: 60%;\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  border: .1vw solid black;\r\n  background-color: #faf8ef;\r\n  z-index: 1;\r\n}\r\n.logo_BD_circle {\r\n  opacity: 60%;\r\n  position: absolute;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  border: .1vw solid black;\r\n  border-radius: 50%;\r\n  background-color: #faf8ef;\r\n  z-index: 5;\r\n}\r\n\r\n.logo_BD_mask {\r\n  opacity: 60%;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  border: .1vw solid black;\r\n  background-color: #ffebd2;\r\n  z-index: 2;\r\n}\r\n\r\n.logo_BD {\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  background-color: white;\r\n  z-index: 1;\r\n}\r\n\r\n.logo_BD_line {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 4%;\r\n  top: 48%;\r\n  filter: blur(0.02vw);\r\n  border-radius: 30%;\r\n  background-color: #e58138;\r\n  z-index: 5;\r\n}\r\n\r\n\r\n.logo_BD_circle {\r\n  position: absolute;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n\r\n  border-radius: 50%;\r\n  background-color: #faf8ef;\r\n  z-index: 5;\r\n}\r\n</style>","import * as Tone from \"tone\";\r\nimport {Envelope, LFO} from \"tone\";\r\nimport {toRaw} from \"vue\";\r\n\r\nexport default class MyFilter {\r\n    constructor(type = \"peaking\", cutoff = 0.5, resonance = 0.5) {\r\n\r\n        this.filter_type = type;\r\n        this.cutoff = cutoff;\r\n        this.resonance = resonance;\r\n\r\n        this.modulatorsData = {\r\n            envelope: {\r\n                amount: 0,\r\n                parameters: {\r\n                    attack: 1,\r\n                    decay: 0.3,\r\n                    sustain: 0.8,\r\n                    release: 1\r\n                }\r\n            },\r\n            lfo: {\r\n                amount: 0,\r\n                parameters: {\r\n                    frequency: 10,\r\n                    waveform: \"sine\",\r\n                    min: 0,\r\n                    max: 1\r\n                }\r\n            }\r\n        }\r\n\r\n        //to stop moduoators only when there is one left active voice and the note is released\r\n        this.activeNotes=0\r\n\r\n        this.modulators = {\r\n            envelope: {\r\n                signal: this.createModulator(\"envelope\"),\r\n                scale: new Tone.ScaleExp(0, 1, 3),\r\n                amount: 0\r\n            },\r\n            lfo: {\r\n                signal: this.createModulator(\"lfo\"),\r\n                scale: new Tone.ScaleExp(0, 1, 3),\r\n                amount: 0\r\n            }\r\n        }\r\n\r\n        this.filter = new Tone.Filter();\r\n        this.initFilterParams();\r\n\r\n\r\n    }\r\n\r\n    getCutoff() {\r\n        return this.cutoff\r\n    }\r\n\r\n    getResonance() {\r\n        return this.resonance\r\n    }\r\n\r\n    createModulator(type) {\r\n        //console.log(\"creating modulator of type: \"+type)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                return new Envelope\r\n            case \"lfo\":\r\n                return new LFO\r\n            default:\r\n                console.log(\"Error creating modulator\")\r\n                return null\r\n        }\r\n    }\r\n\r\n\r\n    // ----------- AUDIO SETTERS--------------\r\n    initFilterParams() {\r\n        let self = this;\r\n\r\n        // init switched off filters\r\n        switch (this.filter_type) {\r\n            case \"lowpass\":\r\n                this.cutoff = .9;\r\n                this.resonance = 1;\r\n                break;\r\n            case \"highpass\":\r\n                this.cutoff = 0.1;\r\n                this.resonance = 1;\r\n                break;\r\n            case \"peaking\":\r\n                this.cutoff = 0.5;\r\n                this.resonance = 0.5;\r\n                break;\r\n            case \"bandpass\":\r\n                break;\r\n            case \"lowshelf\":\r\n                break;\r\n            case \"highshelf\":\r\n                break;\r\n            case \"notch\":\r\n                break;\r\n            case \"allpass\":\r\n                break;\r\n            default:\r\n                console.log(\"Invalid filter type\");\r\n        }\r\n\r\n        this.filter.set({\r\n            frequency: self.cutoffLogMapping(this.cutoff),\r\n            type: this.filter_type,\r\n        })\r\n\r\n        this.scaleSetter(this.modulators.envelope)\r\n        this.scaleSetter(this.modulators.lfo)\r\n        this.connectModulator(this.modulators.envelope)\r\n        this.connectModulator(this.modulators.lfo)\r\n        this.updateModulators()\r\n\r\n    }\r\n\r\n\r\n    //------------MODULATORS LOGIC----------\r\n\r\n    scaleSetter(modulator, target = \"\") {\r\n        //console.log(modulator)\r\n        toRaw(modulator.scale).set({\r\n\r\n            min: (Math.pow(10, Math.log10(this.cutoffLogMapping(this.cutoff)) - 1 * modulator.amount)),\r\n            max: (Math.pow(10, Math.log10(this.cutoffLogMapping(this.cutoff)) + 1 * modulator.amount)),\r\n        })\r\n\r\n    }\r\n\r\n    connectModulator(modulator) {\r\n        modulator.signal.chain(modulator.scale, this.filter.frequency)\r\n    }\r\n\r\n    setModulatorParameters(type, target, parameters) {\r\n        this.modulatorsData[type].parameters = parameters\r\n        this.updateModulators()\r\n    }\r\n\r\n    setModulatorAmount(type, target, amount) {\r\n        this.modulatorsData[type].amount = amount\r\n        this.updateModulators()\r\n    }\r\n\r\n    updateModulators() {\r\n        for (let type in this.modulators) {\r\n            //update amount from preset\r\n            this.modulators[type].amount = this.modulatorsData[type].amount\r\n            //reset scale\r\n            this.scaleSetter(this.modulators[type])\r\n            //reset modulator\r\n            this.modulatorSetter(toRaw(this.modulators[type].signal), type, this.modulatorsData[type].parameters)\r\n        }\r\n    }\r\n\r\n    modulatorSetter(modulator, type, parameters) {\r\n        if (!toRaw(parameters).waveform) toRaw(parameters).waveform = modulator.type\r\n        switch (type) {\r\n            case \"envelope\":\r\n                modulator.set({\r\n                    \"attack\": parameters.attack,\r\n                    \"decay\": parameters.decay,\r\n                    \"sustain\": parameters.sustain,\r\n                    \"release\": parameters.release + 0.001,\r\n                })\r\n                break;\r\n            case \"lfo\":\r\n                modulator.set({\r\n                    \"type\": toRaw(parameters).waveform,\r\n                    \"frequency\": toRaw(parameters).frequency\r\n                })\r\n                break;\r\n            default:\r\n                console.log(\"Error setting modulator parameters, invalid args\")\r\n                break;\r\n        }\r\n    }\r\n\r\n    playNote(note = \"\", velocity = \"\") {\r\n        //trigger attack in modulators\r\n        this.modulators.envelope.signal.cancel(Tone.now())\r\n        this.modulators.envelope.signal.triggerAttack(Tone.now())\r\n        this.modulators.lfo.signal.stop()\r\n        this.modulators.lfo.signal.start()\r\n        //console.log(\"PLAYED FILTER MODULATORS\")\r\n        this.activeNotes++\r\n    }\r\n    stopNote(note=\"\") {\r\n        if(this.activeNotes<=1){\r\n            this.modulators.envelope.signal.triggerRelease(Tone.now())\r\n            //lfos never stopped\r\n            //this.modulators.lfo.signal.stop()\r\n            //console.log(\"STOPPED FILTER MODULATORS\")\r\n        }\r\n        this.activeNotes--\r\n    }\r\n\r\n\r\n    //--------------------\r\n\r\n\r\n    setCutoff(cutoff = this.cutoff) {\r\n        this.cutoff = cutoff;\r\n        let self = this;\r\n        this.filter.set({\r\n            frequency: self.cutoffLogMapping(this.cutoff),\r\n        });\r\n        /*\r\n        console.log(\r\n            this.filter_type +\r\n            \" cutoff: \" +\r\n            this.cutoff.toFixed(2) +\r\n            \" - \" +\r\n            this.cutoffLogMapping(this.cutoff).toFixed(0) +\r\n            \" Hz\"\r\n        );\r\n\r\n         */\r\n        this.updateModulators()\r\n    }\r\n\r\n    setResonance(resonance = this.resonance) {\r\n        this.resonance = resonance;\r\n        let self = this;\r\n\r\n        if (this.filter_type === \"lowshelf\" || this.filter_type === \"highshelf\" || this.filter_type === \"peaking\") {\r\n            // bell delta amplitude is controlled changing the 'gain' parameter\r\n            this.filter.set({\r\n                gain: self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type),\r\n            });\r\n            /*\r\n            console.log(\r\n                \"Setting Peaking Resonance: \" +\r\n                self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type)\r\n            );\r\n\r\n             */\r\n        } else if (this.filter_type === \"lowpass\" || this.filter_type === \"highpass\") {\r\n            // filter's Q is controlled changing the 'Q' parameter\r\n            this.filter.set({\r\n                Q: self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type),\r\n            });\r\n            /*\r\n            console.log(\r\n                \"Setting LowPass/HighPass Resonance: \" +\r\n                self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type)\r\n            );\r\n\r\n             */\r\n        }\r\n        /*\r\n            console.log(\r\n              \"resonance: \" +\r\n                this.resonance.toFixed(2) +\r\n                \" - \" +\r\n                Math.round(this.resonanceRangeNormalizer((self.resonance), this.type)) +\r\n                \" dB\"\r\n            );\r\n        */\r\n    }\r\n\r\n    connect(destination) {\r\n        try {\r\n            this.filter.connect(destination);\r\n        } catch (err) {\r\n            console.log(\"ERROR: \" + err + \" - myfilter: \", this.filter, \" -connect to destination: \", destination);\r\n        }\r\n    }\r\n\r\n    disconnect(destination) {\r\n        if (destination) {\r\n            this.filter.disconnect(destination)\r\n        } else {\r\n            this.filter.disconnect(destination)\r\n        }\r\n    }\r\n\r\n    getToneFilter() {\r\n        return this.filter;\r\n    }\r\n\r\n    // ----------- AUDIO HELPERS--------------\r\n    // takes value in [0, 1] range and it maps it to [50, 16000] interval in a logarithmic fashion\r\n    cutoffLogMapping(x) {\r\n        if (x < 0 || x > 1) {\r\n            console.error(\"Input value must be between 0 and 1.\");\r\n            return;\r\n        }\r\n        return 20 * Math.pow(10, Math.log10(22000 / 20) * x);\r\n    }\r\n\r\n    // takes value in [0, 1] range and it maps it to [0, 10] linearly\r\n    resonanceRangeNormalizer(x, type) {\r\n        if (x < 0 || x > 1) {\r\n            console.error(\"Input value must be between 0 and 1.\");\r\n            return;\r\n        }\r\n        switch (type) {\r\n            case \"lowpass\":\r\n                return 15 * x;\r\n            case \"highpass\":\r\n                return 15 * x;\r\n            case \"peaking\":\r\n                return 30 * (x - 0.5);\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}","import { render } from \"./Filter.vue?vue&type=template&id=35e63e5b&scoped=true\"\nimport script from \"./Filter.vue?vue&type=script&lang=js\"\nexport * from \"./Filter.vue?vue&type=script&lang=js\"\n\nimport \"./Filter.vue?vue&type=style&index=0&id=35e63e5b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-35e63e5b\"]])\n\nexport default __exports__","import { render } from \"./FilterChain.vue?vue&type=template&id=237dbc72&scoped=true\"\nimport script from \"./FilterChain.vue?vue&type=script&lang=js\"\nexport * from \"./FilterChain.vue?vue&type=script&lang=js\"\n\nimport \"./FilterChain.vue?vue&type=style&index=0&id=237dbc72&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-237dbc72\"]])\n\nexport default __exports__","import { render } from \"./FilterHost.vue?vue&type=template&id=130359cc&scoped=true\"\nimport script from \"./FilterHost.vue?vue&type=script&lang=js\"\nexport * from \"./FilterHost.vue?vue&type=script&lang=js\"\n\nimport \"./FilterHost.vue?vue&type=style&index=0&id=130359cc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-130359cc\"]])\n\nexport default __exports__","<template>\r\n  <div :style=\"this.fxBack\">\r\n  <div class=\"fxHost\" :style=\"this.fxHost\">\r\n\r\n    <div class=\"chainHeadsRow\">\r\n      <div class=\"chainHead \" :style=\"this.chainHead1\"></div>\r\n      <div class=\"chainHead \" :style=\"this.chainHead2\"></div>\r\n      <div class=\"chainHead \" :style=\"this.chainHead3\"></div>\r\n    </div>\r\n    <div class=\"fxGrid\">\r\n      <FxCell v-for=\"(fx) in Fx_chain1\" ref=\"effects\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\"></FxCell>\r\n      <FxCell v-for=\"(fx) in Fx_chain2\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\"></FxCell>\r\n      <FxCell v-for=\"(fx) in Fx_chain3\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\"\r\n              @fxMounted=\"this.initFxConnections()\"></FxCell>\r\n    </div>\r\n    <div class=\"gainList\" :style=\"this.gainList\">\r\n      <div id=\"gain1\" class=\"channelGain\" :style=\"channelGain(0)\" @mousedown=\"gainMouseDown(0)\">\r\n        <div class=\"channelGainFader\" :style=\"computedFxGainKnobStyle(0)\"></div>\r\n      </div>\r\n      <div id=\"gain2\" class=\"channelGain\" :style=\"channelGain(1)\" @mousedown=\"gainMouseDown(1)\">\r\n        <div class=\"channelGainFader\" :style=\"computedFxGainKnobStyle(1)\"></div>\r\n      </div>\r\n      <div id=\"gain3\" class=\"channelGain\" :style=\"channelGain(2)\" @mousedown=\"gainMouseDown(2)\">\r\n        <div class=\"channelGainFader\" :style=\"computedFxGainKnobStyle(2)\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport FxCell from '../Effects/FxCell.vue'\r\nimport {Gain, getDestination} from \"tone\";\r\n\r\nexport default {\r\n  name: \"FxHost\",\r\n  components: {FxCell},\r\n\r\n  data() {\r\n    return {\r\n      Fx_chain1: [],\r\n      Fx_chain2: [],\r\n      Fx_chain3: [],\r\n      isGainSelected: \"\",\r\n      chainsGains: \"\"\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.isGainSelected = Array(this.nFxChains).fill(false)\r\n    this.chainsGains = Array(this.nFxChains).fill(0);\r\n    this.chainsGains[0] = 0.8;\r\n    this.chainsGains[1] = 0.8;\r\n    this.chainsGains[2] = 0.8;\r\n    // note: refs are kept incremental through the chains, while everything else is indexed relatively to the chain\r\n    //console.log(\"creating fx\")\r\n    for (let i = 1; i <= this.nFxXchain; i++) {\r\n      this.Fx_chain1.push({id: i, ref: 'Fx' + i, chainId: 0});\r\n      this.Fx_chain2.push({id: i, ref: 'Fx' + i + this.nFxXchain, chainId: 1});\r\n      this.Fx_chain3.push({id: i, ref: 'Fx' + i + this.nFxXchain * 2, chainId: 2});\r\n      // console.log(i)\r\n    }\r\n\r\n    //console.log(this.fxChains)\r\n    for (let i = 0; i < this.nFxChains; i++) {\r\n      this.fxChains[i][0] = new Gain(1);\r\n      this.fxChains[i][this.nNodesXfxChain-1] = new Gain(+this.chainsGains[i]);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // -------------------- AUDIO -----------------------\r\n    initFxConnections() {\r\n      //console.log(this.fxChains)\r\n      for (let i = 0; i < this.nFxChains; i++) {\r\n        // structure: Gain Filter Filter Filter Filter Filter Gain [7]\r\n        for (let j = 0; j < this.nNodesXfxChain-2; j++) {\r\n          //console.log(\"i: \", i, \"j: \", j)\r\n          this.fxChains[i][j].connect(this.fxChains[i][j + 1].getToneReference())\r\n          // console.log(\"chain \", i ,\" id: \", j, \" into chain \", i , \" id: \", j+1)\r\n        }\r\n        // connect last filter to volume\r\n        this.fxChains[i][this.nNodesXfxChain-2].connect(this.fxChains[i][this.nNodesXfxChain-1])\r\n        // connect vol to destination\r\n        this.fxChains[i][this.nNodesXfxChain-1].connect(getDestination())\r\n        // console.log(\"chain \", i, \" id: \", this.nFxXchain-1, \" into getDestination()\")\r\n      }\r\n    },\r\n\r\n    // first node of each chain is a gain node - we set its volume to adjust whole chain gain\r\n    setChainVolume(chainId, volume) {\r\n      this.fxChains[chainId][this.nNodesXfxChain-1].gain = volume;\r\n\r\n    },\r\n\r\n    // --------------------  GESTURE -----------------------\r\n    gainMouseDown(gainId) {\r\n      this.isGainSelected[gainId] = true;\r\n      // console.log(\"fx gainMouseDown\")\r\n    },\r\n\r\n    handleMouseUp(e) {\r\n      //Actions to execute when mouseup happens on any part of the screen\r\n      this.isGainSelected.fill(false)\r\n      // console.log(\"fx gainMouseUP\")\r\n\r\n    },\r\n    handleMouseMove(e) {\r\n      this.isGainSelected.forEach((isSelected, index) => {\r\n        // console.log(\"fx gain vol knob mouse drag\")\r\n        if (isSelected) {\r\n          //console.log(\"fx gain vol knob mouse drag of \", isSelected);\r\n          this.chainsGains[index] = this.chainsGains[index] - Math.floor(e.movementY) / 100;\r\n          this.chainsGains[index] = Math.max(this.chainsGains[index], 0);\r\n          this.chainsGains[index] = Math.min(this.chainsGains[index], 1);\r\n          //console.log(this.chainsGains[index])\r\n          //console.log(this.fxChains[index][0])\r\n          this.fxChains[index][this.nNodesXfxChain-1].set({\r\n            gain: this.chainsGains[index]\r\n          })\r\n        }\r\n      })\r\n    },\r\n    computedFxGainKnobStyle(id) {\r\n      let color = ''; \r\n      if(id === 0) color = this.colors.purple.medium\r\n      if(id === 1) color = this.colors.green.medium\r\n      if(id === 2) color = this.colors.pink.medium\r\n      return {\r\n        height: 100 * this.chainsGains[id] + \"%\",\r\n        top: 50 * (1-this.chainsGains[id]) + \"%\",\r\n        left: 50 * (1-this.chainsGains[id]) + \"%\",\r\n      \r\n        background: color,\r\n      }\r\n    },\r\n    channelGain(id) {\r\n      let color = ''\r\n      if(id == 0) color = this.colors.purple.glow\r\n      if(id == 1) color = this.colors.green.glow\r\n      if(id == 2) color = this.colors.pink.glow\r\n      return {\r\n        background: color,\r\n      }\r\n    }\r\n  },\r\n\r\n  computed : {\r\n\r\n    fxHost(){\r\n      return {\r\n        background: this.colors.orange.glow,\r\n        border: '.1vw solid '+this.colors.orange.dark,\r\n        boxSizing: 'border-box'\r\n      }\r\n    },\r\n    gainList(){\r\n      return {\r\n        background: this.colors.orange.light,\r\n        borderTop: '.1vw solid '+this.colors.orange.dark,\r\n        boxSizing: 'border-box',\r\n        height: '100%'\r\n      }\r\n    },\r\n    chainHead1(){\r\n      return {\r\n        background: this.colors.purple.light\r\n      }\r\n    },\r\n    chainHead2(){\r\n      return {\r\n        background: this.colors.green.medium\r\n      }\r\n    },\r\n    chainHead3(){\r\n      return {\r\n        background: this.colors.pink.light\r\n      }\r\n    },\r\n    fxBack(){\r\n      return {\r\n        position: 'relative',\r\n        height: '100%',\r\n        width: '100%',\r\n        background: this.colors.orange.light\r\n      }\r\n    }\r\n    \r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .fxHost{\r\n    display: grid;\r\n    margin: .3vw;\r\n    height: calc(100% - .6vw);\r\n    border-radius: 1%;\r\n    opacity: 90%;\r\n    grid-template-columns: 1fr;\r\n    grid-template-rows: 10% 70% 20%;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .fxGrid{\r\n    justify-content: center;\r\n    align-items: center;\r\n    justify-items: stretch;\r\n    height: 100%;\r\n    width: 100%;\r\n    flex: 1;\r\n    display: grid;\r\n    grid-column: auto;\r\n    grid-template-rows:  1fr 1fr 1fr 1fr 1fr ;\r\n    grid-template-columns: 1fr 1fr 1fr;\r\n    grid-auto-flow: column;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .gainList{\r\n    width: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    flex-direction: row;\r\n  }\r\n\r\n.channelGainFader {\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  left: 50%;\r\n  top: 50%;\r\n  aspect-ratio: 1;\r\n  border-radius: 50%;\r\n  align-self: center;\r\n}\r\n\r\n.channelGain {\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  align-content: center;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  border: 0.06vw solid black;\r\n}\r\n\r\n.chainHeadsRow {\r\n  height: 60%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  flex-direction: row;\r\n  background-color: transparent;\r\n  margin-top: 2%;\r\n  box-sizing: border-box;;\r\n  border: 0;\r\n}\r\n\r\n\r\n  .chainHead {\r\n    height: 50%;\r\n    aspect-ratio: 1/1;\r\n    border: 0;\r\n    clip-path: circle(50%)\r\n  }\r\n\r\n  .head1 {\r\n    background-color: red;\r\n  }\r\n  .head2 {\r\n    background-color: green;\r\n  }\r\n  .head3 {\r\n    background-color: blue;\r\n  }\r\n</style>","<template>\r\n  <div class=\"cell\" @click=\"nextFx\" @click.shift=\"setToBypass\" @mousedown=\"fxDown\">\r\n    <div class=\"icon\">\r\n      <div v-if=\"this.typeId === 0\" ref=\"plus\" :style=\"this.iconDiv\" @mouseover=\"this.onIconEnter\" @mouseout=\"onIconLeave\"> +</div>\r\n      <img v-if=\"this.typeId === 1\" src=\"@/icons/blizzard.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 2\" src=\"@/icons/drop.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 3\" src=\"@/icons/fire.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 4\" src=\"@/icons/moon.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 5\" src=\"@/icons/wind.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 6\" src=\"@/icons/tornado.svg\" alt=\"\">\r\n    </div>\r\n    <div class=\"glow\" :style=\"computedGlowStyle\" @mousedown=\"fxDown\">\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { isSVGTag } from '@vue/shared';\r\nimport MyEffect from \"@/views/Synth/Effects/MyFx\";\r\nimport {Gain} from \"tone\";\r\n\r\nconst types = ['none', 'reverb', 'delay', 'distortion', 'vibrato', 'pan', 'chorus'];\r\nconst Fx_colors = ['transparent', 'lightblue', 'deepskyblue', 'red', 'orange', 'darkorchid', 'yellow'];\r\nexport default {\r\n  props: [\"chainId\", \"id\", \"ref\"],\r\n\r\n  data() {\r\n    return {\r\n      modulation: 0,\r\n      is_down: false,\r\n      typeId: 0,\r\n      volume: 0,\r\n\r\n      //variables to solve\r\n      //dragging and clicking interference\r\n      startX: 0,\r\n      startY: 0,\r\n      endX: 0,\r\n      endY: 0,\r\n      threshold: 2, // adjust as needed\r\n    };\r\n  },\r\n  mounted() {\r\n    // gesture listeners\r\n    document.addEventListener(\"mouseup\", this.onMouseup);\r\n    document.addEventListener(\"mousemove\", this.onMousemove);\r\n    // init effect as bypass (a gain node)\r\n    this.effect = new MyEffect({ typeId: types[this.typeId], modulation: this.modulation })\r\n    // this.effect = this.fxHelper.generateToneFx('none');\r\n    // create the effect in the global fx matrix\r\n    this.fxChains[this.chainId][this.id] = this.effect;\r\n    // console.log(\"fx chain: \" + this.chainId + \" - fx id: \" + this.id)\r\n    // console.log(this.chainId, \" \", this.id)\r\n\r\n    // notify parent that each filter has been created\r\n    if (this.chainId === this.nFxChains - 1 && this.id === this.nFxXchain) {\r\n      this.$emit(\"fxMounted\")\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    computedGlowStyle() {\r\n      return {\r\n        opacity: (this.modulation + 0.3) * 100 + \"%\",\r\n        background: Fx_colors[this.typeId]\r\n      }\r\n    },\r\n    iconDiv() {\r\n      let color = 'black'\r\n      if (this.chainId === 0) color = this.colors.purple.medium\r\n      if (this.chainId === 1) color = this.colors.green.medium\r\n      if (this.chainId === 2) color = this.colors.pink.medium\r\n      return {\r\n        color: color,\r\n      }\r\n    },\r\n    iconDivBlack(){\r\n      let color = 'black'\r\n      return {\r\n        color: color,\r\n      }\r\n    },\r\n    onIconEnter() {\r\n      this.$refs['plus'].style.color = 'black'\r\n    },\r\n    onIconLeave() {\r\n      let color = 'black'\r\n      if (this.chainId === 0) color = this.colors.purple.medium\r\n      if (this.chainId === 1) color = this.colors.green.medium\r\n      if (this.chainId === 2) color = this.colors.pink.medium\r\n      this.$refs['plus'].style.color = color\r\n    }\r\n    /*     onIconLeave(){\r\n          let color = 'black'\r\n          if(this.chainId === 0 ) color = this.colors.purple.medium\r\n          if(this.chainId === 1 ) color = this.colors.green.medium\r\n          if(this.chainId === 2 ) color = this.colors.pink.medium\r\n          this.$refs['plus'].style.color = color\r\n        } */\r\n  },\r\n\r\n  components: { isSVGTag },\r\n\r\n  methods: {\r\n    // ------------------ USER INTERACTIONS -----------------------\r\n    nextFx() {\r\n      //calculate distance between mouseDown and mouseUp, if it is more than threshold pixels, then it is a drag\r\n      const distance = Math.sqrt(\r\n        Math.pow(this.endX - this.startX, 2) +\r\n        Math.pow(this.endY - this.startY, 2)\r\n      );\r\n\r\n      if (distance <= this.threshold) {\r\n        if (!this.is_down) {\r\n          // change fx type and index\r\n          this.typeId = this.generateNextTypeIndex();\r\n          let fxType = types[this.typeId]\r\n          //console.log(fxType)\r\n\r\n          this.changeFxType(fxType)\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n    changeFxType(fxType) {\r\n      // disconnect old effect\r\n      this.effect.disconnect();\r\n      this.effect.dispose();\r\n\r\n      // create new effect\r\n      this.effect = new MyEffect({ type: fxType, modulation: this.modulation })\r\n      this.effect.setFxParams({ type: fxType, mod: this.modulation })\r\n\r\n      // attach new fx in the global fx matrix\r\n      // init effect\r\n      this.fxChains[this.chainId][this.id] = this.effect;\r\n      // connect effect\r\n      this.fxChains[this.chainId][this.id-1].connect(this.fxChains[this.chainId][this.id].getToneReference());\r\n      if(this.fxChains[this.chainId][this.id+1] instanceof MyEffect) {\r\n        this.fxChains[this.chainId][this.id].connect(this.fxChains[this.chainId][this.id + 1].getToneReference())\r\n      } else if(this.fxChains[this.chainId][this.id+1] instanceof Gain){\r\n        this.fxChains[this.chainId][this.id].connect(this.fxChains[this.chainId][this.id + 1])\r\n      }\r\n      //console.log(this.fxChains)\r\n\r\n      /* // debug global fx matrix\r\n      this.fxChains.forEach((chain) => {\r\n        chain.forEach((fx) => {\r\n          if (fx instanceof MyEffect){\r\n            console.log(fx.getToneReference())\r\n          } else { console.log(fx) }\r\n        })\r\n      })*/\r\n    },\r\n\r\n    generateRandomTypeIndex() {\r\n      return Math.round(Math.random() * 10 + 1) % types.length\r\n    },\r\n\r\n    generateNextTypeIndex() {\r\n      return (this.typeId + 1) % types.length;\r\n    },\r\n\r\n    setToBypass() {\r\n      this.typeId = 0;\r\n      this.changeFxType('none')\r\n\r\n      //console.log(\"set fx in position \" + this.chainId + \" - \" + this.id + \" to bypass\")\r\n    },\r\n\r\n    fxDown(e) {\r\n      //save mouseDown position\r\n      this.startX = e.clientX;\r\n      this.startY = e.clientY;\r\n\r\n      if (!this.is_down)\r\n        this.is_down = true;\r\n    },\r\n    onMouseup(e) {\r\n      //save mouseUp position\r\n      this.endX = e.clientX;\r\n      this.endY = e.clientY;\r\n      if (this.is_down)\r\n        this.is_down = false;\r\n    },\r\n    onMousemove(event) {\r\n      if (this.is_down) {\r\n        if (event.movementY < 0) {\r\n          this.modulation = Math.min(this.modulation - event.movementY / 100, 1);\r\n        } else {\r\n          this.modulation = Math.max(this.modulation - event.movementY / 100, 0);\r\n        }\r\n        this.effect.setFxParams({ fx: this.effect, typeId: this.typeId, mod: this.modulation })\r\n\r\n        // console.log(this.modulation);\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.cell {\r\n  position: relative;\r\n  height: 85%;\r\n  background-color: transparent;\r\n  display: flex;\r\n  margin: 10%;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.icon {\r\n  display: flex;\r\n  aspect-ratio: 1/1;\r\n  position: absolute;\r\n  z-index: 2;\r\n  background-color: transparent;\r\n}\r\n\r\n.icon div {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1.5vw;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  background-color: transparent;\r\n}\r\n\r\n.icon img {\r\n  width: 1.5vw;\r\n  aspect-ratio: 1/1;\r\n  opacity: 80%;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.glow {\r\n  border-radius: 5%;\r\n  flex: 1;\r\n  height: 100%;\r\n  width: 100%;\r\n  position: absolute;\r\n  z-index: 1;\r\n  background-color: red;\r\n}\r\n\r\n.glow div {\r\n  height: 100%;\r\n  width: 100%;\r\n  opacity: 100%;\r\n  color: black;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 2vw;\r\n}\r\n</style>","import {Chorus, Distortion, Envelope, Gain, LFO, Panner, PingPongDelay, Reverb, Vibrato} from 'tone'\r\nimport {nextTick} from \"vue\";\r\n\r\nexport default class MyEffect {\r\n    constructor({ type = \"none\", modulation = 0 }) {\r\n        this.type = type;\r\n        this.mod = modulation;\r\n        this.effect = this.generateToneFx(type)\r\n    }\r\n\r\n    // getters\r\n    getToneReference(){\r\n        return this.effect;\r\n    }\r\n\r\n    // creator\r\n    generateToneFx(type) {\r\n        let effect;\r\n        // console.log(\"fx gen type: \" + type)\r\n        switch (type) {\r\n            case 0:\r\n            case 'none':\r\n                effect = new Gain();\r\n                break;\r\n            case 1:\r\n            case 'reverb':\r\n                effect = this.createReverb()\r\n                break;\r\n            case 2:\r\n            case 'delay':\r\n                effect = this.createDelay()\r\n                break;\r\n            case 3:\r\n            case 'distortion':\r\n                effect = this.createDistortion()\r\n                break;\r\n            case 4:\r\n            case 'vibrato':\r\n                effect = this.createVibrato()\r\n                break;\r\n            case 5:\r\n            case 'pan':\r\n                effect = this.createPan()\r\n                break;\r\n            case 6:\r\n            case 'chorus':\r\n                effect = this.createChorus()\r\n                break;\r\n            default:\r\n                effect = new Gain();\r\n        }\r\n        // console.log(effect)\r\n        this.setFxParams({ effect: effect, type: type })\r\n        return effect;\r\n    }\r\n\r\n    // setters\r\n    // general setter\r\n    setFxParams({ effect = this.effect, type = this.type, mod = this.mod }) {\r\n        this.effect = effect;\r\n        this.type = type;\r\n        this.mod = mod;\r\n        // console.log(\"effect = \"+ this.effect,\" type = \" + this.type, \"mod = \" + this.mod)\r\n\r\n        switch (type) {\r\n            case 1: // reverb\r\n            case 'reverb':\r\n                this.effect.set({\r\n                    decay: 0.1 + 5*mod,\r\n                    wet: 0.3 + 0.7*mod,\r\n                })\r\n                break;\r\n            case 2: // delay\r\n            case 'delay':\r\n                this.effect.set({\r\n                    delayTime: 0.05 + 0.4*mod,\r\n                    feedback: 0.05 + 0.90*mod,\r\n                    wet: 0.3 + 0.7*mod,\r\n                })\r\n                break;\r\n            case 3: // distortion\r\n            case 'distortion':\r\n                this.effect.set({\r\n                    distortion: 0.05 + 0.95*mod,\r\n                    wet: 0.4 + 0.6*mod,\r\n                })\r\n                break;\r\n            case 4: // vibrato\r\n            case 'vibrato':\r\n                this.effect.set({\r\n                    depth: 0.5 + 0.5*mod,\r\n                    frequency: 1 + 20*mod,\r\n                    wet: 0.5 + 0.5*mod\r\n                })\r\n                break;\r\n            case 5: // pan\r\n            case 'pan':\r\n                let coeff = -1 + (2*mod)\r\n                this.effect.set({\r\n                    pan: coeff,\r\n                    wet: 1,\r\n                })\r\n                console.log(\"pan coeff: \" + coeff.toFixed(2))\r\n                break;\r\n            case 6: // chorus\r\n            case 'chorus':\r\n                this.effect.set({\r\n                    depth: 0.6 + mod*0.4,\r\n                    frequency: 30 + mod*10,\r\n                    spread: 80 * mod*8,\r\n                    wet: 1,\r\n                    feedback: 0.05 + mod*0.9,\r\n                    type: \"triangle\" + (mod*10).toFixed(0).toString(),\r\n                    delayTime: 100 + mod*90,\r\n                })\r\n                break;\r\n            default:\r\n                this.effect = new Gain();\r\n        }\r\n    }\r\n\r\n    // -------------- FX CREATION -------------\r\n    createReverb(){\r\n        return new Reverb();\r\n    }\r\n    createDelay() {\r\n        //todo: not interesting effect if used like this\r\n        return new PingPongDelay();\r\n    }\r\n    createDistortion(){\r\n        return new Distortion();\r\n    }\r\n    createVibrato(){\r\n        return new Vibrato();\r\n    }\r\n    createPan(){\r\n        // todo: create LFO modulating width\r\n        return new Panner();\r\n    }\r\n    createChorus(){\r\n        return new Chorus();\r\n    }\r\n\r\n   \r\n    // ------------- TONE JS EXTENSIONS -----------\r\n    connect(route){\r\n        this.effect.connect(route);\r\n    }\r\n    disconnect(){\r\n        this.effect.disconnect();\r\n    }\r\n    dispose(){\r\n        this.effect.dispose();\r\n    }\r\n}\r\n","import { render } from \"./FxCell.vue?vue&type=template&id=963ed012&scoped=true\"\nimport script from \"./FxCell.vue?vue&type=script&lang=js\"\nexport * from \"./FxCell.vue?vue&type=script&lang=js\"\n\nimport \"./FxCell.vue?vue&type=style&index=0&id=963ed012&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-963ed012\"]])\n\nexport default __exports__","import { render } from \"./FxHost.vue?vue&type=template&id=1dd12caa&scoped=true\"\nimport script from \"./FxHost.vue?vue&type=script&lang=js\"\nexport * from \"./FxHost.vue?vue&type=script&lang=js\"\n\nimport \"./FxHost.vue?vue&type=style&index=0&id=1dd12caa&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1dd12caa\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"toolsHost\" :style=\"this.toolsHost\">\r\n        <SpecAnalyzer />\r\n        <Oscilloscope ref=\"oscilloscope\"/>\r\n        <Meter/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import * as Tone from \"tone\";\r\n    import Meter from './Meter.vue'\r\n    import Oscilloscope from './Oscilloscope.vue'\r\n    import SpecAnalyzer from './SpecAnalyzer.vue'\r\n\r\n    export default {\r\n    name: \"ToolsHost\",\r\n    components: {\r\n        Meter,\r\n        Oscilloscope,\r\n        SpecAnalyzer\r\n    },\r\n    data() {\r\n        return {\r\n\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n    },\r\n    beforeDestroy() {\r\n    },\r\n\r\n    methods: {\r\n        setOscilloscopeTiming(note){\r\n            let mseconds = (1/Tone.Frequency(note))*1000;\r\n            this.$refs[\"oscilloscope\"].setTiming(mseconds)\r\n        }\r\n\r\n    },\r\n    computed: {\r\n        toolsHost(){\r\n            return{\r\n                background: this.colors.green.light\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .toolsHost{\r\n        display: grid;\r\n        grid-template-rows: 40% 40% 20%;\r\n    }\r\n</style>","<template>\r\n  <div class=\"meter\" :style=\"this.Meter\">\r\n    <div class=\"signalSum\">\r\n      <div ref=\"left\" class=\"signal\" :style=\"computedWidthLeft\"></div>\r\n      <div></div>\r\n      <div ref=\"right\" class=\"signal\" :style=\"computedWidthRight\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Meter } from \"tone\";\r\nimport { dbToGain } from \"tone\";\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      widthLeft: 0,\r\n      widthRight: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    computedWidthLeft() {\r\n      return { width: `${this.widthLeft}%` , background: this.colors.green.medium};\r\n    },\r\n    computedWidthRight() {\r\n      return { width: `${this.widthRight}%` , background: this.colors.green.medium};\r\n    },\r\n    Meter(){\r\n      return{\r\n        background: this.colors.green.glow,\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.meter = new Meter({channels: 2});\r\n    Tone.getDestination().connect(this.meter);\r\n    this.intervalId = setInterval(() => {\r\n      this.updateWidths();\r\n    }, 25);\r\n  },\r\n  \r\n  methods: {\r\n    updateWidths() {\r\n      //this.volume = this.meter.getValue();\r\n      [ this.leftVolume , this.rightVolume ] = this.meter.getValue();\r\n      if (!isFinite(this.leftVolume) && !isFinite(this.rightVolume)) return;\r\n      //console.log(this.meter.getValue()); \r\n      this.widthLeft = Math.min(dbToGain(this.leftVolume) * 100,100);\r\n      this.widthRight = Math.min(dbToGain(this.rightVolume) * 100,100);\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.meter.stop();\r\n    this.meter.dispose();\r\n    clearInterval(this.intervalId);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.meter {\r\n  grid-row: 3;\r\n  border-radius: 0.2vw;\r\n  margin: 0vw 0.3vw 0.3vw;\r\n  display: flex;\r\n  border: 0.1vw solid #334030;\r\n}\r\n.signal {\r\n  height: 100%;\r\n  border-radius: 0.05vw;\r\n}\r\n.signalSum {\r\n  margin: 0.3vw;\r\n  display: grid;\r\n  grid-template-rows: 45% 10% 45%;\r\n  width: 100%;\r\n}\r\n</style>","import { render } from \"./Meter.vue?vue&type=template&id=570ba9f7&scoped=true\"\nimport script from \"./Meter.vue?vue&type=script&lang=js\"\nexport * from \"./Meter.vue?vue&type=script&lang=js\"\n\nimport \"./Meter.vue?vue&type=style&index=0&id=570ba9f7&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-570ba9f7\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"oscilloscope\">\r\n    <canvas ref=\"canvas\" class=\"oscilloscopeCanvas\" :style=\"this.oscilloscopeCanvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      oscilloscopeData: [],\r\n      timing: 10,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.oscilloscope = new Tone.Waveform();\r\n    Tone.getDestination().connect(this.oscilloscope);\r\n    this.startOscilloscope();\r\n\r\n    // use the ref to get the canvas element\r\n    this.canvas = this.$refs.canvas;\r\n\r\n    // set the canvas width and height to 100%\r\n    this.canvas.width = 4*this.canvas.offsetWidth;\r\n    this.canvas.height = 4*this.canvas.offsetHeight;\r\n\r\n    // get the canvas context\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n  },\r\n  methods: {\r\n    setTiming(timing) {\r\n      this.timing = timing;\r\n      clearInterval(this.intervalId);\r\n      this.startOscilloscope();\r\n    },\r\n    startOscilloscope() {\r\n        //console.log(\"avviando oscilloscope con timer \"+this.timing)\r\n      this.intervalId = setInterval(() => {\r\n        this.updateOscilloscopeData();\r\n      }, this.timing);\r\n    },\r\n    draw(data) {\r\n      // clear the canvas\r\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n      // draw the data on the canvas\r\n      // set the line color\r\n      this.ctx.strokeStyle = \"#658060\";\r\n      // set the line width\r\n      this.ctx.lineWidth = 6;\r\n      this.ctx.beginPath();\r\n\r\n      // loop through the data and plot it on the canvas\r\n      for (let i = 0; i < data.length; i++) {\r\n        // calculate the x and y position of the point\r\n        let x = i * (this.canvas.width / data.length);\r\n        let y = (this.canvas.height / 2) * (1 - data[i]);\r\n\r\n        // move to the x and y position\r\n        this.ctx.moveTo(x, y);\r\n        // draw a line to the next point\r\n        this.ctx.lineTo(x + this.canvas.width / data.length, y);\r\n      }\r\n      // draw the line\r\n      this.ctx.stroke();\r\n      this.ctx.moveTo(0, 0);\r\n    },\r\n    updateOscilloscopeData() {\r\n      this.oscilloscopeData = this.oscilloscope.getValue();\r\n      this.draw(this.oscilloscopeData);\r\n      //console.log(this.oscilloscopeData);\r\n    },\r\n  },\r\n  computed: {\r\n    oscilloscopeCanvas(){\r\n      return{\r\n        background: this.colors.green.glow,\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.oscilloscope.dispose();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.oscilloscope {\r\n  grid-row: 2;\r\n  margin: 0.15vw 0.3vw 0.3vw;\r\n  box-sizing: border-box;\r\n  \r\n}\r\n.oscilloscopeCanvas {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #caffbf;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./Oscilloscope.vue?vue&type=template&id=127e937a\"\nimport script from \"./Oscilloscope.vue?vue&type=script&lang=js\"\nexport * from \"./Oscilloscope.vue?vue&type=script&lang=js\"\n\nimport \"./Oscilloscope.vue?vue&type=style&index=0&id=127e937a&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"spectral-analyzer\">\r\n    <canvas class=\"analyzerCanvas\" ref=\"canvas\" :style=\"this.analyzerCanvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport { dbToGain } from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      timing: 10,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.analyser = new Tone.Analyser(\"fft\", 2048);\r\n    this.canvasCtx = this.$refs.canvas.getContext(\"2d\");\r\n    Tone.getDestination().connect(this.analyser);\r\n    this.startAnalyzer()\r\n  },\r\n  methods: {\r\n    draw() {\r\n      //requestAnimationFrame(this.draw);\r\n\r\n      this.data = this.analyser.getValue();\r\n      this.canvasCtx.strokeStyle = \"#658060\";\r\n      //console.log(this.data)\r\n\r\n      // clear the canvas\r\n      this.canvasCtx.clearRect(\r\n        0,\r\n        0,\r\n        this.$refs.canvas.width,\r\n        this.$refs.canvas.height\r\n      );\r\n        let x\r\n\r\n        \r\n\r\n      // render the analysis on the canvas\r\n      for (let i = 0; i < this.data.length; i++) {\r\n        \r\n        this.value = 6*dbToGain(this.data[i])*this.$refs.canvas.height;\r\n        //console.log(this.value)\r\n        x = (Math.log10(i) / Math.log10(2048)) * this.$refs.canvas.width\r\n        this.canvasCtx.fillStyle = \"black\";\r\n        this.canvasCtx.fillRect(x, this.$refs.canvas.height - this.value, 1, this.value);\r\n      }\r\n    },\r\n    startAnalyzer() {\r\n      //console.log(this.$refs.canvas.height)\r\n        //console.log(\"avviando analyzer con timer \"+this.timing)\r\n      this.intervalId = setInterval(() => {\r\n        this.draw();\r\n      }, 10);\r\n    },\r\n  },\r\n  computed: {\r\n    analyzerCanvas(){\r\n      return{\r\n        background: this.colors.green.glow\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {},\r\n};\r\n</script>\r\n\r\n<style>\r\n.spectral-analyzer{\r\n  grid-row: 1;\r\n  margin: 0.3vw 0.3vw 0.15vw;\r\n  box-sizing: border-box;\r\n}\r\n.analyzerCanvas {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./SpecAnalyzer.vue?vue&type=template&id=d4e2b2a4\"\nimport script from \"./SpecAnalyzer.vue?vue&type=script&lang=js\"\nexport * from \"./SpecAnalyzer.vue?vue&type=script&lang=js\"\n\nimport \"./SpecAnalyzer.vue?vue&type=style&index=0&id=d4e2b2a4&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ToolsHost.vue?vue&type=template&id=72783103\"\nimport script from \"./ToolsHost.vue?vue&type=script&lang=js\"\nexport * from \"./ToolsHost.vue?vue&type=script&lang=js\"\n\nimport \"./ToolsHost.vue?vue&type=style&index=0&id=72783103&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"modHost\" :style=\"modHost\">\r\n     <VolEnvelope ref=\"volEnvelope\"/>\r\n    <template\r\n      v-for=\"modulator in envList\"\r\n      :key=\"modulator.id\">\r\n\r\n       <Envelope\r\n        :id=\"modulator.id\"\r\n        ref=\"envelopes\"\r\n      @isDraggableUpdate=\"handleDraggableUpdate\"/>\r\n    </template>\r\n    <template\r\n        v-for=\"modulator in lfoList\"\r\n        :key=\"modulator.id\">\r\n\r\n\r\n       <Lfo\r\n          :id=\"modulator.id\"\r\n          ref=\"lfos\"/>\r\n    </template>\r\n    <ModSelector\r\n      @selection=\"changeSelection\"\r\n      ref=\"modSelector\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Envelope from \"./Envelope.vue\";\r\nimport Lfo from \"./Lfo.vue\";\r\nimport VolEnvelope from \"./VolEnvelope.vue\";\r\nimport ModSelector from \"./ModSelector.vue\";\r\nimport { toRaw } from 'vue';\r\n\r\nexport default {\r\n  components: {\r\n    VolEnvelope,\r\n    Envelope,\r\n    Lfo,\r\n    ModSelector,\r\n  },\r\n  data() {\r\n    return {\r\n      name: \"modHost\",\r\n      //number of total modulators\r\n\r\n      //visible modulator\r\n      selection: 'volEnvelope',\r\n      selectionType: null,\r\n\r\n      //list of modulators\r\n      envList: [],\r\n      lfoList: [],\r\n    };\r\n  },\r\n  created() {\r\n    //create arrays of modulators\r\n    for (let i = 1; i < this.nEnvelopes+1; i++) {\r\n      this.envList.push({ id: i, ref: i });\r\n    }\r\n    for (let i = 1; i < this.nLfo+1; i++) {\r\n      this.lfoList.push({ id: i, ref: i });\r\n    }\r\n    //console.log(toRaw(this.modulatorList));\r\n  },\r\n  mounted() {\r\n    //unhide main volume modulator\r\n    this.$refs.volEnvelope.unHide();\r\n    //console.log(this.$refs.volEnvelope)\r\n\r\n    //listens to link and unlink events\r\n    document.addEventListener(\"link\", this.handleLink)\r\n    document.addEventListener(\"unLink\", this.handleUnlink)\r\n  },\r\n  computed: {\r\n    modHost() {\r\n      return{\r\n        background: this.colors.gray.glow,\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleDraggableUpdate(isDraggable){\r\n      this.$refs.modSelector.isDraggableUpdate(isDraggable)\r\n    },\r\n    handleNewOsc(){\r\n      //initialize volEnvelope on all synth when a new oscillator is added\r\n      this.$refs.volEnvelope.handleNewOsc();\r\n    },\r\n    handleMouseUp(e){\r\n      if(this.selection==='volEnvelope'){\r\n        this.$refs.volEnvelope.handleMouseUp(e)\r\n      }else{\r\n        if(this.selectionType===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[this.selection-1]).handleMouseUp(e);\r\n        }\r\n        if(this.selectionType===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).handleMouseUp(e);\r\n        }\r\n      }\r\n    },\r\n    handleMouseMove(e){\r\n      if(this.selection==='volEnvelope'){\r\n        this.$refs.volEnvelope.handleMouseMove(e)\r\n      }else{\r\n        if(this.selectionType===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[this.selection-1]).handleMouseMove(e);\r\n        }\r\n        if(this.selectionType===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).handleMouseMove(e);\r\n        }\r\n      }\r\n    },\r\n    changeSelection(id, type) {\r\n      //console.log(\"selected \"+id)\r\n      //console.log(this.$refs)\r\n\r\n      //hide old modulator\r\n      if(this.selection==='volEnvelope'){\r\n        this.$refs.volEnvelope.hide()\r\n      }else{\r\n        if(this.selectionType===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[this.selection-1]).hide();\r\n        }\r\n        if(this.selectionType===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).hide();\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).stopOscilloscope();\r\n        }\r\n      }\r\n\r\n\r\n      //show new modulator\r\n      if(id==='volEnvelope'){\r\n        this.$refs.volEnvelope.unHide()\r\n      }else{\r\n        if(type===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[id-1]).unHide();\r\n        }\r\n        if(type===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[id-1]).unHide();\r\n        }\r\n      }\r\n\r\n\r\n      this.selection = id;\r\n      this.selectionType = type;\r\n      \r\n    },\r\n\r\n    //handlers for drag and drop\r\n    handleLink(event){\r\n      //console.log(\"link\")\r\n      let data = event.detail\r\n      //console.log(data)\r\n      //console.log(this.synths)\r\n      this.$refs[data.modulator.type+\"s\"][data.modulator.id-1].link(data.object, data.target, data.color)\r\n    },\r\n    handleUnlink(event){\r\n      //console.log(\"unLink\")\r\n      let data = event.detail\r\n      this.$refs[data.modulator.type+\"s\"][data.modulator.id-1].unLink(data.object, data.target)\r\n\r\n    }\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modHost {\r\n  grid-column: span 2; /* takes 2 spaces horizontally*/\r\n  position: relative;\r\n  display: grid;\r\n  grid-template-rows: 80% 20%;\r\n  grid-template-columns: 100%;\r\n}\r\n</style>","<template>\r\n  <div ref=\"container\" class=\"container hidden\" :style=\"this.container\">\r\n    <div class=\"border\" :style=\"this.border\">\r\n      <EnvelopeVisualizer ref=\"visualizer\" :is_volume=\"false\" @paramRefresh=\"handleRefresh\"/>\r\n      <Knobs ref=\"knobs\" type=\"envelope\" :id=\"this.id\" :parameters=\"this.parameters\"\r\n             @isDraggableUpdate=\"handleDraggableUpdate\"/>\r\n      <div> </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Knobs from \"./Knobs.vue\";\r\nimport EnvelopeVisualizer from \"./EnvelopeVisualizer.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    EnvelopeVisualizer, Knobs,\r\n  },\r\n  props: [\"id\"],\r\n  data() {\r\n    return {\r\n      parameters: {\r\n        attack: 0.01 * 2.5,\r\n        attackCurve: \"linear\",\r\n        decay: 0.1 * 2.5,\r\n        decayCurve: \"linear\",\r\n        releaseCurve: \"linear\",\r\n        release: 0.1 * 2.5,\r\n        sustain: 0.5,\r\n      },\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    //UPDATE PARAMS CHANGED IN ENVELOPE VISUALIZER\r\n    handleRefresh(parameters) {\r\n      this.parameters = parameters\r\n      this.$refs.knobs.updateParameters(this.parameters)\r\n    },\r\n    //-------------METHODS TO LINK WHEN DROPPING\r\n    link(object, target, color) {\r\n      //console.log(\"THINGS HAPPENING \"+section+\" \"+target)\r\n      this.$refs.knobs.addLink(object, target, color)\r\n\r\n    },\r\n    unLink(object, target) {\r\n      //console.log(\"THINGS HAPPENING \")\r\n      //console.log(object)\r\n      //console.log(target)\r\n      this.$refs.knobs.removeLink(object, target)\r\n    },\r\n    handleDraggableUpdate(isDraggable) {\r\n      this.$emit(\"isDraggableUpdate\", isDraggable)\r\n    },\r\n    //--------------METHODS TO SHOW/HIDE------------\r\n    unHide() {\r\n      this.$refs.container.classList.remove(\"hidden\");\r\n    },\r\n    hide() {\r\n      this.$refs.container.classList.add(\"hidden\");\r\n    },\r\n    //----------------------------------------------\r\n    handleMouseMove(e) {\r\n      this.$refs.visualizer.handleMouseMove(e);\r\n      this.$refs.knobs.handleMouseMove(e);\r\n    },\r\n    handleMouseUp(e) {\r\n      this.$refs.visualizer.handleMouseUp(e);\r\n      this.$refs.knobs.handleMouseUp(e);\r\n    }\r\n  },\r\n  computed: {\r\n    border(){\r\n      return{\r\n        background: '#ceeae7'\r\n      }\r\n    },\r\n    container(){\r\n      return{\r\n        background: this.colors.azure.medium\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.border {\r\n  grid-template-columns: calc(6 / 8 * 100%) calc(2 / 8 * 100%);\r\n  grid-template-rows: 100% ;\r\n\r\n  position: relative;\r\n  display: grid;\r\n  width: calc(100% - 0.6vw);\r\n  height: calc(100% - 0.6vw);\r\n  box-sizing: border-box;\r\n  margin: 0.3vw;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n}\r\n\r\n.container {\r\n  grid-column: span 2;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.envelope {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: transparent;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.centering {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>","<template>\r\n  <div class=\"knobs\">\r\n    <div v-for=\"knob in knobList\" :key=\"knob.id\" :ref=\"knob.ref\" class=\"knob\" @mousedown=\"mouseDown(knob.id)\">\r\n      <div class=\"knob_fader_background\"></div>\r\n      <div v-if=\"knob.isOn===true\" class=\"knob_fader\" :style=\"computedFaderStyle(knob.id)\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { toRaw } from 'vue';\r\nexport default {\r\n  props: [\"type\", \"id\", \"parameters\"],\r\n  name: \"Knobs\",\r\n  data() {\r\n    return {\r\n      knobList: [],\r\n      freeKnobs: this.nKnobs,\r\n      isMouseDown: false,\r\n      selectedKnobId: \"\",\r\n    }\r\n  },\r\n  mounted() {\r\n    for (let i = 0; i < this.nKnobs; i++) {\r\n      this.knobList.push({id: i, ref: \"knob\" + i, isOn:false, amount: 0, object: null, target: null});\r\n    }\r\n\r\n    //Set available state (isDraggable)\r\n    this.isDraggable[this.type][this.id] = true\r\n\r\n  },\r\n  methods: {\r\n    updateParameters(parameters=this.parameters){\r\n     // console.log(\"UPDATING PARAMETERS\", parameters)\r\n      for(let i=0; i<this.nKnobs; i++){\r\n        if(this.knobList[i].isOn) {\r\n          this.knobList[i].object.setModulatorParameters(this.type, this.knobList[i].target, parameters)\r\n          break\r\n        }\r\n      }\r\n    },\r\n\r\n    knobText(id){\r\n      if(this.knobList[id].isOn===true){\r\n        return this.knobList[id].amount\r\n      }else{\r\n        return \"yo\"\r\n      }\r\n    },\r\n\r\n    addLink(object, target, color, parameters=this.parameters){\r\n      for(let i=0; i<this.nKnobs; i++){\r\n        if(!this.knobList[i].isOn) {\r\n          this.knobList[i].color = color\r\n          this.knobList[i].isOn = true;\r\n          this.knobList[i].amount= 0.5;\r\n          this.knobList[i].object = object\r\n          this.knobList[i].target = target\r\n          this.freeKnobs -= 1;\r\n\r\n          //set modulator amount at object\r\n          console.log(\"ADDING LINK\")\r\n          console.log(parameters)\r\n          object.setModulatorParameters(this.type, target, parameters)\r\n          object.setModulatorAmount(this.type, target, this.knobList[i].amount)\r\n          break;\r\n        }\r\n      }\r\n      if (this.freeKnobs === 0) this.isDraggable[this.type][this.id] = false\r\n      this.$emit(\"isDraggableUpdate\", this.isDraggable)\r\n      //todo: event to set isDraggable inside modSelector NOT WORKING\r\n    },\r\n\r\n    removeLink(object, target){\r\n      //console.log(\"REMOVING LINK TO\"+target)\r\n      //console.log(object)\r\n\r\n      this.knobList.forEach((knob) => {\r\n        knob.amount = knob.amount+0.01\r\n        knob.amount = knob.amount-0.01\r\n        knob = toRaw(knob)\r\n        if (knob.object === object && knob.target === target) {\r\n          knob.object.setModulatorAmount(this.type, target, 0)\r\n          //remove info from knob\r\n          knob.amount = 0\r\n          knob.isOn = false\r\n          knob.object = null\r\n          knob.target = null\r\n        }\r\n      })\r\n      this.freeKnobs++;\r\n      this.isDraggable[this.type][this.id] = true\r\n    },\r\n\r\n    handleMouseMove(e) {\r\n\r\n      if(this.isMouseDown &&  this.knobList[this.selectedKnobId].isOn){\r\n        this.knobList[this.selectedKnobId].amount = this.knobList[this.selectedKnobId].amount - Math.floor(e.movementY) / 100;\r\n        this.knobList[this.selectedKnobId].amount = Math.max(this.knobList[this.selectedKnobId].amount, 0)\r\n        this.knobList[this.selectedKnobId].amount = Math.min(this.knobList[this.selectedKnobId].amount, 1)\r\n        this.knobList[this.selectedKnobId].object.setModulatorAmount(this.type, this.knobList[this.selectedKnobId].target, this.knobList[this.selectedKnobId].amount)\r\n\r\n      }\r\n\r\n    },\r\n\r\n    mouseDown(knobId){\r\n      this.isMouseDown = true;\r\n      this.selectedKnobId = knobId;\r\n    },\r\n\r\n    computedFaderStyle(id) {\r\n      let rawKnobAmount = this.knobList[id].amount\r\n        return {\r\n          backgroundColor: this.knobList[id].color,\r\n          height: (rawKnobAmount * 100).toString() + \"%\"\r\n        }\r\n    },\r\n\r\n    handleMouseUp() {\r\n      this.isMouseDown = false;\r\n    },\r\n  },\r\n  computed: {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.knobs {\r\n  margin: 2%;\r\n  border-radius: 0.3vw;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  display: grid;\r\n  grid-template-rows: repeat(3, 1fr);\r\n  column-gap: 1vw;\r\n  row-gap: 1vw;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  align-content: center;\r\n  justify-content: center;\r\n  align-items: stretch;\r\n  justify-items: center;\r\n  padding: 4%;\r\n  border: 0.06vw solid black;\r\n}\r\n\r\n.knob {\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  position: relative;\r\n  vertical-align: bottom;\r\n  background-color: whitesmoke;\r\n  display: grid;\r\n}\r\n\r\n.knob_fader {\r\n  position: absolute;\r\n  height: 0%;\r\n  box-sizing: border-box;\r\n  align-self: end;\r\n  width: 100%;\r\n  background-color: transparent;\r\n  border-bottom-left-radius: 0.4vw;\r\n  border-bottom-right-radius: 0.4vw;\r\n  background-clip: content-box;\r\n  padding: 0.1vw;\r\n  z-index: 101;\r\n}\r\n\r\n.knob_fader_background {\r\n  clip-path: circle(50%);\r\n  box-sizing: border-box;\r\n  aspect-ratio: 1/1;\r\n  height: 100%;\r\n  background-color: transparent;\r\n  border: 0.1vw solid black;\r\n  border-radius: 50%;\r\n  z-index: 102;\r\n}\r\n</style>","import { render } from \"./Knobs.vue?vue&type=template&id=c591721c&scoped=true\"\nimport script from \"./Knobs.vue?vue&type=script&lang=js\"\nexport * from \"./Knobs.vue?vue&type=script&lang=js\"\n\nimport \"./Knobs.vue?vue&type=style&index=0&id=c591721c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c591721c\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"envelope_container\" :style=\"this.envelope_container\">\r\n        <div class=\"envelope\" ref=\"envelope\" :style=\"this.adsr\">\r\n            <div class=\"attack_area\" :style=\"attack_area\" @mousedown=\"attack_down()\"></div>\r\n            <div class=\"decay_area\" :style=\"decay_area\" @mousedown=\"decay_down()\"></div>\r\n            <div class=\"sustain_area\" :style=\"sustain_area\" @mousedown=\"sustain_down()\"></div>\r\n            <div class=\"release_area\" :style=\"release_area\" @mousedown=\"release_down()\"></div>\r\n            <div class=\"attack_dot\" :style=\"attack_dot\" @mousedown=\"attack_down()\"></div>\r\n            <div class=\"decay_dot\" :style=\"decay_dot\" @mousedown=\"decay_down()\"></div>\r\n            <div class=\"release_dot\" :style=\"release_dot\" @mousedown=\"release_down()\"></div>\r\n\r\n            <div class=\"attack\" :style=\"this.attack\">\r\n                <div class=\"attack_color\" :style=\"this.attack_Color\"></div>\r\n            </div>\r\n            <div class=\"decay\" :style=\"this.decay\">\r\n                <div class=\"decay_head\" :style=\"this.decay_head\"></div>\r\n                <div class=\"decay_color\" :style=\"this.decay_Color\"></div>\r\n            </div>\r\n            <div class=\"sustain\" :style=\"this.sustain\">\r\n                <div class=\"sustain_head\" :style=\"this.sustain_head\"></div>\r\n                <div class=\"sustain_color\" :style=\"this.sustain_Color\"></div>\r\n            </div>\r\n            <div class=\"release\" :style=\"this.release\">\r\n                <div class=\"release_color\" :style=\"this.release_Color\"></div>\r\n            </div>\r\n\r\n            <div class=\"space\" :style=\"this.space\"></div>\r\n\r\n            <!--<div class=\"time_strech\" :style=\"this.time_Stretch\"></div>-->\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: ['is_volume'],\r\n    data() {\r\n        return {\r\n            //tempEvent: null,\r\n            type: \"envelope\",\r\n            parameters: {\r\n                attack: 0.01,\r\n                attackCurve: \"linear\",\r\n                decay: 0.1,\r\n                decayCurve: \"linear\",\r\n                sustain: 0.1,\r\n                releaseCurve: \"linear\",\r\n                release: 0.1,\r\n                sustain_lev: 0.5,\r\n                duration: 4,\r\n            },\r\n            is_attack_down: false,\r\n            is_decay_down: false,\r\n            is_sustain_down: false,\r\n            is_release_down: false,\r\n            test: 10,\r\n        };\r\n    },\r\n    mounted() {\r\n        \r\n    },\r\n    methods: {\r\n\r\n        handleMouseMove(e) {\r\n            //console.log(e)\r\n            if (this.isDragging) {\r\n                this.tempEvent = e;\r\n            }\r\n            let p = this.parameters;\r\n            if (this.is_attack_down) { // attack\r\n                if (e.movementX > 0) {\r\n                    /* console.log(p.attack,); */\r\n                    p.attack = Math.min(p.attack + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.decay + p.sustain + p.release));\r\n                }\r\n                if (e.movementX < 0) {\r\n                   /*  console.log(p.attack); */\r\n                    p.attack = Math.max(p.attack + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n            }\r\n            if (this.is_decay_down) { // decay\r\n                if (e.movementX > 0) {\r\n                   /*  console.log(p.attack,); */\r\n                    p.decay = Math.min(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.attack + p.sustain + p.release));\r\n                }\r\n                if (e.movementX < 0) {\r\n                    /* console.log(p.attack); */\r\n                    p.decay = Math.max(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n                if (e.movementY > 0) {\r\n                    p.sustain_lev = Math.max(p.sustain_lev - e.movementY / 100, 0);\r\n                } else if (e.movementY < 0) {\r\n                    p.sustain_lev = Math.min(p.sustain_lev - e.movementY / 100, 1);\r\n                }\r\n                /* console.log(p.sustain_lev); */\r\n            }\r\n            if (this.is_sustain_down) { // sustain\r\n                if (e.movementX > 0) {\r\n                    /* console.log(p.attack,); */\r\n                    p.decay = Math.min(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.attack + p.sustain + p.release));\r\n                }\r\n                if (e.movementX < 0) {\r\n                    /* console.log(p.attack); */\r\n                    p.decay = Math.max(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n                if (e.movementY > 0) {\r\n                    p.sustain_lev = Math.max(p.sustain_lev - e.movementY / 100, 0);\r\n                } else if (e.movementY < 0) {\r\n                    p.sustain_lev = Math.min(p.sustain_lev - e.movementY / 100, 1);\r\n                }\r\n                /* console.log(p.sustain_lev); */\r\n            }\r\n            if (this.is_release_down) { // release\r\n                if (e.movementX > 0) {\r\n                    /* console.log(p.attack,); */\r\n                    p.release = Math.min(p.release + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.decay + p.sustain + p.attack));\r\n                }\r\n                if (e.movementX < 0) {\r\n                    /* console.log(p.attack); */\r\n                    p.release = Math.max(p.release + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n            }\r\n            if (this.is_attack_down || this.is_decay_down || this.is_sustain_down || this.is_release_down) {\r\n\r\n                let parameters = {\r\n                    attack: this.parameters.attack * this.parameters.duration,\r\n                    decay: this.parameters.decay * this.parameters.duration,\r\n                    sustain: this.parameters.sustain_lev,\r\n                    release: this.parameters.release * this.parameters.duration,\r\n                }\r\n                this.$emit(\"paramRefresh\", parameters)\r\n            }\r\n\r\n\r\n        },\r\n        handleMouseUp() {\r\n            /*if (this.isDragging) {\r\n              console.log(this.tempEvent.target)\r\n              this.isDragging = false\r\n            }*/\r\n            //console.log(\"mouseUp\");\r\n            this.is_attack_down = false;\r\n            this.is_decay_down = false;\r\n            this.is_sustain_down = false;\r\n            this.is_release_down = false;\r\n        },\r\n        attack_down() {\r\n            if (!this.is_attack_down) this.is_attack_down = true;\r\n        },\r\n        decay_down() {\r\n            if (!this.is_decay_down) this.is_decay_down = true;\r\n        },\r\n        sustain_down() {\r\n            if (!this.is_sustain_down) this.is_sustain_down = true;\r\n        },\r\n        release_down() {\r\n            if (!this.is_release_down) this.is_release_down = true;\r\n        }\r\n    },\r\n    computed: {\r\n        envelope_container() {\r\n            let color = '';\r\n            if (this.$props['is_volume']) color = this.colors.pink.medium\r\n            else color = this.colors.azure.medium\r\n            return {\r\n                background: color\r\n            }\r\n        },\r\n        adsr() {\r\n            /* console.log(((this.parameters.attack - this.parameters.sustain) * 100).toFixed(2)) */\r\n            let color = '';\r\n            if (this.$props['is_volume']) color = '#f8e7e6'\r\n            else color = '#ceeae7'\r\n            return {\r\n                display: \"grid\",\r\n                opacity: '100%',\r\n                background: color,\r\n                gridTemplateColumns: this.parameters.attack * 100 + '% '\r\n                    + Math.ceil(this.parameters.decay * 100) + '% '\r\n                    + Math.ceil(this.parameters.sustain * 100) + '% '\r\n                    + Math.ceil(this.parameters.release * 100) + '% '\r\n                    + '10% '\r\n            };\r\n        },\r\n        attack() {\r\n            return {\r\n                height: \"100%\",\r\n                width: \"100%\",\r\n                clipPath: \"polygon(0% 100%, 100% 0%, 100% 100%)\",\r\n            };\r\n        },\r\n        decay() {\r\n            return {\r\n                height: \"100%\",\r\n            };\r\n        },\r\n        sustain() {\r\n            return {\r\n                display: \"grid\",\r\n                gridTemplateRows:\r\n                    (1 - this.parameters.sustain_lev) * 100 +\r\n                    \"% \" +\r\n                    this.parameters.sustain_lev * 100 +\r\n                    \"%\",\r\n                height: \"100%\",\r\n            };\r\n        },\r\n        release() {\r\n            return {\r\n                height: \"100%\",\r\n                clipPath:\r\n                    \"polygon(0% \" +\r\n                    (1 - this.parameters.sustain_lev) * 100 +\r\n                    \"%, 0% 100%, 100% 100%)\",\r\n            };\r\n        },\r\n        attack_Color() {\r\n            let color = '';\r\n            if (this.$props['is_volume']) color = this.colors.pink.dark\r\n            else color = this.colors.azure.dark\r\n            return {\r\n                height: \"100%\",\r\n                background: color,\r\n            };\r\n        },\r\n        decay_Color() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= this.colors.pink.medium\r\n            else color = this.colors.azure.medium\r\n            return {\r\n                position: 'relative',\r\n                height: \"100%\",\r\n                background: color,\r\n                top: (this.parameters.sustain_lev - 1) * 100 + \"%\",\r\n            };\r\n        },\r\n        sustain_Color() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= this.colors.pink.light\r\n            else color = this.colors.azure.light\r\n            return {\r\n                zIndex: '1',\r\n                height: \"100%\",\r\n                background: color,\r\n            };\r\n        },\r\n        release_Color() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= this.colors.pink.light\r\n            else color = this.colors.azure.light\r\n            return {\r\n                height: \"100%\",\r\n                background: color,\r\n                opacity: '60%'\r\n            };\r\n        },\r\n        decay_head() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= '#f8e7e6'\r\n            else color = '#ceeae7'\r\n            return {\r\n                position: 'relative',\r\n                zIndex: '3',\r\n                background: color,\r\n                opacity:'100%',\r\n                top:'-1%',\r\n                clipPath: \"polygon(0% 0%, 100% 100%, 100% 0%)\",\r\n                height: (1 - this.parameters.sustain_lev) * 100 + \"%\",\r\n                width: \"102%\",\r\n            };\r\n        },\r\n        sustain_head() {\r\n            return {\r\n                background: \"transparent\",\r\n            };\r\n        },\r\n\r\n        attack_dot() {\r\n            let color ='';\r\n            let borderColor='';\r\n            if(this.$props['is_volume']){ \r\n                color= this.colors.pink.dark\r\n                borderColor = this.colors.pink.glow\r\n                }\r\n            else {\r\n                color = this.colors.azure.dark\r\n                borderColor = this.colors.azure.glow\r\n            }\r\n            return {\r\n                border: '.1vw solid ' + borderColor,\r\n                background: color,\r\n                aspectRatio: \"1/1\",\r\n                height: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: this.parameters.attack * 100 - 1 + \"%\",\r\n                top: \"-2%\",\r\n            };\r\n        },\r\n        decay_dot() {\r\n            let color ='';\r\n            let borderColor='';\r\n            if(this.$props['is_volume']){ \r\n                color= this.colors.pink.medium\r\n                borderColor = this.colors.pink.dark\r\n                }\r\n            else {\r\n                color = this.colors.azure.medium\r\n                borderColor = this.colors.azure.dark\r\n            }\r\n            return {\r\n                border: '.1vw solid ' + borderColor,\r\n                background: color,\r\n                aspectRatio: \"1/1\",\r\n                height: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"5\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.decay + this.parameters.attack) * 100 - .9 + \"%\",\r\n                top: (1 - this.parameters.sustain_lev) * 100 - 5 + \"%\",\r\n            };\r\n        },\r\n        release_dot() {\r\n            let color ='';\r\n            let borderColor='';\r\n            if(this.$props['is_volume']){ \r\n                color= this.colors.pink.glow\r\n                borderColor = this.colors.pink.dark\r\n                }\r\n            else {\r\n                color = this.colors.azure.glow\r\n                borderColor = this.colors.azure.dark\r\n            }\r\n            return {\r\n                border: '.1vw solid ' + borderColor,\r\n                opacity: '60%',\r\n                background: color,\r\n                aspectRatio: \"1/1\",\r\n                height: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"2\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.attack + this.parameters.decay + this.parameters.sustain + this.parameters.release) * 100 - 1 + \"%\",\r\n                top: \"95%\",\r\n            };\r\n        },\r\n        space() {\r\n            return {\r\n                background: \"transparent\",\r\n            };\r\n        },\r\n\r\n        attack_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"1/1\",\r\n                width: \"10%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: this.parameters.attack * 100 - 5 + \"%\",\r\n            };\r\n        },\r\n        decay_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"1/1\",\r\n                width: \"10%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.decay + this.parameters.attack) * 100 - 5 + \"%\",\r\n                top: (1 - this.parameters.sustain_lev) * 100 - 20 + \"%\",\r\n            };\r\n        },\r\n        sustain_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"16/9\",\r\n                width: \"10%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.attack + this.parameters.decay + this.parameters.sustain) * 100 - 10 + \"%\",\r\n                top: (1 - this.parameters.sustain_lev) * 100 - 12 + \"%\",\r\n            };\r\n        },\r\n        release_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"1/1\",\r\n                width: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.attack + this.parameters.decay + this.parameters.sustain + this.parameters.release) * 100 - 5 + '%',\r\n                top: '80%'\r\n            };\r\n        },\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.envelope_container {\r\n    position: relative;\r\n    margin: 0.5vw 1vw 0.5vw 1vw;\r\n}\r\n\r\n.envelope {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: transparent;\r\n    box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./EnvelopeVisualizer.vue?vue&type=template&id=e11eb42e&scoped=true\"\nimport script from \"./EnvelopeVisualizer.vue?vue&type=script&lang=js\"\nexport * from \"./EnvelopeVisualizer.vue?vue&type=script&lang=js\"\n\nimport \"./EnvelopeVisualizer.vue?vue&type=style&index=0&id=e11eb42e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e11eb42e\"]])\n\nexport default __exports__","import { render } from \"./Envelope.vue?vue&type=template&id=839ccece&scoped=true\"\nimport script from \"./Envelope.vue?vue&type=script&lang=js\"\nexport * from \"./Envelope.vue?vue&type=script&lang=js\"\n\nimport \"./Envelope.vue?vue&type=style&index=0&id=839ccece&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-839ccece\"]])\n\nexport default __exports__","<template>\r\n  <div ref=\"container\" class=\"container hidden\" :style=\"this.container\">\r\n    <div class=\"border\" :style=\"this.border\">\r\n      <div class=\"lfo_elems_row\" :style=\"this.lfo_elems_row\">\r\n        <!-- MODULATION AMOUNT: REGULATES THE AMPLITUDE OF THE LFO !!!!! broken !!!!!!\r\n      <div class=\"lfoFaderBase volFaderBase\" @mousedown=\"isDepthFaderDown=true\">\r\n        <div class=\"lfoDepthFaderLevel\" :style=\"this.lfoDepthFaderLevel\"></div>\r\n      </div> -->\r\n      <LfoVisualizer ref=\"visualizer\" :freq=\"this.freq\" :depth=\"this.depth\" :wave=\"this.waveform\"></LfoVisualizer>\r\n      <div class=\"lfo_controls_column\" >\r\n        <div class=\"lfoFaderBase freqFader\" :style=\"this.lfoFaderBase\" @mousedown=\"isFreqFaderDown=true\">\r\n          <div class=\"lfoFreqFaderLevel\" :style=\"this.lfoFreqFaderLevel\"></div>\r\n        </div>\r\n        <div class=\"lfo_waveform-btn-selector\" :style=\"lfo_waveform_btn_selector\" @click=\"nextWaveType\">\r\n          <img v-if=\"this.waveform==='sine'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/sine.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.waveform==='triangle'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/triangle.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.waveform==='square'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/square.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.waveform==='sawtooth'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/saw.svg\" alt=\"\" draggable=\"false\">\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <Knobs ref=\"knobs\" type=\"lfo\" :id=\"this.id\" :parameters=\"this.parameters\"/>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport LfoVisualizer from \"@/views/Synth/Modulators/LfoVisualizer\";\r\nimport Knobs from \"./Knobs.vue\";\r\n\r\nconst waveforms = ['sine', 'triangle', 'square', 'sawtooth']\r\nexport default {\r\n  components: { LfoVisualizer, Knobs },\r\n  props: [\"id\"],\r\n\r\n  data() {\r\n    return {\r\n      freq: 10,\r\n      depth: 0.8,\r\n      isDepthFaderDown: false,\r\n      isFreqFaderDown: false,\r\n      waveform: waveforms[0],\r\n      waveformId: 0,\r\n      parameters: {}\r\n\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    //document.addEventListener(\"mousemove\", this.onMouseMove); // todo: remove this\r\n    //console.log(\"mounted - this.waveformId: \" + this.waveformId + \" - this.waveform: \" + this.waveform)\r\n\r\n    this.parameters = {\r\n      frequency: this.freq,\r\n      waveform: this.waveform\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    lfoDepthFaderLevel() {\r\n      //console.log(\"lfoDepthFaderLevel\")\r\n      return {\r\n        top: ((1 - this.depth) * 85).toString() + \"%\"\r\n      }\r\n    },\r\n    lfo_elems_row() {\r\n      return {\r\n        background: this.colors.purple.medium\r\n      }\r\n    },\r\n    lfoFaderBase() {\r\n      return {\r\n        background: this.colors.purple.glow\r\n      }\r\n    },\r\n    lfoFreqFaderLevel() {\r\n      return {\r\n        top: ((20 - this.freq) / 20 * 85).toString() + \"%\",\r\n        background: this.colors.purple.light,\r\n        borderColor: this.colors.purple.dark\r\n      }\r\n    },\r\n    lfo_waveform_btn_selector() {\r\n      return {\r\n        borderColor: this.colors.purple.dark,\r\n        background: this.colors.purple.light,\r\n        color: this.colors.gray.dark\r\n      }\r\n    },\r\n    container(){\r\n      return {\r\n        background: this.colors.purple.glow\r\n      }\r\n    },\r\n    border(){\r\n      return{\r\n        background: this.colors.purple.glow\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    setParams({ freq = this.freq, depth = this.depth, waveform = this.waveform}) {\r\n      if (freq <= 20) {\r\n        this.freq = freq;\r\n      } else {\r\n        this.freq = 20\r\n      }\r\n      if(typeof waveform === 'number') {\r\n        this.waveformId = waveform;\r\n        if(this.waveformId === 0 || this.waveformId === 1) {\r\n          this.waveform = waveforms[this.waveformId]\r\n        } else {\r\n          console.log(\"ERROR: Called Non existing lfo wave type Id\")\r\n        }\r\n      } else if(typeof waveform === 'string'){\r\n        this.waveform = waveform;\r\n        waveforms.forEach( (waveformNameString, index) => {\r\n          if(waveformNameString === this.waveform) this.waveformId = index;\r\n        })\r\n      }\r\n      this.parameters.waveform = this.waveform;\r\n      this.depth = depth;\r\n      this.$refs.visualizer.updateParams({freq: this.freq, depth: this.depth})\r\n      this.$refs.knobs.updateParameters(this.parameters)\r\n\r\n    },\r\n\r\n    nextWaveType(){\r\n      this.waveformId++;\r\n      if(this.waveformId > waveforms.length-1) this.waveformId = 0;\r\n      this.waveform = waveforms[this.waveformId]\r\n      this.parameters.waveform = this.waveform;\r\n      // console.log(\"nextWaveType - this.waveformId: \" + this.waveformId + \" - this.waveform: \" + this.waveform)\r\n\r\n\r\n      //console.log(\"CHANGING WAVE TYPE TO: \" + this.waveform)\r\n      this.$refs.knobs.updateParameters(this.parameters)\r\n      this.$refs.visualizer.updateParams({ waveform: this.waveform, frequency: this.freq })\r\n    },\r\n\r\n    startOscilloscope() {\r\n      //console.log(\"start LFO graphics\")\r\n      this.$refs.visualizer.startOscilloscope();\r\n    },\r\n    stopOscilloscope() {\r\n      //console.log(\"stop LFO graphics\")\r\n      this.$refs.visualizer.stopOscilloscope();\r\n    },\r\n    resetOscilloscope() {\r\n      this.$refs.visualizer.stopOscilloscope();\r\n      this.$refs.visualizer.startOscilloscope();\r\n\r\n    },\r\n    // ---------- USER GESTURE ----------\r\n\r\n    depthFaderSelected() {\r\n      //console.log(\"depthFaderSelected\")\r\n      this.isDepthFaderDown = true;\r\n    },\r\n    freqFaderSelected() {\r\n      //console.log(\"freqFaderSelected\")\r\n      this.isFreqFaderDown = true;\r\n    },\r\n\r\n    handleMouseMove(event) {\r\n      //console.log(\"lfo - handleMouseMove\")\r\n     this.$refs.knobs.handleMouseMove(event)\r\n      if (this.isDepthFaderDown) {\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving dowm\r\n          this.depth = this.depth - event.movementY / 100;\r\n          //console.log(\"moving up\");\r\n        } else {\r\n          // Mouse is moving up\r\n          this.depth = this.depth - event.movementY / 100;\r\n          //console.log(\"moving down\");\r\n        }\r\n        this.depth = Math.max(this.depth, 0);\r\n        this.depth = Math.min(this.depth, 1);\r\n\r\n        //console.log(\"lfo depth: \" + this.depth)\r\n        this.$refs.visualizer.updateParams({depth: this.depth})\r\n      }\r\n      if (this.isFreqFaderDown) {\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving dowm\r\n          this.freq = this.freq - 20 * (event.movementY / 100);\r\n          //console.log(\"moving up\");\r\n        } else {\r\n          // Mouse is moving up\r\n          this.freq = this.freq - 20 * (event.movementY / 100);\r\n        }\r\n        this.freq = Math.max(this.freq, 1);\r\n        this.freq = Math.min(this.freq, 20);\r\n\r\n        //console.log(\"lfo freq: \" + this.freq)\r\n        this.parameters.frequency = this.freq\r\n        this.$refs.visualizer.updateParams({freq: this.freq})\r\n        this.$refs.knobs.updateParameters(this.parameters)\r\n      }\r\n    },\r\n    handleMouseUp() {\r\n      if (this.isFreqFaderDown) this.isFreqFaderDown = false\r\n      if (this.isDepthFaderDown) this.isDepthFaderDown = false\r\n\r\n      this.$refs.knobs.handleMouseUp()\r\n    },\r\n\r\n    unHide() {\r\n      this.$refs.container.classList.remove(\"hidden\");\r\n      this.startOscilloscope()\r\n    },\r\n    hide() {\r\n      this.$refs.container.classList.add(\"hidden\");\r\n    },\r\n\r\n    //-------------METHODS TO LINK WHEN DROPPING\r\n    link(object, target, color) {\r\n      //console.log(\"THINGS HAPPENING \"+section+\" \"+target)\r\n      this.$refs.knobs.addLink(object, target, color)\r\n\r\n    },\r\n    unLink(object, target) {\r\n      //console.log(\"THINGS HAPPENING \")\r\n      //console.log(object)\r\n      //console.log(target)\r\n      this.$refs.knobs.removeLink(object, target)\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.border {\r\n  grid-template-columns: calc(6 / 8 * 100%) calc(2 / 8 * 100%);\r\n  grid-template-rows: 100% ;\r\n\r\n  position: relative;\r\n  display: grid;\r\n  width: calc(100% - 0.6vw);\r\n  height: calc(100% - 0.6vw);\r\n  box-sizing: border-box;\r\n  margin: 0.3vw;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n}\r\n.container {\r\n  grid-column: span 2;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.lfo_elems_row {\r\n  margin: 0;\r\n  padding: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 100%;\r\n  align-items: center;\r\n  justify-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.lfoFaderBase {\r\n  position: absolute;\r\n  top: 5%;\r\n  left: 30%;\r\n  aspect-ratio: 1/10;\r\n  border-radius: 5vw;\r\n  height: 70%;\r\n}\r\n\r\n.lfoDepthFaderLevel {\r\n  position: relative;\r\n  width: 100%;\r\n  border-radius: 5vw;\r\n  height: 15%;\r\n  background-color: white;\r\n  top: 80%\r\n}\r\n\r\n.lfoFreqFaderLevel {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 20%;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-radius: 5vw;\r\n  top: 80%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.lfo_controls_column {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex: 0.9;\r\n  flex-direction: column;\r\n  align-content: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.lfo_waveform-btn-selector {\r\n  position: absolute;\r\n  left: 5%;\r\n  bottom: 5%;\r\n  aspect-ratio: 7/4;\r\n  width: 80%;\r\n  border-radius: 0.3vw;\r\n  border-style: solid;\r\n  border-width: 1px;\r\n  text-align: center;\r\n}\r\n\r\n\r\n.lfo_waveform_btn_icon {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  bottom: 0;\r\n  place-self: center;\r\n  align-self: center;\r\n  margin: 0;\r\n  padding: 0;\r\n  clip-path: circle(9%);\r\n  transform: scale(3.25);\r\n}\r\n</style>","<template>\r\n  <div class=\"lfoOscilloscope\">\r\n    <canvas ref=\"canvas\" class=\"lfoOscilloscopeCanvas\" :style=\"this.oscilloscopeCanvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {nextTick} from \"vue\";\r\n\r\nconst qualFactor = 50\r\nconst sinValsBuffer = new Array(qualFactor).fill(0);\r\nconst triValsBuffer = new Array(qualFactor).fill(0);\r\nconst sqValsBuffer = new Array(qualFactor).fill(0);\r\nconst sawValsBuffer = new Array(qualFactor).fill(0);\r\n\r\n// todo: remap dept in -0.5 + 0.5 range\r\n// todo: start only when needs to be visualized\r\n\r\nexport default {\r\n  components: {},\r\n  props: [\"freq\", \"depth\", \"wave\"],\r\n  data() {\r\n    return {\r\n      timing: 10,\r\n      intervalId: \"\",\r\n      waveform: this.wave\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    //console.log(\"mounted LfoVisual\")\r\n    this.timing = 1000 / (qualFactor * this.$props.freq);\r\n    for (let i = 0; i < qualFactor; i++) {\r\n      sinValsBuffer[i] = Math.sin(Math.PI*2/qualFactor * i) * this.$props.depth;\r\n      triValsBuffer[i] = this.$props.depth - 2*Math.abs(2*(i - qualFactor/2)/qualFactor) * this.$props.depth\r\n      i >= qualFactor/2? sqValsBuffer[i] = this.$props.depth : sqValsBuffer[i] = - this.$props.depth\r\n      sawValsBuffer[i] = this.depth * (2*i/qualFactor -1)\r\n    }\r\n\r\n    switch (this.waveform) {\r\n      case 'sine':\r\n        this.oscilloscopeData = sinValsBuffer\r\n        break;\r\n      case 'triangle':\r\n        this.oscilloscopeData = triValsBuffer\r\n        break;\r\n      case 'square':\r\n        this.oscilloscopeData = sqValsBuffer;\r\n        break;\r\n      case 'sawtooth':\r\n        this.oscilloscopeData = sawValsBuffer;\r\n        break;\r\n      default:\r\n        console.log(\"ERROR - waveform not recognised\")\r\n    }\r\n\r\n    // --------- GRAPHICS INIT --------\r\n    // use the ref to get the canvas element\r\n    this.canvas = this.$refs.canvas;\r\n\r\n    // set the canvas width and height to 100%\r\n    this.canvas.width = 4*this.canvas.offsetWidth;\r\n    this.canvas.height = 4*this.canvas.offsetHeight;\r\n    // get the canvas context\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n  },\r\n\r\n  methods: {\r\n    updateParams({ freq = this.$props.freq, depth = this.$props.depth, waveform = this.waveform }) {\r\n      //this.$props.freq = freq;\r\n      //this.$props.depth = depth;\r\n      this.waveform = waveform;\r\n      //console.log(\"this.wave: \" + waveform);\r\n\r\n      this.timing = 1000 / (qualFactor * this.$props.freq);\r\n      switch (this.waveform) {\r\n        case 'sine':\r\n          this.oscilloscopeData = sinValsBuffer\r\n          break;\r\n        case 'triangle':\r\n          this.oscilloscopeData = triValsBuffer\r\n          break;\r\n        case 'square':\r\n          this.oscilloscopeData = sqValsBuffer;\r\n          break;\r\n        case 'sawtooth':\r\n          this.oscilloscopeData = sawValsBuffer;\r\n          break;\r\n        default:\r\n          console.log(\"ERROR - waveform not recognised\")\r\n      }\r\n\r\n      if(this.intervalId){ clearInterval(this.intervalId) }\r\n      this.stopOscilloscope();\r\n      //console.log(\"end - this.wave: \" + waveform)\r\n\r\n      nextTick(() => {\r\n        this.startOscilloscope()\r\n      })\r\n    },\r\n\r\n    startOscilloscope() {\r\n      this.canvas.width = 4*this.canvas.offsetWidth;\r\n      this.canvas.height = 4*this.canvas.offsetHeight;\r\n      //console.log(\"start - this.waveform: \" + this.waveform)\r\n\r\n     // console.log(\"this.timing: \" + this.timing)\r\n     // console.log(\"avviando oscilloscope con timer \" + this.timing)\r\n      this.intervalId = setInterval(() => {\r\n        let t = this.oscilloscopeData.shift();\r\n        this.oscilloscopeData.push(t);\r\n        this.draw(this.oscilloscopeData);\r\n      }, this.timing);\r\n      //console.log(\"this.timing:  \" + this.intervalId);\r\n    },\r\n\r\n    stopOscilloscope(){\r\n      if(this.intervalId){ clearInterval(this.intervalId) }\r\n    },\r\n\r\n    draw(data) {\r\n      // clear the canvas\r\n      //console.log(\"drawing\")\r\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n      let x, y, y_next;\r\n\r\n      // draw the data on the canvas\r\n      // set the line color\r\n      this.ctx.strokeStyle = \"black\";\r\n      // set the line width\r\n      this.ctx.lineWidth = 2;\r\n      this.ctx.beginPath();\r\n\r\n      y_next = (this.canvas.height / 2) * (1 - data[0]).toFixed(3);\r\n      // loop through the data and plot it on the canvas\r\n      for (let i = 1; i < data.length; i++) {\r\n        y = y_next;\r\n        // calculate the x and y position of the point\r\n        x = i * (this.canvas.width / data.length).toFixed(3);\r\n        y_next = (this.canvas.height / 2) * (1 - data[i]).toFixed(3);\r\n        // move to the x and y position\r\n        this.ctx.moveTo(x, y);\r\n        // draw a line to the next point\r\n        this.ctx.lineTo(x + this.canvas.width / data.length, y_next );\r\n        // console.log(x, y)\r\n      }\r\n      // draw the line\r\n      this.ctx.stroke();\r\n      this.ctx.moveTo(0, 0);\r\n    },\r\n\r\n    beforeDestroy() {\r\n      if (this.oscilloscope) {\r\n        this.oscilloscope.disconnect();\r\n        this.oscilloscope.dispose();\r\n      }\r\n    },\r\n  }, \r\n  computed: {\r\n    oscilloscopeCanvas(){\r\n      return {\r\n        background: this.colors.purple.glow\r\n      } \r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.lfoOscilloscope {\r\n  margin: 0.4vw;\r\n  margin-right: 0.1vw;;\r\n  height: 90%;\r\n  width: 90%;\r\n  border: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n}\r\n\r\n.lfoOscilloscopeCanvas {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 0.2vw;\r\n  border: 0.06vw solid #334030;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n</style>","import { render } from \"./LfoVisualizer.vue?vue&type=template&id=2016eb24\"\nimport script from \"./LfoVisualizer.vue?vue&type=script&lang=js\"\nexport * from \"./LfoVisualizer.vue?vue&type=script&lang=js\"\n\nimport \"./LfoVisualizer.vue?vue&type=style&index=0&id=2016eb24&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Lfo.vue?vue&type=template&id=206c3ea8&scoped=true\"\nimport script from \"./Lfo.vue?vue&type=script&lang=js\"\nexport * from \"./Lfo.vue?vue&type=script&lang=js\"\n\nimport \"./Lfo.vue?vue&type=style&index=0&id=206c3ea8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-206c3ea8\"]])\n\nexport default __exports__","<template>\r\n  <div ref=\"container\" class=\"container hidden\" :style=\"this.container\">\r\n    <div class=\"border\" :style=\"this.border\">\r\n      <EnvelopeVisualizer ref=\"visualizer\" :is_volume=\"true\" @paramRefresh=\"handleRefresh\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport EnvelopeVisualizer from \"./EnvelopeVisualizer.vue\";\r\nexport default {\r\n  props: [\"id\"],\r\n  components: {\r\n    EnvelopeVisualizer\r\n  },\r\n  data() {\r\n    return {\r\n      tempEvent: null,\r\n      type: \"envelope\",\r\n      parameters: {\r\n      },\r\n      knobList: [],\r\n      is_attack_down: false,\r\n      is_decay_down: false,\r\n      is_sustain_down: false,\r\n      is_release_down: false,\r\n    };\r\n  },\r\n  mounted() {\r\n     this.parameters = {\r\n      attack: 0.1,\r\n      attackCurve: \"linear\",\r\n      decay: 0.5,\r\n      decayCurve: \"linear\",\r\n      sustain: 0.5,\r\n      releaseCurve: \"linear\",\r\n      release: 1,\r\n      scale: 1,\r\n    }; \r\n    for (let i = 0; i < 9; i++) {\r\n      this.knobList.push({ id: i, ref: \"knob\" + i });\r\n    }\r\n  },\r\n  methods: {\r\n    handleRefresh(parameters) {\r\n      this.parameters = parameters\r\n      this.synths.list.forEach((synth) => {\r\n        synth.setModulatorParameters(\"envelope\", \"vol\", this.parameters);\r\n      });\r\n    },\r\n    handleNewOsc() {\r\n      //called when a new osc is created to set default values\r\n      this.synths.list.forEach((synth) => {\r\n        synth.setModulatorParameters(\"envelope\", \"vol\", this.parameters);\r\n      })\r\n    },\r\n    unHide() {\r\n      this.$refs.container.classList.remove(\"hidden\");\r\n    },\r\n    hide() {\r\n      this.$refs.container.classList.add(\"hidden\");\r\n    },\r\n    handleMouseMove(e) {\r\n      this.$refs.visualizer.handleMouseMove(e);\r\n    },\r\n    handleMouseUp(e) {\r\n      this.$refs.visualizer.handleMouseUp(e);\r\n    }\r\n  },\r\n  computed: {\r\n    border() {\r\n      return {\r\n        background: '#f8e7e6',\r\n        opacity: '100%'\r\n      }\r\n    },\r\n    container() {\r\n      return {\r\n        background: this.colors.pink.medium\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.border {\r\n  grid-template-columns: 1fr;\r\n  grid-template-rows: 1fr;\r\n\r\n  position: relative;\r\n  display: grid;\r\n  width: calc(100% - 0.6vw);\r\n  height: calc(100% - 0.6vw);\r\n  box-sizing: border-box;\r\n  margin: 0.3vw;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n}\r\n\r\n.container {\r\n  position: relative;\r\n  display: grid;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n</style>","import { render } from \"./VolEnvelope.vue?vue&type=template&id=5b932b12&scoped=true\"\nimport script from \"./VolEnvelope.vue?vue&type=script&lang=js\"\nexport * from \"./VolEnvelope.vue?vue&type=script&lang=js\"\n\nimport \"./VolEnvelope.vue?vue&type=style&index=0&id=5b932b12&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5b932b12\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"buttonList\" :style=\"this.buttonList\">\r\n    <div class=\"identifierVol\" :style=\"buttonColor('mainEnv')\" @click=\"handleClick(null, 'volEnvelope')\">\r\n      <img src=\"@/icons/ADSR.svg\" alt=\"\" draggable=\"false\">\r\n    </div>\r\n    <template v-for=\"button in buttonListEnv\" :key=\"button.id\" :ref=\"button.ref\">\r\n      <div class=\"button\" :style=\"buttonColor('envelope')\">\r\n        <div :style=\"textId\"> {{ button.id }} </div>\r\n        <div class=\"identifier\" @click=\"handleClick(button.id, button.type)\">\r\n\r\n          <img src=\"@/icons/ADSR.svg\" alt=\"\" draggable=\"false\">\r\n        </div>\r\n        <div class=\"draggableArea\" :draggable=\"draggability('envelope', button.id)\"\r\n          @dragstart=\"startDrag($event, button.id, button.type)\">\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <template v-for=\"button in buttonListLfo\" :key=\"button.id\" :ref=\"button.ref\">\r\n      <div class=\"button\" :style=\"buttonColor('lfo')\">\r\n        <div :style=\"textId\"> {{ button.id }} </div>\r\n        <div class=\"identifier\" @click=\"handleClick(button.id, button.type)\"><!-- {{ button.id }} -->\r\n\r\n          <img src=\"@/icons/LFO.svg\" alt=\"\" draggable=\"false\">\r\n        </div>\r\n        <div class=\"draggableArea\" :draggable=\"draggability('lfo', button.id)\"\r\n          @dragstart=\"startDrag($event, button.id, button.type)\">\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  inject: ['dropFeedback'],\r\n  props: [],\r\n  data() {\r\n    return {\r\n      color: {\r\n        mainEnv: this.colors.pink.glow,\r\n        envelope: this.colors.azure.glow,\r\n        lfo: this.colors.purple.glow,\r\n      },\r\n      type: \"volEnvelope\",\r\n\r\n      isDraggable: this.isDraggable,\r\n      buttonListEnv: [],\r\n      buttonListLfo: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    for (let i = 1; i < this.nEnvelopes + 1; i++) {\r\n      this.buttonListEnv.push({ id: i, ref: \"button\" + i, type: \"envelope\" });\r\n    }\r\n    for (let i = 1; i < this.nLfo + 1; i++) {\r\n      this.buttonListLfo.push({ id: i, ref: \"button\" + i, type: \"lfo\" });\r\n    }\r\n    //console.log(this.isDraggable)\r\n\r\n\r\n    //console.log(this.buttonListEnv)\r\n    //console.log(this.buttonListLfo)\r\n\r\n    /*\r\n    this.$on(\"unLink\", (data) => {\r\n          console.log(\"ModSelector disconnecting link from \"+data.modulator.type+\" \"+data.modulator.id+\" to \"+data.section+data.target)})\r\n\r\n     */\r\n\r\n  },\r\n  computed: {\r\n    textId(){\r\n      return {\r\n        fontWeight: \"bold\",\r\n        opacity: \"80%\",\r\n        position: 'absolute',\r\n        fontSize:'.8vw'\r\n      }\r\n    },\r\n    buttonList() {\r\n      switch (this.type) {\r\n        case \"volEnvelope\":\r\n          return{\r\n            backgroundColor: this.colors.pink.medium\r\n          }\r\n          case \"envelope\":\r\n          return{\r\n            backgroundColor: this.colors.azure.medium\r\n          }\r\n          case \"lfo\":\r\n          return{\r\n            backgroundColor: this.colors.purple.glow\r\n          }\r\n      }\r\n      \r\n    } \r\n\r\n  },\r\n  methods: {\r\n    draggability(type, id) {\r\n      //console.log(this.isDraggable)\r\n      //console.log(\"checking draggability of \" + type + \" \" + id)\r\n      return this.isDraggable[type][id]\r\n    },\r\n    isDraggableUpdate(isDraggable) {\r\n      //console.log(\"UPDATE ISDRAGGABLE\")\r\n      //console.log(this.isDraggable)\r\n      this.isDraggable = isDraggable\r\n    },\r\n    buttonColor(type) {\r\n      return {\r\n        backgroundColor: this.color[type]\r\n      }\r\n    },\r\n\r\n    startDrag(event, id, type) {\r\n      //console.log(\"dragging \" + type + \" \" + id)\r\n      event.dataTransfer.dropEffect = \"move\"\r\n      event.dataTransfer.effectAllowed = \"move\"\r\n      let data = { type: type, id: id, color: this.color[type] }\r\n      event.dataTransfer.setData(\"data\", JSON.stringify(data));\r\n      //console.log(data)\r\n    },\r\n    handleClick(id, type) {\r\n      this.type = type\r\n      if (type === \"volEnvelope\") {\r\n        //console.log(\"Selected \" + id)\r\n        this.$emit(\"selection\", type, null);\r\n      } else {\r\n        //console.log(\"Selected \" + type + \" \" + id)\r\n        this.$emit(\"selection\", id, type);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.button {\r\n  display: grid;\r\n  grid-template-columns: 80% 18%;\r\n  flex: 1;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 0.06vw solid black; \r\n  border-radius: 0.2vw;\r\n  padding: 1%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  align-content: center;\r\n  justify-items: stretch;\r\n\r\n}\r\n\r\n.buttonList {\r\n  padding-left: 0.3vw;\r\n  padding-right:  0.3vw;\r\n  padding-bottom: 0.3vw;\r\n  position: relative;\r\n  grid-row: 2;\r\n  display: flex;\r\n  flex-basis: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.identifier {\r\n  height: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  /* border: 0.1vw solid black; */\r\n  display: flex;\r\n\r\n}\r\n\r\n.identifierVol {\r\n  border: 0.06vw solid black; \r\n  border-radius: 0.2vw;\r\n  flex: 1;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  height: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.draggableArea {\r\n  border-radius: 50%;\r\n  display: flex;\r\n  border: 0.1vw solid black;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  font-size: .9vw;\r\n  align-items: flex-end;\r\n  justify-content: center;\r\n}.draggableArea:hover {\r\n  opacity: 40%;\r\n}\r\n.identifier img {\r\n  position: relative;\r\n  opacity: 60%;\r\n  width: 4vw;\r\n  aspect-ratio: 1/1;\r\n}\r\n.identifierVol img {\r\n  position: relative;\r\n  opacity: 60%;\r\n  width: 4vw;\r\n  aspect-ratio: 1/1;\r\n}\r\n.identifier img:hover {\r\n  opacity: 40%;\r\n}\r\n.identifierVol img:hover {\r\n  opacity: 40%;\r\n}\r\n</style>","import { render } from \"./ModSelector.vue?vue&type=template&id=65818cbb&scoped=true\"\nimport script from \"./ModSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ModSelector.vue?vue&type=script&lang=js\"\n\nimport \"./ModSelector.vue?vue&type=style&index=0&id=65818cbb&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-65818cbb\"]])\n\nexport default __exports__","import { render } from \"./ModHost.vue?vue&type=template&id=0f69bcd5&scoped=true\"\nimport script from \"./ModHost.vue?vue&type=script&lang=js\"\nexport * from \"./ModHost.vue?vue&type=script&lang=js\"\n\nimport \"./ModHost.vue?vue&type=style&index=0&id=0f69bcd5&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0f69bcd5\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"span\" @mouseleave=\"handleMouseLeave\">\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct1\"\r\n        :octaveNumber=\"1\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct2\"\r\n        :octaveNumber=\"2\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct3\"\r\n        :octaveNumber=\"3\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <MIDIKeyboard @MIDIDown=\"handleMIDIDown\" @MIDIUp=\"handleMIDIUp\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MIDIKeyboard from \"./MIDIKeyboard.vue\";\r\nimport Octave from \"./Octave.vue\";\r\n\r\nexport default {\r\n  name: \"PianoKeyboard\",\r\n  components: {\r\n    Octave,\r\n    MIDIKeyboard,\r\n  },\r\n  data() {\r\n    return {\r\n      //From here we can transpose the whole keyboard by octaves\r\n      ocTranspose: 1,\r\n      // Object to track which keys are currently being held down\r\n      keysDown: {},\r\n      keys: \"awsedftgyhujkolp\",\r\n      notes: [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"],\r\n      //Transposition amount (in octaves) for the computer keyboard\r\n      keyboardTranspose: 0,\r\n      mouseDown: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    // Add keydown and keyup event listeners to the window object\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n    window.addEventListener(\"keyup\", this.handleKeyUp);\r\n  },\r\n  beforeDestroy() {\r\n    // Remove keydown and keyup event listeners from the window object\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n    window.removeEventListener(\"keyup\", this.handleKeyUp);\r\n  },\r\n\r\n  methods: {\r\n    handleMouseUp(){\r\n      this.mouseDown = false\r\n    },\r\n    handleKeyDown(event) {\r\n      // If the key is not currently being held down, handle the keydown event\r\n      if (!this.keysDown[event.key] && this.keys.includes(event.key)) {\r\n        let note = this.notes[this.keys.indexOf(event.key) % 12];\r\n        let octave = parseInt(this.keys.indexOf(event.key) / 12, 10);\r\n        this.handleNoteDown(note, 2 + octave + this.keyboardTranspose, 100);\r\n        // Set keyDown flag to true\r\n        this.keysDown[event.key] = true;\r\n        // Change color on keyboard\r\n        if (\r\n          2 + octave + this.keyboardTranspose > 0 &&\r\n          2 + octave + this.keyboardTranspose < 4\r\n        )\r\n          this.$refs[\r\n            \"oct\" + (2 + octave + this.keyboardTranspose)\r\n          ].switchColorPress(note);\r\n      }\r\n      // Change octave of computer keyboard with z or x\r\n      if (!this.keysDown[event.key] && event.key == \"z\") {\r\n        this.keyboardTranspose = this.keyboardTranspose - 1;\r\n      }\r\n      if (!this.keysDown[event.key] && event.key == \"x\") {\r\n        this.keyboardTranspose = this.keyboardTranspose + 1;\r\n      }\r\n    },\r\n    handleKeyUp(event) {\r\n      // If the key is currently being held down, handle the keyup event\r\n      if (this.keysDown[event.key]) {\r\n        let note = this.notes[this.keys.indexOf(event.key) % 12];\r\n        let octave = parseInt(this.keys.indexOf(event.key) / 12, 10);\r\n        this.handleNoteUp(note, 2 + octave + this.keyboardTranspose);\r\n        // Set keyDown flag to false\r\n        this.keysDown[event.key] = false;\r\n        // Change color on keyboard\r\n        if (\r\n          2 + octave + this.keyboardTranspose > 0 &&\r\n          2 + octave + this.keyboardTranspose < 4\r\n        )\r\n          this.$refs[\r\n            \"oct\" + (2 + octave + this.keyboardTranspose)\r\n          ].switchColorRelease(note);\r\n      }\r\n    },\r\n    handleMIDIDown(note, octave, velocity) {\r\n      if (octave > 0 && octave < 4)\r\n        this.$refs[\"oct\" + octave].switchColorPress(note);\r\n      this.synths.list.forEach(synth => {\r\n        //console.log(\"Play note: \"+(note+octave)+\" at velocity: \"+velocity+\" from MIDI\")\r\n        synth.playNote(note+octave, velocity);\r\n      });\r\n      //play filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].playNote()\r\n        }\r\n      }\r\n      this.$emit(\"noteDown\", note)\r\n    },\r\n    handleMIDIUp(note, octave) {\r\n      //console.log(\"MIDI released \"+note+octave)\r\n      if (octave > 0 && octave < 4)\r\n        this.$refs[\"oct\" + octave].switchColorRelease(note);\r\n      this.synths.list.forEach(synth => {\r\n        synth.stopNote(note+octave);\r\n      });\r\n      //stop filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].stopNote()\r\n        }\r\n      }\r\n    },\r\n\r\n    handleNoteDown(note, octave, velocity = 100) {\r\n      let finalOctave = parseInt(octave) + this.ocTranspose;\r\n      //console.log(note+finalOctave+\" pressed\")\r\n      this.synths.list.forEach(synth => {\r\n        synth.playNote(note+finalOctave, velocity);\r\n        //console.log(synth)\r\n      });\r\n      \r\n      //play filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].playNote()\r\n        }\r\n      }\r\n      this.$emit(\"noteDown\", note+finalOctave)\r\n    },\r\n    handleNoteUp(note, octave) {\r\n      let finalOctave = parseInt(octave) + this.ocTranspose;\r\n      //console.log(note+finalOctave+\" released\")\r\n      this.synths.list.forEach(synth => {\r\n        synth.stopNote(note+finalOctave);\r\n      });\r\n      //stop filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].stopNote()\r\n        }\r\n      }\r\n    },\r\n  }\r\n  \r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  background-color: white;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  border-top: .1vw solid gray\r\n}\r\n\r\n.span {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  grid-row: 3;\r\n  grid-column: span 3;\r\n}\r\n</style>","<template>\r\n</template>\r\n\r\n<script>\r\nexport default ({\r\n  data() {\r\n    return {\r\n      midiAccess: null,\r\n      midiInput: null,\r\n      notes: [ \"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\" ],\r\n      lowestOctave: -2,\r\n    };\r\n  },\r\n  mounted() {\r\n    navigator.requestMIDIAccess()\r\n      .then((midiAccess) => {\r\n        if(midiAccess.inputs.size>0){\r\n            this.midiAccess = midiAccess;\r\n            this.midiInput = midiAccess.inputs.values().next().value;\r\n            //console.log(this.midiInput);\r\n            this.midiInput.addEventListener('midimessage', this.handleMidiMessage)\r\n        }else{\r\n            //console.log('There are no MIDI inputs available, if you need MIDI, reload the page with a MIDI keyboard connected');\r\n        }\r\n        \r\n      });\r\n  },\r\n  methods: {\r\n    handleMidiMessage(event){\r\n        let [status, note, velocity] = event.data;\r\n        let label = this.notes[note%12]\r\n        let octave = (this.lowestOctave+parseInt(note/12,10))\r\n        if (status == 144) {\r\n            //console.log(`Keydown: note=${label}, velocity=${velocity}`);\r\n            this.$emit(\"MIDIDown\", label, octave, velocity);\r\n        } else if (status == 128) {\r\n            //console.log(`Keyup: note=${label}, velocity=${velocity}`);\r\n            this.$emit(\"MIDIUp\", label, octave);\r\n        }\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./MIDIKeyboard.vue?vue&type=template&id=6a1c7ae9\"\nimport script from \"./MIDIKeyboard.vue?vue&type=script&lang=js\"\nexport * from \"./MIDIKeyboard.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <div class=\"octave\" @mousedown=\"handleMouseDown\" @mouseup=\"handleMouseUp\"  @mouseover=\"handleMouseOver\">\r\n        <div class=\"woctave\">\r\n            <div id=\"C\" ref=\"C\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"D\" ref=\"D\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"E\" ref=\"E\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"F\" ref=\"F\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"G\" ref=\"G\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"A\" ref=\"A\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"B\" ref=\"B\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n        </div>\r\n        <div class=\"boctave\">\r\n            <div id=\"C#\" ref=\"Cs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 3 / 5\"></div>\r\n            <div id=\"D#\" ref=\"Ds\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 6 / 8\"></div>\r\n            <div id=\"F#\" ref=\"Fs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 12 / 14\"></div>\r\n            <div id=\"G#\" ref=\"Gs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 15 / 17\"></div>\r\n            <div id=\"A#\" ref=\"As\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 18 / 20\"></div>\r\n        </div>   \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Octave\",\r\n    props: {\r\n        octaveNumber: Number,\r\n    },\r\n        data() {\r\n        return {\r\n        }\r\n    },\r\n    methods: {\r\n        handleMouseLeave(e){\r\n            if(this.$parent.mouseDown){\r\n                this.notifyUp(e.currentTarget)\r\n            }    \r\n        },\r\n        handleMouseUp(e) {\r\n            this.$parent.mouseDown= false;\r\n            this.notifyUp(e.target)\r\n            //console.log(\"mouse is now up\")\r\n        },\r\n        handleMouseDown(e) {\r\n            this.$parent.mouseDown= true;\r\n            this.notifyDown(e.target)\r\n            //console.log(\"mouse is now down\")\r\n        },\r\n        handleMouseOver(e){\r\n            if(this.$parent.mouseDown){\r\n                //console.log(e.target)\r\n                this.notifyDown(e.target)\r\n\r\n            }\r\n            //console.log(\"mouseDown is \"+this.$parent.mouseDown+\" and is moving\")\r\n        },\r\n        notifyDown(key){\r\n            //emitting cusom event \"keyDown\"\r\n            this.$emit(\"virtualKeyDown\",key.id,this.octaveNumber)\r\n            this.switchColorPress(key.id)\r\n        },\r\n        switchColorPress(note){\r\n            if(note.includes(\"#\")){\r\n                note = note.replace(\"#\",\"s\")\r\n            }\r\n            let key = this.$refs[note];\r\n            //change color of key when pressed\r\n            if (key.classList.contains('wkey')){\r\n                key.classList.remove(\"wUnpressed\")\r\n                key.classList.add(\"pressed\")\r\n            }else{\r\n                key.classList.remove(\"bUnpressed\")\r\n                key.classList.add(\"pressed\")\r\n            }     \r\n        },\r\n        notifyUp(key){\r\n            //emitting cusom event \"keyUp\"\r\n            this.$emit(\"virtualKeyUp\",key.id,this.octaveNumber)\r\n            this.switchColorRelease(key.id)\r\n            //not needed, called in PianoKeyboard (when clicking with the mouse on keyboard all keys are released (color))\r\n        },\r\n        switchColorRelease(note){\r\n            if(note === \"all\"){\r\n                for (const ref of Object.values(this.$refs)) {\r\n                    if (ref.classList.contains('wkey')){\r\n                        ref.classList.add(\"wUnpressed\")\r\n                        ref.classList.remove(\"pressed\")\r\n                    }else{\r\n                        ref.classList.add(\"bUnpressed\")\r\n                        ref.classList.remove(\"pressed\")\r\n                    }\r\n                }  \r\n            }else{\r\n                if(note.includes(\"#\")){\r\n                note = note.replace(\"#\",\"s\")\r\n                }\r\n                let key = this.$refs[note];\r\n                //change color of key when released\r\n                if (key.classList.contains('wkey')){\r\n                    key.classList.add(\"wUnpressed\")\r\n                    key.classList.remove(\"pressed\")\r\n                }else{\r\n                    key.classList.add(\"bUnpressed\")\r\n                    key.classList.remove(\"pressed\")\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n    .octave{\r\n        width: 100%;\r\n        height: 100%;\r\n        box-sizing: border-box;\r\n        position:relative;   \r\n    }\r\n    .woctave{\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;      \r\n    }\r\n    .boctave{\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        display: grid;\r\n        grid-template-columns: repeat(21, 1fr);  \r\n        grid-template-rows: 100%;  \r\n    }\r\n    .wkey{\r\n        width: 100%;\r\n        height: 100%;\r\n        border: solid black 0.06vw;\r\n        box-sizing: border-box;\r\n        border-radius: 0.2vw;\r\n        z-index: 1;\r\n    }\r\n    .wUnpressed{\r\n        background-color:#f8e7e6;\r\n        opacity: 40%;\r\n    }\r\n    .bUnpressed{\r\n        background-color:#645352;\r\n    }\r\n    .pressed{\r\n        background-color:#f3a59a;\r\n    }\r\n    .bkey{\r\n        width: 100%;\r\n        height: 60%;\r\n        border: solid black 0.06vw;\r\n        box-sizing: border-box;\r\n        border-radius: 0.2vw;\r\n        position: relative;\r\n        z-index: 1;\r\n    }\r\n    \r\n\r\n</style>","import { render } from \"./Octave.vue?vue&type=template&id=79bc0415\"\nimport script from \"./Octave.vue?vue&type=script&lang=js\"\nexport * from \"./Octave.vue?vue&type=script&lang=js\"\n\nimport \"./Octave.vue?vue&type=style&index=0&id=79bc0415&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PianoKeyboard.vue?vue&type=template&id=438b48db&scoped=true\"\nimport script from \"./PianoKeyboard.vue?vue&type=script&lang=js\"\nexport * from \"./PianoKeyboard.vue?vue&type=script&lang=js\"\n\nimport \"./PianoKeyboard.vue?vue&type=style&index=0&id=438b48db&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-438b48db\"]])\n\nexport default __exports__","import { render } from \"./MainHost.vue?vue&type=template&id=2d5661d2\"\nimport script from \"./MainHost.vue?vue&type=script&lang=js\"\nexport * from \"./MainHost.vue?vue&type=script&lang=js\"\n\nimport \"./MainHost.vue?vue&type=style&index=0&id=2d5661d2&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"about\">\r\n    <h1 :style=\"titleComputedStyle\">Controls</h1>\r\n    <div class=\"controls_section\">\r\n      <div class=\"controls_section_column controls_section_col_1 \" :style=\"controls_section_col_1_style\">\r\n        <h3>Available Controls</h3>\r\n        <ul>\r\n          <li>Oscillator: <br>\r\n            <ul>\r\n              <li>\r\n                Faders:\r\n                <ul>\r\n                  <li>[red]: osc gain</li>\r\n                  <li>[green]: 48 steps pitch shift</li>\r\n                  <li>[azure]: pink noise gain</li>\r\n                </ul>\r\n              </li>\r\n              <li>\r\n                Buttons\r\n                <ul>\r\n                  <li>Activate routing to corresponding filter chain</li>\r\n                </ul>\r\n              </li>\r\n            </ul>\r\n          </li>\r\n\r\n          <br>\r\n\r\n          <li>Filters: <br>\r\n            <ul>\r\n              <li>\r\n                [first] highpass:\r\n                <ul>\r\n                  <li>[horizontal]: cutoff</li>\r\n                  <li>[vertical]: resonance</li>\r\n                </ul>\r\n              </li>\r\n              <li>\r\n                [second] peaking:\r\n                <ul>\r\n                  <li>[horizontal]: frequency</li>\r\n                  <li>[vertical]: Q</li>\r\n                </ul>\r\n              </li>\r\n              <li>\r\n                [third] lowpass:\r\n                <ul>\r\n                  <li>[horizontal]: cutoff</li>\r\n                  <li>[vertical]: resonance</li>\r\n                </ul>\r\n              </li>\r\n              <li>\r\n                Buttons\r\n                <ul>\r\n                  <li>Activate routing to corresponding effects chain</li>\r\n                </ul>\r\n              </li>\r\n            </ul>\r\n          </li>\r\n\r\n          <br>\r\n\r\n          <li>Effects: <br>\r\n            <ul>\r\n              <li>Six effects and bypass:\r\n                <ul>\r\n                  <li>Reverb</li>\r\n                  <li>Delay</li>\r\n                  <li>Distortion</li>\r\n                  <li>Vibrato</li>\r\n                  <li>Pan</li>\r\n                  <li>Chorus</li>\r\n                </ul>\r\n              </li>\r\n              <li>\r\n                Chain volume:\r\n                <ul>\r\n                  <li>Post-effects gain control</li>\r\n                </ul>\r\n              </li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n        <ul>\r\n\r\n        </ul>\r\n      </div>\r\n      <img class=\"controls_section_column controls_section_col_2\" src=\"@/img/synth_controls_legend.png\" alt=\"\">\r\n      <div class=\"controls_section_column controls_section_col_3\" :style=\"controls_section_col_3_style\">\r\n        <h3>Keyboard shortcuts</h3>\r\n        <ul>\r\n          <li>White notes mapping: <br>\r\n            [C, D, E, F, G, A, B, C, D, E, F] <br>\r\n            [A, S, D, F, G, H, J, K, L, , ]\r\n          </li>\r\n        </ul>\r\n        <ul>\r\n          <li>Black notes mapping: <br>\r\n            [C#, D#, _, F#, G#, A#, _, C#, D#] <br>\r\n            [W , E , _, T , Y , U , _, O , P ]\r\n          </li>\r\n        </ul>\r\n        <ul>\r\n          <li>\r\n            <pre>Octave Up:    [X] key</pre>\r\n          </li>\r\n          <li>\r\n            <pre>Octave Down:  [Z] key</pre>\r\n          </li>\r\n        </ul>\r\n        <ul>\r\n          <li>Shift-Click disable:\r\n            <ul>\r\n              <li>Oscillators are removed</li>\r\n              <li>Effects are set to bypass</li>\r\n              <li>Envelope connections are removed</li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <h1 :style=\"titleComputedStyle\">Demo</h1>\r\n    <div class=\"demo_section\">\r\n      <div class=\"controls_section_col_1\" :style=\"controls_section_col_1_style\"></div>\r\n      <div class=\"demo_section_col_2\">\r\n        Song demo create using exclusively signature sounds from ZenytPolisint available <a href=\"https://www.youtube.com/watch?v=cjMXcdHnGRU\">here</a>    </div>\r\n      <div class=\"controls_section_col_3\" :style=\"controls_section_col_3_style\"></div>\r\n    </div>\r\n\r\n    <h1 :style=\"titleComputedStyle\">Routing</h1>\r\n    <div class=\"routing_section\">\r\n      <div class=\"routing_description\" :style=\"routing_description_style\">\r\n        <br>\r\n        Rerouting of the following elements is permitted:\r\n        <ul>\r\n          <li>\r\n            Any of the Envelopes and lfo can be activated or turned off trough the UI. Tonejs polyphony is not able to\r\n            support that, so we implemented our own polyphony.\r\n          </li>\r\n          <li>\r\n            The damp node at the end of each osc can be connected or disconnected from each filter chain using the UI.\r\n            This allows each osc to be routed into any or all the filter chains.\r\n          </li>\r\n          <li>\r\n            The last filter of each filter chain can be connected or disconnected from each effect chain using the UI.\r\n            This allows each filter chain to be routed into any or all the effects chains.\r\n          </li>\r\n        </ul>\r\n        <br>\r\n        Below we provide the Tonejs objects entire routing which is a complete representation of the initial synth\r\n        state.\r\n        <br>\r\n      </div>\r\n      <img class=\"routing_complete_img\" src=\"@/img/tone_routing.png\" alt=\"\">\r\n      <div class =\"osc_routing\">\r\n        <div class=\"routing_osc_description\" :style=\"routing_description_style\">\r\n          <ul>\r\n            <li>\r\n              We implemented polyphony from scratch in order o be able to work with evelopes.<br>\r\n            </li>\r\n            <li>\r\n              Since each voice needs its own modulators, we create and connect them directly in initialization.\r\n              The amount of modulation is initially set to zero and is changed when envelopes are connected trough the UI.\r\n            </li>\r\n            <li>\r\n              When a modulator is connected, a slot in the connection matrix is filled and the amount becomes settable trough the same interface.\r\n              Each modulator can be connected up to nine parameters.\r\n            </li>\r\n            <li>\r\n              The only modulator that can't be rerouted is the first one in the UI, which is the adsr associated with the gain of each voice and its relative noise\r\n            </li>\r\n          </ul>\r\n          <br>\r\n          On the right we provide the voice routing in detail.\r\n          <br>\r\n        </div>\r\n        <img class=\"routing_osc_img\" src=\"@/img/osc_routing.png\" alt=\"\">\r\n      </div>\r\n    </div>\r\n    <h1 :style=\"titleComputedStyle\">Repository</h1>\r\n    <div class=\"repo_description\">\r\n      A live demo of the PolisinT is available <a href=\"https://furiocolombo.github.io/\">here</a>, hosting provided by\r\n      GitHub.<br>\r\n      All code is free and available <a href=\"https://github.com/FurioColombo/FurioColombo.github.io\">here</a>. Feel free to fork\r\n      the repository and play with it!\r\n    </div>\r\n\r\n    <h1 :style=\"titleComputedStyle\">Authors</h1>\r\n    <div class=\"author\">\r\n      <button class=\"author_name\">Colombo Marco Furio</button>\r\n      <br>\r\n      <button class=\"author_code\">10537094</button>\r\n      <button class=\"author_mail\" @click=\"copyText('marcofurio.colombo@polimi.it')\">| marcofurio.colombo@polimi.it |\r\n      </button>\r\n      <button class=\"author_github\" @click=\"openLink('https://github.com/FurioColombo')\">GitHub</button>\r\n    </div>\r\n    <div class=\"author\">\r\n      <button class=\"author_name\">Fratticioli Guglielmo</button>\r\n      <br>\r\n      <button class=\"author_code\">10821800</button>\r\n      <button class=\"author_mail\" @click=\"copyText('guglielmo.fratticioli@mail.polimi.it')\">|\r\n        guglielmo.fratticioli@mail.polimi.it |\r\n      </button>\r\n      <button class=\"author_github\" @click=\"openLink('https://github.com/guglielmofratticioli')\">GitHub</button>\r\n    </div>\r\n    <div class=\"author\">\r\n      <button class=\"author_name\">Pirrello Elia</button>\r\n      <br>\r\n      <button class=\"author_code\">10897020</button>\r\n      <button class=\"author_mail\" @click=\"copyText('elia.pirrello@mail.polimi.it')\">| elia.pirrello@mail.polimi.it |\r\n      </button>\r\n      <button class=\"author_github\" @click=\"openLink('https://github.com/00sconosciuto00')\">GitHub</button>\r\n    </div>\r\n    <div style=\"height: 15%; width: 100%\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nexport default {\r\n\r\n  computed: {\r\n    titleComputedStyle() {\r\n      return {\r\n        backgroundColor: this.colors.orange.glow,\r\n      }\r\n    },\r\n    controls_section_col_1_style() {\r\n      return {\r\n        backgroundColor: this.colors.azure.glow,\r\n      }\r\n    },\r\n    controls_section_col_3_style() {\r\n      return {\r\n        backgroundColor: this.colors.green.glow,\r\n      }\r\n    },\r\n    routing_description_style() {\r\n      return {\r\n        backgroundColor: this.colors.yellow.glow,\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  methods: {\r\n    openLink(url) {\r\n      window.open(url)\r\n    },\r\n\r\n    async copyText(mytext) {\r\n      try {\r\n        await navigator.clipboard.writeText(mytext);\r\n        alert('Copied');\r\n      } catch ($e) {\r\n        alert('Cannot copy');\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n.about {\r\n  height: 100%;\r\n  width: 100%;\r\n  margin: 0;\r\n}\r\n\r\nh1 {\r\n  position: sticky;\r\n  top: 0;\r\n  align-self: self-start;\r\n  justify-self: self-start;\r\n  padding: 1vw;\r\n  font-size: 1.8vw;\r\n  margin-top: 2vw;\r\n  z-index: 101;\r\n}\r\n\r\n.controls_section {\r\n  position: relative;\r\n  display: inline-grid;\r\n  grid-template-columns: 1.8fr 5fr 1.8fr;\r\n  height: 80%;\r\n  width: 100%;\r\n  font-family: monospace;\r\n}\r\n\r\n.controls_section_column {\r\n  margin: 1vw;\r\n  padding: 0.5vw;\r\n  text-align: left;\r\n}\r\n\r\n.controls_section_col_1 {\r\n  margin-bottom: 5vw;\r\n  height: 95%;\r\n}\r\n\r\n.controls_section_col_2 {\r\n  margin-top: -1vw;\r\n  align-self: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: scale-down;\r\n  scale: 95%;\r\n}\r\n\r\n.controls_section_col_3 {\r\n  height: 95%;\r\n  margin-bottom: 5vw;\r\n}\r\n\r\n\r\n.demo_section {\r\n  position: relative;\r\n  display: inline-grid;\r\n  grid-template-columns: 1.8fr 5fr 1.8fr;\r\n  height: 20%;\r\n  width: 100%;\r\n  font-family: monospace;\r\n  font-size: 1vw;\r\n}\r\n\r\n.demo_section_col_2 {\r\n  position: relative;\r\n  top: 40%;\r\n  margin-top: -1vw;\r\n  align-self: center;\r\n  text-align: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: scale-down;\r\n  scale: 95%;\r\n  font-size: 1vw;\r\n}\r\n\r\n.ul {\r\n  list-style-type: circle;\r\n}\r\n\r\n.routing_section {\r\n  display: inline-grid;\r\n  grid-template-rows: 0.12fr 2fr 2fr;\r\n  width: 100%;\r\n  height: 185%;\r\n}\r\n\r\n.routing_description {\r\n  font-size: 1vw;\r\n  text-align: left;\r\n  width: 90%;\r\n  margin: 2vw;\r\n  margin-left: 4vw;\r\n  padding: 1vw;\r\n}\r\n\r\n.osc_routing {\r\n  display: inline-grid;\r\n  grid-template-columns: 1fr 2fr;\r\n  vertical-align: center;\r\n}\r\n\r\n.routing_complete_img {\r\n  width: 100%;\r\n  align-self: center;\r\n  object-fit: scale-down;\r\n  scale: 98%;\r\n}\r\n\r\n.routing_osc_description {\r\n  font-size: 1vw;\r\n  text-align: left;\r\n  width: 90%;\r\n  margin-left: 4vw;\r\n  padding: 2vw;\r\n  align-self: center;\r\n}\r\n\r\n.routing_osc_img {\r\n  width: 100%;\r\n  align-self: center;\r\n  object-fit: scale-down;\r\n  scale: 90%;\r\n  margin-top: -10vw;\r\n  margin-left: 2vw;\r\n}\r\n\r\n.repo_description {\r\n  font-size: 1.3vw;\r\n  padding: 2vw;\r\n}\r\n\r\n.author {\r\n  margin: 2vw;\r\n}\r\n\r\n.author_name {\r\n  font-size: 1.3vw;\r\n  background-color: transparent;\r\n  border: none;\r\n  font-weight: bold;\r\n  width: auto;\r\n}\r\n\r\n.author_code {\r\n  font-size: 1.25vw;\r\n  background-color: transparent;\r\n  border: none;\r\n}\r\n\r\n.author_mail {\r\n  font-size: 1.3vw;\r\n  background-color: transparent;\r\n  border: none;\r\n}\r\n\r\n.author_github {\r\n  font-size: 1.3vw;\r\n  background-color: transparent;\r\n  border: none;\r\n}\r\n\r\n\r\n</style>","import { render } from \"./AboutView.vue?vue&type=template&id=f17ae4e0\"\nimport script from \"./AboutView.vue?vue&type=script&lang=js\"\nexport * from \"./AboutView.vue?vue&type=script&lang=js\"\n\nimport \"./AboutView.vue?vue&type=style&index=0&id=f17ae4e0&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\myZenythPolisinT\\\\zenyth_polisint\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router'\r\nimport MainHost from '../views/MainHost.vue'\r\nimport AboutView from \"@/views/AboutView\";\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'synth',\r\n    component: MainHost\r\n  },\r\n  {\r\n    path: '/about',\r\n    name: 'about',\r\n    component: AboutView\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nconst app = createApp(App).use(router)\r\n//global properties\r\n\r\n//audio\r\napp.config.globalProperties.synths = {\r\n    list: [],\r\n}\r\n\r\napp.config.globalProperties.nFilterChains = 3\r\napp.config.globalProperties.nFiltersXchain = 3\r\napp.config.globalProperties.areFiltersMounted = false\r\n\r\napp.config.globalProperties.nFxChains = 3 //DO NOT CHANGE WITHOUT CHANGING GRID STYLE IN FX\r\napp.config.globalProperties.nFxXchain = 5\r\napp.config.globalProperties.nNodesXfxChain = 7\r\napp.config.globalProperties.areFxMounted = false\r\n\r\napp.config.globalProperties.nModulators = 6\r\napp.config.globalProperties.nEnvelopes = 3\r\napp.config.globalProperties.nLfo = 2\r\napp.config.globalProperties.nKnobs = 9      //DO NOT CHANGE WITHOUT CHANGING GRID STYLE IN KNOBS\r\napp.config.globalProperties.polyphonyVoices = 4\r\n\r\n// init filters global matrix\r\napp.config.globalProperties.filterChains = Array(app.config.globalProperties.nFilterChains)\r\nfor (let i = 0; i < app.config.globalProperties.nFilterChains; i++) {\r\n    app.config.globalProperties.filterChains[i] = Array(app.config.globalProperties.nFiltersXchain)\r\n}\r\n\r\n// init fx global matrix\r\napp.config.globalProperties.fxChains = Array(app.config.globalProperties.nFxChains)\r\nfor (let i = 0; i < app.config.globalProperties.nFxChains; i++) {\r\n    app.config.globalProperties.fxChains[i] = Array(app.config.globalProperties.nNodesXfxChain) // gain nodes at start and end\r\n}\r\n//console.log(app.config.globalProperties.fxChains)\r\n\r\napp.config.globalProperties.colors = {\r\n    green: {light: '#7fe2a6', medium: '#599e74', dark: '#335a42', glow: '#b2eeca'},\r\n    yellow: {light: '#fee573', medium: '#e5ce68', dark: '#b2a051', glow: '#feefab'},\r\n    azure: {light: '#8fe1d8', medium: '#81cbc2', dark: '#649e97', glow: '#b1eae4'},\r\n    purple: {light: '#cdadc4', medium: '#b99cb0', dark: '#a48a9d', glow: '#e1cedc'},\r\n    pink: {light: '#f3a59a', medium: '#db958b', dark: '#c2847b', glow: '#f9d2cd'},\r\n    orange: {light: '#ffc16c', medium: '#e6ae61', dark: '#cc9a56', glow: '#ffd498'},\r\n    gray: {light: '#a8a8a8', medium: '#868686', dark: '#111111', glow: '#f6f6f6'},\r\n}\r\n\r\n//To communicate from dropzone module to dragzone module\r\napp.config.globalProperties.dropFeedback = null\r\napp.provide('dropFeedback', app.config.globalProperties.dropFeedback)\r\n\r\napp.config.globalProperties.isDraggable = {\r\n    envelope: {},\r\n    lfo: {}\r\n}\r\n\r\n\r\napp.mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.p = \"/zenyth-polisint/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkzenyth_polisint\"] = self[\"webpackChunkzenyth_polisint\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], () => (__webpack_require__(2624)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createBlock","_component_router_view","mounted","methods","__exports__","render","class","_createElementVNode","className","src","_imports_0","draggable","_createElementBlock","onMouseup","$options","onMousemove","_hoisted_1","style","_ctx","_hoisted_2","onClick","_hoisted_3","_createVNode","_component_OscHost","ref","onNewOsc","_component_FilterHost","onFilterInitialized","_component_FxHost","_component_ToolHost","_component_ModHost","_component_PianoKeyboard","onNoteDown","onNoteUp","_hoisted_4","_hoisted_6","oscHost","_Fragment","oscList","osc","_component_Osc","id","onDisposed","length","alt","_imports_1","_imports_2","_imports_3","type_button","type_text","$data","this","oscTypeIndex","mod_area","volume_area","pitch_slider","mod_slider","volume_slider","pitch_area","pitch_hand","lineL","lineU","lineR","onDragenter","onDragleave","onDragover","onDrop","$event","onMousedown","_toDisplayString","osc_wave","oscWaveIndex","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","onChainclick","_hoisted_13","vol_damp_factor","MyPolySynth","destination","nVoices","modulatorsData","envelope","vol","amount","parameters","attack","decay","sustain","release","mod","pitch","lfo","frequency","waveform","min","max","synthPreset","type","transpose","partials","pan","dampNode","Gain","gainNode","allVoices","freeVoices","busyVoices","lastNotes","Array","initVoices","connect","index","modulators","signal","scale","lfoGain","gain","synth","createSynth","oscillator","disconnect","dispose","noiseAdsrGain","noiseGain","noise","Tone","voice","target","tempMod","createModulator","createScale","connectModulator","push","initialized","updateModulators","note","velocity","lastNote","shift","toRaw","cancel","triggerAttack","stop","start","triggerRelease","Synth","nextTick","set","Envelope","LFO","console","log","forEach","scaleSetter","modulatorSetter","modulator","Math","chain","detune","volume","modulation","updateSynths","route","wave_types","osc_types","components","SineIcon","SquareIcon","TriangleIcon","SawtoothIcon","data","color","colors","pink","azure","green","maxPitch","minPitch","waveform_btn_style","wave_icon_size","is_modulationDown","is_volumeDown","is_pitchDown","isFilterChainRouteActive","props","document","addEventListener","onMouseMove","onMouseUp","window","resizeGraphics","polyphonyVoices","setParameters","gainToDb","synths","list","initConnections","$emit","computed","osc_container","background","fontSize","glow","gray","dark","medium","transform","opacity","backgroundColor","borderLeft","border","chain_buttons","button_1","purple","light","button_2","button_3","handleDrop","event","JSON","parse","dataTransfer","getData","dispatchEvent","CustomEvent","detail","object","handleDragEnter","handleDragLeave","unlinkMod","computedModulation","width","height","borderRadius","position","right","display","left","bottom","computedModText","key","disconnectDispose","splice","indexOf","filterChains","getToneFilter","body","clientWidth","e","movementY","movementX","floor","modulationDown","volumeDown","pitchDown","nextOscType","nextWaveform","unmounted","removeEventListener","Osc","name","i","addOsc","handleNewOsc","$refs","removeOsc","voidBorder","filterHost","chainList","_component_FilterChain","chainLine","chainDot","filterList","filter","_component_Filter","chainId","filter_type","chainColor","onFiltersMounted","handleFiltersMounted","_hoisted_5","filter_logo","resonance","toFixed","logo_text_back","MyFilter","cutoff","activeNotes","initFilterParams","self","cutoffLogMapping","pow","log10","resonanceRangeNormalizer","Q","err","x","error","yellow","is_logoDown","getCutoff","getResonance","nFiltersXchain","nFilterChains","zIndex","top","setResonance","setCutoff","cursor","logoDown","getMyFilter","computedHeadStyle","computedGlow","computedLP","computedHP","computedBDMaks","clip","clipPath","computedBD","computedBDCircle","logo","filterTypes","Filter","nFilters","isFxChainRouteActive","fx_chain_1","fx_chain_2","fx_chain_3","$props","aspectRatio","fxChains","setRouting","FilterChain","chain_colors","fxBack","fxHost","chainHead1","chainHead2","chainHead3","fx","_component_FxCell","item","onFxMounted","initFxConnections","gainList","_imports_4","_imports_5","typeId","iconDiv","onMouseover","onIconEnter","onMouseout","_hoisted_7","MyEffect","effect","generateToneFx","createReverb","createDelay","createDistortion","createVibrato","createPan","createChorus","setFxParams","wet","delayTime","feedback","distortion","depth","coeff","spread","toString","Reverb","PingPongDelay","Distortion","Vibrato","Panner","Chorus","types","Fx_colors","is_down","startX","startY","endX","endY","threshold","nFxChains","nFxXchain","computedGlowStyle","iconDivBlack","onIconLeave","isSVGTag","nextFx","distance","sqrt","generateNextTypeIndex","fxType","changeFxType","getToneReference","generateRandomTypeIndex","round","random","setToBypass","fxDown","clientX","clientY","FxCell","Fx_chain1","Fx_chain2","Fx_chain3","isGainSelected","chainsGains","fill","nNodesXfxChain","j","getDestination","setChainVolume","gainMouseDown","gainId","handleMouseUp","handleMouseMove","isSelected","computedFxGainKnobStyle","channelGain","orange","boxSizing","borderTop","toolsHost","_component_SpecAnalyzer","_component_Oscilloscope","_component_Meter","Meter","widthLeft","widthRight","computedWidthLeft","computedWidthRight","meter","channels","intervalId","setInterval","updateWidths","getValue","leftVolume","rightVolume","isFinite","dbToGain","beforeDestroy","clearInterval","oscilloscopeCanvas","oscilloscopeData","timing","oscilloscope","startOscilloscope","canvas","offsetWidth","offsetHeight","ctx","getContext","setTiming","updateOscilloscopeData","draw","clearRect","strokeStyle","lineWidth","beginPath","y","moveTo","lineTo","stroke","analyzerCanvas","analyser","canvasCtx","startAnalyzer","value","fillStyle","fillRect","Oscilloscope","SpecAnalyzer","setOscilloscopeTiming","mseconds","_component_VolEnvelope","_component_Envelope","onIsDraggableUpdate","_component_Lfo","_component_ModSelector","onSelection","container","_component_EnvelopeVisualizer","is_volume","onParamRefresh","_component_Knobs","knob","isOn","knobList","freeKnobs","nKnobs","isMouseDown","selectedKnobId","isDraggable","updateParameters","setModulatorParameters","knobText","addLink","setModulatorAmount","removeLink","mouseDown","knobId","computedFaderStyle","rawKnobAmount","envelope_container","adsr","attack_Color","decay_head","decay_Color","sustain_head","sustain_Color","release_Color","space","attackCurve","decayCurve","releaseCurve","sustain_lev","duration","is_attack_down","is_decay_down","is_sustain_down","is_release_down","test","isDragging","tempEvent","p","attack_down","decay_down","sustain_down","release_down","gridTemplateColumns","ceil","gridTemplateRows","attack_dot","borderColor","decay_dot","release_dot","attack_area","decay_area","sustain_area","release_area","EnvelopeVisualizer","Knobs","handleRefresh","knobs","link","unLink","handleDraggableUpdate","unHide","classList","remove","hide","add","visualizer","lfo_elems_row","_component_LfoVisualizer","freq","wave","lfoFaderBase","lfoFreqFaderLevel","qualFactor","sinValsBuffer","triValsBuffer","sqValsBuffer","sawValsBuffer","sin","PI","abs","updateParams","stopOscilloscope","t","y_next","waveforms","LfoVisualizer","isDepthFaderDown","isFreqFaderDown","waveformId","lfoDepthFaderLevel","lfo_waveform_btn_selector","setParams","waveformNameString","nextWaveType","resetOscilloscope","depthFaderSelected","freqFaderSelected","buttonList","button","onDragstart","inject","mainEnv","buttonListEnv","buttonListLfo","nEnvelopes","nLfo","textId","fontWeight","draggability","isDraggableUpdate","buttonColor","startDrag","dropEffect","effectAllowed","setData","stringify","handleClick","VolEnvelope","Lfo","ModSelector","selection","selectionType","envList","lfoList","created","volEnvelope","handleLink","handleUnlink","modHost","modSelector","envelopes","lfos","changeSelection","onMouseleave","_component_Octave","octaveNumber","onVirtualKeyDown","onVirtualKeyUp","_component_MIDIKeyboard","onMIDIDown","onMIDIUp","midiAccess","midiInput","notes","lowestOctave","navigator","requestMIDIAccess","then","inputs","size","values","next","handleMidiMessage","status","label","octave","parseInt","Number","handleMouseLeave","$parent","notifyUp","currentTarget","handleMouseDown","notifyDown","handleMouseOver","switchColorPress","includes","replace","contains","switchColorRelease","Object","Octave","MIDIKeyboard","ocTranspose","keysDown","keys","keyboardTranspose","handleKeyDown","handleKeyUp","handleNoteDown","handleNoteUp","handleMIDIDown","playNote","handleMIDIUp","stopNote","finalOctave","OscHost","FilterHost","FxHost","ToolHost","ModHost","PianoKeyboard","draggedInfo","infoColumnsItemsSection","infoColumnItem","initOscConnections","pianoKeyboard","setTimeout","deleteDraggedInfo","noteDownHandle","noteUpHandle","infoBtnClick","open","demoBtnClick","focus","songBtnClick","href","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_19","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","titleComputedStyle","controls_section_col_1_style","controls_section_col_3_style","routing_description_style","openLink","url","copyText","mytext","clipboard","writeText","alert","routes","path","component","MainHost","AboutView","router","createRouter","history","createWebHistory","process","app","createApp","App","use","config","globalProperties","areFiltersMounted","areFxMounted","nModulators","dropFeedback","provide","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","bind","__webpack_exports__"],"sourceRoot":""}
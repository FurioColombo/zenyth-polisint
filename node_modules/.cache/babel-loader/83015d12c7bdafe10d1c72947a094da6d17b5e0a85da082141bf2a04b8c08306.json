{"ast":null,"code":"export default {\n  name: \"Octave\",\n  props: {\n    octaveNumber: Number\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    handleMouseLeave(e) {\n      if (this.$parent.mouseDown) {\n        this.notifyUp(e.currentTarget);\n      }\n    },\n    handleMouseUp(e) {\n      this.$parent.mouseDown = false;\n      this.notifyUp(e.target);\n      //console.log(\"mouse is now up\")\n    },\n\n    handleMouseDown(e) {\n      this.$parent.mouseDown = true;\n      this.notifyDown(e.target);\n      //console.log(\"mouse is now down\")\n    },\n\n    handleMouseOver(e) {\n      if (this.$parent.mouseDown) {\n        //console.log(e.target)\n        this.notifyDown(e.target);\n      }\n      //console.log(\"mouseDown is \"+this.$parent.mouseDown+\" and is moving\")\n    },\n\n    notifyDown(key) {\n      //emitting cusom event \"keyDown\"\n      this.$emit(\"virtualKeyDown\", key.id, this.octaveNumber);\n      this.switchColorPress(key.id);\n    },\n    switchColorPress(note) {\n      if (note.includes(\"#\")) {\n        note = note.replace(\"#\", \"s\");\n      }\n      let key = this.$refs[note];\n      //change color of key when pressed\n      if (key.classList.contains('wkey')) {\n        key.classList.remove(\"wUnpressed\");\n        key.classList.add(\"pressed\");\n      } else {\n        key.classList.remove(\"bUnpressed\");\n        key.classList.add(\"pressed\");\n      }\n    },\n    notifyUp(key) {\n      //emitting cusom event \"keyUp\"\n      this.$emit(\"virtualKeyUp\", key.id, this.octaveNumber);\n      this.switchColorRelease(key.id);\n      //not needed, called in PianoKeyboard (when clicking with the mouse on keyboard all keys are released (color))\n    },\n\n    switchColorRelease(note) {\n      if (note === \"all\") {\n        for (const ref of Object.values(this.$refs)) {\n          if (ref.classList.contains('wkey')) {\n            ref.classList.add(\"wUnpressed\");\n            ref.classList.remove(\"pressed\");\n          } else {\n            ref.classList.add(\"bUnpressed\");\n            ref.classList.remove(\"pressed\");\n          }\n        }\n      } else {\n        if (note.includes(\"#\")) {\n          note = note.replace(\"#\", \"s\");\n        }\n        let key = this.$refs[note];\n        //change color of key when released\n        if (key.classList.contains('wkey')) {\n          key.classList.add(\"wUnpressed\");\n          key.classList.remove(\"pressed\");\n        } else {\n          key.classList.add(\"bUnpressed\");\n          key.classList.remove(\"pressed\");\n        }\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["name","props","octaveNumber","Number","data","methods","handleMouseLeave","e","$parent","mouseDown","notifyUp","currentTarget","handleMouseUp","target","handleMouseDown","notifyDown","handleMouseOver","key","$emit","id","switchColorPress","note","includes","replace","$refs","classList","contains","remove","add","switchColorRelease","ref","Object","values"],"sourceRoot":"","sources":["/Users/guglielmofratticioli/Documents/POLIMI/FurioColombo.github.io/src/views/Synth/Keyboard/Octave.vue"],"sourcesContent":["<template>\n    <div class=\"octave\" @mousedown=\"handleMouseDown\" @mouseup=\"handleMouseUp\"  @mouseover=\"handleMouseOver\">\n        <div class=\"woctave\">\n            <div id=\"C\" ref=\"C\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\n            <div id=\"D\" ref=\"D\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\n            <div id=\"E\" ref=\"E\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\n            <div id=\"F\" ref=\"F\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\n            <div id=\"G\" ref=\"G\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\n            <div id=\"A\" ref=\"A\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\n            <div id=\"B\" ref=\"B\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\n        </div>\n        <div class=\"boctave\">\n            <div id=\"C#\" ref=\"Cs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 3 / 5\"></div>\n            <div id=\"D#\" ref=\"Ds\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 6 / 8\"></div>\n            <div id=\"F#\" ref=\"Fs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 12 / 14\"></div>\n            <div id=\"G#\" ref=\"Gs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 15 / 17\"></div>\n            <div id=\"A#\" ref=\"As\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 18 / 20\"></div>\n        </div>   \n    </div>\n</template>\n\n<script>\nexport default {\n    name: \"Octave\",\n    props: {\n        octaveNumber: Number,\n    },\n        data() {\n        return {\n        }\n    },\n    methods: {\n        handleMouseLeave(e){\n            if(this.$parent.mouseDown){\n                this.notifyUp(e.currentTarget)\n            }    \n        },\n        handleMouseUp(e) {\n            this.$parent.mouseDown= false;\n            this.notifyUp(e.target)\n            //console.log(\"mouse is now up\")\n        },\n        handleMouseDown(e) {\n            this.$parent.mouseDown= true;\n            this.notifyDown(e.target)\n            //console.log(\"mouse is now down\")\n        },\n        handleMouseOver(e){\n            if(this.$parent.mouseDown){\n                //console.log(e.target)\n                this.notifyDown(e.target)\n\n            }\n            //console.log(\"mouseDown is \"+this.$parent.mouseDown+\" and is moving\")\n        },\n        notifyDown(key){\n            //emitting cusom event \"keyDown\"\n            this.$emit(\"virtualKeyDown\",key.id,this.octaveNumber)\n            this.switchColorPress(key.id)\n        },\n        switchColorPress(note){\n            if(note.includes(\"#\")){\n                note = note.replace(\"#\",\"s\")\n            }\n            let key = this.$refs[note];\n            //change color of key when pressed\n            if (key.classList.contains('wkey')){\n                key.classList.remove(\"wUnpressed\")\n                key.classList.add(\"pressed\")\n            }else{\n                key.classList.remove(\"bUnpressed\")\n                key.classList.add(\"pressed\")\n            }     \n        },\n        notifyUp(key){\n            //emitting cusom event \"keyUp\"\n            this.$emit(\"virtualKeyUp\",key.id,this.octaveNumber)\n            this.switchColorRelease(key.id)\n            //not needed, called in PianoKeyboard (when clicking with the mouse on keyboard all keys are released (color))\n        },\n        switchColorRelease(note){\n            if(note === \"all\"){\n                for (const ref of Object.values(this.$refs)) {\n                    if (ref.classList.contains('wkey')){\n                        ref.classList.add(\"wUnpressed\")\n                        ref.classList.remove(\"pressed\")\n                    }else{\n                        ref.classList.add(\"bUnpressed\")\n                        ref.classList.remove(\"pressed\")\n                    }\n                }  \n            }else{\n                if(note.includes(\"#\")){\n                note = note.replace(\"#\",\"s\")\n                }\n                let key = this.$refs[note];\n                //change color of key when released\n                if (key.classList.contains('wkey')){\n                    key.classList.add(\"wUnpressed\")\n                    key.classList.remove(\"pressed\")\n                }else{\n                    key.classList.add(\"bUnpressed\")\n                    key.classList.remove(\"pressed\")\n                }\n            }\n            \n        }\n    }\n}\n</script>\n\n<style>\n\n    .octave{\n        width: 100%;\n        height: 100%;\n        box-sizing: border-box;\n        position:relative;   \n    }\n    .woctave{\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        display: flex;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;      \n    }\n    .boctave{\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        display: grid;\n        grid-template-columns: repeat(21, 1fr);  \n        grid-template-rows: 100%;  \n    }\n    .wkey{\n        width: 100%;\n        height: 100%;\n        border: solid black 0.06vw;\n        box-sizing: border-box;\n        border-radius: 0.2vw;\n        z-index: 1;\n    }\n    .wUnpressed{\n        background-color:#f8e7e6;\n        opacity: 40%;\n    }\n    .bUnpressed{\n        background-color:#645352;\n    }\n    .pressed{\n        background-color:#f3a59a;\n    }\n    .bkey{\n        width: 100%;\n        height: 60%;\n        border: solid black 0.06vw;\n        box-sizing: border-box;\n        border-radius: 0.2vw;\n        position: relative;\n        z-index: 1;\n    }\n    \n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
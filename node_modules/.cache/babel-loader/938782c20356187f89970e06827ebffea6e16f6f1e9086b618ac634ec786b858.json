{"ast":null,"code":"import { createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/icons/ADSR.svg';\nimport _imports_1 from '@/icons/LFO.svg';\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-0ef4a2a4\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"img\", {\n    src: _imports_0,\n    alt: \"\",\n    draggable: \"false\"\n  }, null, -1);\n});\nvar _hoisted_2 = [_hoisted_1];\nvar _hoisted_3 = [\"onClick\"];\nvar _hoisted_4 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"img\", {\n    src: _imports_0,\n    alt: \"\",\n    draggable: \"false\"\n  }, null, -1);\n});\nvar _hoisted_5 = [_hoisted_4];\nvar _hoisted_6 = [\"draggable\", \"onDragstart\"];\nvar _hoisted_7 = [\"onClick\"];\nvar _hoisted_8 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"img\", {\n    src: _imports_1,\n    alt: \"\",\n    draggable: \"false\"\n  }, null, -1);\n});\nvar _hoisted_9 = [_hoisted_8];\nvar _hoisted_10 = [\"draggable\", \"onDragstart\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", {\n    \"class\": \"buttonList\",\n    style: _normalizeStyle(this.buttonList)\n  }, [_createElementVNode(\"div\", {\n    \"class\": \"identifierVol\",\n    style: _normalizeStyle($options.buttonColor('mainEnv')),\n    onClick: _cache[0] || (_cache[0] = function ($event) {\n      return $options.handleClick(null, 'volEnvelope');\n    })\n  }, _hoisted_2, 4), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.buttonListEnv, function (button) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: button.id,\n      \"class\": \"button\",\n      style: _normalizeStyle($options.buttonColor('envelope'))\n    }, [_createElementVNode(\"div\", {\n      style: _normalizeStyle($options.textId)\n    }, _toDisplayString(button.id), 5), _createElementVNode(\"div\", {\n      \"class\": \"identifier\",\n      onClick: function onClick($event) {\n        return $options.handleClick(button.id, button.type);\n      }\n    }, _hoisted_5, 8, _hoisted_3), _createElementVNode(\"div\", {\n      \"class\": \"draggableArea\",\n      draggable: $options.draggability('envelope', button.id),\n      onDragstart: function onDragstart($event) {\n        return $options.startDrag($event, button.id, button.type);\n      }\n    }, \"ϟ \", 40, _hoisted_6)], 4);\n  }), 128)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.buttonListLfo, function (button) {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: button.id,\n      \"class\": \"button\",\n      style: _normalizeStyle($options.buttonColor('lfo'))\n    }, [_createElementVNode(\"div\", {\n      style: _normalizeStyle($options.textId)\n    }, _toDisplayString(button.id), 5), _createElementVNode(\"div\", {\n      \"class\": \"identifier\",\n      onClick: function onClick($event) {\n        return $options.handleClick(button.id, button.type);\n      }\n    }, _hoisted_9, 8, _hoisted_7), _createElementVNode(\"div\", {\n      \"class\": \"draggableArea\",\n      draggable: $options.draggability('lfo', button.id),\n      onDragstart: function onDragstart($event) {\n        return $options.startDrag($event, button.id, button.type);\n      }\n    }, \"ϟ \", 40, _hoisted_10)], 4);\n  }), 128))], 4);\n}","map":{"version":3,"mappings":";OAGWA,UAAsB;OAmBlBC,UAAqB;;;;;sBAnB9BC,oBAAqD;IAAhDC,GAAsB,EAAtBH,UAAsB;IAACI,GAAG,EAAC,EAAE;IAACC,SAAS,EAAC;;;kBAA7CC,UAAqD;;;sBAOjDJ,oBAAqD;IAAhDC,GAAsB,EAP1BH,UAAsB;IAOKI,GAAG,EAAC,EAAE;IAACC,SAAS,EAAC;;;kBAA7CE,UAAqD;;;;sBAYrDL,oBAAoD;IAA/CC,GAAqB,EAArBF,UAAqB;IAACG,GAAG,EAAC,EAAE;IAACC,SAAS,EAAC;;;kBAA5CG,UAAoD;;;uBArB5DC,oBA4BM;IA5BD,SAAM,YAAY;IAAEC,KAAK,uBAAOC,UAAU;MAC7CT,oBAEM;IAFD,SAAM,eAAe;IAAEQ,KAAK,kBAAEE,oBAAW;IAAcC,OAAK;MAAA,OAAED,oBAAW;IAAA;wCAG9EH,oBAWWK,6BAXgBC,mBAAa,YAAvBC,MAAM;yBACrBP,oBASM;WAVwCO,MAAM,CAACC,EAAE;MAClD,SAAM,QAAQ;MAAEP,KAAK,kBAAEE,oBAAW;QACrCV,oBAA4C;MAAtCQ,KAAK,kBAAEE,eAAM;wBAAMI,MAAM,CAACC,EAAE,OAClCf,oBAGM;MAHD,SAAM,YAAY;MAAEW,OAAK;QAAA,OAAED,oBAAW,CAACI,MAAM,CAACC,EAAE,EAAED,MAAM,CAACE,IAAI;MAAA;mCAIlEhB,oBAEM;MAFD,SAAM,eAAe;MAAEG,SAAS,EAAEO,qBAAY,aAAaI,MAAM,CAACC,EAAE;MACtEE,WAAS;QAAA,OAAEP,kBAAS,CAACQ,MAAM,EAAEJ,MAAM,CAACC,EAAE,EAAED,MAAM,CAACE,IAAI;MAAA;OAAG,IACzD;gCAGJT,oBAWWK,6BAXgBC,mBAAa,YAAvBC,MAAM;yBACrBP,oBASM;WAVwCO,MAAM,CAACC,EAAE;MAClD,SAAM,QAAQ;MAAEP,KAAK,kBAAEE,oBAAW;QACrCV,oBAA4C;MAAtCQ,KAAK,kBAAEE,eAAM;wBAAMI,MAAM,CAACC,EAAE,OAClCf,oBAGM;MAHD,SAAM,YAAY;MAAEW,OAAK;QAAA,OAAED,oBAAW,CAACI,MAAM,CAACC,EAAE,EAAED,MAAM,CAACE,IAAI;MAAA;mCAIlEhB,oBAEM;MAFD,SAAM,eAAe;MAAEG,SAAS,EAAEO,qBAAY,QAAQI,MAAM,CAACC,EAAE;MACjEE,WAAS;QAAA,OAAEP,kBAAS,CAACQ,MAAM,EAAEJ,MAAM,CAACC,EAAE,EAAED,MAAM,CAACE,IAAI;MAAA;OAAG,IACzD","names":["_imports_0","_imports_1","_createElementVNode","src","alt","draggable","_hoisted_1","_hoisted_4","_hoisted_8","_createElementBlock","style","buttonList","$options","onClick","_Fragment","$data","button","id","type","onDragstart","$event"],"sourceRoot":"","sources":["C:\\Home\\Projects\\Programmazione\\WebStorm\\myZenythPolisinT\\zenyth_polisint\\src\\views\\Synth\\Modulators\\ModSelector.vue"],"sourcesContent":["<template>\r\n  <div class=\"buttonList\" :style=\"this.buttonList\">\r\n    <div class=\"identifierVol\" :style=\"buttonColor('mainEnv')\" @click=\"handleClick(null, 'volEnvelope')\">\r\n      <img src=\"@/icons/ADSR.svg\" alt=\"\" draggable=\"false\">\r\n    </div>\r\n    <template v-for=\"button in buttonListEnv\" :key=\"button.id\" :ref=\"button.ref\">\r\n      <div class=\"button\" :style=\"buttonColor('envelope')\">\r\n        <div :style=\"textId\"> {{ button.id }} </div>\r\n        <div class=\"identifier\" @click=\"handleClick(button.id, button.type)\">\r\n\r\n          <img src=\"@/icons/ADSR.svg\" alt=\"\" draggable=\"false\">\r\n        </div>\r\n        <div class=\"draggableArea\" :draggable=\"draggability('envelope', button.id)\"\r\n          @dragstart=\"startDrag($event, button.id, button.type)\">ϟ\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <template v-for=\"button in buttonListLfo\" :key=\"button.id\" :ref=\"button.ref\">\r\n      <div class=\"button\" :style=\"buttonColor('lfo')\">\r\n        <div :style=\"textId\"> {{ button.id }} </div>\r\n        <div class=\"identifier\" @click=\"handleClick(button.id, button.type)\"><!-- {{ button.id }} -->\r\n\r\n          <img src=\"@/icons/LFO.svg\" alt=\"\" draggable=\"false\">\r\n        </div>\r\n        <div class=\"draggableArea\" :draggable=\"draggability('lfo', button.id)\"\r\n          @dragstart=\"startDrag($event, button.id, button.type)\">ϟ\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport { watch } from 'vue';\r\n\r\nexport default {\r\n  inject: ['dropFeedback'],\r\n  props: [],\r\n  data() {\r\n    return {\r\n      color: {\r\n        mainEnv: this.colors.pink.glow,\r\n        envelope: this.colors.azure.glow,\r\n        lfo: this.colors.purple.glow,\r\n      },\r\n      type: \"volEnvelope\",\r\n\r\n      isDraggable: this.isDraggable,\r\n      buttonListEnv: [],\r\n      buttonListLfo: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    for (let i = 1; i < this.nEnvelopes + 1; i++) {\r\n      this.buttonListEnv.push({ id: i, ref: \"button\" + i, type: \"envelope\" });\r\n    }\r\n    for (let i = 1; i < this.nLfo + 1; i++) {\r\n      this.buttonListLfo.push({ id: i, ref: \"button\" + i, type: \"lfo\" });\r\n    }\r\n    //console.log(this.isDraggable)\r\n\r\n\r\n    //console.log(this.buttonListEnv)\r\n    //console.log(this.buttonListLfo)\r\n\r\n    /*\r\n    this.$on(\"unLink\", (data) => {\r\n          console.log(\"ModSelector disconnecting link from \"+data.modulator.type+\" \"+data.modulator.id+\" to \"+data.section+data.target)})\r\n\r\n     */\r\n\r\n  },\r\n  computed: {\r\n    textId(){\r\n      return {\r\n        fontWeight: \"bold\",\r\n        opacity: \"80%\",\r\n        position: 'absolute',\r\n        fontSize:'.8vw'\r\n      }\r\n    },\r\n    buttonList() {\r\n      switch (this.type) {\r\n        case \"volEnvelope\":\r\n          return{\r\n            backgroundColor: this.colors.pink.medium\r\n          }\r\n          case \"envelope\":\r\n          return{\r\n            backgroundColor: this.colors.azure.medium\r\n          }\r\n          case \"lfo\":\r\n          return{\r\n            backgroundColor: this.colors.purple.glow\r\n          }\r\n      }\r\n      \r\n    } \r\n\r\n  },\r\n  methods: {\r\n    draggability(type, id) {\r\n      //console.log(this.isDraggable)\r\n      //console.log(\"checking draggability of \" + type + \" \" + id)\r\n      return this.isDraggable[type][id]\r\n    },\r\n    isDraggableUpdate(isDraggable) {\r\n      //console.log(\"UPDATE ISDRAGGABLE\")\r\n      //console.log(this.isDraggable)\r\n      this.isDraggable = isDraggable\r\n    },\r\n    buttonColor(type) {\r\n      return {\r\n        backgroundColor: this.color[type]\r\n      }\r\n    },\r\n\r\n    startDrag(event, id, type) {\r\n      //console.log(\"dragging \" + type + \" \" + id)\r\n      event.dataTransfer.dropEffect = \"move\"\r\n      event.dataTransfer.effectAllowed = \"move\"\r\n      let data = { type: type, id: id, color: this.color[type] }\r\n      event.dataTransfer.setData(\"data\", JSON.stringify(data));\r\n      //console.log(data)\r\n    },\r\n    handleClick(id, type) {\r\n      this.type = type\r\n      if (type === \"volEnvelope\") {\r\n        //console.log(\"Selected \" + id)\r\n        this.$emit(\"selection\", type, null);\r\n      } else {\r\n        //console.log(\"Selected \" + type + \" \" + id)\r\n        this.$emit(\"selection\", id, type);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.button {\r\n  display: grid;\r\n  grid-template-columns: 80% 18%;\r\n  flex: 1;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 0.06vw solid black; \r\n  border-radius: 0.2vw;\r\n  padding: 1%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  align-content: center;\r\n  justify-items: stretch;\r\n\r\n}\r\n\r\n.buttonList {\r\n  padding-left: 0.3vw;\r\n  padding-right:  0.3vw;\r\n  padding-bottom: 0.3vw;\r\n  position: relative;\r\n  grid-row: 2;\r\n  display: flex;\r\n  flex-basis: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.identifier {\r\n  height: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  /* border: 0.1vw solid black; */\r\n  display: flex;\r\n\r\n}\r\n\r\n.identifierVol {\r\n  border: 0.06vw solid black; \r\n  border-radius: 0.2vw;\r\n  flex: 1;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  height: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.draggableArea {\r\n  border-radius: 50%;\r\n  display: flex;\r\n  border: 0.1vw solid black;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  font-size: .9vw;\r\n  align-items: flex-end;\r\n  justify-content: center;\r\n}.draggableArea:hover {\r\n  opacity: 40%;\r\n}\r\n.identifier img {\r\n  position: relative;\r\n  opacity: 60%;\r\n  width: 4vw;\r\n  aspect-ratio: 1/1;\r\n}\r\n.identifierVol img {\r\n  position: relative;\r\n  opacity: 60%;\r\n  width: 4vw;\r\n  aspect-ratio: 1/1;\r\n}\r\n.identifier img:hover {\r\n  opacity: 40%;\r\n}\r\n.identifierVol img:hover {\r\n  opacity: 40%;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
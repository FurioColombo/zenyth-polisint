{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/eliapirrello/Documents/GitHub/zenyth/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.error.to-string.js\";\nimport { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\nexport var createDecrementCycleCounter = function createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode, cycleCounters, getAudioNodeConnections, getNativeAudioNode, getNativeAudioParam, getNativeContext, isActiveAudioNode, isNativeOfflineAudioContext) {\n  return function (audioNode, count) {\n    var cycleCounter = cycleCounters.get(audioNode);\n    if (cycleCounter === undefined) {\n      throw new Error('Missing the expected cycle count.');\n    }\n    var nativeContext = getNativeContext(audioNode.context);\n    var isOffline = isNativeOfflineAudioContext(nativeContext);\n    if (cycleCounter === count) {\n      cycleCounters[\"delete\"](audioNode);\n      if (!isOffline && isActiveAudioNode(audioNode)) {\n        var nativeSourceAudioNode = getNativeAudioNode(audioNode);\n        var _getAudioNodeConnecti = getAudioNodeConnections(audioNode),\n          outputs = _getAudioNodeConnecti.outputs;\n        var _iterator = _createForOfIteratorHelper(outputs),\n          _step;\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var output = _step.value;\n            if (isAudioNodeOutputConnection(output)) {\n              var nativeDestinationAudioNode = getNativeAudioNode(output[0]);\n              connectNativeAudioNodeToNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output[1], output[2]);\n            } else {\n              var nativeDestinationAudioParam = getNativeAudioParam(output[0]);\n              nativeSourceAudioNode.connect(nativeDestinationAudioParam, output[1]);\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n    } else {\n      cycleCounters.set(audioNode, cycleCounter - count);\n    }\n  };\n};","map":{"version":3,"mappings":";;;AAAA,SAASA,2BAA2B,QAAQ,wCAAwC;AAGpF,OAAO,IAAMC,2BAA2B,GAAkC,SAA7DA,2BAA2B,CACpCC,uCAAuC,EACvCC,aAAa,EACbC,uBAAuB,EACvBC,kBAAkB,EAClBC,mBAAmB,EACnBC,gBAAgB,EAChBC,iBAAiB,EACjBC,2BAA2B,EAC3B;EACA,OAAO,UAACC,SAAS,EAAEC,KAAK,EAAI;IACxB,IAAMC,YAAY,GAAGT,aAAa,CAACU,GAAG,CAACH,SAAS,CAAC;IAEjD,IAAIE,YAAY,KAAKE,SAAS,EAAE;MAC5B,MAAM,IAAIC,KAAK,CAAC,mCAAmC,CAAC;;IAGxD,IAAMC,aAAa,GAAGT,gBAAgB,CAACG,SAAS,CAACO,OAAO,CAAC;IACzD,IAAMC,SAAS,GAAGT,2BAA2B,CAACO,aAAa,CAAC;IAE5D,IAAIJ,YAAY,KAAKD,KAAK,EAAE;MACxBR,aAAa,UAAO,CAACO,SAAS,CAAC;MAE/B,IAAI,CAACQ,SAAS,IAAIV,iBAAiB,CAACE,SAAS,CAAC,EAAE;QAC5C,IAAMS,qBAAqB,GAAGd,kBAAkB,CAACK,SAAS,CAAC;QAC3D,4BAAoBN,uBAAuB,CAACM,SAAS,CAAC;UAA9CU,OAAO,yBAAPA,OAAO;QAAwC,2CAElCA,OAAO;UAAA;QAAA;UAA5B,oDAA8B;YAAA,IAAnBC,MAAM;YACb,IAAIrB,2BAA2B,CAACqB,MAAM,CAAC,EAAE;cACrC,IAAMC,0BAA0B,GAAGjB,kBAAkB,CAACgB,MAAM,CAAC,CAAC,CAAC,CAAC;cAEhEnB,uCAAuC,CAACiB,qBAAqB,EAAEG,0BAA0B,EAAED,MAAM,CAAC,CAAC,CAAC,EAAEA,MAAM,CAAC,CAAC,CAAC,CAAC;aACnH,MAAM;cACH,IAAME,2BAA2B,GAAGjB,mBAAmB,CAACe,MAAM,CAAC,CAAC,CAAC,CAAC;cAElEF,qBAAqB,CAACK,OAAO,CAACD,2BAA2B,EAAEF,MAAM,CAAC,CAAC,CAAC,CAAC;;;QAE5E;UAAA;QAAA;UAAA;QAAA;;KAER,MAAM;MACHlB,aAAa,CAACsB,GAAG,CAACf,SAAS,EAAEE,YAAY,GAAGD,KAAK,CAAC;;EAE1D,CAAC;AACL,CAAC","names":["isAudioNodeOutputConnection","createDecrementCycleCounter","connectNativeAudioNodeToNativeAudioNode","cycleCounters","getAudioNodeConnections","getNativeAudioNode","getNativeAudioParam","getNativeContext","isActiveAudioNode","isNativeOfflineAudioContext","audioNode","count","cycleCounter","get","undefined","Error","nativeContext","context","isOffline","nativeSourceAudioNode","outputs","output","nativeDestinationAudioNode","nativeDestinationAudioParam","connect","set"],"sourceRoot":"","sources":["../../../src/factories/decrement-cycle-counter.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}
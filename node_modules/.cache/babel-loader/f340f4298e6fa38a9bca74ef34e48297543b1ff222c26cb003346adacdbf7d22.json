{"ast":null,"code":"import _slicedToArray from \"C:/Home/Projects/Programmazione/WebStorm/myZenythPolisinT/zenyth_polisint/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport \"core-js/modules/web.timers.js\";\nimport { Meter } from \"tone\";\nimport { dbToGain } from \"tone\";\nimport * as Tone from \"tone\";\nexport default {\n  data: function data() {\n    return {\n      widthLeft: 0,\n      widthRight: 0\n    };\n  },\n  computed: {\n    computedWidthLeft: function computedWidthLeft() {\n      return {\n        width: \"\".concat(this.widthLeft, \"%\"),\n        background: this.colors.green.medium\n      };\n    },\n    computedWidthRight: function computedWidthRight() {\n      return {\n        width: \"\".concat(this.widthRight, \"%\"),\n        background: this.colors.green.medium\n      };\n    },\n    Meter: function Meter() {\n      return {\n        background: this.colors.green.glow\n      };\n    }\n  },\n  mounted: function mounted() {\n    var _this = this;\n    this.meter = new Meter({\n      channels: 2\n    });\n    Tone.getDestination().connect(this.meter);\n    this.intervalId = setInterval(function () {\n      _this.updateWidths();\n    }, 25);\n  },\n  methods: {\n    updateWidths: function updateWidths() {\n      //this.volume = this.meter.getValue();\n      var _this$meter$getValue = this.meter.getValue();\n      var _this$meter$getValue2 = _slicedToArray(_this$meter$getValue, 2);\n      this.leftVolume = _this$meter$getValue2[0];\n      this.rightVolume = _this$meter$getValue2[1];\n      if (!isFinite(this.leftVolume) && !isFinite(this.rightVolume)) return;\n      //console.log(this.meter.getValue()); \n      this.widthLeft = Math.min(dbToGain(this.leftVolume) * 100, 100);\n      this.widthRight = Math.min(dbToGain(this.rightVolume) * 100, 100);\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.meter.stop();\n    this.meter.dispose();\n    clearInterval(this.intervalId);\n  }\n};","map":{"version":3,"mappings":";;AAWA,SAASA,KAAI,QAAS,MAAM;AAC5B,SAASC,QAAO,QAAS,MAAM;AAC/B,OAAO,KAAKC,IAAG,MAAO,MAAM;AAE5B,eAAe;EACbC,IAAI,kBAAG;IACL,OAAO;MACLC,SAAS,EAAE,CAAC;MACZC,UAAU,EAAE;IACd,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,iBAAiB,+BAAG;MAClB,OAAO;QAAEC,KAAK,YAAK,IAAI,CAACJ,SAAS,MAAE;QAAIK,UAAU,EAAE,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC;MAAM,CAAC;IAC9E,CAAC;IACDC,kBAAkB,gCAAG;MACnB,OAAO;QAAEL,KAAK,YAAK,IAAI,CAACH,UAAU,MAAE;QAAII,UAAU,EAAE,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC;MAAM,CAAC;IAC/E,CAAC;IACDZ,KAAK,mBAAE;MACL,OAAM;QACJS,UAAU,EAAE,IAAI,CAACC,MAAM,CAACC,KAAK,CAACG;MAChC;IACF;EACF,CAAC;EACDC,OAAO,qBAAG;IAAA;IACR,IAAI,CAACC,KAAI,GAAI,IAAIhB,KAAK,CAAC;MAACiB,QAAQ,EAAE;IAAC,CAAC,CAAC;IACrCf,IAAI,CAACgB,cAAc,EAAE,CAACC,OAAO,CAAC,IAAI,CAACH,KAAK,CAAC;IACzC,IAAI,CAACI,UAAS,GAAIC,WAAW,CAAC,YAAM;MAClC,KAAI,CAACC,YAAY,EAAE;IACrB,CAAC,EAAE,EAAE,CAAC;EACR,CAAC;EAEDC,OAAO,EAAE;IACPD,YAAY,0BAAG;MACb;MAAA,2BACyC,IAAI,CAACN,KAAK,CAACQ,QAAQ,EAAE;MAAA;MAA5D,IAAI,CAACC,UAAS;MAAI,IAAI,CAACC,WAAU;MACnC,IAAI,CAACC,QAAQ,CAAC,IAAI,CAACF,UAAU,KAAK,CAACE,QAAQ,CAAC,IAAI,CAACD,WAAW,CAAC,EAAE;MAC/D;MACA,IAAI,CAACtB,SAAQ,GAAIwB,IAAI,CAACC,GAAG,CAAC5B,QAAQ,CAAC,IAAI,CAACwB,UAAU,IAAI,GAAG,EAAC,GAAG,CAAC;MAC9D,IAAI,CAACpB,UAAS,GAAIuB,IAAI,CAACC,GAAG,CAAC5B,QAAQ,CAAC,IAAI,CAACyB,WAAW,IAAI,GAAG,EAAC,GAAG,CAAC;IAClE;EACF,CAAC;EACDI,aAAa,2BAAG;IACd,IAAI,CAACd,KAAK,CAACe,IAAI,EAAE;IACjB,IAAI,CAACf,KAAK,CAACgB,OAAO,EAAE;IACpBC,aAAa,CAAC,IAAI,CAACb,UAAU,CAAC;EAChC;AACF,CAAC","names":["Meter","dbToGain","Tone","data","widthLeft","widthRight","computed","computedWidthLeft","width","background","colors","green","medium","computedWidthRight","glow","mounted","meter","channels","getDestination","connect","intervalId","setInterval","updateWidths","methods","getValue","leftVolume","rightVolume","isFinite","Math","min","beforeDestroy","stop","dispose","clearInterval"],"sourceRoot":"","sources":["C:\\Home\\Projects\\Programmazione\\WebStorm\\myZenythPolisinT\\zenyth_polisint\\src\\views\\Synth\\Tools\\Meter.vue"],"sourcesContent":["<template>\r\n  <div class=\"meter\" :style=\"this.Meter\">\r\n    <div class=\"signalSum\">\r\n      <div ref=\"left\" class=\"signal\" :style=\"computedWidthLeft\"></div>\r\n      <div></div>\r\n      <div ref=\"right\" class=\"signal\" :style=\"computedWidthRight\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Meter } from \"tone\";\r\nimport { dbToGain } from \"tone\";\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      widthLeft: 0,\r\n      widthRight: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    computedWidthLeft() {\r\n      return { width: `${this.widthLeft}%` , background: this.colors.green.medium};\r\n    },\r\n    computedWidthRight() {\r\n      return { width: `${this.widthRight}%` , background: this.colors.green.medium};\r\n    },\r\n    Meter(){\r\n      return{\r\n        background: this.colors.green.glow,\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.meter = new Meter({channels: 2});\r\n    Tone.getDestination().connect(this.meter);\r\n    this.intervalId = setInterval(() => {\r\n      this.updateWidths();\r\n    }, 25);\r\n  },\r\n  \r\n  methods: {\r\n    updateWidths() {\r\n      //this.volume = this.meter.getValue();\r\n      [ this.leftVolume , this.rightVolume ] = this.meter.getValue();\r\n      if (!isFinite(this.leftVolume) && !isFinite(this.rightVolume)) return;\r\n      //console.log(this.meter.getValue()); \r\n      this.widthLeft = Math.min(dbToGain(this.leftVolume) * 100,100);\r\n      this.widthRight = Math.min(dbToGain(this.rightVolume) * 100,100);\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.meter.stop();\r\n    this.meter.dispose();\r\n    clearInterval(this.intervalId);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.meter {\r\n  grid-row: 3;\r\n  border-radius: 0.2vw;\r\n  margin: 0vw 0.3vw 0.3vw;\r\n  display: flex;\r\n  border: 0.1vw solid #334030;\r\n}\r\n.signal {\r\n  height: 100%;\r\n  border-radius: 0.05vw;\r\n}\r\n.signalSum {\r\n  margin: 0.3vw;\r\n  display: grid;\r\n  grid-template-rows: 45% 10% 45%;\r\n  width: 100%;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
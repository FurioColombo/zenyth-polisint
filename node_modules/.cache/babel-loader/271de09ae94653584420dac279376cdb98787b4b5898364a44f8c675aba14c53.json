{"ast":null,"code":"import \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nexport var createNativeMediaStreamAudioSourceNode = function createNativeMediaStreamAudioSourceNode(nativeAudioContext, _ref) {\n  var mediaStream = _ref.mediaStream;\n  var audioStreamTracks = mediaStream.getAudioTracks();\n  /*\n   * Bug #151: Safari does not use the audio track as input anymore if it gets removed from the mediaStream after construction.\n   * Bug #159: Safari picks the first audio track if the MediaStream has more than one audio track.\n   */\n  audioStreamTracks.sort(function (a, b) {\n    return a.id < b.id ? -1 : a.id > b.id ? 1 : 0;\n  });\n  var filteredAudioStreamTracks = audioStreamTracks.slice(0, 1);\n  var nativeMediaStreamAudioSourceNode = nativeAudioContext.createMediaStreamSource(new MediaStream(filteredAudioStreamTracks));\n  /*\n   * Bug #151 & #159: The given mediaStream gets reconstructed before it gets passed to the native node which is why the accessor needs\n   * to be overwritten as it would otherwise expose the reconstructed version.\n   */\n  Object.defineProperty(nativeMediaStreamAudioSourceNode, 'mediaStream', {\n    value: mediaStream\n  });\n  return nativeMediaStreamAudioSourceNode;\n};","map":{"version":3,"mappings":";;;AAEA,OAAO,IAAMA,sCAAsC,GAA6C,SAAnFA,sCAAsC,CAA8CC,kBAAkB,QAAqB;EAAA,IAAjBC,WAAW,QAAXA,WAAW;EAC9H,IAAMC,iBAAiB,GAAGD,WAAW,CAACE,cAAc,EAAE;EACtD;;;;EAIAD,iBAAiB,CAACE,IAAI,CAAC,UAACC,CAAC,EAAEC,CAAC;IAAA,OAAMD,CAAC,CAACE,EAAE,GAAGD,CAAC,CAACC,EAAE,GAAG,CAAC,CAAC,GAAGF,CAAC,CAACE,EAAE,GAAGD,CAAC,CAACC,EAAE,GAAG,CAAC,GAAG,CAAC;EAAA,CAAC,CAAC;EAE1E,IAAMC,yBAAyB,GAAGN,iBAAiB,CAACO,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;EAE/D,IAAMC,gCAAgC,GAAGV,kBAAkB,CAACW,uBAAuB,CAAC,IAAIC,WAAW,CAACJ,yBAAyB,CAAC,CAAC;EAE/H;;;;EAIAK,MAAM,CAACC,cAAc,CAACJ,gCAAgC,EAAE,aAAa,EAAE;IAAEK,KAAK,EAAEd;EAAW,CAAE,CAAC;EAE9F,OAAOS,gCAAgC;AAC3C,CAAC","names":["createNativeMediaStreamAudioSourceNode","nativeAudioContext","mediaStream","audioStreamTracks","getAudioTracks","sort","a","b","id","filteredAudioStreamTracks","slice","nativeMediaStreamAudioSourceNode","createMediaStreamSource","MediaStream","Object","defineProperty","value"],"sourceRoot":"","sources":["../../../src/factories/native-media-stream-audio-source-node.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module","externalDependencies":[]}
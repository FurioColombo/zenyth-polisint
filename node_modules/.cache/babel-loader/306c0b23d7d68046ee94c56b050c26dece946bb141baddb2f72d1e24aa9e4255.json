{"ast":null,"code":"import MyFilter from \"@/views/Synth/Filters/MyFilter\";\nexport default {\n  props: [\"filter_type\", \"chainId\", \"chainColor\", \"id\"],\n  data() {\n    return {\n      color: this.colors.yellow,\n      type: this.filter_type,\n      cutoff: 0.5,\n      //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\n      resonance: 0.5,\n      //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\n      is_logoDown: false,\n      modulator: null\n    };\n  },\n  mounted() {\n    // mouse event listeners\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    document.addEventListener(\"mouseup\", this.onMouseUp);\n\n    //console.log(this.$props)\n\n    // -------------- AUDIO ---------------\n    this.filter = new MyFilter(this.type, this.cutoff, this.resonance);\n    this.cutoff = this.filter.getCutoff();\n    this.resonance = this.filter.getResonance();\n\n    //console.log(this.chainId+\" \"+this.id)\n    //Inserting filter in global variable\n    this.filterChains[this.chainId][this.id] = this.filter;\n    if (this.id === this.nFiltersXchain - 1 && this.chainId === this.nFilterChains - 1) {\n      this.$emit(\"filtersMounted\");\n    }\n  },\n  methods: {\n    //------------DRAG AND DROP LOGIC---------\n    handleDrop(event, target = \"\") {\n      if (this.modulator === null) {\n        let data = JSON.parse(event.dataTransfer.getData(\"data\"));\n        this.modulator = {\n          color: data.color,\n          id: data.id,\n          type: data.type\n        };\n        //console.log(\"RECEIVED HANDLEDROP, THIS.MODULATOR=\")\n        //console.log(this.modulator)\n        document.dispatchEvent(new CustomEvent(\"link\", {\n          detail: {\n            object: this.filter,\n            target: target,\n            color: this.color[\"light\"],\n            modulator: {\n              type: this.modulator.type,\n              id: this.modulator.id\n            }\n          }\n        }));\n      }\n    },\n    handleDragEnter(target) {\n      //todo: highlight object when dragging on it\n      //console.log(\"Dragging over \" + target)\n    },\n    handleDragLeave(target) {\n      //console.log(\"Dragging out of \" + target)\n    },\n    unlinkMod(target) {\n      //todo: CALL BACK ENVELOPS TO UNLINK\n      document.dispatchEvent(new CustomEvent(\"unLink\", {\n        detail: {\n          object: this.filter,\n          target: target,\n          modulator: {\n            type: this.modulator.type,\n            id: this.modulator.id\n          }\n        }\n      }));\n\n      //re-hide link dot\n      this.modulator = null;\n    },\n    //--------DRAG AND DROP STYLING--------\n    computedModulation(target = \"\") {\n      if (this.modulator) {\n        return {\n          width: \"1vw\",\n          height: \"1vw\",\n          borderRadius: \"50%\",\n          backgroundColor: this.modulator.color,\n          position: \"absolute\",\n          left: \"10%\",\n          zIndex: \"1\",\n          top: \"10%\"\n        };\n      } else {\n        return {\n          display: \"none\",\n          width: \"0%\",\n          height: \"0%\"\n        };\n      }\n    },\n    computedModText(target = \"\") {\n      if (this.modulator) {\n        return this.modulator.id;\n      } else return \"\";\n    },\n    //------------------------------------\n\n    // ----------- USER EVENTS -----------\n    onMouseMove(event) {\n      if (this.is_logoDown) {\n        if (event.movementY < 0) {\n          // Mouse is moving up\n          this.resonance = Math.max(this.resonance + event.movementY / 100, 0);\n          //console.log(\"moving up\");\n        } else {\n          // Mouse is moving down\n          this.resonance = Math.min(this.resonance + event.movementY / 100, 1);\n        }\n        if (event.movementX < 0) {\n          // Mouse is moving right\n          this.cutoff = Math.max(this.cutoff + Math.floor(event.movementX) / 100, 0);\n        } else if (event.movementX > 0) {\n          // Mouse is moving left\n          this.cutoff = Math.min(this.cutoff + Math.floor(event.movementX) / 100, 1);\n        }\n        // ----------- audio ---------\n        this.filter.setResonance(this.resonance);\n        this.filter.setCutoff(this.cutoff);\n      }\n    },\n    onMouseUp() {\n      if (this.is_logoDown) this.is_logoDown = false;\n      document.body.style.cursor = \"pointer\";\n    },\n    logoDown() {\n      if (!this.is_logoDown) {\n        this.is_logoDown = true;\n        document.body.style.cursor = \"none\";\n      }\n    },\n    // ----------- AUDIO SETTERS--------------\n    setCutoff(cutoff = this.cutoff) {\n      this.cutoff = cutoff;\n      this.filter.setCutoff(this.cutoff);\n    },\n    setResonance(resonance = this.resonance) {\n      this.resonance = resonance;\n      this.filter.setResonance(this.resonance);\n    },\n    connect(destination) {\n      this.filter.connect(destination);\n    },\n    disconnect(destination) {\n      this.filter.disconnect(destination);\n    },\n    // ------------ GETTERS SETTERS -------------\n    getToneFilter() {\n      return this.filter.getToneFilter();\n    },\n    getMyFilter() {\n      return this.filter;\n    }\n  },\n  computed: {\n    computedHeadStyle() {\n      return {\n        left: 0.7 * this.cutoff * 100 + 13.5 + \"%\"\n      };\n    },\n    computedGlow() {\n      if (this.filter_type === \"peaking\" && this.resonance < 0.5) {\n        return {\n          opacity: 1 - 2 * this.resonance,\n          background: this.colors.yellow.light\n        };\n      } else if (this.filter_type === \"peaking\" && this.resonance >= 0.5) {\n        return {\n          opacity: 2 * this.resonance - 1,\n          background: this.colors.yellow.light\n        };\n      } else {\n        return {\n          opacity: 1 - this.resonance,\n          background: this.colors.yellow.light\n        };\n      }\n    },\n    computedLP() {\n      return {\n        transform: \"translateX(\" + (-100 + this.cutoff * 100) + \"%)\"\n      };\n    },\n    computedHP() {\n      return {\n        transform: \"translateX(\" + this.cutoff * 100 + \"%)\"\n      };\n    },\n    computedBDMaks() {\n      let clip = \"\";\n      if (this.resonance > 0.5) clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";else if (this.resonance < 0.5) clip = \"polygon(0% 50%, 0% 100%, 100% 100%, 100% 50%)\";else clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\n      return {\n        clipPath: clip\n      };\n    },\n    computedBD() {\n      if (1 - this.resonance >= 0.5) {\n        return {\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\n          height: (1 - this.resonance) * 100 + \"%\",\n          transform: \"translateX(\" + this.cutoff * 100 + \"%)\"\n        };\n      } else {\n        return {\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\n          height: (1 - this.resonance - 0.5) * 100 + \"%\",\n          transform: \"translateX(\" + (this.cutoff - 0.5) * 100 + \"%)\"\n        };\n      }\n    },\n    computedBDCircle() {\n      return {\n        transform: \"translate(\" + (this.cutoff - 0.5) * 100 + \"%, \" + (this.resonance - 0.5) * 100 + \"%)\"\n        //transform: 'translateX('+(this.cutoff-.5)*100+'%)'\n      };\n    },\n\n    filter_logo() {\n      return {\n        background: this.colors.yellow.glow\n      };\n    },\n    logo() {\n      return {\n        background: this.colors.yellow.light\n      };\n    },\n    logo_text_back() {\n      return {\n        background: this.colors.yellow.light\n      };\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["MyFilter","props","data","color","colors","yellow","type","filter_type","cutoff","resonance","is_logoDown","modulator","mounted","document","addEventListener","onMouseMove","onMouseUp","filter","getCutoff","getResonance","filterChains","chainId","id","nFiltersXchain","nFilterChains","$emit","methods","handleDrop","event","target","JSON","parse","dataTransfer","getData","dispatchEvent","CustomEvent","detail","object","handleDragEnter","handleDragLeave","unlinkMod","computedModulation","width","height","borderRadius","backgroundColor","position","left","zIndex","top","display","computedModText","movementY","Math","max","min","movementX","floor","setResonance","setCutoff","body","style","cursor","logoDown","connect","destination","disconnect","getToneFilter","getMyFilter","computed","computedHeadStyle","computedGlow","opacity","background","light","computedLP","transform","computedHP","computedBDMaks","clip","clipPath","computedBD","computedBDCircle","filter_logo","glow","logo","logo_text_back"],"sourceRoot":"","sources":["/Users/guglielmofratticioli/Documents/POLIMI/FurioColombo.github.io/src/views/Synth/Filters/Filter.vue"],"sourcesContent":["<template>\n  <div class=\"filter\">\n    <div class=\"modDot\" :style=\"computedModulation('filter')\" @click.shift.stop=\"unlinkMod('filter')\"\n         v-text=\"computedModText('filter')\"></div>\n    <div class=\"filter_back\" ref=\"filter_back\"\n         >\n\n    </div>\n    <div class=\"filter_logo\" :style=\"this.filter_logo\" @mousedown=\"logoDown\">\n      <div v-if=\"is_logoDown && type != 'peaking'\" class=\"logo_text\">\n        {{ ((1 - this.resonance) * 100).toFixed() + \"%\" }}\n      </div>\n      <div v-if=\"is_logoDown && type == 'peaking'\" class=\"logo_text\">\n        {{ ((1 - 2 * this.resonance) * 100).toFixed() + \"%\" }}\n      </div>\n      <!--<div v-if=\"type==='peaking'\" class=\"logo_BD_mask\" :style=\"computedBDMaks\"></div> -->\n      <div class=\"logo_glow\" :style=\"computedGlow\"></div>\n\n      <div class=\"logo_border\"\n           @dragenter=\"handleDragEnter('filter')\" @dragleave=\"handleDragLeave('filter')\"\n           @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'filter')\"\n      ></div>\n      <div class=\"logo\" :style=\"logo\">\n        <div v-if=\"is_logoDown\" class=\"logo_text_back\" :style=\"this.logo_text_back\"></div>\n        <div\n            v-if=\"type === 'lowpass'\"\n            class=\"logo_LP\"\n            :style=\"computedLP\"\n        ></div>\n        <div\n            v-if=\"type === 'highpass'\"\n            class=\"logo_HP\"\n            :style=\"computedHP\"\n        ></div>\n        <div v-if=\"type === 'peaking'\" class=\"logo_BD_back\"></div>\n        <div\n            v-if=\"type === 'peaking'\"\n            class=\"logo_BD_circle\"\n            :style=\"computedBDCircle\"\n        ></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport MyFilter from \"@/views/Synth/Filters/MyFilter\";\n\nexport default {\n  props: [\"filter_type\", \"chainId\", \"chainColor\", \"id\"],\n\n  data() {\n    return {\n      color: this.colors.yellow,\n      type: this.filter_type,\n      cutoff: 0.5,  //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\n      resonance: 0.5, //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\n      is_logoDown: false,\n\n      modulator: null,\n    }\n  },\n  mounted() {\n    // mouse event listeners\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    document.addEventListener(\"mouseup\", this.onMouseUp);\n\n    //console.log(this.$props)\n\n    // -------------- AUDIO ---------------\n    this.filter = new MyFilter(this.type, this.cutoff, this.resonance);\n\n    this.cutoff = this.filter.getCutoff()\n    this.resonance = this.filter.getResonance()\n\n\n    //console.log(this.chainId+\" \"+this.id)\n    //Inserting filter in global variable\n    this.filterChains[this.chainId][this.id] = this.filter;\n\n    if (this.id === this.nFiltersXchain - 1 && this.chainId === this.nFilterChains - 1) {\n      this.$emit(\"filtersMounted\");\n    }\n\n  },\n\n  methods: {\n    //------------DRAG AND DROP LOGIC---------\n    handleDrop(event, target = \"\") {\n      if (this.modulator === null) {\n        let data = JSON.parse(event.dataTransfer.getData(\"data\"));\n        this.modulator = {color: data.color, id: data.id, type: data.type}\n        //console.log(\"RECEIVED HANDLEDROP, THIS.MODULATOR=\")\n        //console.log(this.modulator)\n        document.dispatchEvent(new CustomEvent(\"link\", {\n          detail: {\n            object: this.filter,\n            target: target,\n            color: this.color[\"light\"],\n            modulator: {type: this.modulator.type, id: this.modulator.id}\n          }}\n        ))\n      }\n\n    },\n    handleDragEnter(target) {\n      //todo: highlight object when dragging on it\n      //console.log(\"Dragging over \" + target)\n    },\n    handleDragLeave(target) {\n      //console.log(\"Dragging out of \" + target)\n    },\n    unlinkMod(target) {\n      //todo: CALL BACK ENVELOPS TO UNLINK\n      document.dispatchEvent(new CustomEvent(\"unLink\", {\n            detail: {\n              object: this.filter,\n              target: target,\n              modulator: {type: this.modulator.type, id: this.modulator.id}\n            }\n          }\n      ))\n\n      //re-hide link dot\n      this.modulator = null;\n\n    },\n    //--------DRAG AND DROP STYLING--------\n    computedModulation(target = \"\") {\n      if (this.modulator) {\n        return {\n          width: \"1vw\",\n          height: \"1vw\",\n          borderRadius: \"50%\",\n          backgroundColor: this.modulator.color,\n          position: \"absolute\",\n          left: \"10%\",\n          zIndex: \"1\",\n          top: \"10%\",\n        };\n      } else {\n        return {\n          display: \"none\",\n          width: \"0%\",\n          height: \"0%\",\n        }\n      }\n    },\n    computedModText(target = \"\") {\n      if (this.modulator) {\n        return this.modulator.id\n      } else return \"\";\n    },\n\n    //------------------------------------\n\n    // ----------- USER EVENTS -----------\n    onMouseMove(event) {\n      if (this.is_logoDown) {\n        if (event.movementY < 0) {\n          // Mouse is moving up\n          this.resonance = Math.max(this.resonance + event.movementY / 100, 0);\n          //console.log(\"moving up\");\n        } else {\n          // Mouse is moving down\n          this.resonance = Math.min(this.resonance + event.movementY / 100, 1);\n        }\n        if (event.movementX < 0) {\n          // Mouse is moving right\n          this.cutoff = Math.max(\n              this.cutoff + Math.floor(event.movementX) / 100,\n              0\n          );\n        } else if (event.movementX > 0) {\n          // Mouse is moving left\n          this.cutoff = Math.min(\n              this.cutoff + Math.floor(event.movementX) / 100,\n              1\n          );\n        }\n        // ----------- audio ---------\n        this.filter.setResonance(this.resonance);\n        this.filter.setCutoff(this.cutoff);\n      }\n    },\n\n    onMouseUp() {\n      if (this.is_logoDown) this.is_logoDown = false;\n      document.body.style.cursor = \"pointer\";\n    },\n    logoDown() {\n      if (!this.is_logoDown) {\n        this.is_logoDown = true;\n        document.body.style.cursor = \"none\";\n      }\n    },\n\n    // ----------- AUDIO SETTERS--------------\n    setCutoff(cutoff = this.cutoff) {\n      this.cutoff = cutoff;\n      this.filter.setCutoff(this.cutoff)\n    },\n\n    setResonance(resonance = this.resonance) {\n      this.resonance = resonance\n      this.filter.setResonance(this.resonance)\n    },\n\n    connect(destination) {\n      this.filter.connect(destination);\n    },\n\n    disconnect(destination) {\n      this.filter.disconnect(destination)\n    },\n\n    // ------------ GETTERS SETTERS -------------\n    getToneFilter() {\n      return this.filter.getToneFilter();\n    },\n\n    getMyFilter() {\n      return this.filter;\n    },\n  },\n\n  computed: {\n    computedHeadStyle() {\n      return {\n        left: 0.7 * this.cutoff * 100 + 13.5 + \"%\",\n      };\n    },\n    computedGlow() {\n      if (this.filter_type === \"peaking\" && this.resonance < 0.5) {\n        return {\n          opacity: 1 - 2 * this.resonance,\n          background: this.colors.yellow.light,\n        };\n      } else if (this.filter_type === \"peaking\" && this.resonance >= 0.5) {\n        return {\n          opacity: 2 * this.resonance - 1,\n          background: this.colors.yellow.light,\n        };\n      } else {\n        return {\n          opacity: 1 - this.resonance,\n          background: this.colors.yellow.light,\n        };\n      }\n    },\n    computedLP() {\n      return {\n        transform: \"translateX(\" + (-100 + this.cutoff * 100)  + \"%)\",\n      };\n    },\n    computedHP() {\n      return {\n        transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\n      };\n    },\n    computedBDMaks() {\n      let clip = \"\";\n      if (this.resonance > 0.5)\n        clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\n      else if (this.resonance < 0.5)\n        clip = \"polygon(0% 50%, 0% 100%, 100% 100%, 100% 50%)\";\n      else clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\n      return {\n        clipPath: clip,\n      };\n    },\n    computedBD() {\n      if (1 - this.resonance >= 0.5) {\n        return {\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\n          height: (1 - this.resonance) * 100 + \"%\",\n          transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\n        };\n      } else {\n        return {\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\n          height: (1 - this.resonance - 0.5) * 100 + \"%\",\n          transform: \"translateX(\" + (this.cutoff - 0.5) * 100 + \"%)\",\n        };\n      }\n    },\n    computedBDCircle() {\n      return {\n        transform:\n            \"translate(\" +\n            (this.cutoff - 0.5) * 100 +\n            \"%, \" +\n            (this.resonance - 0.5) * 100 +\n            \"%)\",\n        //transform: 'translateX('+(this.cutoff-.5)*100+'%)'\n      };\n    },\n    filter_logo() {\n      return {\n        background: this.colors.yellow.glow\n      }\n    },\n    logo() {\n      return {\n        background: this.colors.yellow.light\n      }\n    },\n    logo_text_back() {\n      return {\n        background: this.colors.yellow.light,\n      }\n    }\n  },\n};\n</script>\n\n<style scoped>\n.modDot {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 0.8vw;\n  text-align: center;\n  box-sizing: border-box;\n  border: .06vw solid black;\n}\n.filter {\n  position: relative;\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 4;\n}\n\n.filter_back {\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n  width: 80%;\n  height: 80%;\n  background-color: transparent;\n  justify-content: center;\n  align-items: center;\n}\n\n.filter_logo {\n  position: absolute;\n  display: flex;\n  flex: 5;\n\n  height: 100%;\n  top: 0;\n  aspect-ratio: 1/1;\n  border-radius: 50%;\n  z-index: 0;\n  clip-path: circle(50%);\n  justify-content: center;\n  align-items: center;\n}\n\n.logo_border {\n  position: absolute;\n  height: 70%;\n  aspect-ratio: 1/1;\n  z-index: 5;\n  border-radius: 50%;\n  border: 0.1vw solid #3b210e;\n}\n\n.logo {\n  position: absolute;\n  height: 70%;\n  aspect-ratio: 1/1;\n  z-index: 3;\n  clip-path: circle(50%);\n}\n\n.logo_glow {\n  position: absolute;\n  height: 90%;\n  aspect-ratio: 1/1;\n  border-radius: 50%;\n  z-index: 1;\n  filter: blur(0.3vw);\n}\n\n.logo_text {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1vw;\n  font-weight: bold;\n  position: absolute;\n  height: 100%;\n  aspect-ratio: 1/1;\n  border-radius: 50%;\n  color: black;\n  opacity: 100%;\n  background-color: black;\n  z-index: 5;\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.logo_text_back {\n  position: absolute;\n  z-index: 6;\n  left: 15%;\n  top: 30%;\n  width: 70%;\n  height: 40%;\n  opacity: 100%;\n  border-radius: 10%;\n}\n\n.logo_LP {\n  opacity: 60%;\n  display: flex;\n  position: absolute;\n  height: 100%;\n  aspect-ratio: 1/1;\n  border-radius: 50%;\n  border: .1vw solid black;\n  background-color: #faf8ef;\n  z-index: 1;\n}\n\n.logo_HP {\n  opacity: 60%;\n  display: flex;\n  position: absolute;\n  height: 100%;\n  aspect-ratio: 1/1;\n  border-radius: 50%;\n  border: .1vw solid black;\n  background-color: #faf8ef;\n  z-index: 1;\n}\n.logo_BD_circle {\n  opacity: 60%;\n  position: absolute;\n  width: 100%;\n  aspect-ratio: 1/1;\n  border: .1vw solid black;\n  border-radius: 50%;\n  background-color: #faf8ef;\n  z-index: 5;\n}\n\n.logo_BD_mask {\n  opacity: 60%;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  border: .1vw solid black;\n  background-color: #ffebd2;\n  z-index: 2;\n}\n\n.logo_BD {\n  display: flex;\n  position: absolute;\n  height: 100%;\n  aspect-ratio: 1/1;\n  border-radius: 50%;\n  background-color: white;\n  z-index: 1;\n}\n\n.logo_BD_line {\n  position: absolute;\n  width: 100%;\n  height: 4%;\n  top: 48%;\n  filter: blur(0.02vw);\n  border-radius: 30%;\n  background-color: #e58138;\n  z-index: 5;\n}\n\n\n.logo_BD_circle {\n  position: absolute;\n  width: 100%;\n  aspect-ratio: 1/1;\n\n  border-radius: 50%;\n  background-color: #faf8ef;\n  z-index: 5;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
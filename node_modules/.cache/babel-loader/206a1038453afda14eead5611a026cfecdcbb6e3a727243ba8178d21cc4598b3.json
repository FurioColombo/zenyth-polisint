{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as Tone from \"tone\";\nimport { watch } from 'vue';\nexport default {\n  inject: ['dropFeedback'],\n  props: [],\n  data() {\n    return {\n      color: {\n        mainEnv: this.colors.pink.glow,\n        envelope: this.colors.azure.glow,\n        lfo: this.colors.purple.glow\n      },\n      type: \"volEnvelope\",\n      isDraggable: this.isDraggable,\n      buttonListEnv: [],\n      buttonListLfo: []\n    };\n  },\n  mounted() {\n    for (let i = 1; i < this.nEnvelopes + 1; i++) {\n      this.buttonListEnv.push({\n        id: i,\n        ref: \"button\" + i,\n        type: \"envelope\"\n      });\n    }\n    for (let i = 1; i < this.nLfo + 1; i++) {\n      this.buttonListLfo.push({\n        id: i,\n        ref: \"button\" + i,\n        type: \"lfo\"\n      });\n    }\n    //console.log(this.isDraggable)\n\n    //console.log(this.buttonListEnv)\n    //console.log(this.buttonListLfo)\n\n    /*\n    this.$on(\"unLink\", (data) => {\n          console.log(\"ModSelector disconnecting link from \"+data.modulator.type+\" \"+data.modulator.id+\" to \"+data.section+data.target)})\n      */\n  },\n\n  computed: {\n    textId() {\n      return {\n        fontWeight: \"bold\",\n        opacity: \"80%\",\n        position: 'absolute',\n        fontSize: '.8vw'\n      };\n    },\n    buttonList() {\n      switch (this.type) {\n        case \"volEnvelope\":\n          return {\n            backgroundColor: this.colors.pink.medium\n          };\n        case \"envelope\":\n          return {\n            backgroundColor: this.colors.azure.medium\n          };\n        case \"lfo\":\n          return {\n            backgroundColor: this.colors.purple.glow\n          };\n      }\n    }\n  },\n  methods: {\n    draggability(type, id) {\n      //console.log(this.isDraggable)\n      //console.log(\"checking draggability of \" + type + \" \" + id)\n      return this.isDraggable[type][id];\n    },\n    isDraggableUpdate(isDraggable) {\n      //console.log(\"UPDATE ISDRAGGABLE\")\n      //console.log(this.isDraggable)\n      this.isDraggable = isDraggable;\n    },\n    buttonColor(type) {\n      return {\n        backgroundColor: this.color[type]\n      };\n    },\n    startDrag(event, id, type) {\n      //console.log(\"dragging \" + type + \" \" + id)\n      event.dataTransfer.dropEffect = \"move\";\n      event.dataTransfer.effectAllowed = \"move\";\n      let data = {\n        type: type,\n        id: id,\n        color: this.color[type]\n      };\n      event.dataTransfer.setData(\"data\", JSON.stringify(data));\n      //console.log(data)\n    },\n\n    handleClick(id, type) {\n      this.type = type;\n      if (type === \"volEnvelope\") {\n        //console.log(\"Selected \" + id)\n        this.$emit(\"selection\", type, null);\n      } else {\n        //console.log(\"Selected \" + type + \" \" + id)\n        this.$emit(\"selection\", id, type);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["Tone","watch","inject","props","data","color","mainEnv","colors","pink","glow","envelope","azure","lfo","purple","type","isDraggable","buttonListEnv","buttonListLfo","mounted","i","nEnvelopes","push","id","ref","nLfo","computed","textId","fontWeight","opacity","position","fontSize","buttonList","backgroundColor","medium","methods","draggability","isDraggableUpdate","buttonColor","startDrag","event","dataTransfer","dropEffect","effectAllowed","setData","JSON","stringify","handleClick","$emit"],"sourceRoot":"","sources":["/Users/guglielmofratticioli/Documents/POLIMI/FurioColombo.github.io/src/views/Synth/Modulators/ModSelector.vue"],"sourcesContent":["<template>\n  <div class=\"buttonList\" :style=\"this.buttonList\">\n    <div class=\"identifierVol\" :style=\"buttonColor('mainEnv')\" @click=\"handleClick(null, 'volEnvelope')\">\n      <img src=\"@/icons/ADSR.svg\" alt=\"\" draggable=\"false\">\n    </div>\n    <template v-for=\"button in buttonListEnv\" :key=\"button.id\" :ref=\"button.ref\">\n      <div class=\"button\" :style=\"buttonColor('envelope')\">\n        <div :style=\"textId\"> {{ button.id }} </div>\n        <div class=\"identifier\" @click=\"handleClick(button.id, button.type)\">\n\n          <img src=\"@/icons/ADSR.svg\" alt=\"\" draggable=\"false\">\n        </div>\n        <div class=\"draggableArea\" :draggable=\"draggability('envelope', button.id)\"\n          @dragstart=\"startDrag($event, button.id, button.type)\">ϟ\n        </div>\n      </div>\n    </template>\n    <template v-for=\"button in buttonListLfo\" :key=\"button.id\" :ref=\"button.ref\">\n      <div class=\"button\" :style=\"buttonColor('lfo')\">\n        <div :style=\"textId\"> {{ button.id }} </div>\n        <div class=\"identifier\" @click=\"handleClick(button.id, button.type)\"><!-- {{ button.id }} -->\n\n          <img src=\"@/icons/LFO.svg\" alt=\"\" draggable=\"false\">\n        </div>\n        <div class=\"draggableArea\" :draggable=\"draggability('lfo', button.id)\"\n          @dragstart=\"startDrag($event, button.id, button.type)\">ϟ\n        </div>\n      </div>\n    </template>\n  </div>\n\n</template>\n\n<script>\nimport * as Tone from \"tone\";\nimport { watch } from 'vue';\n\nexport default {\n  inject: ['dropFeedback'],\n  props: [],\n  data() {\n    return {\n      color: {\n        mainEnv: this.colors.pink.glow,\n        envelope: this.colors.azure.glow,\n        lfo: this.colors.purple.glow,\n      },\n      type: \"volEnvelope\",\n\n      isDraggable: this.isDraggable,\n      buttonListEnv: [],\n      buttonListLfo: [],\n    };\n  },\n  mounted() {\n    for (let i = 1; i < this.nEnvelopes + 1; i++) {\n      this.buttonListEnv.push({ id: i, ref: \"button\" + i, type: \"envelope\" });\n    }\n    for (let i = 1; i < this.nLfo + 1; i++) {\n      this.buttonListLfo.push({ id: i, ref: \"button\" + i, type: \"lfo\" });\n    }\n    //console.log(this.isDraggable)\n\n\n    //console.log(this.buttonListEnv)\n    //console.log(this.buttonListLfo)\n\n    /*\n    this.$on(\"unLink\", (data) => {\n          console.log(\"ModSelector disconnecting link from \"+data.modulator.type+\" \"+data.modulator.id+\" to \"+data.section+data.target)})\n\n     */\n\n  },\n  computed: {\n    textId(){\n      return {\n        fontWeight: \"bold\",\n        opacity: \"80%\",\n        position: 'absolute',\n        fontSize:'.8vw'\n      }\n    },\n    buttonList() {\n      switch (this.type) {\n        case \"volEnvelope\":\n          return{\n            backgroundColor: this.colors.pink.medium\n          }\n          case \"envelope\":\n          return{\n            backgroundColor: this.colors.azure.medium\n          }\n          case \"lfo\":\n          return{\n            backgroundColor: this.colors.purple.glow\n          }\n      }\n      \n    } \n\n  },\n  methods: {\n    draggability(type, id) {\n      //console.log(this.isDraggable)\n      //console.log(\"checking draggability of \" + type + \" \" + id)\n      return this.isDraggable[type][id]\n    },\n    isDraggableUpdate(isDraggable) {\n      //console.log(\"UPDATE ISDRAGGABLE\")\n      //console.log(this.isDraggable)\n      this.isDraggable = isDraggable\n    },\n    buttonColor(type) {\n      return {\n        backgroundColor: this.color[type]\n      }\n    },\n\n    startDrag(event, id, type) {\n      //console.log(\"dragging \" + type + \" \" + id)\n      event.dataTransfer.dropEffect = \"move\"\n      event.dataTransfer.effectAllowed = \"move\"\n      let data = { type: type, id: id, color: this.color[type] }\n      event.dataTransfer.setData(\"data\", JSON.stringify(data));\n      //console.log(data)\n    },\n    handleClick(id, type) {\n      this.type = type\n      if (type === \"volEnvelope\") {\n        //console.log(\"Selected \" + id)\n        this.$emit(\"selection\", type, null);\n      } else {\n        //console.log(\"Selected \" + type + \" \" + id)\n        this.$emit(\"selection\", id, type);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.button {\n  display: grid;\n  grid-template-columns: 80% 18%;\n  flex: 1;\n  width: 100%;\n  height: 100%;\n  border: 0.06vw solid black; \n  border-radius: 0.2vw;\n  padding: 1%;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  align-content: center;\n  justify-items: stretch;\n\n}\n\n.buttonList {\n  padding-left: 0.3vw;\n  padding-right:  0.3vw;\n  padding-bottom: 0.3vw;\n  position: relative;\n  grid-row: 2;\n  display: flex;\n  flex-basis: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.identifier {\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  /* border: 0.1vw solid black; */\n  display: flex;\n\n}\n\n.identifierVol {\n  border: 0.06vw solid black; \n  border-radius: 0.2vw;\n  flex: 1;\n  box-sizing: border-box;\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n}\n\n.draggableArea {\n  border-radius: 50%;\n  display: flex;\n  border: 0.1vw solid black;\n  box-sizing: border-box;\n  position: relative;\n  width: 100%;\n  aspect-ratio: 1/1;\n  font-size: .9vw;\n  align-items: flex-end;\n  justify-content: center;\n}.draggableArea:hover {\n  opacity: 40%;\n}\n.identifier img {\n  position: relative;\n  opacity: 60%;\n  width: 4vw;\n  aspect-ratio: 1/1;\n}\n.identifierVol img {\n  position: relative;\n  opacity: 60%;\n  width: 4vw;\n  aspect-ratio: 1/1;\n}\n.identifier img:hover {\n  opacity: 40%;\n}\n.identifierVol img:hover {\n  opacity: 40%;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
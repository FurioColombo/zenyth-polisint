{"ast":null,"code":"import \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport MyFilter from \"@/views/Synth/Filters/MyFilter\";\nexport default {\n  props: [\"filter_type\", \"chainId\", \"chainColor\", \"id\"],\n  data: function data() {\n    return {\n      color: this.colors.yellow,\n      type: this.filter_type,\n      cutoff: 0.5,\n      //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\n      resonance: 0.5,\n      //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\n      is_logoDown: false,\n      modulator: null\n    };\n  },\n  mounted: function mounted() {\n    // mouse event listeners\n    document.addEventListener(\"mousemove\", this.onMouseMove);\n    document.addEventListener(\"mouseup\", this.onMouseUp);\n\n    //console.log(this.$props)\n\n    // -------------- AUDIO ---------------\n    this.filter = new MyFilter(this.type, this.cutoff, this.resonance);\n    this.cutoff = this.filter.getCutoff();\n    this.resonance = this.filter.getResonance();\n\n    //console.log(this.chainId+\" \"+this.id)\n    //Inserting filter in global variable\n    this.filterChains[this.chainId][this.id] = this.filter;\n    if (this.id === this.nFiltersXchain - 1 && this.chainId === this.nFilterChains - 1) {\n      this.$emit(\"filtersMounted\");\n    }\n  },\n  methods: {\n    //------------DRAG AND DROP LOGIC---------\n    handleDrop: function handleDrop(event) {\n      var target = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      if (this.modulator === null) {\n        var data = JSON.parse(event.dataTransfer.getData(\"data\"));\n        this.modulator = {\n          color: data.color,\n          id: data.id,\n          type: data.type\n        };\n        //console.log(\"RECEIVED HANDLEDROP, THIS.MODULATOR=\")\n        //console.log(this.modulator)\n        document.dispatchEvent(new CustomEvent(\"link\", {\n          detail: {\n            object: this.filter,\n            target: target,\n            color: this.color[\"light\"],\n            modulator: {\n              type: this.modulator.type,\n              id: this.modulator.id\n            }\n          }\n        }));\n      }\n    },\n    handleDragEnter: function handleDragEnter(target) {\n      //todo: highlight object when dragging on it\n      //console.log(\"Dragging over \" + target)\n    },\n    handleDragLeave: function handleDragLeave(target) {\n      //console.log(\"Dragging out of \" + target)\n    },\n    unlinkMod: function unlinkMod(target) {\n      //todo: CALL BACK ENVELOPS TO UNLINK\n      document.dispatchEvent(new CustomEvent(\"unLink\", {\n        detail: {\n          object: this.filter,\n          target: target,\n          modulator: {\n            type: this.modulator.type,\n            id: this.modulator.id\n          }\n        }\n      }));\n\n      //re-hide link dot\n      this.modulator = null;\n    },\n    //--------DRAG AND DROP STYLING--------\n    computedModulation: function computedModulation() {\n      var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      if (this.modulator) {\n        return {\n          width: \"1vw\",\n          height: \"1vw\",\n          borderRadius: \"50%\",\n          backgroundColor: this.modulator.color,\n          position: \"absolute\",\n          left: \"10%\",\n          zIndex: \"1\",\n          top: \"10%\"\n        };\n      } else {\n        return {\n          display: \"none\",\n          width: \"0%\",\n          height: \"0%\"\n        };\n      }\n    },\n    computedModText: function computedModText() {\n      var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      if (this.modulator) {\n        return this.modulator.id;\n      } else return \"\";\n    },\n    //------------------------------------\n    // ----------- USER EVENTS -----------\n    onMouseMove: function onMouseMove(event) {\n      if (this.is_logoDown) {\n        if (event.movementY < 0) {\n          // Mouse is moving up\n          this.resonance = Math.max(this.resonance + event.movementY / 100, 0);\n          //console.log(\"moving up\");\n        } else {\n          // Mouse is moving down\n          this.resonance = Math.min(this.resonance + event.movementY / 100, 1);\n        }\n        if (event.movementX < 0) {\n          // Mouse is moving right\n          this.cutoff = Math.max(this.cutoff + Math.floor(event.movementX) / 100, 0);\n        } else if (event.movementX > 0) {\n          // Mouse is moving left\n          this.cutoff = Math.min(this.cutoff + Math.floor(event.movementX) / 100, 1);\n        }\n        // ----------- audio ---------\n        this.filter.setResonance(this.resonance);\n        this.filter.setCutoff(this.cutoff);\n      }\n    },\n    onMouseUp: function onMouseUp() {\n      if (this.is_logoDown) this.is_logoDown = false;\n      document.body.style.cursor = \"pointer\";\n    },\n    logoDown: function logoDown() {\n      if (!this.is_logoDown) {\n        this.is_logoDown = true;\n        document.body.style.cursor = \"none\";\n      }\n    },\n    // ----------- AUDIO SETTERS--------------\n    setCutoff: function setCutoff() {\n      var cutoff = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.cutoff;\n      this.cutoff = cutoff;\n      this.filter.setCutoff(this.cutoff);\n    },\n    setResonance: function setResonance() {\n      var resonance = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.resonance;\n      this.resonance = resonance;\n      this.filter.setResonance(this.resonance);\n    },\n    connect: function connect(destination) {\n      this.filter.connect(destination);\n    },\n    disconnect: function disconnect(destination) {\n      this.filter.disconnect(destination);\n    },\n    // ------------ GETTERS SETTERS -------------\n    getToneFilter: function getToneFilter() {\n      return this.filter.getToneFilter();\n    },\n    getMyFilter: function getMyFilter() {\n      return this.filter;\n    }\n  },\n  computed: {\n    computedHeadStyle: function computedHeadStyle() {\n      return {\n        left: 0.7 * this.cutoff * 100 + 13.5 + \"%\"\n      };\n    },\n    computedGlow: function computedGlow() {\n      if (this.filter_type === \"peaking\" && this.resonance < 0.5) {\n        return {\n          opacity: 1 - 2 * this.resonance,\n          background: this.colors.yellow.light\n        };\n      } else if (this.filter_type === \"peaking\" && this.resonance >= 0.5) {\n        return {\n          opacity: 2 * this.resonance - 1,\n          background: this.colors.yellow.light\n        };\n      } else {\n        return {\n          opacity: 1 - this.resonance,\n          background: this.colors.yellow.light\n        };\n      }\n    },\n    computedLP: function computedLP() {\n      return {\n        transform: \"translateX(\" + (-100 + this.cutoff * 100) + \"%)\"\n      };\n    },\n    computedHP: function computedHP() {\n      return {\n        transform: \"translateX(\" + this.cutoff * 100 + \"%)\"\n      };\n    },\n    computedBDMaks: function computedBDMaks() {\n      var clip = \"\";\n      if (this.resonance > 0.5) clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";else if (this.resonance < 0.5) clip = \"polygon(0% 50%, 0% 100%, 100% 100%, 100% 50%)\";else clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\n      return {\n        clipPath: clip\n      };\n    },\n    computedBD: function computedBD() {\n      if (1 - this.resonance >= 0.5) {\n        return {\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\n          height: (1 - this.resonance) * 100 + \"%\",\n          transform: \"translateX(\" + this.cutoff * 100 + \"%)\"\n        };\n      } else {\n        return {\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\n          height: (1 - this.resonance - 0.5) * 100 + \"%\",\n          transform: \"translateX(\" + (this.cutoff - 0.5) * 100 + \"%)\"\n        };\n      }\n    },\n    computedBDCircle: function computedBDCircle() {\n      return {\n        transform: \"translate(\" + (this.cutoff - 0.5) * 100 + \"%, \" + (this.resonance - 0.5) * 100 + \"%)\"\n        //transform: 'translateX('+(this.cutoff-.5)*100+'%)'\n      };\n    },\n    filter_logo: function filter_logo() {\n      return {\n        background: this.colors.yellow.glow\n      };\n    },\n    logo: function logo() {\n      return {\n        background: this.colors.yellow.light\n      };\n    },\n    logo_text_back: function logo_text_back() {\n      return {\n        background: this.colors.yellow.light\n      };\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["MyFilter","props","data","color","colors","yellow","type","filter_type","cutoff","resonance","is_logoDown","modulator","mounted","document","addEventListener","onMouseMove","onMouseUp","filter","getCutoff","getResonance","filterChains","chainId","id","nFiltersXchain","nFilterChains","$emit","methods","handleDrop","event","target","JSON","parse","dataTransfer","getData","dispatchEvent","CustomEvent","detail","object","handleDragEnter","handleDragLeave","unlinkMod","computedModulation","width","height","borderRadius","backgroundColor","position","left","zIndex","top","display","computedModText","movementY","Math","max","min","movementX","floor","setResonance","setCutoff","body","style","cursor","logoDown","connect","destination","disconnect","getToneFilter","getMyFilter","computed","computedHeadStyle","computedGlow","opacity","background","light","computedLP","transform","computedHP","computedBDMaks","clip","clipPath","computedBD","computedBDCircle","filter_logo","glow","logo","logo_text_back"],"sourceRoot":"","sources":["C:\\Home\\Projects\\Programmazione\\WebStorm\\myZenythPolisinT\\zenyth_polisint\\src\\views\\Synth\\Filters\\Filter.vue"],"sourcesContent":["<template>\r\n  <div class=\"filter\">\r\n    <div class=\"modDot\" :style=\"computedModulation('filter')\" @click.shift.stop=\"unlinkMod('filter')\"\r\n         v-text=\"computedModText('filter')\"></div>\r\n    <div class=\"filter_back\" ref=\"filter_back\"\r\n         >\r\n\r\n    </div>\r\n    <div class=\"filter_logo\" :style=\"this.filter_logo\" @mousedown=\"logoDown\">\r\n      <div v-if=\"is_logoDown && type != 'peaking'\" class=\"logo_text\">\r\n        {{ ((1 - this.resonance) * 100).toFixed() + \"%\" }}\r\n      </div>\r\n      <div v-if=\"is_logoDown && type == 'peaking'\" class=\"logo_text\">\r\n        {{ ((1 - 2 * this.resonance) * 100).toFixed() + \"%\" }}\r\n      </div>\r\n      <!--<div v-if=\"type==='peaking'\" class=\"logo_BD_mask\" :style=\"computedBDMaks\"></div> -->\r\n      <div class=\"logo_glow\" :style=\"computedGlow\"></div>\r\n\r\n      <div class=\"logo_border\"\r\n           @dragenter=\"handleDragEnter('filter')\" @dragleave=\"handleDragLeave('filter')\"\r\n           @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'filter')\"\r\n      ></div>\r\n      <div class=\"logo\" :style=\"logo\">\r\n        <div v-if=\"is_logoDown\" class=\"logo_text_back\" :style=\"this.logo_text_back\"></div>\r\n        <div\r\n            v-if=\"type === 'lowpass'\"\r\n            class=\"logo_LP\"\r\n            :style=\"computedLP\"\r\n        ></div>\r\n        <div\r\n            v-if=\"type === 'highpass'\"\r\n            class=\"logo_HP\"\r\n            :style=\"computedHP\"\r\n        ></div>\r\n        <div v-if=\"type === 'peaking'\" class=\"logo_BD_back\"></div>\r\n        <div\r\n            v-if=\"type === 'peaking'\"\r\n            class=\"logo_BD_circle\"\r\n            :style=\"computedBDCircle\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MyFilter from \"@/views/Synth/Filters/MyFilter\";\r\n\r\nexport default {\r\n  props: [\"filter_type\", \"chainId\", \"chainColor\", \"id\"],\r\n\r\n  data() {\r\n    return {\r\n      color: this.colors.yellow,\r\n      type: this.filter_type,\r\n      cutoff: 0.5,  //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\r\n      resonance: 0.5, //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\r\n      is_logoDown: false,\r\n\r\n      modulator: null,\r\n    }\r\n  },\r\n  mounted() {\r\n    // mouse event listeners\r\n    document.addEventListener(\"mousemove\", this.onMouseMove);\r\n    document.addEventListener(\"mouseup\", this.onMouseUp);\r\n\r\n    //console.log(this.$props)\r\n\r\n    // -------------- AUDIO ---------------\r\n    this.filter = new MyFilter(this.type, this.cutoff, this.resonance);\r\n\r\n    this.cutoff = this.filter.getCutoff()\r\n    this.resonance = this.filter.getResonance()\r\n\r\n\r\n    //console.log(this.chainId+\" \"+this.id)\r\n    //Inserting filter in global variable\r\n    this.filterChains[this.chainId][this.id] = this.filter;\r\n\r\n    if (this.id === this.nFiltersXchain - 1 && this.chainId === this.nFilterChains - 1) {\r\n      this.$emit(\"filtersMounted\");\r\n    }\r\n\r\n  },\r\n\r\n  methods: {\r\n    //------------DRAG AND DROP LOGIC---------\r\n    handleDrop(event, target = \"\") {\r\n      if (this.modulator === null) {\r\n        let data = JSON.parse(event.dataTransfer.getData(\"data\"));\r\n        this.modulator = {color: data.color, id: data.id, type: data.type}\r\n        //console.log(\"RECEIVED HANDLEDROP, THIS.MODULATOR=\")\r\n        //console.log(this.modulator)\r\n        document.dispatchEvent(new CustomEvent(\"link\", {\r\n          detail: {\r\n            object: this.filter,\r\n            target: target,\r\n            color: this.color[\"light\"],\r\n            modulator: {type: this.modulator.type, id: this.modulator.id}\r\n          }}\r\n        ))\r\n      }\r\n\r\n    },\r\n    handleDragEnter(target) {\r\n      //todo: highlight object when dragging on it\r\n      //console.log(\"Dragging over \" + target)\r\n    },\r\n    handleDragLeave(target) {\r\n      //console.log(\"Dragging out of \" + target)\r\n    },\r\n    unlinkMod(target) {\r\n      //todo: CALL BACK ENVELOPS TO UNLINK\r\n      document.dispatchEvent(new CustomEvent(\"unLink\", {\r\n            detail: {\r\n              object: this.filter,\r\n              target: target,\r\n              modulator: {type: this.modulator.type, id: this.modulator.id}\r\n            }\r\n          }\r\n      ))\r\n\r\n      //re-hide link dot\r\n      this.modulator = null;\r\n\r\n    },\r\n    //--------DRAG AND DROP STYLING--------\r\n    computedModulation(target = \"\") {\r\n      if (this.modulator) {\r\n        return {\r\n          width: \"1vw\",\r\n          height: \"1vw\",\r\n          borderRadius: \"50%\",\r\n          backgroundColor: this.modulator.color,\r\n          position: \"absolute\",\r\n          left: \"10%\",\r\n          zIndex: \"1\",\r\n          top: \"10%\",\r\n        };\r\n      } else {\r\n        return {\r\n          display: \"none\",\r\n          width: \"0%\",\r\n          height: \"0%\",\r\n        }\r\n      }\r\n    },\r\n    computedModText(target = \"\") {\r\n      if (this.modulator) {\r\n        return this.modulator.id\r\n      } else return \"\";\r\n    },\r\n\r\n    //------------------------------------\r\n\r\n    // ----------- USER EVENTS -----------\r\n    onMouseMove(event) {\r\n      if (this.is_logoDown) {\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving up\r\n          this.resonance = Math.max(this.resonance + event.movementY / 100, 0);\r\n          //console.log(\"moving up\");\r\n        } else {\r\n          // Mouse is moving down\r\n          this.resonance = Math.min(this.resonance + event.movementY / 100, 1);\r\n        }\r\n        if (event.movementX < 0) {\r\n          // Mouse is moving right\r\n          this.cutoff = Math.max(\r\n              this.cutoff + Math.floor(event.movementX) / 100,\r\n              0\r\n          );\r\n        } else if (event.movementX > 0) {\r\n          // Mouse is moving left\r\n          this.cutoff = Math.min(\r\n              this.cutoff + Math.floor(event.movementX) / 100,\r\n              1\r\n          );\r\n        }\r\n        // ----------- audio ---------\r\n        this.filter.setResonance(this.resonance);\r\n        this.filter.setCutoff(this.cutoff);\r\n      }\r\n    },\r\n\r\n    onMouseUp() {\r\n      if (this.is_logoDown) this.is_logoDown = false;\r\n      document.body.style.cursor = \"pointer\";\r\n    },\r\n    logoDown() {\r\n      if (!this.is_logoDown) {\r\n        this.is_logoDown = true;\r\n        document.body.style.cursor = \"none\";\r\n      }\r\n    },\r\n\r\n    // ----------- AUDIO SETTERS--------------\r\n    setCutoff(cutoff = this.cutoff) {\r\n      this.cutoff = cutoff;\r\n      this.filter.setCutoff(this.cutoff)\r\n    },\r\n\r\n    setResonance(resonance = this.resonance) {\r\n      this.resonance = resonance\r\n      this.filter.setResonance(this.resonance)\r\n    },\r\n\r\n    connect(destination) {\r\n      this.filter.connect(destination);\r\n    },\r\n\r\n    disconnect(destination) {\r\n      this.filter.disconnect(destination)\r\n    },\r\n\r\n    // ------------ GETTERS SETTERS -------------\r\n    getToneFilter() {\r\n      return this.filter.getToneFilter();\r\n    },\r\n\r\n    getMyFilter() {\r\n      return this.filter;\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    computedHeadStyle() {\r\n      return {\r\n        left: 0.7 * this.cutoff * 100 + 13.5 + \"%\",\r\n      };\r\n    },\r\n    computedGlow() {\r\n      if (this.filter_type === \"peaking\" && this.resonance < 0.5) {\r\n        return {\r\n          opacity: 1 - 2 * this.resonance,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      } else if (this.filter_type === \"peaking\" && this.resonance >= 0.5) {\r\n        return {\r\n          opacity: 2 * this.resonance - 1,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      } else {\r\n        return {\r\n          opacity: 1 - this.resonance,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      }\r\n    },\r\n    computedLP() {\r\n      return {\r\n        transform: \"translateX(\" + (-100 + this.cutoff * 100)  + \"%)\",\r\n      };\r\n    },\r\n    computedHP() {\r\n      return {\r\n        transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\r\n      };\r\n    },\r\n    computedBDMaks() {\r\n      let clip = \"\";\r\n      if (this.resonance > 0.5)\r\n        clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\r\n      else if (this.resonance < 0.5)\r\n        clip = \"polygon(0% 50%, 0% 100%, 100% 100%, 100% 50%)\";\r\n      else clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\r\n      return {\r\n        clipPath: clip,\r\n      };\r\n    },\r\n    computedBD() {\r\n      if (1 - this.resonance >= 0.5) {\r\n        return {\r\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\r\n          height: (1 - this.resonance) * 100 + \"%\",\r\n          transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\r\n        };\r\n      } else {\r\n        return {\r\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\r\n          height: (1 - this.resonance - 0.5) * 100 + \"%\",\r\n          transform: \"translateX(\" + (this.cutoff - 0.5) * 100 + \"%)\",\r\n        };\r\n      }\r\n    },\r\n    computedBDCircle() {\r\n      return {\r\n        transform:\r\n            \"translate(\" +\r\n            (this.cutoff - 0.5) * 100 +\r\n            \"%, \" +\r\n            (this.resonance - 0.5) * 100 +\r\n            \"%)\",\r\n        //transform: 'translateX('+(this.cutoff-.5)*100+'%)'\r\n      };\r\n    },\r\n    filter_logo() {\r\n      return {\r\n        background: this.colors.yellow.glow\r\n      }\r\n    },\r\n    logo() {\r\n      return {\r\n        background: this.colors.yellow.light\r\n      }\r\n    },\r\n    logo_text_back() {\r\n      return {\r\n        background: this.colors.yellow.light,\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modDot {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 0.8vw;\r\n  text-align: center;\r\n  box-sizing: border-box;\r\n  border: .06vw solid black;\r\n}\r\n.filter {\r\n  position: relative;\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 4;\r\n}\r\n\r\n.filter_back {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 80%;\r\n  height: 80%;\r\n  background-color: transparent;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.filter_logo {\r\n  position: absolute;\r\n  display: flex;\r\n  flex: 5;\r\n\r\n  height: 100%;\r\n  top: 0;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  z-index: 0;\r\n  clip-path: circle(50%);\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.logo_border {\r\n  position: absolute;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  z-index: 5;\r\n  border-radius: 50%;\r\n  border: 0.1vw solid #3b210e;\r\n}\r\n\r\n.logo {\r\n  position: absolute;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  z-index: 3;\r\n  clip-path: circle(50%);\r\n}\r\n\r\n.logo_glow {\r\n  position: absolute;\r\n  height: 90%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  z-index: 1;\r\n  filter: blur(0.3vw);\r\n}\r\n\r\n.logo_text {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1vw;\r\n  font-weight: bold;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  color: black;\r\n  opacity: 100%;\r\n  background-color: black;\r\n  z-index: 5;\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.logo_text_back {\r\n  position: absolute;\r\n  z-index: 6;\r\n  left: 15%;\r\n  top: 30%;\r\n  width: 70%;\r\n  height: 40%;\r\n  opacity: 100%;\r\n  border-radius: 10%;\r\n}\r\n\r\n.logo_LP {\r\n  opacity: 60%;\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  border: .1vw solid black;\r\n  background-color: #faf8ef;\r\n  z-index: 1;\r\n}\r\n\r\n.logo_HP {\r\n  opacity: 60%;\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  border: .1vw solid black;\r\n  background-color: #faf8ef;\r\n  z-index: 1;\r\n}\r\n.logo_BD_circle {\r\n  opacity: 60%;\r\n  position: absolute;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  border: .1vw solid black;\r\n  border-radius: 50%;\r\n  background-color: #faf8ef;\r\n  z-index: 5;\r\n}\r\n\r\n.logo_BD_mask {\r\n  opacity: 60%;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  border: .1vw solid black;\r\n  background-color: #ffebd2;\r\n  z-index: 2;\r\n}\r\n\r\n.logo_BD {\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  background-color: white;\r\n  z-index: 1;\r\n}\r\n\r\n.logo_BD_line {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 4%;\r\n  top: 48%;\r\n  filter: blur(0.02vw);\r\n  border-radius: 30%;\r\n  background-color: #e58138;\r\n  z-index: 5;\r\n}\r\n\r\n\r\n.logo_BD_circle {\r\n  position: absolute;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n\r\n  border-radius: 50%;\r\n  background-color: #faf8ef;\r\n  z-index: 5;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}
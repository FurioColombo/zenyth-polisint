{"version":3,"file":"js/app.c61957f9.js","mappings":"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","sources":["webpack://actam/./src/App.vue","webpack://actam/./src/App.vue?7ccd","webpack://actam/./src/views/MainHost.vue","webpack://actam/./src/views/Synth/Oscillators/OscHost.vue","webpack://actam/./src/views/Synth/Oscillators/Osc.vue","webpack://actam/./src/views/Synth/Oscillators/MyPolySynth.js","webpack://actam/./src/views/Synth/Oscillators/Osc.vue?83b5","webpack://actam/./src/views/Synth/Oscillators/OscHost.vue?d815","webpack://actam/./src/views/Synth/Filters/FilterHost.vue","webpack://actam/./src/views/Synth/Filters/FilterChain.vue","webpack://actam/./src/views/Synth/Filters/Filter.vue","webpack://actam/./src/views/Synth/Filters/MyFilter.js","webpack://actam/./src/views/Synth/Filters/Filter.vue?c1b3","webpack://actam/./src/views/Synth/Filters/FilterChain.vue?d0d3","webpack://actam/./src/views/Synth/Filters/FilterHost.vue?2cd0","webpack://actam/./src/views/Synth/Effects/FxHost.vue","webpack://actam/./src/views/Synth/Effects/FxCell.vue","webpack://actam/./src/views/Synth/Effects/MyFx.js","webpack://actam/./src/views/Synth/Effects/FxCell.vue?8c66","webpack://actam/./src/views/Synth/Effects/FxHost.vue?c3f2","webpack://actam/./src/views/Synth/Tools/ToolsHost.vue","webpack://actam/./src/views/Synth/Tools/Meter.vue","webpack://actam/./src/views/Synth/Tools/Meter.vue?40dd","webpack://actam/./src/views/Synth/Tools/Oscilloscope.vue","webpack://actam/./src/views/Synth/Tools/Oscilloscope.vue?f6a7","webpack://actam/./src/views/Synth/Tools/SpecAnalyzer.vue","webpack://actam/./src/views/Synth/Tools/SpecAnalyzer.vue?01c1","webpack://actam/./src/views/Synth/Tools/ToolsHost.vue?776e","webpack://actam/./src/views/Synth/Modulators/ModHost.vue","webpack://actam/./src/views/Synth/Modulators/Envelope.vue","webpack://actam/./src/views/Synth/Modulators/Knobs.vue","webpack://actam/./src/views/Synth/Modulators/Knobs.vue?22e9","webpack://actam/./src/views/Synth/Modulators/VolEnvelope.vue","webpack://actam/./src/views/Synth/Modulators/EnvelopeVisualizer.vue","webpack://actam/./src/views/Synth/Modulators/EnvelopeVisualizer.vue?6078","webpack://actam/./src/views/Synth/Modulators/VolEnvelope.vue?3e34","webpack://actam/./src/views/Synth/Modulators/Lfo.vue","webpack://actam/./src/views/Synth/Modulators/LfoVisualizer.vue","webpack://actam/./src/views/Synth/Modulators/LfoVisualizer.vue?ff68","webpack://actam/./src/views/Synth/Modulators/Lfo.vue?aca2","webpack://actam/./src/views/Synth/Modulators/ModSelector.vue","webpack://actam/./src/views/Synth/Modulators/ModSelector.vue?9635","webpack://actam/./src/views/Synth/Modulators/Envelope.vue?43eb","webpack://actam/./src/views/Synth/Modulators/ModHost.vue?a17d","webpack://actam/./src/views/Synth/Keyboard/PianoKeyboard.vue","webpack://actam/./src/views/Synth/Keyboard/MIDIKeyboard.vue","webpack://actam/./src/views/Synth/Keyboard/MIDIKeyboard.vue?854b","webpack://actam/./src/views/Synth/Keyboard/Octave.vue","webpack://actam/./src/views/Synth/Keyboard/Octave.vue?c297","webpack://actam/./src/views/Synth/Keyboard/PianoKeyboard.vue?3c01","webpack://actam/./src/views/MainHost.vue?2950","webpack://actam/./src/router/index.js","webpack://actam/./src/main.js","webpack://actam/./src/views/AboutView.vue","webpack://actam/./src/views/AboutView.vue?d56f","webpack://actam/webpack/bootstrap","webpack://actam/webpack/runtime/chunk loaded","webpack://actam/webpack/runtime/compat get default export","webpack://actam/webpack/runtime/define property getters","webpack://actam/webpack/runtime/global","webpack://actam/webpack/runtime/hasOwnProperty shorthand","webpack://actam/webpack/runtime/make namespace object","webpack://actam/webpack/runtime/publicPath","webpack://actam/webpack/runtime/jsonp chunk loading","webpack://actam/webpack/startup"],"sourcesContent":["<template>\r\n  <nav>\r\n    <router-link to=\"/\">\r\n      <img className=\"app_logo\" src=\"@/img/zenyth_logo.png\" alt=\"\" @click=\"openAbout\">\r\n    </router-link>\r\n  </nav>\r\n  <router-view/>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nexport default {\r\n  mounted() {\r\n\r\n  },\r\n  methods: {\r\n    openAbout() {\r\n      let routeData = this.$router.resolve({\r\n        path: '/about',\r\n        query: {}\r\n      });\r\n      window.open(routeData.href, '_blank');\r\n      // window.open(\"http://localhost:8080/about\") todo: about page routing working only on localhost\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  width: 100%;\r\n  height: 100vh;\r\n  margin: auto;\r\n}\r\n\r\n.app_logo {\r\n  width: 10vw;\r\n  margin-bottom: 1vw;\r\n  object-fit: scale-down;\r\n}\r\n\r\nnav {\r\n  width: 100%;\r\n  aspect-ratio: 24/1;\r\n  font-size: 2vw;\r\n  padding-top: 1vw;\r\n}\r\n\r\nnav a {\r\n  font-weight: bold;\r\n  color: #2c3e50;\r\n}\r\n\r\nnav a.router-link-exact-active {\r\n  color: #42b983;\r\n}\r\n\r\ndiv {\r\n  user-select: none;\r\n}\r\n</style>\r\n","import { render } from \"./App.vue?vue&type=template&id=76de134a\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=76de134a&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"appContainer\" @mouseup=\"handleMouseUp\" @mousemove=\"handleMouseMove\">\r\n    <div class=\"mainHost\">\r\n      <OscHost ref=\"oscHost\" @newOsc=\"handleNewOsc\" />\r\n      <FilterHost ref=\"filterHost\" @filterInitialized=\"initOscConnections\"/>\r\n      <FxHost ref=\"fxHost\"/>\r\n      <ToolHost ref=\"toolsHost\" />\r\n      <ModHost ref=\"modHost\"/>\r\n      <PianoKeyboard\r\n        ref=\"pianoKeyboard\"\r\n        @noteDown=\"noteDownHandle\"\r\n        @noteUp=\"noteUpHandle\"\r\n      />\r\n    </div>\r\n    <LFO :key=\"1\"  ></LFO>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport OscHost from \"./Synth/Oscillators/OscHost.vue\";\r\nimport FilterHost from \"./Synth/Filters/FilterHost.vue\";\r\nimport FxHost from \"./Synth/Effects/FxHost.vue\";\r\nimport ToolHost from \"./Synth/Tools/ToolsHost.vue\";\r\nimport ModHost from \"./Synth/Modulators/ModHost.vue\"; // Envelope Strip\r\nimport LFO from \"@/views/Synth/Modulators/Lfo.vue\"; // todo: remove\r\nimport PianoKeyboard from \"./Synth/Keyboard/PianoKeyboard.vue\";\r\n\r\nexport default {\r\n  name: \"mainHost\",\r\n  components: {\r\n    LFO, // todo : delete from here\r\n    OscHost,\r\n    FilterHost,\r\n    FxHost,\r\n    ToolHost,\r\n    ModHost,\r\n    PianoKeyboard,\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      draggedInfo: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    Tone.Transport.start(\"+0.1\")\r\n  },\r\n\r\n  methods: {\r\n    // -------------- INIT ROUTING (connections) ------------\r\n    initOscConnections(){\r\n      this.$refs.oscHost.initConnections()\r\n    },\r\n    initFilterConnections(){\r\n      //console.log(\"main host init filter-fx connections\")\r\n      // todo: delete this.$refs.filterHost.initConnections()\r\n    },\r\n    handleNewOsc(){\r\n      //initialize volEnvelope on all synth when a new oscillator is added\r\n      this.$refs.modHost.handleNewOsc();\r\n    },\r\n    handleMouseUp(e) {\r\n      //Actions to execute when mouseup happens on any part of the screen\r\n      this.$refs.pianoKeyboard.handleMouseUp();\r\n      this.$refs.modHost.handleMouseUp(e);\r\n      this.$refs.fxHost.handleMouseUp(e);\r\n\r\n      //If something has been dragged and not claimed after 100ms infos are deleted\r\n      if (this.draggedInfo) {\r\n        setTimeout(() => this.deleteDraggedInfo(\"MainHost\"), 100);\r\n      }\r\n    },\r\n    handleMouseMove(e){\r\n      //console.log(this.$refs.modHost)\r\n      this.$refs.modHost.handleMouseMove(e);\r\n      this.$refs.fxHost.handleMouseMove(e);\r\n\r\n    },\r\n    noteDownHandle(note) {\r\n      this.$refs[\"toolsHost\"].setOscilloscopeTiming(note);\r\n    },\r\n\r\n\r\n    noteUpHandle(note) {\r\n    },\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.mainHost {\r\n  display: grid; /* no more flex display because we need Env Strip to be longer */\r\n  grid-template-rows: 55% 30% 15%; /* grid display row sizes*/\r\n  grid-template-columns: 20% 55% 25%; /*  ...   ...   column sizes fr is like unit */\r\n  width: 100%;\r\n  justify-content: center;\r\n  aspect-ratio: 4 / 3;\r\n  background-color: transparent;\r\n}\r\n.appContainer {\r\n  text-align: center;\r\n  width: 60%;\r\n  height: 100vh;\r\n  margin: auto;\r\n}\r\n</style>","<template>\r\n  <div class=\"oscHost\" :style=\"this.oscHost\">\r\n    <div class=\"scrollable\">\r\n      <template v-for=\"(osc) in this.oscList\" :key=\"osc.id\" :item=\"osc\">\r\n        <Osc\r\n            :ref=\"osc.ref\"\r\n            :id=\"osc.id\"\r\n            @disposed=\"removeOsc\"\r\n            @newOsc=\"handleNewOsc\"\r\n        />\r\n      </template>\r\n      <div class=\"voidContainer\" @click=\"addOsc\">\r\n        <div class=\"voidBorder\" :style=\"voidBorder\">\r\n          <div class=\"oscVoid\">+</div>\r\n        </div>\r\n      </div>\r\n      <div  v-if=\"this.oscList.length <= 1\" class=\"voidContainer\" @click=\"addOsc\">\r\n        <div class=\"voidBorder\" :style=\"voidBorder\">\r\n          <div class=\"oscVoid\">+</div>\r\n        </div>\r\n      </div>\r\n      <div  v-if=\"this.oscList.length <= 0\" class=\"voidContainer\" @click=\"addOsc\">\r\n        <div class=\"voidBorder\" :style=\"voidBorder\">\r\n          <div class=\"oscVoid\" >+</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Osc from \"./Osc.vue\";\r\nimport Vue from \"vue\";\r\nimport {isProxy, toRaw} from \"vue\";\r\n\r\nexport default {\r\n  components: {\r\n    Osc,\r\n  },\r\n\r\n  data() {\r\n    // data structure oscillators list\r\n    return {\r\n      oscList: [],\r\n      name: \"oscHost\",\r\n      i: 0,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.addOsc();\r\n    this.addOsc();\r\n  },\r\n\r\n  methods: {\r\n    handleNewOsc(){\r\n      this.$emit(\"newOsc\")\r\n    },\r\n    initConnections() {\r\n      for (let key in this.$refs) {\r\n        //console.log(toRaw(this.$refs[key][0]))\r\n        toRaw(this.$refs[key][0]).initConnections()\r\n\r\n      }\r\n    },\r\n    addOsc() {\r\n      //TO-DO REWRITE\r\n      let ref = \"osc\" + this.i;\r\n      this.oscList.push({id: this.i, ref: ref});\r\n      //console.log(\"adding osc\" + this.i)\r\n      //console.log(this.oscList);\r\n      this.i += 1;\r\n    },\r\n\r\n    removeOsc(id) {\r\n      //console.log(\"removing oscillator\" + id);\r\n      // Remove the oscillator from the list\r\n      let index = 0\r\n      this.oscList.forEach(osc => {\r\n        if (osc.id === id) index = this.oscList.indexOf(osc)\r\n      });\r\n      this.oscList.splice(index, 1);\r\n    },\r\n  },\r\n  unmounted() {\r\n  },\r\n  computed: {\r\n    oscHost(){\r\n      return{\r\n        background: '#f8e7e6',\r\n      }\r\n    },\r\n    voidBorder(){\r\n      return{\r\n        background: this.colors.pink.glow,\r\n        border: '.1vw solid' + this.colors.pink.dark\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.scrollable {\r\n  font-size: 2vw;\r\n  justify-content: center;\r\n  overflow-y: scroll;\r\n  /* Add a vertical scrollbar */\r\n  overflow-x: hidden;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.voidContainer {\r\n  width: 100%;\r\n  height: calc(100% / 3);\r\n  position: relative\r\n}\r\n\r\n.voidBorder {\r\n  height: calc(100% - 0.6vw);\r\n  padding: 0.3vw;\r\n}\r\n\r\n.oscVoid {\r\n  border: 0.1vw solid #c2847b;\r\n  color: #c2847b;\r\n  background: #f8e7e6;\r\n  border-radius: 0.3vw;\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 2vw;\r\n}\r\n.oscVoid:hover {\r\n  border: 0.1vw solid #63443e;\r\n  color: #63443e;\r\n  border-radius: 0.3vw;\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 2vw;\r\n}\r\n\r\n/*  hide the scrollbar because cannot be resized in Chrome, Safari (breaks % layout)*/\r\n.scrollable::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n</style>","<template>\r\n  <!-- PLEASE DON'T GO CRAZY TRYING UNDERSTAND THIS DIVs LAYER STACKS XD, Look into OSC MIDDLE-->\r\n  <!-- IN \"osc_middle\" there are the movable circle slider crowns : : 'mod_slider' / 'volume_slider' -->\r\n  <div class=\"main_container\" @click.shift=\"dispose\">\r\n    <div class=\"type_button\" @click=\"nextOscType\" :style=\"this.type_button\">\r\n      <div class=\"innertext\" :style=\"this.type_text\">{{\r\n        osc_types[true] === \"\" ? 'std' : osc_types[this.oscTypeIndex]\r\n      }}\r\n      </div>\r\n    </div>\r\n    <!-- DO NOT TOUCH EVER AGAIN HTML STRUCTURE / CSS !!!!!!!!!!!!-->\r\n    <div class=\"osc_container\" :style=\"osc_container\">\r\n      <div class=\"osc\">\r\n        <div class=\"osc_back\">\r\n          <div class=\"mod_area\" :style=\"this.mod_area\"></div>\r\n          <div class=\"volume_area\" :style=\"this.volume_area\"></div>\r\n          <div class=\"pitch_slider\" :style=\"this.pitch_slider\"></div>\r\n        </div>\r\n        <div class=\"osc_middle\">\r\n\r\n          <div class=\"mod_slider\" ref=\"modulation\" :style=\"this.mod_slider\"></div>\r\n          <div class=\"volume_slider\" ref=\"volume\" :style=\"this.volume_slider\"></div>\r\n        </div>\r\n        <div class=\"osc_front\">\r\n          <div class=\"pitch_area\" :style=\"this.pitch_area\"></div>\r\n          <div class=\"pitch_hand\" ref=\"pitch\" :style=\"this.pitch_hand\"></div>\r\n          <div class=\"lineL\" :style=\"this.lineL\"></div>\r\n          <div class=\"lineU\" :style=\"this.lineU\"></div>\r\n          <div class=\"lineR\" :style=\"this.lineR\"></div>\r\n        </div>\r\n        <div class=\"draggable left\" @dragenter=\"handleDragEnter('mod')\" @dragleave=\"handleDragLeave('mod')\"\r\n          @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'mod')\" @mousedown=\"modulationDown\">\r\n          <div class=\"modDot\" :style=\"computedModulation('mod')\" @click.shift.stop=\"unlinkMod('mod')\"\r\n            v-text=\"computedModText('mod')\"></div>\r\n        </div>\r\n        <div class=\"draggable right\" @dragenter=\"handleDragEnter('vol')\" @dragleave=\"handleDragLeave('vol')\"\r\n          @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'vol')\" @mousedown=\"volumeDown\">\r\n          <div class=\"modDot\" :style=\"computedModulation('vol')\" @click.shift.stop=\"unlinkMod('vol')\"\r\n            v-text=\"computedModText('vol')\"></div>\r\n        </div>\r\n        <div class=\"draggable low\" @dragenter=\"handleDragEnter('pitch')\" @dragleave=\"handleDragLeave('pitch')\"\r\n          @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'pitch')\" @mousedown=\"pitchDown\">\r\n          <div class=\"modDot\" :style=\"computedModulation('pitch')\" @click.shift.stop=\"unlinkMod('pitch')\"\r\n            v-text=\"computedModText('pitch')\"></div>\r\n        </div>\r\n        <div class=\"osc_wave\" @click=\"nextWaveform\" :style=\"this.osc_wave\">\r\n          <img v-if=\"this.oscWaveIndex === 0\" src=\"@/icons/sine.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.oscWaveIndex === 1\" src=\"@/icons/triangle.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.oscWaveIndex === 2\" src=\"@/icons/saw.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.oscWaveIndex === 3\" src=\"@/icons/square.svg\" alt=\"\" draggable=\"false\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"chain_buttons\" :style=\"chain_buttons\">\r\n      <div></div>\r\n      <div class=\"button_1\" :style=\"button_1\" @click=\"this.onChainclick(0)\"></div>\r\n      <div class=\"button_2\" :style=\"button_2\" @click=\"this.onChainclick(1)\"></div>\r\n      <div class=\"button_3\" :style=\"button_3\" @click=\"this.onChainclick(2)\"></div>\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport SineIcon from \"vue-material-design-icons/SineWave\";\r\nimport SquareIcon from \"vue-material-design-icons/SquareWave\";\r\nimport TriangleIcon from \"vue-material-design-icons/TriangleWave\";\r\nimport SawtoothIcon from \"vue-material-design-icons/SawtoothWave\";\r\nimport {gainToDb} from \"tone\";\r\nimport MyPolySynth from \"./MyPolySynth.js\";\r\n\r\nconst wave_types = [\"sine\", \"triangle\", \"sawtooth\", \"square\"];\r\nconst osc_types = [\"\", \"fm\", \"am\", \"fat\"];\r\n\r\nexport default {\r\n  components: {\r\n    SineIcon,\r\n    SquareIcon,\r\n    TriangleIcon,\r\n    SawtoothIcon,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      // todo: UPDATE ALL COLOR DEPENDING ON THIS:\r\n      color: {\r\n        vol: this.colors.pink,\r\n        mod: this.colors.azure,\r\n        pitch: this.colors.green\r\n      },\r\n\r\n\r\n      // waveform_btn_style: osc_background_colors[0], todo: colors?\r\n      osc_types: [\"std\", \"fm\", \"am\", \"fat\"],\r\n      volume: 0.5,\r\n      modulation: 1,\r\n      pitch: 0,\r\n      pan: 0,\r\n      attack: 0.01,\r\n      decay: 0.1,\r\n      sustain: 1,\r\n      release: 0.2,\r\n      maxPitch: 24,\r\n      minPitch: -24,\r\n      partials: \"\",\r\n      oscWaveIndex: 0, // wave currently selected from  ['sine','triangle', ...]\r\n      oscTypeIndex: 0, // type of osc selected from ['std', 'fm', ...];\r\n      waveform_btn_style: \"lightblue\",\r\n      wave_icon_size: 32,\r\n      is_modulationDown: false,\r\n      is_volumeDown: false,\r\n      is_pitchDown: false,\r\n      isFilterChainRouteActive: [true, false, false],\r\n      modulators: {\r\n        vol: null,\r\n        mod: null,\r\n        pitch: null\r\n      },\r\n    };\r\n  },\r\n  props: [\"id\"],\r\n\r\n  mounted() {\r\n    document.addEventListener(\"mousemove\", this.onMouseMove);\r\n    document.addEventListener(\"mouseup\", this.onMouseUp);\r\n    window.addEventListener(\"resize\", this.resizeGraphics);\r\n\r\n    // resize graphics\r\n    this.resizeGraphics();\r\n    this.gainNode = new Tone.Gain();\r\n    console.log(this.polyphonyVoices)\r\n    this.synth = new MyPolySynth(\"\", this.gainNode, this.polyphonyVoices);\r\n    this.synth.setParameters({ volume: gainToDb(1 - this.volume) });\r\n\r\n    this.synths.list.push(this.synth)\r\n    //console.log(this.synths.list)\r\n    // we need to init connection to first filter chain\r\n    // in the first osc case we need to make sure we connect after the chain is created , so we handle that with events\r\n    // emitted from the filter chain - in all other cases we can just normally connect to the chain\r\n    if (this.id > 1) {\r\n      this.initConnections()\r\n    }\r\n    //communicate to parent that a new osc has been created (to update volEnvelope from ModHost)\r\n    this.$emit(\"newOsc\")\r\n\r\n  },\r\n\r\n  computed: {\r\n\r\n    osc_container() {\r\n      return {\r\n        background: '#f8e7e6'\r\n      }\r\n    },\r\n    /*------------ TYPE BUTTON ------------*/\r\n    type_button() {\r\n      return {\r\n        fontSize: '.5vw',\r\n        background: this.colors.pink.glow\r\n      }\r\n    },\r\n    type_text() {\r\n      return {\r\n        color: this.colors.gray.dark\r\n      }\r\n    },\r\n    /*--------------- OSC -----------------*/\r\n    volume_area() {\r\n      return {\r\n        background: this.colors.pink.dark\r\n      }\r\n    },\r\n    mod_area() {\r\n      return {\r\n        background: this.colors.azure.medium\r\n      }\r\n    },\r\n    pitch_area() {\r\n      return {\r\n        background: this.colors.green.glow\r\n      }\r\n    },\r\n    mod_slider() {\r\n      return {\r\n        transform: \"rotate(-\" + this.modulation * 111 + \"deg)\",\r\n        background: 'white',\r\n        opacity: '60%'\r\n      }\r\n    },\r\n    volume_slider() {\r\n      return {\r\n        backgroundColor: 'white',\r\n        opacity: '60%',\r\n        transform: \"rotate(\" + this.volume * 112 + \"deg)\",\r\n      }\r\n    },\r\n    pitch_slider() {\r\n      return {\r\n        background: this.colors.green.medium\r\n      }\r\n    },\r\n    pitch_hand() {\r\n      return {\r\n        transform: \"rotate(\" + (this.pitch * 50) / this.maxPitch + \"deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    osc_wave() {\r\n      return {\r\n        border: '.1vw solid ' + this.colors.green.dark,\r\n        background: this.colors.green.glow\r\n      }\r\n    },\r\n    lineL() {\r\n      return {\r\n        transform: \"rotate(66deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    lineU() {\r\n      return {\r\n        transform: \"rotate(-66deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    lineR() {\r\n      return {\r\n        transform: \"rotate(180deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    /*------------ CHAIN BUTTONS ------------*/\r\n    chain_buttons() {\r\n      return {\r\n        background: this.colors.pink.glow\r\n      }\r\n    },\r\n    button_1() {\r\n      let color = ''\r\n      if (this.isFilterChainRouteActive[0])\r\n        color = this.colors.purple.light\r\n      else {\r\n        color = this.colors.pink.glow\r\n      }\r\n      return {\r\n        background: color, \r\n        border: '.1vw solid ' + this.colors.gray.dark \r\n      }\r\n    },\r\n    button_2() {\r\n      let color = ''\r\n      if (this.isFilterChainRouteActive[1])\r\n        color = this.colors.green.medium\r\n      else {\r\n        color = this.colors.pink.glow\r\n      }\r\n      return {\r\n        background: color, \r\n        border: '.1vw solid ' + this.colors.gray.dark \r\n      }\r\n    },\r\n    button_3() {\r\n      let color = ''\r\n      if (this.isFilterChainRouteActive[2])\r\n        color = this.colors.pink.light\r\n      else {\r\n        color = this.colors.pink.glow\r\n      }\r\n      return {\r\n        background: color, \r\n        border: '.1vw solid ' + this.colors.gray.dark \r\n      }\r\n    },\r\n  },\r\n\r\n  methods: {\r\n\r\n    //--------DRAG AND DROP METHODS--------\r\n    handleDrop(event, target) {\r\n      if (this.modulators[target] === null) {\r\n        let data = JSON.parse(event.dataTransfer.getData(\"data\"));\r\n        //if i'm not trying to link an evelope to volume\r\n        if (!(target === 'vol' && data.type === 'envelope')) {\r\n          //console.log(\"Dropping on \" + target)\r\n          //console.log(data)\r\n          this.modulators[target] = {color: data.color, id: data.id, type: data.type}\r\n          document.dispatchEvent(new CustomEvent(\"link\", {\r\n                detail: {\r\n                  object: this.synth,\r\n                  target: target,\r\n                  color: this.color[target][\"medium\"],\r\n                  modulator: {type: this.modulators[target].type, id: this.modulators[target].id}\r\n                }\r\n              }\r\n          ))\r\n        }\r\n      }\r\n\r\n    },\r\n    handleDragEnter(target) {\r\n      //todo: highlight object when dragging on it\r\n      console.log(\"Dragging over \" + target)\r\n    },\r\n    handleDragLeave(target) {\r\n      console.log(\"Dragging out of \" + target)\r\n    },\r\n    unlinkMod(target) {\r\n      //todo: CALL BACK ENVELOPS TO UNLINK\r\n      document.dispatchEvent(new CustomEvent(\"unLink\", {\r\n            detail: {\r\n              object: this.synth,\r\n              target: target,\r\n              modulator: {type: this.modulators[target].type, id: this.modulators[target].id}\r\n            }\r\n          }\r\n      ))\r\n\r\n      //re-hide link dot\r\n      this.modulators[target] = null;\r\n\r\n    },\r\n    //--------DRAG AND DROP STYLING--------\r\n    computedModulation(target) {\r\n      switch (target) {\r\n        case \"vol\":\r\n          if (this.modulators[target]) {\r\n            return {\r\n              width: \"1vw\",\r\n              height: \"1vw\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: this.modulators[target].color,\r\n              position: \"absolute\",\r\n              right: \"0%\",\r\n            };\r\n          } else {\r\n            return {\r\n              display: \"none\",\r\n              width: \"0%\",\r\n              height: \"0%\",\r\n            }\r\n          }\r\n\r\n        case \"mod\":\r\n          if (this.modulators[target]) {\r\n            return {\r\n              width: \"1vw\",\r\n              height: \"1vw\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: this.modulators[target].color,\r\n              position: \"absolute\",\r\n            };\r\n          } else {\r\n            return {\r\n              display: \"none\",\r\n              width: \"0%\",\r\n              height: \"0%\",\r\n            }\r\n          }\r\n        case \"pitch\":\r\n          if (this.modulators[target]) {\r\n            return {\r\n              width: \"1vw\",\r\n              height: \"1vw\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: this.modulators[target].color,\r\n              position: \"absolute\",\r\n              left: \"0%\",\r\n              bottom: \"0%\"\r\n            };\r\n          } else {\r\n            return {\r\n              display: \"none\",\r\n              width: \"0%\",\r\n              height: \"0%\",\r\n            }\r\n          }\r\n      }\r\n    },\r\n    computedModText(target) {\r\n      if (this.modulators[target]) {\r\n        return this.modulators[target].id\r\n      } else return \"\";\r\n    },\r\n\r\n\r\n\r\n    //-----------------\r\n    dispose() {\r\n      //unlink linked modulators\r\n      for (let key in this.modulators) {\r\n        if (this.modulators[key])\r\n          this.unlinkMod(key)\r\n      }\r\n\r\n      this.$emit(\"disposed\", this.id)\r\n      this.synth.disconnectDispose()\r\n      this.synths.list.splice(this.synths.list.indexOf(this.synth), 1)\r\n\r\n\r\n      //console.log(\"Synth to remove is at index: \" + this.synths.list.indexOf(this.synth))\r\n      //console.log(\"list of synths remaining:\")\r\n      //console.log(this.synths.list)\r\n    },\r\n    initConnections() {\r\n      this.gainNode.connect(this.filterChains[0][0].getToneFilter())\r\n    },\r\n\r\n    // ----------- GRAPHIC HELPERS -----------\r\n    resizeGraphics() {\r\n      let width = document.body.clientWidth;\r\n      if (width >= 500) {\r\n        this.wave_icon_size = (32 * width) / 1500;\r\n      } else {\r\n        this.wave_icon_size = 0;\r\n      }\r\n    },\r\n\r\n    // ---------- USER EVENTS ---------------\r\n    // Audio routing changed clicking the dots that represent the filter chains\r\n    onChainclick(id) {\r\n      //console.log(\"chain click - id: \" + id);\r\n      try {\r\n        if (this.isFilterChainRouteActive[id]) {\r\n          console.log(\r\n              \"disconnect from: \" +\r\n              this.filterChains[id][0] + \" \" + id\r\n          );\r\n          this.gainNode.disconnect(\r\n              this.filterChains[id][0].getToneFilter()\r\n          );\r\n        } else {\r\n          console.log(\r\n            \"connect to: \" +\r\n            this.filterChains[id][0] + \" \" + id\r\n          );\r\n          this.gainNode.connect(\r\n              this.filterChains[id][0].getToneFilter()\r\n          );\r\n        }\r\n      } catch (e) {\r\n        console.log(\r\n          \"error: \" + e + \"\\nCHAIN CONNECTION TO OSC UNSUCCESSFUL. Can't connect to \" + this.filterChains[id][0]\r\n        );\r\n      }\r\n      this.isFilterChainRouteActive[id] = !this.isFilterChainRouteActive[id];\r\n    },\r\n\r\n    onMouseMove(event) {\r\n      if (this.is_volumeDown) {\r\n        // RIGHT FADER - volume\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving up\r\n          this.volume = Math.max(this.volume + event.movementY / 100, 0);\r\n        } else {\r\n          // Mouse is moving down\r\n          this.volume = Math.min(this.volume + event.movementY / 100, 1);\r\n        }\r\n        // -------------- modify here synth audio ----------------\r\n        // this.synth.volume.value = gainToDb(1 - this.volume);\r\n        this.synth.setParameters({ volume: gainToDb(1 - this.volume) });\r\n        //console.log(\"synth volume: \" + this.volume.toFixed(2) + \" dB\");\r\n      } else if (this.is_modulationDown) {\r\n        // LEFT FADER - modulation\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving down\r\n          this.modulation = Math.max(this.modulation + event.movementY / 100, 0);\r\n        } else {\r\n          // Mouse is moving up\r\n          this.modulation = Math.min(this.modulation + event.movementY / 100, 1);\r\n        }\r\n        // -------------- modify here synth audio ----------------\r\n        // (1- this.modulation) needed because the graphics return a value of 1 for the minimum and 0 for the max\r\n        this.synth.setParameters({modulation: 1 - this.modulation })\r\n        //console.log(\"modulation: \" + (1 -  this.modulation.toFixed(2)));\r\n      } else if (this.is_pitchDown) {\r\n        // BOTTOM FADER - pitch shift\r\n        if (event.movementX < 0) {\r\n          // Mouse is moving right\r\n          this.pitch = Math.min(this.pitch - Math.floor(event.movementX), this.maxPitch);\r\n        } else if (event.movementX > 0) {\r\n          // Mouse is moving left\r\n          this.pitch = Math.max(this.pitch - Math.floor(event.movementX), this.minPitch);\r\n        }\r\n        // ----------- modify here synth audio -------------\r\n        // todo: pitch max a dx e min a sx - meglio il contrario, secondo me - segue possibile ma brutto fix\r\n        // console.log(\"pitch shift: \" + this.pitch * -1)\r\n        // this.synth.set({detune: this.pitch * -100});\r\n        //console.log(\"pitch shift: \" + this.pitch);\r\n        this.synth.setParameters({ transpose: this.pitch });\r\n        // -------------------------------------------------\r\n      }\r\n    },\r\n    onMouseUp(event) {\r\n      if (this.is_modulationDown) this.is_modulationDown = false;\r\n      if (this.is_volumeDown) this.is_volumeDown = false;\r\n      if (this.is_pitchDown) this.is_pitchDown = false;\r\n    },\r\n\r\n    modulationDown(event) {\r\n      if (!this.is_modulationDown) this.is_modulationDown = true;\r\n    },\r\n    volumeDown(event) {\r\n      if (!this.is_volumeDown) this.is_volumeDown = true;\r\n    },\r\n    pitchDown(event) {\r\n      if (!this.is_pitchDown) this.is_pitchDown = true;\r\n    },\r\n\r\n    // ----------- AUDIO -----------\r\n    // Update osc waveform\r\n    nextOscType() {\r\n      // go circularly on along the list osc_types list\r\n      this.oscTypeIndex++;\r\n      if (this.oscTypeIndex >= osc_types.length) this.oscTypeIndex = 0;\r\n\r\n      this.synth.setParameters({ type: osc_types[this.oscTypeIndex] })\r\n\r\n      //console.log(\"osc type: \" + osc_types[this.oscTypeIndex]);\r\n    },\r\n\r\n    nextWaveform() {\r\n      // update selected wavetype changing the current index\r\n      this.oscWaveIndex++;\r\n      if (this.oscWaveIndex >= wave_types.length) this.oscWaveIndex = 0;\r\n\r\n      //console.log(wave_types[this.oscWaveIndex])\r\n      // set new waveform\r\n      this.synth.setParameters({ waveform: wave_types[this.oscWaveIndex] })\r\n    },\r\n\r\n    // set routing\r\n    connect(route) {\r\n      this.synth.connect(route);\r\n    },\r\n  },\r\n\r\n  unmounted() {\r\n    // remove event listeners\r\n    window.removeEventListener(\"resize\", this.resizeGraphics);\r\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\r\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modDot {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 0.8vw;\r\n  text-align: center;\r\n  box-sizing: border-box;\r\n  border: .06vw solid black;\r\n}\r\n\r\n.main_container {\r\n  border: .1vw solid #c2847b ;\r\n  box-sizing: border-box;\r\n  height: calc(100% / 3);\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.main_container:hover {\r\n  border: .1vw solid #63443e;\r\n  box-sizing: border-box;\r\n  height: calc(100% / 3);\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.osc_container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  flex: 4;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n/*---------- MOD TYPE BUTTON ----------*/\r\n.type_button {\r\n  border: .1vw solid #c2847b;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex: 1;\r\n  height: 100%;\r\n}\r\n.type_button:hover {\r\n  border: .1vw solid #63443e;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex: 1;\r\n  height: 100%;\r\n}\r\n\r\n.type_button .innertext {\r\n  font-size: .8vw;\r\n  writing-mode: vertical-rl;\r\n  text-orientation: upright;\r\n  text-transform: uppercase;\r\n}\r\n\r\n/*--------------- OSC -----------------*/\r\n.osc {\r\n  width: 90%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  display: flex;\r\n  position: relative;\r\n  aspect-ratio: 1/1;\r\n}\r\n\r\n.osc_back {\r\n  margin: auto;\r\n  width: 100%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 1;\r\n}\r\n\r\n.pitch_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 100%, 100% 100%, 100% 72%, 50% 50%, 0% 72%, 0% 100%);\r\n  z-index: 27;\r\n}\r\n\r\n.mod_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 0% 0%, 0% 100%, 50% 50%);\r\n  z-index: 2;\r\n}\r\n\r\n.volume_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 100% 0%, 100% 100%, 50% 50%);\r\n  z-index: 3;\r\n}\r\n\r\n.osc_middle {\r\n  margin: auto;\r\n  height: 95%;\r\n  top: 2.5%;\r\n  left: 2.5%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 25;\r\n}\r\n\r\n.mod_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 0% 0%, 0% 100%, 50% 50%);\r\n  z-index: 27;\r\n}\r\n\r\n.volume_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 100% 0%, 100% 100%, 50% 50%);\r\n  z-index: 26;\r\n}\r\n\r\n.osc_front {\r\n  margin: auto;\r\n  height: 96%;\r\n  top: 2%;\r\n  left: 2%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 50;\r\n}\r\n\r\n.pitch_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 100%,\r\n      100% 100%,\r\n      100% 72%,\r\n      50% 50%,\r\n      0% 72%,\r\n      0% 100%,\r\n      50% 100%);\r\n  z-index: 10;\r\n}\r\n\r\n.pitch_hand {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 40%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n.lineL {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 100%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n\r\n.lineU {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 100%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n.lineR {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 100%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n\r\n\r\n.osc_wave {\r\n  display: flex;\r\n  position: relative;\r\n  aspect-ratio: 1;\r\n  width: 45%;\r\n  border-radius: 50%;\r\n  left: 0;\r\n  top: 0;\r\n  z-index: 101;\r\n}\r\n\r\n.osc_wave img {\r\n  position: relative;\r\n  aspect-ratio: 1/1;\r\n  width: 100%;\r\n  left: 0;\r\n  top: 0;\r\n  clip-path: circle(20%);\r\n  z-index: 102;\r\n}\r\n\r\n.draggable {\r\n  position: absolute;\r\n  z-index: 75;\r\n}\r\n\r\n.left {\r\n  width: 50%;\r\n  height: 70%;\r\n  left: 0;\r\n  bottom: 30%;\r\n  background-color: transparent;\r\n}\r\n\r\n.right {\r\n  width: 50%;\r\n  height: 70%;\r\n  background-color: transparent;\r\n  left: 50%;\r\n  bottom: 30%\r\n}\r\n\r\n.low {\r\n  width: 100%;\r\n  height: 30%;\r\n  top: 70%;\r\n  background-color: transparent;\r\n}\r\n\r\n/*------------ CHAIN BUTTONS ------------*/\r\n.chain_buttons {\r\n  border: .1vw solid #c2847b;\r\n  flex: .5;\r\n  display: grid;\r\n  grid-template-rows: .3fr 1fr 1fr 1fr .3fr;\r\n  height: 100%;\r\n  align-items: center;\r\n  padding-left: 3%;\r\n  padding-right: 3%;\r\n}\r\n.chain_buttons:hover {\r\n  border: .1vw solid #63443e;\r\n  flex: .5;\r\n  display: grid;\r\n  grid-template-rows: .3fr 1fr 1fr 1fr .3fr;\r\n  height: 100%;\r\n  align-items: center;\r\n  padding-left: 3%;\r\n  padding-right: 3%;\r\n}\r\n\r\n\r\n.button_1,\r\n.button_2,\r\n.button_3 {\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  border: .1vw solid black;\r\n  border-radius: 50%;\r\n}\r\n</style>","import {Synth, Envelope, Gain, Meter, Frequency, LFO} from 'tone'\r\nimport {nextTick} from 'vue';\r\nimport * as Tone from 'tone'\r\nimport {isProxy, toRaw} from 'vue';\r\n\r\nconst max_partials_num = 50;\r\nconst vol_damp_factor = 0.5;\r\n\r\nexport default class MyPolySynth {\r\n    constructor(synthType = \"\", destination = null, nVoices = 16) {\r\n\r\n        this.destination = destination;\r\n\r\n\r\n        //data of all modulators that could potentially be linked to the parameters of the synth\r\n        this.modulatorsData = {\r\n            envelope: {\r\n                vol: {\r\n                    amount: 1,\r\n                    parameters: {\r\n                        attack: 1,\r\n                        decay: 0.3,\r\n                        sustain: 0.8,\r\n                        release: 1\r\n                    }\r\n                },\r\n                mod: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        attack: 0.05,\r\n                        decay: 0.1,\r\n                        sustain: 1,\r\n                        release: 0.2\r\n                    }\r\n                },\r\n                pitch: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        attack: 0.05,\r\n                        decay: 0.1,\r\n                        sustain: 1,\r\n                        release: 0.2\r\n                    }\r\n                },\r\n            },\r\n            lfo: {\r\n                vol: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        waveform: \"sine\",\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n                mod: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        waveform: \"sine\",\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n                pitch: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        waveform: \"sine\",\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n            }\r\n        }\r\n\r\n        //preset with which all voices of polyphony will be created\r\n        this.synthPreset = {\r\n            type: synthType,\r\n            waveform: \"sine\",\r\n            vol: -12,\r\n            transpose: 0,\r\n            mod: 0,\r\n            partials: \"\",\r\n            pan: \"\"\r\n        }\r\n\r\n\r\n        //modulation effect\r\n        //this.crusher = new Tone.BitCrusher(3)\r\n\r\n\r\n        this.dampNode = new Gain(vol_damp_factor);\r\n        //all polyphony voices are connected here\r\n\r\n        //console.log(Tone.dbToGain(this.synthPreset.vol))\r\n        this.gainNode = new Gain(1);\r\n\r\n        //list of polyphony voices\r\n        this.allVoices = [] //always holds reference to all voices\r\n        this.freeVoices = []    //holds reference to free voices\r\n        this.busyVoices = {}    //holds reference to busy voices, key=note, value=voice\r\n        this.nVoices = nVoices  //used to initialize, taken from globalProperties\r\n        this.lastNotes = Array(this.nVoices)  //stores last nVoices played\r\n\r\n        console.log(\"COSTRUTTORE CHIAMATO\")\r\n        //INIT VOICES\r\n        this.initVoices()\r\n        // console.log(this.freeVoices)\r\n\r\n\r\n        // connect gainNode to destination\r\n            this.gainNode.connect(this.dampNode)\r\n            //this.crusher.connect(this.dampNode)\r\n            this.dampNode.connect(this.destination)\r\n    }\r\n\r\n    initVoices() {\r\n        //for each voice\r\n\r\n        for (let index = 0; index < this.nVoices; index++) {\r\n\r\n            //initializing empty modulators matrix\r\n            let modulators = {\r\n                envelope: {\r\n                    vol: {amount: 1, signal: null, scale: null},\r\n                    mod: {amount: 0, signal: null, scale: null},\r\n                    pitch: {amount: 0, signal: null, scale: null},\r\n                },\r\n                lfo: {\r\n                    vol: {amount: 0, signal: null, scale: null},\r\n                    mod: {amount: 0, signal: null, scale: null},\r\n                    pitch: {amount: 0, signal: null, scale: null},\r\n                }\r\n            }\r\n\r\n            let lfoGain = new Gain()\r\n            lfoGain.connect(this.gainNode) //USED TO CONNECT LFO TO VOICE VOLUME\r\n\r\n\r\n            //creating gain and synth\r\n            let gain = new Gain(1).connect(lfoGain)\r\n            //synth is created and initialized with preset parameters\r\n            let synth = this.createSynth()\r\n            synth.oscillator.disconnect()\r\n            synth.oscillator.connect(gain)\r\n\r\n            //disconnect and dispose synth inner envelope\r\n            synth.envelope.disconnect()\r\n            synth.envelope.dispose()\r\n\r\n            //thanks to noiseAdsrGain we can lower to zero the volume of the synth and still hear the noise, bypassing the synth volume\r\n            let noiseAdsrGain = new Gain()  //used to have the same main adsr of synth on the noise too\r\n            let noiseGain = new Gain()\r\n            let noise = new Tone.Noise(\"pink\")\r\n            noise.connect(noiseGain)\r\n            noiseGain.connect(noiseAdsrGain)\r\n            noiseAdsrGain.connect(this.dampNode)\r\n\r\n\r\n\r\n\r\n            let voice = {synth: synth, gain: gain, lfoGain: lfoGain, modulators: modulators, noise: noise, noiseGain: noiseGain, noiseAdsrGain: noiseAdsrGain}\r\n\r\n            //creating and connecting every modulator\r\n            for (let type in modulators) {\r\n                for (let target in modulators[type]) {\r\n                    let tempMod = this.createModulator(type)\r\n                    modulators[type][target].signal = tempMod\r\n                    modulators[type][target].scale = this.createScale(target)\r\n                    this.connectModulator(modulators[type][target], type, target, voice)\r\n                }\r\n            }\r\n            //pushing voice into freeVoices array\r\n            this.freeVoices.push(voice)\r\n            this.allVoices.push(voice)\r\n        }\r\n\r\n        this.initialized = false\r\n        //setting all parameters of modulators\r\n        this.updateModulators();\r\n        this.initialized = true\r\n\r\n        console.log(this.freeVoices)\r\n\r\n    }\r\n\r\n    playNote(note, velocity) {\r\n        //console.log(this.freeVoices)\r\n        if (this.initialized) {\r\n\r\n            this.lastNotes.push(note);\r\n            if (this.lastNotes.length > this.nVoices) {\r\n                this.lastNote = this.lastNotes.shift();\r\n            }\r\n\r\n            //removing first free voice from array\r\n            let voice = this.freeVoices.shift()\r\n            if (!voice) {\r\n                console.log(\"NEW NOTE OVERWRITE: \" + this.lastNote)\r\n                voice = this.busyVoices[this.lastNote]\r\n                delete this.busyVoices[this.lastNote]\r\n            }\r\n            this.busyVoices[note] = voice\r\n\r\n            //trigger attack in each modulator\r\n            for (let type in voice.modulators) {\r\n                for (let target in voice.modulators[type]) {\r\n                    if (voice.modulators[type][target].amount>0 ) {\r\n                    switch (type) {\r\n                        case \"envelope\":\r\n                            //console.log(\"TRIGGERING ATTACK IN \"+type+\" connected to \"+target)\r\n                            //console.log(voice.modulators[type][target].signal)\r\n                            toRaw(voice.modulators[type][target].signal).cancel(Tone.now())\r\n                            toRaw(voice.modulators[type][target].signal).triggerAttack(Tone.now())\r\n                            break;\r\n                        case \"lfo\":\r\n                            toRaw(voice.modulators[type][target]).signal.stop()\r\n                            toRaw(voice.modulators[type][target]).signal.start()\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    }\r\n                }\r\n            }\r\n            voice.synth.oscillator.stop(Tone.now())\r\n            voice.synth.envelope.cancel(Tone.now())\r\n            //trigger attack in synth and noise\r\n            voice.noise.start()\r\n            voice.synth.triggerAttack(note, Tone.now(), velocity / 128)\r\n        }\r\n    }\r\n\r\n    stopNote(note) {\r\n        if (this.initialized) {\r\n            if (this.busyVoices[note]) {\r\n                let voice = this.busyVoices[note]\r\n                delete this.busyVoices[note]\r\n                this.freeVoices.push(voice)\r\n\r\n                //triggerRelease on all envelopes\r\n                for (let type in voice.modulators) {\r\n                    for (let target in voice.modulators[type]) {\r\n                        if (voice.modulators[type][target].signal) {\r\n                            switch (type) {\r\n                                case \"envelope\":\r\n                                    //console.log(\"Triggering release of \"+type+\" with target \"+target)\r\n                                    voice.modulators[type][target].signal.triggerRelease(Tone.now())\r\n                                    break;\r\n                                case \"lfo\":\r\n                                    //lfos are never stopped, just diminished in amount if needed\r\n                                    //fvoice.modulators[type][target].signal.stop()\r\n                                    break;\r\n                                default:\r\n                                    break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n\r\n    createSynth() {\r\n        let synth = new Synth()\r\n        //Setting parameters\r\n        nextTick(() => {\r\n            synth.set({\r\n                \"volume\": this.synthPreset.vol,\r\n                \"detune\": this.synthPreset.transpose * 100,\r\n                \"oscillator\": {\r\n                    \"type\": this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials\r\n                }\r\n            })\r\n        })\r\n        //console.log(this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials)\r\n\r\n        return synth\r\n    }\r\n\r\n    createModulator(type) {\r\n        //console.log(\"creating modulator of type: \"+type)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                return new Envelope\r\n            case \"lfo\":\r\n                return new LFO\r\n            default:\r\n                console.log(\"Error creating modulator\")\r\n                return null\r\n        }\r\n    }\r\n\r\n    createScale(target) {\r\n        switch (target) {\r\n            case \"vol\":\r\n                return new Tone.Scale(0, 1);\r\n            case \"mod\":\r\n                return new Tone.Scale(0, 1);\r\n            case \"pitch\":\r\n                return new Tone.Scale(0, 1);\r\n            case \"pan\":\r\n                return new Tone.Scale(0, 1);\r\n            default:\r\n                console.log(\"Error creating scale for target \"+target)\r\n                return null\r\n        }\r\n    }\r\n\r\n    updateModulators() {\r\n        this.allVoices.forEach(voice => {\r\n                for (let type in voice.modulators) {\r\n                    for (let target in voice.modulators[type]) {\r\n                        //update amount from preset\r\n                        voice.modulators[type][target].amount = this.modulatorsData[type][target].amount\r\n                        if (!toRaw(voice.modulators[type][target].signal)) {\r\n                            //IF IT'S STILL NOT CREATED\r\n                            //console.log(\"RECREATING\")\r\n                            voice.modulators[type][target].signal = this.createModulator(type)\r\n                            voice.modulators[type][target].scale = this.createScale(target)\r\n                            this.connectModulator(toRaw(voice.modulators[type][target]), type, target, toRaw(voice))\r\n                            //console.log(voice.modulators[type][target])\r\n                        }\r\n                        this.scaleSetter(voice.modulators[type][target], target)\r\n                        this.modulatorSetter(toRaw(voice.modulators[type][target].signal), type, this.modulatorsData[type][target].parameters)\r\n                    }\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    updateSynths() {\r\n        this.allVoices.forEach(voice => {\r\n            voice.synth.set({\r\n                \"detune\": this.synthPreset.transpose * 100,\r\n                \"oscillator\": {\r\n                    \"type\": this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials\r\n                }\r\n            })\r\n            //this.gainNode.set({gain: Tone.dbToGain(this.synthPreset.vol)})\r\n            voice.noiseGain.set({\r\n                gain: this.synthPreset.mod\r\n            })\r\n        });\r\n    }\r\n\r\n    scaleSetter(modulator, target) {\r\n        switch (target) {\r\n            case \"vol\":\r\n                //ENVELOPE FOR VOL SHOULD HAVE SCALE TOO TO CENTER AROUND SELECTED FREQUENCY\r\n                toRaw(modulator.scale).set({\r\n                    min: (Math.max(Tone.dbToGain(this.synthPreset.vol) - modulator.amount,0)),\r\n                    max: (Math.min(Tone.dbToGain(this.synthPreset.vol) + modulator.amount,1)),\r\n                })\r\n\r\n\r\n                break;\r\n            case \"mod\":\r\n                toRaw(modulator.scale).set({\r\n                    min: (Math.max(this.synthPreset.mod - modulator.amount,0)),\r\n                    max: (Math.min(this.synthPreset.mod + modulator.amount,1)),\r\n                })\r\n                break;\r\n            case \"pitch\":\r\n                //TO-DO\r\n                //console.log(\"CHANGING SCALE \")\r\n                //console.log(modulator.scale)\r\n                toRaw(modulator.scale).set({\r\n                    min: ((this.synthPreset.transpose - 24 * modulator.amount) * 100),\r\n                    max: ((this.synthPreset.transpose + 24 * modulator.amount) * 100)\r\n                })\r\n                break;\r\n            case \"pan\":\r\n                //TO-DO\r\n                break;\r\n\r\n            default:\r\n                console.log(\"invalid target to connect modulator to\")\r\n                break;\r\n        }\r\n    }\r\n\r\n    modulatorSetter(modulator, type, parameters) {\r\n        // console.log(\"mypolysynth - modulator setter - parameters: \", toRaw(parameters).waveform)\r\n        if(!toRaw(parameters).waveform) toRaw(parameters).waveform = modulator.type\r\n\r\n        switch (type) {\r\n            case \"envelope\":\r\n                modulator.set({\r\n                    \"attack\": parameters.attack,\r\n                    \"decay\": parameters.decay,\r\n                    \"sustain\": parameters.sustain,\r\n                    \"release\": parameters.release + 0.001,\r\n                })\r\n                //console.log(\"JUST SET PARAMETERS OF\")\r\n                //console.log(modulator)\r\n                //console.log(\"WITH\")\r\n                //console.log(parameters)\r\n                break;\r\n            case \"lfo\":\r\n                //TO-DO\r\n                //console.log(\"PARAMETERS\")\r\n                //console.log(parameters)\r\n                modulator.set({//\r\n                    \"type\": toRaw(parameters).waveform,\r\n                    \"frequency\": toRaw(parameters).frequency\r\n                })\r\n                break;\r\n            default:\r\n                console.log(\"Error setting modulator parameters, invalid args\")\r\n                break;\r\n        }\r\n        // console.log(\"modulator.type: \", modulator.type)\r\n    }\r\n\r\n//have to pass, the modulator (tone), the type (lfo or envelope), the gain linked to the voice, the voice and the target\r\n    connectModulator(modulator, type, target, voice) {\r\n        //console.log(\"connecting\")\r\n        //console.log(modulator)\r\n        //console.log(\"to voice: \")\r\n        //console.log(voice)\r\n        //console.log(\"to target: \" + target)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                switch (target) {\r\n                    case \"vol\":\r\n                        modulator.signal.chain(modulator.scale, voice.gain.gain)\r\n                        //modulator.signal.connect(voice.gain.gain)   //SET MAIN ADSR TO SYNTH GAIN\r\n                        modulator.signal.connect(voice.noiseAdsrGain.gain)      //SET MAIN ADSR TO NOISE GAIN\r\n                        break;\r\n                    case \"mod\":\r\n                        modulator.signal.chain(modulator.scale, voice.noiseGain.gain)\r\n                        break;\r\n                    case \"pitch\":\r\n                        //TO-DO\r\n                        this.scaleSetter(modulator, target)\r\n                        modulator.signal.chain(modulator.scale, voice.synth.detune)\r\n                        break;\r\n                    case \"pan\":\r\n                        //TO-DO\r\n                        break;\r\n                    default:\r\n                        console.log(\"invalid target to connect modulator to\")\r\n                        break;\r\n                }\r\n\r\n                break;\r\n\r\n            case \"lfo\":\r\n                switch (target) {\r\n                    case \"vol\":\r\n                        this.scaleSetter(modulator, target)\r\n                        modulator.signal.chain(modulator.scale, voice.lfoGain.gain)\r\n                        break;\r\n                    case \"mod\":\r\n                        modulator.signal.chain(modulator.scale, voice.noiseGain.gain)\r\n                        break;\r\n                    case \"pitch\":\r\n                        //TO-DO\r\n                        this.scaleSetter(modulator, target)\r\n                        modulator.signal.chain(modulator.scale, voice.synth.detune)\r\n                        break;\r\n                    case \"pan\":\r\n                        //TO-DO\r\n                        break;\r\n                    default:\r\n                        console.log(\"invalid target to connect modulator to\")\r\n                        break;\r\n                }\r\n\r\n                break;\r\n\r\n            default:\r\n                console.log(\"invalid modulator type\")\r\n                break;\r\n        }\r\n    }\r\n\r\n    // setters\r\n    setModulatorParameters(type, target, parameters) {\r\n        //console.log(\"myPolysynth - setModulatorParameters\")\r\n        if (this.initialized) {\r\n            this.modulatorsData[type][target].parameters = parameters\r\n            // console.log(\"New modulatorsData for type \"+type+\" to target \"+target)\r\n            // console.log(this.modulatorsData);\r\n            // console.log(\"params: \" , this.modulatorsData[type][target].parameters,  parameters)\r\n\r\n            this.updateModulators()\r\n            //console.log(\"SETTING\")\r\n            //console.log(this.modulatorsData)\r\n        }\r\n    }\r\n\r\n    setModulatorAmount(type, target, amount) {\r\n        if (this.initialized) {\r\n            this.modulatorsData[type][target].amount = amount\r\n            //console.log(\"setting modulator amount\")\r\n            this.updateModulators()\r\n        }\r\n    }\r\n\r\n    //TO RENAME IN SET SYNTH PARAMETERS\r\n    setParameters({\r\n                      volume = this.synthPreset.vol,\r\n                      modulation = this.synthPreset.mod,\r\n                      transpose = this.synthPreset.transpose,\r\n                      pan = this.synthPreset.pan,\r\n                      type = this.synthPreset.type,\r\n                      waveform = this.synthPreset.waveform\r\n                  }) {\r\n        if (this.initialized) {\r\n            this.synthPreset.vol = volume;\r\n            this.synthPreset.mod = modulation;\r\n            this.synthPreset.transpose = transpose;\r\n            this.synthPreset.pan = pan;\r\n            this.synthPreset.type = type;\r\n            this.synthPreset.waveform = waveform;\r\n            //console.log(this.synthPreset.waveform)\r\n\r\n            this.updateSynths()\r\n            this.updateModulators()\r\n        } else {\r\n            console.log(\"Polysynth not initialized\")\r\n        }\r\n    }\r\n\r\n// connect each voice to the new routing\r\n    connect(route) {\r\n        this.gainNode.connect(route)\r\n    }\r\n\r\n    disconnectDispose() {\r\n        //for each voice\r\n        this.allVoices.forEach(voice => {\r\n            //Disconnect and dispose synth\r\n            voice = toRaw(voice)\r\n            voice.synth.disconnect()\r\n            voice.synth.dispose()\r\n            //Disconnect and dispose gain\r\n            voice.gain.disconnect()\r\n            voice.gain.dispose()\r\n            //Disconnect and dispose modulators\r\n            for (let type in voice.modulators) {\r\n                for (let target in voice.modulators[type]) {\r\n                    if (voice.modulators[type][target].signal) {\r\n                        voice.modulators[type][target].signal.disconnect()\r\n                        voice.modulators[type][target].signal.dispose()\r\n                        voice.modulators[type][target].scale.disconnect()\r\n                        voice.modulators[type][target].scale.dispose()\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        //disconnect and dispose main gainNode\r\n        this.gainNode.disconnect()\r\n        this.gainNode.dispose()\r\n\r\n        //console.log(\"MyPolySynth completely disconnected and disposed\")\r\n    }\r\n}","import { render } from \"./Osc.vue?vue&type=template&id=a2d87af4&scoped=true\"\nimport script from \"./Osc.vue?vue&type=script&lang=js\"\nexport * from \"./Osc.vue?vue&type=script&lang=js\"\n\nimport \"./Osc.vue?vue&type=style&index=0&id=a2d87af4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a2d87af4\"]])\n\nexport default __exports__","import { render } from \"./OscHost.vue?vue&type=template&id=822b82c8&scoped=true\"\nimport script from \"./OscHost.vue?vue&type=script&lang=js\"\nexport * from \"./OscHost.vue?vue&type=script&lang=js\"\n\nimport \"./OscHost.vue?vue&type=style&index=0&id=822b82c8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-822b82c8\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"filterHost\" :style=\"this.filterHost\">\r\n    <template v-for=\"(chain) in this.chainList\" :key=\"chain.id\" :item=\"chain\">\r\n        <FilterChain :ref=\"chain.ref\" :id=\"chain.id\" :color=\"chain.color\" @filterInitialized=\"initConnections()\"/>\r\n       <!-- todo: remove <FilterChain :ref=\"chain.ref\" :id=\"chain.id\" :color=\"chain.color\" @filterInitialized=\"handleFilterInitialized\" /> -->\r\n      </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FilterChain from './FilterChain.vue'\r\nimport * as Tone from \"tone\";\r\nimport { isProxy, toRaw } from \"vue\";\r\n\r\nexport default {\r\n  name: \"FilterHost\",\r\n  components: {\r\n    FilterChain,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      chain_colors: [],\r\n      chainList: [],\r\n      nFilterChains: 3,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.chain_colors = [this.colors.purple.medium, this.colors.green.medium, this.colors.pink.medium]\r\n    for (let index = 0; index < this.nFilterChains; index++) {\r\n      this.chainList.push({ id: index, ref:\"chain\"+index, color: this.chain_colors[index]})\r\n    }\r\n    // console.log(this.filterChains)\r\n  },\r\n  computed: {\r\n    filterHost(){\r\n      return {\r\n        background: this.colors.yellow.glow\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    initConnections(){\r\n      //console.log(\"filter host init connections\")\r\n      for (let key in this.$refs) {\r\n        //console.log(toRaw(this.$refs[key][0]))\r\n        toRaw(this.$refs[key][0]).initConnections()\r\n      }\r\n      this.$emit('filterInitialized')\r\n      //console.log(\"filters initilised\")\r\n      //console.log(\"filters:\")\r\n      //console.log(this.filterChains)\r\n      //console.log(\"fx:\")\r\n      //console.log(this.fxChains)\r\n    }\r\n  }\r\n}\r\n\r\n// access a parameter of a vue component child from its father\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.filterHost {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>","<template>\r\n  <div class=\"filterChain\">\r\n    <div class=\"chainline\" :style=\"this.chainLine\"></div>\r\n    <div class = \"chainDot\" :style=\"this.chainDot\"></div>\r\n    <div class=\"chainHead\" ref=\"chainHead\"></div>\r\n    <template v-for=\"(filter) in this.filterList\" :key=\"filter.id\" :item=\"filter\">\r\n      <Filter :ref=\"filter.ref\" :chainId=\"this.id\" :id=\"filter.id\" :filter_type=\"filter.type\" :chainColor=\"this.color\"\r\n              @filtersMounted=\"this.handleFiltersMounted()\"/>\r\n    </template>\r\n    <div class=\"chainTail\">\r\n      <div></div>\r\n      <div class=\"routing-btn fx_chain_1\" :style=\"fx_chain_1\" @click=\"setRouting(0)\"></div>\r\n      <div class=\"routing-btn fx_chain_2\" :style=\"fx_chain_2\" @click=\"setRouting(1)\"></div>\r\n      <div class=\"routing-btn fx_chain_3\" :style=\"fx_chain_3\" @click=\"setRouting(2)\"></div>\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// I want to modify a variable of a vue component from its father that is a vue component too\r\nimport Filter from './Filter.vue'\r\nimport {getDestination} from \"tone\";\r\nimport {isProxy, toRaw} from \"vue\";\r\n\r\nconst filterTypes = [\"highpass\", \"peaking\", \"lowpass\"]\r\n\r\nexport default {\r\n  ref: \"FilterChain\",\r\n  components: {\r\n    Filter,\r\n  },\r\n  props: [\"color\", \"id\"],\r\n  data() {\r\n    return {\r\n      filterList: [],\r\n      nFilters: 3,\r\n      isFxChainRouteActive: [true, false, false]\r\n    }\r\n  },\r\n  mounted() {\r\n    //console.log(\"mounting filter chain\" + this.id)\r\n    for (let index = 0; index < this.nFiltersXchain; index++) {\r\n      this.filterList.push({id: index, ref: \"filter\" + index, type: filterTypes[index]})\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    fx_chain_1() {\r\n      let color = ''\r\n      if (this.isFxChainRouteActive[0])\r\n        color = this.colors.purple.light\r\n      else\r\n        color = this.colors.yellow.glow\r\n      return {\r\n        background: color,\r\n        border: '.1vw solid' + this.colors.gray.dark\r\n      }\r\n    },\r\n    fx_chain_2() {\r\n      let color = ''\r\n      if (this.isFxChainRouteActive[1])\r\n        color = this.colors.green.medium\r\n      else\r\n        color = this.colors.yellow.glow\r\n      return {\r\n        background: color,\r\n        border: '.1vw solid' + this.colors.gray.dark\r\n      }\r\n    },\r\n    fx_chain_3() {\r\n      let color = ''\r\n      if (this.isFxChainRouteActive[2])\r\n        color = this.colors.pink.light\r\n      else\r\n        color = this.colors.yellow.glow\r\n      return {\r\n        background: color,\r\n        border: '.1vw solid' + this.colors.gray.dark\r\n      }\r\n    },\r\n    chainLine(){\r\n      return {\r\n        top: '49%',\r\n        left: '5%',\r\n        width: '88%',\r\n        height: '.2vw',\r\n        position:'absolute',\r\n        background: this.$props['color'],\r\n        zIndex:'0',\r\n        borderRadius:'10%'\r\n      }\r\n    },\r\n    chainDot(){\r\n      return {\r\n        top: '45%',\r\n        left: '3.5%',\r\n        height: '10%',\r\n        aspectRatio: '1/1',\r\n        position: 'absolute',\r\n        zIndex: '3',\r\n        background: this.$props['color'],\r\n        borderRadius: '50%',\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  methods: {\r\n    handleFiltersMounted() {\r\n      if (this.id === this.nFilterChains - 1) {\r\n        this.$emit(\"filterInitialized\")\r\n      }\r\n    },\r\n    // -------- AUDIO -------x\r\n    initConnections() {\r\n      //console.log(\"filter chain init connections\")\r\n      for (let index = 0; index < this.nFiltersXchain - 1; index++) {\r\n        this.filterChains[this.id][index].connect(this.filterChains[this.id][index + 1].getToneFilter());\r\n        //console.log(\"connected \" + this.filterChains[this.id][index] + \" to \" + this.filterChains[this.id][index + 1])\r\n      }\r\n      // connect chain of filters output to chain each chain of effects\r\n      this.filterChains[this.id][this.nFilters - 1].connect(this.fxChains[0][0]); // init connection to first fx chain\r\n      this.isFxChainRouteActive[0] = true;\r\n      /*for (let i = 0; i < this.nFxChains; i++) { // init connection to all chains\r\n        this.filterChains[this.id][this.nFilters - 1].connect(this.fxChains[i][0]);\r\n        this.isFxChainRouteActive[i] = true;\r\n      }*/\r\n    },\r\n\r\n    setRouting(id) {\r\n      console.log(\"chain click - id: \" + id);\r\n      try {\r\n        if (this.isFxChainRouteActive[id]) {\r\n          console.log(\"disconnect from: \" + this.fxChains[id][0] + \" \" + id);\r\n          this.filterChains[this.id][this.nFilters - 1].disconnect(\r\n              this.fxChains[id][0]\r\n          );\r\n        } else {\r\n          console.log(\"connect to: \" + this.fxChains[id][0] + \" \" + id);\r\n          this.filterChains[this.id][this.nFilters - 1].connect(\r\n              this.fxChains[id][0]\r\n          );\r\n        }\r\n      } catch (e) {\r\n        console.log(\r\n            \"error: \" + e + \"\\nCHAIN FILTERS CONNECTION TO FX CHAIN \" + id + \" UNSUCCESSFUL. Can't connect to \" + this.fxChains[id][0]\r\n        );\r\n      }\r\n      this.isFxChainRouteActive[id] = !this.isFxChainRouteActive[id];\r\n    },\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.filter {\r\n  flex: 4;\r\n}\r\n\r\n.filterChain {\r\n  position:relative;\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.chainHead {\r\n  flex: 1;\r\n  background-color: transparent;\r\n}\r\n\r\n.chainTail {\r\n  flex: 1;\r\n  display: inline-grid;\r\n  align-items: center;\r\n  justify-items: center;\r\n  flex-direction: column;\r\n  background-color: transparent;\r\n}\r\n\r\n.routing-btn {\r\n  width: 50%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n}\r\n\r\n</style>","<template>\r\n  <div class=\"filter\">\r\n    <div class=\"modDot\" :style=\"computedModulation('filter')\" @click.shift.stop=\"unlinkMod('filter')\"\r\n         v-text=\"computedModText('filter')\"></div>\r\n    <div class=\"filter_back\" ref=\"filter_back\"\r\n         >\r\n\r\n    </div>\r\n    <div class=\"filter_logo\" :style=\"this.filter_logo\" @mousedown=\"logoDown\">\r\n      <div v-if=\"is_logoDown && type != 'peaking'\" class=\"logo_text\">\r\n        {{ ((1 - this.resonance) * 100).toFixed() + \"%\" }}\r\n      </div>\r\n      <div v-if=\"is_logoDown && type == 'peaking'\" class=\"logo_text\">\r\n        {{ ((1 - 2 * this.resonance) * 100).toFixed() + \"%\" }}\r\n      </div>\r\n      <!--<div v-if=\"type==='peaking'\" class=\"logo_BD_mask\" :style=\"computedBDMaks\"></div> -->\r\n      <div class=\"logo_glow\" :style=\"computedGlow\"></div>\r\n\r\n      <div class=\"logo_border\"\r\n           @dragenter=\"handleDragEnter('filter')\" @dragleave=\"handleDragLeave('filter')\"\r\n           @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'filter')\"\r\n      ></div>\r\n      <div class=\"logo\" :style=\"logo\">\r\n        <div v-if=\"is_logoDown\" class=\"logo_text_back\" :style=\"this.logo_text_back\"></div>\r\n        <div\r\n            v-if=\"type === 'lowpass'\"\r\n            class=\"logo_LP\"\r\n            :style=\"computedLP\"\r\n        ></div>\r\n        <div\r\n            v-if=\"type === 'highpass'\"\r\n            class=\"logo_HP\"\r\n            :style=\"computedHP\"\r\n        ></div>\r\n        <div v-if=\"type === 'peaking'\" class=\"logo_BD_back\"></div>\r\n        <div\r\n            v-if=\"type === 'peaking'\"\r\n            class=\"logo_BD_circle\"\r\n            :style=\"computedBDCircle\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MyFilter from \"@/views/Synth/Filters/MyFilter\";\r\n\r\nexport default {\r\n  props: [\"filter_type\", \"chainId\", \"chainColor\", \"id\"],\r\n\r\n  data() {\r\n    return {\r\n      color: this.colors.yellow,\r\n      type: this.filter_type,\r\n      cutoff: 0.5,  //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\r\n      resonance: 0.5, //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\r\n      is_logoDown: false,\r\n\r\n      modulator: null,\r\n    }\r\n  },\r\n  mounted() {\r\n    // mouse event listeners\r\n    document.addEventListener(\"mousemove\", this.onMouseMove);\r\n    document.addEventListener(\"mouseup\", this.onMouseUp);\r\n\r\n    //console.log(this.$props)\r\n\r\n    // -------------- AUDIO ---------------\r\n    this.filter = new MyFilter(this.type, this.cutoff, this.resonance);\r\n\r\n    this.cutoff = this.filter.getCutoff()\r\n    this.resonance = this.filter.getResonance()\r\n\r\n\r\n    //console.log(this.chainId+\" \"+this.id)\r\n    //Inserting filter in global variable\r\n    this.filterChains[this.chainId][this.id] = this.filter;\r\n\r\n    if (this.id === this.nFiltersXchain - 1 && this.chainId === this.nFilterChains - 1) {\r\n      this.$emit(\"filtersMounted\");\r\n    }\r\n\r\n  },\r\n\r\n  methods: {\r\n    //------------DRAG AND DROP LOGIC---------\r\n    handleDrop(event, target = \"\") {\r\n      if (this.modulator === null) {\r\n        let data = JSON.parse(event.dataTransfer.getData(\"data\"));\r\n        this.modulator = {color: data.color, id: data.id, type: data.type}\r\n        //console.log(\"RECEIVED HANDLEDROP, THIS.MODULATOR=\")\r\n        //console.log(this.modulator)\r\n        document.dispatchEvent(new CustomEvent(\"link\", {\r\n          detail: {\r\n            object: this.filter,\r\n            target: target,\r\n            color: this.color[\"light\"],\r\n            modulator: {type: this.modulator.type, id: this.modulator.id}\r\n          }}\r\n        ))\r\n      }\r\n\r\n    },\r\n    handleDragEnter(target) {\r\n      //todo: highlight object when dragging on it\r\n      console.log(\"Dragging over \" + target)\r\n    },\r\n    handleDragLeave(target) {\r\n      console.log(\"Dragging out of \" + target)\r\n    },\r\n    unlinkMod(target) {\r\n      //todo: CALL BACK ENVELOPS TO UNLINK\r\n      document.dispatchEvent(new CustomEvent(\"unLink\", {\r\n            detail: {\r\n              object: this.filter,\r\n              target: target,\r\n              modulator: {type: this.modulator.type, id: this.modulator.id}\r\n            }\r\n          }\r\n      ))\r\n\r\n      //re-hide link dot\r\n      this.modulator = null;\r\n\r\n    },\r\n    //--------DRAG AND DROP STYLING--------\r\n    computedModulation(target = \"\") {\r\n      if (this.modulator) {\r\n        return {\r\n          width: \"1vw\",\r\n          height: \"1vw\",\r\n          borderRadius: \"50%\",\r\n          backgroundColor: this.modulator.color,\r\n          position: \"absolute\",\r\n          left: \"10%\",\r\n          zIndex: \"1\",\r\n          top: \"10%\",\r\n        };\r\n      } else {\r\n        return {\r\n          display: \"none\",\r\n          width: \"0%\",\r\n          height: \"0%\",\r\n        }\r\n      }\r\n    },\r\n    computedModText(target = \"\") {\r\n      if (this.modulator) {\r\n        return this.modulator.id\r\n      } else return \"\";\r\n    },\r\n\r\n    //------------------------------------\r\n\r\n    // ----------- USER EVENTS -----------\r\n    onMouseMove(event) {\r\n      if (this.is_logoDown) {\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving up\r\n          this.resonance = Math.max(this.resonance + event.movementY / 100, 0);\r\n          //console.log(\"moving up\");\r\n        } else {\r\n          // Mouse is moving down\r\n          this.resonance = Math.min(this.resonance + event.movementY / 100, 1);\r\n        }\r\n        if (event.movementX < 0) {\r\n          // Mouse is moving right\r\n          this.cutoff = Math.max(\r\n              this.cutoff + Math.floor(event.movementX) / 100,\r\n              0\r\n          );\r\n        } else if (event.movementX > 0) {\r\n          // Mouse is moving left\r\n          this.cutoff = Math.min(\r\n              this.cutoff + Math.floor(event.movementX) / 100,\r\n              1\r\n          );\r\n        }\r\n        // ----------- audio ---------\r\n        this.filter.setResonance(this.resonance);\r\n        this.filter.setCutoff(this.cutoff);\r\n      }\r\n    },\r\n\r\n    onMouseUp() {\r\n      if (this.is_logoDown) this.is_logoDown = false;\r\n      document.body.style.cursor = \"pointer\";\r\n    },\r\n    logoDown() {\r\n      if (!this.is_logoDown) {\r\n        this.is_logoDown = true;\r\n        document.body.style.cursor = \"none\";\r\n      }\r\n    },\r\n\r\n    // ----------- AUDIO SETTERS--------------\r\n    setCutoff(cutoff = this.cutoff) {\r\n      this.cutoff = cutoff;\r\n      this.filter.setCutoff(this.cutoff)\r\n    },\r\n\r\n    setResonance(resonance = this.resonance) {\r\n      this.resonance = resonance\r\n      this.filter.setResonance(this.resonance)\r\n    },\r\n\r\n    connect(destination) {\r\n      this.filter.connect(destination);\r\n    },\r\n\r\n    disconnect(destination) {\r\n      this.filter.disconnect(destination)\r\n    },\r\n\r\n    // ------------ GETTERS SETTERS -------------\r\n    getToneFilter() {\r\n      return this.filter.getToneFilter();\r\n    },\r\n\r\n    getMyFilter() {\r\n      return this.filter;\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    computedHeadStyle() {\r\n      return {\r\n        left: 0.7 * this.cutoff * 100 + 13.5 + \"%\",\r\n      };\r\n    },\r\n    computedGlow() {\r\n      if (this.filter_type === \"peaking\" && this.resonance < 0.5) {\r\n        return {\r\n          opacity: 1 - 2 * this.resonance,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      } else if (this.filter_type === \"peaking\" && this.resonance >= 0.5) {\r\n        return {\r\n          opacity: 2 * this.resonance - 1,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      } else {\r\n        return {\r\n          opacity: 1 - this.resonance,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      }\r\n    },\r\n    computedLP() {\r\n      return {\r\n        transform: \"translateX(\" + (-100 + this.cutoff * 100)  + \"%)\",\r\n      };\r\n    },\r\n    computedHP() {\r\n      return {\r\n        transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\r\n      };\r\n    },\r\n    computedBDMaks() {\r\n      let clip = \"\";\r\n      if (this.resonance > 0.5)\r\n        clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\r\n      else if (this.resonance < 0.5)\r\n        clip = \"polygon(0% 50%, 0% 100%, 100% 100%, 100% 50%)\";\r\n      else clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\r\n      return {\r\n        clipPath: clip,\r\n      };\r\n    },\r\n    computedBD() {\r\n      if (1 - this.resonance >= 0.5) {\r\n        return {\r\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\r\n          height: (1 - this.resonance) * 100 + \"%\",\r\n          transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\r\n        };\r\n      } else {\r\n        return {\r\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\r\n          height: (1 - this.resonance - 0.5) * 100 + \"%\",\r\n          transform: \"translateX(\" + (this.cutoff - 0.5) * 100 + \"%)\",\r\n        };\r\n      }\r\n    },\r\n    computedBDCircle() {\r\n      return {\r\n        transform:\r\n            \"translate(\" +\r\n            (this.cutoff - 0.5) * 100 +\r\n            \"%, \" +\r\n            (this.resonance - 0.5) * 100 +\r\n            \"%)\",\r\n        //transform: 'translateX('+(this.cutoff-.5)*100+'%)'\r\n      };\r\n    },\r\n    filter_logo() {\r\n      return {\r\n        background: this.colors.yellow.glow\r\n      }\r\n    },\r\n    logo() {\r\n      return {\r\n        background: this.colors.yellow.light\r\n      }\r\n    },\r\n    logo_text_back() {\r\n      return {\r\n        background: this.colors.yellow.light,\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modDot {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 0.8vw;\r\n  text-align: center;\r\n  box-sizing: border-box;\r\n  border: .06vw solid black;\r\n}\r\n.filter {\r\n  position: relative;\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 4;\r\n}\r\n\r\n.filter_back {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 80%;\r\n  height: 80%;\r\n  background-color: transparent;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.filter_logo {\r\n  position: absolute;\r\n  display: flex;\r\n  flex: 5;\r\n\r\n  height: 100%;\r\n  top: 0;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  z-index: 0;\r\n  clip-path: circle(50%);\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.logo_border {\r\n  position: absolute;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  z-index: 5;\r\n  border-radius: 50%;\r\n  border: 0.1vw solid #3b210e;\r\n}\r\n\r\n.logo {\r\n  position: absolute;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  z-index: 3;\r\n  clip-path: circle(50%);\r\n}\r\n\r\n.logo_glow {\r\n  position: absolute;\r\n  height: 90%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  z-index: 1;\r\n  filter: blur(0.3vw);\r\n}\r\n\r\n.logo_text {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1vw;\r\n  font-weight: bold;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  color: black;\r\n  opacity: 100%;\r\n  background-color: black;\r\n  z-index: 5;\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.logo_text_back {\r\n  position: absolute;\r\n  z-index: 6;\r\n  left: 15%;\r\n  top: 30%;\r\n  width: 70%;\r\n  height: 40%;\r\n  opacity: 100%;\r\n  border-radius: 10%;\r\n}\r\n\r\n.logo_LP {\r\n  opacity: 60%;\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  border: .1vw solid black;\r\n  background-color: #faf8ef;\r\n  z-index: 1;\r\n}\r\n\r\n.logo_HP {\r\n  opacity: 60%;\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  border: .1vw solid black;\r\n  background-color: #faf8ef;\r\n  z-index: 1;\r\n}\r\n.logo_BD_circle {\r\n  opacity: 60%;\r\n  position: absolute;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  border: .1vw solid black;\r\n  border-radius: 50%;\r\n  background-color: #faf8ef;\r\n  z-index: 5;\r\n}\r\n\r\n.logo_BD_mask {\r\n  opacity: 60%;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  border: .1vw solid black;\r\n  background-color: #ffebd2;\r\n  z-index: 2;\r\n}\r\n\r\n.logo_BD {\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  background-color: white;\r\n  z-index: 1;\r\n}\r\n\r\n.logo_BD_line {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 4%;\r\n  top: 48%;\r\n  filter: blur(0.02vw);\r\n  border-radius: 30%;\r\n  background-color: #e58138;\r\n  z-index: 5;\r\n}\r\n\r\n\r\n.logo_BD_circle {\r\n  position: absolute;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n\r\n  border-radius: 50%;\r\n  background-color: #faf8ef;\r\n  z-index: 5;\r\n}\r\n</style>","import * as Tone from \"tone\";\r\nimport {Envelope, LFO} from \"tone\";\r\nimport {toRaw} from \"vue\";\r\n\r\nexport default class MyFilter {\r\n    constructor(type = \"peaking\", cutoff = 0.5, resonance = 0.5) {\r\n\r\n        this.filter_type = type;\r\n        this.cutoff = cutoff;\r\n        this.resonance = resonance;\r\n\r\n        this.modulatorsData = {\r\n            envelope: {\r\n                amount: 0,\r\n                parameters: {\r\n                    attack: 1,\r\n                    decay: 0.3,\r\n                    sustain: 0.8,\r\n                    release: 1\r\n                }\r\n            },\r\n            lfo: {\r\n                amount: 0,\r\n                parameters: {\r\n                    frequency: 10,\r\n                    waveform: \"sine\",\r\n                    min: 0,\r\n                    max: 1\r\n                }\r\n            }\r\n        }\r\n\r\n        //to stop moduoators only when there is one left active voice and the note is released\r\n        this.activeNotes=0\r\n\r\n        this.modulators = {\r\n            envelope: {\r\n                signal: this.createModulator(\"envelope\"),\r\n                scale: new Tone.ScaleExp(0, 1, 3),\r\n                amount: 0\r\n            },\r\n            lfo: {\r\n                signal: this.createModulator(\"lfo\"),\r\n                scale: new Tone.ScaleExp(0, 1, 3),\r\n                amount: 0\r\n            }\r\n        }\r\n\r\n        this.filter = new Tone.Filter();\r\n        this.initFilterParams();\r\n\r\n\r\n    }\r\n\r\n    getCutoff() {\r\n        return this.cutoff\r\n    }\r\n\r\n    getResonance() {\r\n        return this.resonance\r\n    }\r\n\r\n    createModulator(type) {\r\n        //console.log(\"creating modulator of type: \"+type)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                return new Envelope\r\n            case \"lfo\":\r\n                return new LFO\r\n            default:\r\n                console.log(\"Error creating modulator\")\r\n                return null\r\n        }\r\n    }\r\n\r\n\r\n    // ----------- AUDIO SETTERS--------------\r\n    initFilterParams() {\r\n        let self = this;\r\n\r\n        // init switched off filters\r\n        switch (this.filter_type) {\r\n            case \"lowpass\":\r\n                this.cutoff = .9;\r\n                this.resonance = 1;\r\n                break;\r\n            case \"highpass\":\r\n                this.cutoff = 0.1;\r\n                this.resonance = 1;\r\n                break;\r\n            case \"peaking\":\r\n                this.cutoff = 0.5;\r\n                this.resonance = 0.5;\r\n                break;\r\n            case \"bandpass\":\r\n                break;\r\n            case \"lowshelf\":\r\n                break;\r\n            case \"highshelf\":\r\n                break;\r\n            case \"notch\":\r\n                break;\r\n            case \"allpass\":\r\n                break;\r\n            default:\r\n                console.log(\"Invalid filter type\");\r\n        }\r\n\r\n        this.filter.set({\r\n            frequency: self.cutoffLogMapping(this.cutoff),\r\n            type: this.filter_type,\r\n        })\r\n\r\n        this.scaleSetter(this.modulators.envelope)\r\n        this.scaleSetter(this.modulators.lfo)\r\n        this.connectModulator(this.modulators.envelope)\r\n        this.connectModulator(this.modulators.lfo)\r\n        this.updateModulators()\r\n\r\n    }\r\n\r\n\r\n    //------------MODULATORS LOGIC----------\r\n\r\n    scaleSetter(modulator, target = \"\") {\r\n        //console.log(modulator)\r\n        toRaw(modulator.scale).set({\r\n\r\n            min: (Math.pow(10, Math.log10(this.cutoffLogMapping(this.cutoff)) - 1 * modulator.amount)),\r\n            max: (Math.pow(10, Math.log10(this.cutoffLogMapping(this.cutoff)) + 1 * modulator.amount)),\r\n        })\r\n\r\n    }\r\n\r\n    connectModulator(modulator) {\r\n        modulator.signal.chain(modulator.scale, this.filter.frequency)\r\n    }\r\n\r\n    setModulatorParameters(type, target, parameters) {\r\n        this.modulatorsData[type].parameters = parameters\r\n        this.updateModulators()\r\n    }\r\n\r\n    setModulatorAmount(type, target, amount) {\r\n        this.modulatorsData[type].amount = amount\r\n        this.updateModulators()\r\n    }\r\n\r\n    updateModulators() {\r\n        for (let type in this.modulators) {\r\n            //update amount from preset\r\n            this.modulators[type].amount = this.modulatorsData[type].amount\r\n            //reset scale\r\n            this.scaleSetter(this.modulators[type])\r\n            //reset modulator\r\n            this.modulatorSetter(toRaw(this.modulators[type].signal), type, this.modulatorsData[type].parameters)\r\n        }\r\n    }\r\n\r\n    modulatorSetter(modulator, type, parameters) {\r\n        if (!toRaw(parameters).waveform) toRaw(parameters).waveform = modulator.type\r\n        switch (type) {\r\n            case \"envelope\":\r\n                modulator.set({\r\n                    \"attack\": parameters.attack,\r\n                    \"decay\": parameters.decay,\r\n                    \"sustain\": parameters.sustain,\r\n                    \"release\": parameters.release + 0.001,\r\n                })\r\n                break;\r\n            case \"lfo\":\r\n                modulator.set({\r\n                    \"type\": toRaw(parameters).waveform,\r\n                    \"frequency\": toRaw(parameters).frequency\r\n                })\r\n                break;\r\n            default:\r\n                console.log(\"Error setting modulator parameters, invalid args\")\r\n                break;\r\n        }\r\n    }\r\n\r\n    playNote(note = \"\", velocity = \"\") {\r\n        //trigger attack in modulators\r\n        this.modulators.envelope.signal.cancel(Tone.now())\r\n        this.modulators.envelope.signal.triggerAttack(Tone.now())\r\n        this.modulators.lfo.signal.stop()\r\n        this.modulators.lfo.signal.start()\r\n        //console.log(\"PLAYED FILTER MODULATORS\")\r\n        this.activeNotes++\r\n    }\r\n    stopNote(note=\"\") {\r\n        if(this.activeNotes<=1){\r\n            this.modulators.envelope.signal.triggerRelease(Tone.now())\r\n            //lfos never stopped\r\n            //this.modulators.lfo.signal.stop()\r\n            //console.log(\"STOPPED FILTER MODULATORS\")\r\n        }\r\n        this.activeNotes--\r\n    }\r\n\r\n\r\n    //--------------------\r\n\r\n\r\n    setCutoff(cutoff = this.cutoff) {\r\n        this.cutoff = cutoff;\r\n        let self = this;\r\n        this.filter.set({\r\n            frequency: self.cutoffLogMapping(this.cutoff),\r\n        });\r\n        /*\r\n        console.log(\r\n            this.filter_type +\r\n            \" cutoff: \" +\r\n            this.cutoff.toFixed(2) +\r\n            \" - \" +\r\n            this.cutoffLogMapping(this.cutoff).toFixed(0) +\r\n            \" Hz\"\r\n        );\r\n\r\n         */\r\n        this.updateModulators()\r\n    }\r\n\r\n    setResonance(resonance = this.resonance) {\r\n        this.resonance = resonance;\r\n        let self = this;\r\n\r\n        if (this.filter_type === \"lowshelf\" || this.filter_type === \"highshelf\" || this.filter_type === \"peaking\") {\r\n            // bell delta amplitude is controlled changing the 'gain' parameter\r\n            this.filter.set({\r\n                gain: self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type),\r\n            });\r\n            /*\r\n            console.log(\r\n                \"Setting Peaking Resonance: \" +\r\n                self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type)\r\n            );\r\n\r\n             */\r\n        } else if (this.filter_type === \"lowpass\" || this.filter_type === \"highpass\") {\r\n            // filter's Q is controlled changing the 'Q' parameter\r\n            this.filter.set({\r\n                Q: self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type),\r\n            });\r\n            /*\r\n            console.log(\r\n                \"Setting LowPass/HighPass Resonance: \" +\r\n                self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type)\r\n            );\r\n\r\n             */\r\n        }\r\n        /*\r\n            console.log(\r\n              \"resonance: \" +\r\n                this.resonance.toFixed(2) +\r\n                \" - \" +\r\n                Math.round(this.resonanceRangeNormalizer((self.resonance), this.type)) +\r\n                \" dB\"\r\n            );\r\n        */\r\n    }\r\n\r\n    connect(destination) {\r\n        try {\r\n            this.filter.connect(destination);\r\n        } catch (err) {\r\n            console.log(\"ERROR: \" + err + \" - myfilter: \", this.filter, \" -connect to destination: \", destination);\r\n        }\r\n    }\r\n\r\n    disconnect(destination) {\r\n        if (destination) {\r\n            this.filter.disconnect(destination)\r\n        } else {\r\n            this.filter.disconnect(destination)\r\n        }\r\n    }\r\n\r\n    getToneFilter() {\r\n        return this.filter;\r\n    }\r\n\r\n    // ----------- AUDIO HELPERS--------------\r\n    // takes value in [0, 1] range and it maps it to [50, 16000] interval in a logarithmic fashion\r\n    cutoffLogMapping(x) {\r\n        if (x < 0 || x > 1) {\r\n            console.error(\"Input value must be between 0 and 1.\");\r\n            return;\r\n        }\r\n        return 20 * Math.pow(10, Math.log10(22000 / 20) * x);\r\n    }\r\n\r\n    // takes value in [0, 1] range and it maps it to [0, 10] linearly\r\n    resonanceRangeNormalizer(x, type) {\r\n        if (x < 0 || x > 1) {\r\n            console.error(\"Input value must be between 0 and 1.\");\r\n            return;\r\n        }\r\n        switch (type) {\r\n            case \"lowpass\":\r\n                return 15 * x;\r\n            case \"highpass\":\r\n                return 15 * x;\r\n            case \"peaking\":\r\n                return 30 * (x - 0.5);\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}","import { render } from \"./Filter.vue?vue&type=template&id=48ffc09b&scoped=true\"\nimport script from \"./Filter.vue?vue&type=script&lang=js\"\nexport * from \"./Filter.vue?vue&type=script&lang=js\"\n\nimport \"./Filter.vue?vue&type=style&index=0&id=48ffc09b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-48ffc09b\"]])\n\nexport default __exports__","import { render } from \"./FilterChain.vue?vue&type=template&id=b8ee23ec&scoped=true\"\nimport script from \"./FilterChain.vue?vue&type=script&lang=js\"\nexport * from \"./FilterChain.vue?vue&type=script&lang=js\"\n\nimport \"./FilterChain.vue?vue&type=style&index=0&id=b8ee23ec&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b8ee23ec\"]])\n\nexport default __exports__","import { render } from \"./FilterHost.vue?vue&type=template&id=2c1963ee&scoped=true\"\nimport script from \"./FilterHost.vue?vue&type=script&lang=js\"\nexport * from \"./FilterHost.vue?vue&type=script&lang=js\"\n\nimport \"./FilterHost.vue?vue&type=style&index=0&id=2c1963ee&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2c1963ee\"]])\n\nexport default __exports__","<template>\r\n  <div :style=\"this.fxBack\">\r\n  <div class=\"fxHost\" :style=\"this.fxHost\">\r\n\r\n    <div class=\"chainHeadsRow\">\r\n      <div class=\"chainHead \" :style=\"this.chainHead1\"></div>\r\n      <div class=\"chainHead \" :style=\"this.chainHead2\"></div>\r\n      <div class=\"chainHead \" :style=\"this.chainHead3\"></div>\r\n    </div>\r\n    <div class=\"fxGrid\">\r\n      <FxCell v-for=\"(fx) in Fx_chain1\" ref=\"effects\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\"></FxCell>\r\n      <FxCell v-for=\"(fx) in Fx_chain2\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\"></FxCell>\r\n      <FxCell v-for=\"(fx) in Fx_chain3\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\"\r\n              @fxMounted=\"this.initFxConnections()\"></FxCell>\r\n    </div>\r\n    <div class=\"gainList\" :style=\"this.gainList\">\r\n      <div id=\"gain1\" class=\"channelGain\" :style=\"channelGain(0)\" @mousedown=\"gainMouseDown(0)\">\r\n        <div class=\"channelGainFader\" :style=\"computedFxGainKnobStyle(0)\"></div>\r\n      </div>\r\n      <div id=\"gain2\" class=\"channelGain\" :style=\"channelGain(1)\" @mousedown=\"gainMouseDown(1)\">\r\n        <div class=\"channelGainFader\" :style=\"computedFxGainKnobStyle(1)\"></div>\r\n      </div>\r\n      <div id=\"gain3\" class=\"channelGain\" :style=\"channelGain(2)\" @mousedown=\"gainMouseDown(2)\">\r\n        <div class=\"channelGainFader\" :style=\"computedFxGainKnobStyle(2)\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport FxCell from '../Effects/FxCell.vue'\r\nimport {Gain, getDestination} from \"tone\";\r\n\r\nexport default {\r\n  name: \"FxHost\",\r\n  components: {FxCell},\r\n\r\n  data() {\r\n    return {\r\n      Fx_chain1: [],\r\n      Fx_chain2: [],\r\n      Fx_chain3: [],\r\n      isGainSelected: \"\",\r\n      chainsGains: \"\"\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.isGainSelected = Array(this.nFxChains).fill(false)\r\n    this.chainsGains = Array(this.nFxChains).fill(0);\r\n    this.chainsGains[0] = 0.8;\r\n    this.chainsGains[1] = 0.8;\r\n    this.chainsGains[2] = 0.8;\r\n    // note: refs are kept incremental through the chains, while everything else is indexed relatively to the chain\r\n    //console.log(\"creating fx\")\r\n    for (let i = 1; i <= this.nFxXchain; i++) {\r\n      this.Fx_chain1.push({id: i, ref: 'Fx' + i, chainId: 0});\r\n      this.Fx_chain2.push({id: i, ref: 'Fx' + i + this.nFxXchain, chainId: 1});\r\n      this.Fx_chain3.push({id: i, ref: 'Fx' + i + this.nFxXchain * 2, chainId: 2});\r\n      // console.log(i)\r\n    }\r\n\r\n    //console.log(this.fxChains)\r\n    for (let i = 0; i < this.nFxChains; i++) {\r\n      this.fxChains[i][0] = new Gain(1);\r\n      this.fxChains[i][this.nNodesXfxChain-1] = new Gain(+this.chainsGains[i]);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // -------------------- AUDIO -----------------------\r\n    initFxConnections() {\r\n      //console.log(this.fxChains)\r\n      for (let i = 0; i < this.nFxChains; i++) {\r\n        // structure: Gain Filter Filter Filter Filter Filter Gain [7]\r\n        for (let j = 0; j < this.nNodesXfxChain-2; j++) {\r\n          //console.log(\"i: \", i, \"j: \", j)\r\n          this.fxChains[i][j].connect(this.fxChains[i][j + 1].getToneReference())\r\n          // console.log(\"chain \", i ,\" id: \", j, \" into chain \", i , \" id: \", j+1)\r\n        }\r\n        // connect last filter to volume\r\n        this.fxChains[i][this.nNodesXfxChain-2].connect(this.fxChains[i][this.nNodesXfxChain-1])\r\n        // connect vol to destination\r\n        this.fxChains[i][this.nNodesXfxChain-1].connect(getDestination())\r\n        // console.log(\"chain \", i, \" id: \", this.nFxXchain-1, \" into getDestination()\")\r\n      }\r\n    },\r\n\r\n    // first node of each chain is a gain node - we set its volume to adjust whole chain gain\r\n    setChainVolume(chainId, volume) {\r\n      this.fxChains[chainId][this.nNodesXfxChain-1].gain = volume;\r\n\r\n    },\r\n\r\n    // --------------------  GESTURE -----------------------\r\n    gainMouseDown(gainId) {\r\n      this.isGainSelected[gainId] = true;\r\n      // console.log(\"fx gainMouseDown\")\r\n    },\r\n\r\n    handleMouseUp(e) {\r\n      //Actions to execute when mouseup happens on any part of the screen\r\n      this.isGainSelected.fill(false)\r\n      // console.log(\"fx gainMouseUP\")\r\n\r\n    },\r\n    handleMouseMove(e) {\r\n      this.isGainSelected.forEach((isSelected, index) => {\r\n        // console.log(\"fx gain vol knob mouse drag\")\r\n        if (isSelected) {\r\n          //console.log(\"fx gain vol knob mouse drag of \", isSelected);\r\n          this.chainsGains[index] = this.chainsGains[index] - Math.floor(e.movementY) / 100;\r\n          this.chainsGains[index] = Math.max(this.chainsGains[index], 0);\r\n          this.chainsGains[index] = Math.min(this.chainsGains[index], 1);\r\n          //console.log(this.chainsGains[index])\r\n          //console.log(this.fxChains[index][0])\r\n          this.fxChains[index][this.nNodesXfxChain-1].set({\r\n            gain: this.chainsGains[index]\r\n          })\r\n        }\r\n      })\r\n    },\r\n    computedFxGainKnobStyle(id) {\r\n      let color = ''; \r\n      if(id === 0) color = this.colors.purple.medium\r\n      if(id === 1) color = this.colors.green.medium\r\n      if(id === 2) color = this.colors.pink.medium\r\n      return {\r\n        height: 100 * this.chainsGains[id] + \"%\",\r\n        top: 50 * (1-this.chainsGains[id]) + \"%\",\r\n        left: 50 * (1-this.chainsGains[id]) + \"%\",\r\n      \r\n        background: color,\r\n      }\r\n    },\r\n    channelGain(id) {\r\n      let color = ''\r\n      if(id == 0) color = this.colors.purple.glow\r\n      if(id == 1) color = this.colors.green.glow\r\n      if(id == 2) color = this.colors.pink.glow\r\n      return {\r\n        background: color,\r\n      }\r\n    }\r\n  },\r\n\r\n  computed : {\r\n\r\n    fxHost(){\r\n      return {\r\n        background: this.colors.orange.glow,\r\n        border: '.1vw solid '+this.colors.orange.dark,\r\n        boxSizing: 'border-box'\r\n      }\r\n    },\r\n    gainList(){\r\n      return {\r\n        background: this.colors.orange.light,\r\n        borderTop: '.1vw solid '+this.colors.orange.dark,\r\n        boxSizing: 'border-box',\r\n        height: '100%'\r\n      }\r\n    },\r\n    chainHead1(){\r\n      return {\r\n        background: this.colors.purple.light\r\n      }\r\n    },\r\n    chainHead2(){\r\n      return {\r\n        background: this.colors.green.medium\r\n      }\r\n    },\r\n    chainHead3(){\r\n      return {\r\n        background: this.colors.pink.light\r\n      }\r\n    },\r\n    fxBack(){\r\n      return {\r\n        position: 'relative',\r\n        height: '100%',\r\n        width: '100%',\r\n        background: this.colors.orange.light\r\n      }\r\n    }\r\n    \r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .fxHost{\r\n    display: grid;\r\n    margin: .3vw;\r\n    height: calc(100% - .6vw);\r\n    border-radius: 1%;\r\n    opacity: 90%;\r\n    grid-template-columns: 1fr;\r\n    grid-template-rows: 10% 70% 20%;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .fxGrid{\r\n    justify-content: center;\r\n    align-items: center;\r\n    justify-items: stretch;\r\n    height: 100%;\r\n    width: 100%;\r\n    flex: 1;\r\n    display: grid;\r\n    grid-column: auto;\r\n    grid-template-rows:  1fr 1fr 1fr 1fr 1fr ;\r\n    grid-template-columns: 1fr 1fr 1fr;\r\n    grid-auto-flow: column;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .gainList{\r\n    width: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    flex-direction: row;\r\n  }\r\n\r\n.channelGainFader {\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  left: 50%;\r\n  top: 50%;\r\n  aspect-ratio: 1;\r\n  border-radius: 50%;\r\n  align-self: center;\r\n}\r\n\r\n.channelGain {\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  align-content: center;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  border: 0.06vw solid black;\r\n}\r\n\r\n.chainHeadsRow {\r\n  height: 60%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  flex-direction: row;\r\n  background-color: transparent;\r\n  margin-top: 2%;\r\n  box-sizing: border-box;;\r\n  border: 0;\r\n}\r\n\r\n\r\n  .chainHead {\r\n    height: 50%;\r\n    aspect-ratio: 1/1;\r\n    border: 0;\r\n    clip-path: circle(50%)\r\n  }\r\n\r\n  .head1 {\r\n    background-color: red;\r\n  }\r\n  .head2 {\r\n    background-color: green;\r\n  }\r\n  .head3 {\r\n    background-color: blue;\r\n  }\r\n</style>","<template>\r\n  <div class=\"cell\" @click=\"nextFx\" @click.shift=\"setToBypass\" @mousedown=\"fxDown\">\r\n    <div class=\"icon\">\r\n      <div v-if=\"this.typeId === 0\" ref=\"plus\" :style=\"this.iconDiv\" @mouseover=\"this.onIconEnter\" @mouseout=\"onIconLeave\"> +</div>\r\n      <img v-if=\"this.typeId === 1\" src=\"@/icons/blizzard.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 2\" src=\"@/icons/drop.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 3\" src=\"@/icons/fire.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 4\" src=\"@/icons/moon.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 5\" src=\"@/icons/wind.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 6\" src=\"@/icons/tornado.svg\" alt=\"\">\r\n    </div>\r\n    <div class=\"glow\" :style=\"computedGlowStyle\" @mousedown=\"fxDown\">\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { isSVGTag } from '@vue/shared';\r\nimport MyEffect from \"@/views/Synth/Effects/MyFx\";\r\nimport {Gain, getDestination} from \"tone\";\r\nimport { nextTick } from \"vue\";\r\n\r\nconst types = ['none', 'reverb', 'delay', 'distortion', 'vibrato', 'pan', 'chorus'];\r\nconst Fx_colors = ['transparent', 'lightblue', 'deepskyblue', 'red', 'orange', 'darkorchid', 'yellow'];\r\nexport default {\r\n  props: [\"chainId\", \"id\", \"ref\"],\r\n\r\n  data() {\r\n    return {\r\n      modulation: 0,\r\n      is_down: false,\r\n      typeId: 0,\r\n      volume: 0,\r\n\r\n      //variables to solve\r\n      //dragging and clicking interference\r\n      startX: 0,\r\n      startY: 0,\r\n      endX: 0,\r\n      endY: 0,\r\n      threshold: 2, // adjust as needed\r\n    };\r\n  },\r\n  mounted() {\r\n    // gesture listeners\r\n    document.addEventListener(\"mouseup\", this.onMouseup);\r\n    document.addEventListener(\"mousemove\", this.onMousemove);\r\n    // init effect as bypass (a gain node)\r\n    this.effect = new MyEffect({ typeId: types[this.typeId], modulation: this.modulation })\r\n    // this.effect = this.fxHelper.generateToneFx('none');\r\n    // create the effect in the global fx matrix\r\n    this.fxChains[this.chainId][this.id] = this.effect;\r\n    // console.log(\"fx chain: \" + this.chainId + \" - fx id: \" + this.id)\r\n    // console.log(this.chainId, \" \", this.id)\r\n\r\n    // notify parent that each filter has been created\r\n    if (this.chainId === this.nFxChains - 1 && this.id === this.nFxXchain) {\r\n      this.$emit(\"fxMounted\")\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    computedGlowStyle() {\r\n      return {\r\n        opacity: (this.modulation + 0.3) * 100 + \"%\",\r\n        background: Fx_colors[this.typeId]\r\n      }\r\n    },\r\n    iconDiv() {\r\n      let color = 'black'\r\n      if (this.chainId === 0) color = this.colors.purple.medium\r\n      if (this.chainId === 1) color = this.colors.green.medium\r\n      if (this.chainId === 2) color = this.colors.pink.medium\r\n      return {\r\n        color: color,\r\n      }\r\n    },\r\n    iconDivBlack(){\r\n      let color = 'black'\r\n      return {\r\n        color: color,\r\n      }\r\n    },\r\n    onIconEnter() {\r\n      this.$refs['plus'].style.color = 'black'\r\n    },\r\n    onIconLeave() {\r\n      let color = 'black'\r\n      if (this.chainId === 0) color = this.colors.purple.medium\r\n      if (this.chainId === 1) color = this.colors.green.medium\r\n      if (this.chainId === 2) color = this.colors.pink.medium\r\n      this.$refs['plus'].style.color = color\r\n    }\r\n    /*     onIconLeave(){\r\n          let color = 'black'\r\n          if(this.chainId === 0 ) color = this.colors.purple.medium\r\n          if(this.chainId === 1 ) color = this.colors.green.medium\r\n          if(this.chainId === 2 ) color = this.colors.pink.medium\r\n          this.$refs['plus'].style.color = color\r\n        } */\r\n  },\r\n\r\n  components: { isSVGTag },\r\n\r\n  methods: {\r\n    // ------------------ USER INTERACTIONS -----------------------\r\n    nextFx() {\r\n      //calculate distance between mouseDown and mouseUp, if it is more than threshold pixels, then it is a drag\r\n      const distance = Math.sqrt(\r\n        Math.pow(this.endX - this.startX, 2) +\r\n        Math.pow(this.endY - this.startY, 2)\r\n      );\r\n\r\n      if (distance <= this.threshold) {\r\n        if (!this.is_down) {\r\n          // change fx type and index\r\n          this.typeId = this.generateNextTypeIndex();\r\n          let fxType = types[this.typeId]\r\n          console.log(fxType)\r\n\r\n          this.changeFxType(fxType)\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n    changeFxType(fxType) {\r\n      // disconnect old effect\r\n      this.effect.disconnect();\r\n      this.effect.dispose();\r\n\r\n      // create new effect\r\n      this.effect = new MyEffect({ type: fxType, modulation: this.modulation })\r\n      this.effect.setFxParams({ type: fxType, mod: this.modulation })\r\n\r\n      // attach new fx in the global fx matrix\r\n      // init effect\r\n      this.fxChains[this.chainId][this.id] = this.effect;\r\n      // connect effect\r\n      this.fxChains[this.chainId][this.id-1].connect(this.fxChains[this.chainId][this.id].getToneReference());\r\n      if(this.fxChains[this.chainId][this.id+1] instanceof MyEffect) {\r\n        this.fxChains[this.chainId][this.id].connect(this.fxChains[this.chainId][this.id + 1].getToneReference())\r\n      } else if(this.fxChains[this.chainId][this.id+1] instanceof Gain){\r\n        this.fxChains[this.chainId][this.id].connect(this.fxChains[this.chainId][this.id + 1])\r\n      }\r\n      //console.log(this.fxChains)\r\n\r\n      /* // debug global fx matrix\r\n      this.fxChains.forEach((chain) => {\r\n        chain.forEach((fx) => {\r\n          if (fx instanceof MyEffect){\r\n            console.log(fx.getToneReference())\r\n          } else { console.log(fx) }\r\n        })\r\n      })*/\r\n    },\r\n\r\n    generateRandomTypeIndex() {\r\n      return Math.round(Math.random() * 10 + 1) % types.length\r\n    },\r\n\r\n    generateNextTypeIndex() {\r\n      return (this.typeId + 1) % types.length;\r\n    },\r\n\r\n    setToBypass() {\r\n      this.typeId = 0;\r\n      this.changeFxType('none')\r\n\r\n      console.log(\"set fx in position \" + this.chainId + \" - \" + this.id + \" to bypass\")\r\n    },\r\n\r\n    fxDown(e) {\r\n      //save mouseDown position\r\n      this.startX = e.clientX;\r\n      this.startY = e.clientY;\r\n\r\n      if (!this.is_down)\r\n        this.is_down = true;\r\n    },\r\n    onMouseup(e) {\r\n      //save mouseUp position\r\n      this.endX = e.clientX;\r\n      this.endY = e.clientY;\r\n      if (this.is_down)\r\n        this.is_down = false;\r\n    },\r\n    onMousemove(event) {\r\n      if (this.is_down) {\r\n        if (event.movementY < 0) {\r\n          this.modulation = Math.min(this.modulation - event.movementY / 100, 1);\r\n        } else {\r\n          this.modulation = Math.max(this.modulation - event.movementY / 100, 0);\r\n        }\r\n        this.effect.setFxParams({ fx: this.effect, typeId: this.typeId, mod: this.modulation })\r\n\r\n        // console.log(this.modulation);\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.cell {\r\n  position: relative;\r\n  height: 85%;\r\n  background-color: transparent;\r\n  display: flex;\r\n  margin: 10%;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.icon {\r\n  display: flex;\r\n  aspect-ratio: 1/1;\r\n  position: absolute;\r\n  z-index: 2;\r\n  background-color: transparent;\r\n}\r\n\r\n.icon div {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1.5vw;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  background-color: transparent;\r\n}\r\n\r\n.icon img {\r\n  width: 1.5vw;\r\n  aspect-ratio: 1/1;\r\n  opacity: 80%;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.glow {\r\n  border-radius: 5%;\r\n  flex: 1;\r\n  height: 100%;\r\n  width: 100%;\r\n  position: absolute;\r\n  z-index: 1;\r\n  background-color: red;\r\n}\r\n\r\n.glow div {\r\n  height: 100%;\r\n  width: 100%;\r\n  opacity: 100%;\r\n  color: black;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 2vw;\r\n}\r\n</style>","import {Chorus, Distortion, Envelope, Gain, LFO, Panner, PingPongDelay, Reverb, Vibrato} from 'tone'\r\nimport {nextTick} from \"vue\";\r\n\r\nexport default class MyEffect {\r\n    constructor({ type = \"none\", modulation = 0 }) {\r\n        this.type = type;\r\n        this.mod = modulation;\r\n        this.effect = this.generateToneFx(type)\r\n\r\n        this.modulatorsPreset = {\r\n            envelope: {\r\n                mod: { amount: 0, signal: null },\r\n            },\r\n            lfo: {\r\n                mod: { amount: 0, signal: null },\r\n            }\r\n        }\r\n    }\r\n\r\n    // getters\r\n    getToneReference(){\r\n        return this.effect;\r\n    }\r\n\r\n    // creator\r\n    generateToneFx(type) {\r\n        let effect;\r\n        // console.log(\"fx gen type: \" + type)\r\n        switch (type) {\r\n            case 0:\r\n            case 'none':\r\n                effect = new Gain();\r\n                break;\r\n            case 1:\r\n            case 'reverb':\r\n                effect = this.createReverb()\r\n                break;\r\n            case 2:\r\n            case 'delay':\r\n                effect = this.createDelay()\r\n                break;\r\n            case 3:\r\n            case 'distortion':\r\n                effect = this.createDistortion()\r\n                break;\r\n            case 4:\r\n            case 'vibrato':\r\n                effect = this.createVibrato()\r\n                break;\r\n            case 5:\r\n            case 'pan':\r\n                effect = this.createPan()\r\n                break;\r\n            case 6:\r\n            case 'chorus':\r\n                effect = this.createChorus()\r\n                break;\r\n            default:\r\n                effect = new Gain();\r\n        }\r\n        // console.log(effect)\r\n        this.setFxParams({ effect: effect, type: type })\r\n        return effect;\r\n    }\r\n\r\n    // setters\r\n    // general setter\r\n    setFxParams({ effect = this.effect, type = this.type, mod = this.mod }) {\r\n        this.effect = effect;\r\n        this.type = type;\r\n        this.mod = mod;\r\n        // console.log(\"effect = \"+ this.effect,\" type = \" + this.type, \"mod = \" + this.mod)\r\n\r\n        switch (type) {\r\n            case 1: // reverb\r\n            case 'reverb':\r\n                this.effect.set({\r\n                    decay: 0.1 + 5*mod,\r\n                    wet: 0.3 + 0.7*mod,\r\n                })\r\n                break;\r\n            case 2: // delay\r\n            case 'delay':\r\n                this.effect.set({\r\n                    delayTime: 0.05 + 0.4*mod,\r\n                    feedback: 0.05 + 0.90*mod,\r\n                    wet: 0.3 + 0.7*mod,\r\n                })\r\n                break;\r\n            case 3: // distortion\r\n            case 'distortion':\r\n                this.effect.set({\r\n                    distortion: 0.05 + 0.95*mod,\r\n                    wet: 0.4 + 0.6*mod,\r\n                })\r\n                break;\r\n            case 4: // vibrato\r\n            case 'vibrato':\r\n                this.effect.set({\r\n                    depth: 0.5 + 0.5*mod,\r\n                    frequency: 1 + 20*mod,\r\n                    wet: 0.5 + 0.5*mod\r\n                })\r\n                break;\r\n            case 5: // pan\r\n            case 'pan':\r\n                let coeff = -1 + (2*mod)\r\n                this.effect.set({\r\n                    pan: coeff,\r\n                    wet: 1,\r\n                })\r\n                console.log(\"pan coeff: \" + coeff.toFixed(2))\r\n                break;\r\n            case 6: // chorus\r\n            case 'chorus':\r\n                this.effect.set({\r\n                    depth: 0.6 + mod*0.4,\r\n                    frequency: 30 + mod*10,\r\n                    spread: 80 * mod*8,\r\n                    wet: 1,\r\n                    feedback: 0.05 + mod*0.9,\r\n                    type: \"triangle\" + (mod*10).toFixed(0).toString(),\r\n                    delayTime: 100 + mod*90,\r\n                })\r\n                break;\r\n            default:\r\n                this.effect = new Gain();\r\n        }\r\n    }\r\n\r\n    // -------------- FX CREATION -------------\r\n    createReverb(){\r\n        return new Reverb();\r\n    }\r\n    createDelay() {\r\n        //todo: not interesting effect if used like this\r\n        return new PingPongDelay();\r\n    }\r\n    createDistortion(){\r\n        return new Distortion();\r\n    }\r\n    createVibrato(){\r\n        return new Vibrato();\r\n    }\r\n    createPan(){\r\n        // todo: create LFO modulating width\r\n        return new Panner();\r\n    }\r\n    createChorus(){\r\n        return new Chorus();\r\n    }\r\n\r\n    // TODO:  ------------- MODULATION ------------\r\n\r\n    createModulator(type) {\r\n        //console.log(\"creating modulator of type: \"+type)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                return new Envelope;\r\n            case \"lfo\":\r\n                return new LFO;\r\n            default:\r\n                console.log(\"Error creating modulator\");\r\n                return null;\r\n        }\r\n    }\r\n\r\n    modulatorSetter(modulator, type, parameters) {\r\n        switch (type) {\r\n            case \"envelope\":\r\n                modulator.set({\r\n                    \"attack\": parameters.attack,\r\n                    \"decay\": parameters.decay,\r\n                    \"sustain\": parameters.sustain,\r\n                    \"release\": parameters.release\r\n                })\r\n                break;\r\n            case \"lfo\":\r\n                //TO-DO\r\n                modulator.set({\r\n\r\n                })\r\n                break;\r\n            default:\r\n                console.log(\"Error setting modulator parameters, invalid args\")\r\n                break;\r\n        }\r\n    }\r\n    setModulatorParameters(type, target, parameters) {\r\n        // console.log(\"MyFx setModulatorParameters\")\r\n        if (this.initialized) {\r\n            this.modulatorsData[type][target].parameters = parameters\r\n            this.updateModulators()\r\n        }\r\n    }\r\n\r\n    // have to pass, the modulator (tone), the type (lfo or envelope), the gain linked to the voice, the voice and the target\r\n    connectModulator(modulator, type, gain, target) {\r\n        switch (type) {\r\n            case \"envelope\":\r\n                break;\r\n\r\n            case \"lfo\":\r\n                //TO-DO\r\n                break;\r\n\r\n            default:\r\n                console.log(\"invalid modulator type\")\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    // ------------- TONE JS EXTENSIONS -----------\r\n    connect(route){\r\n        this.effect.connect(route);\r\n    }\r\n    disconnect(){\r\n        this.effect.disconnect();\r\n    }\r\n    dispose(){\r\n        this.effect.dispose();\r\n    }\r\n}\r\n","import { render } from \"./FxCell.vue?vue&type=template&id=63415296&scoped=true\"\nimport script from \"./FxCell.vue?vue&type=script&lang=js\"\nexport * from \"./FxCell.vue?vue&type=script&lang=js\"\n\nimport \"./FxCell.vue?vue&type=style&index=0&id=63415296&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-63415296\"]])\n\nexport default __exports__","import { render } from \"./FxHost.vue?vue&type=template&id=1dd12caa&scoped=true\"\nimport script from \"./FxHost.vue?vue&type=script&lang=js\"\nexport * from \"./FxHost.vue?vue&type=script&lang=js\"\n\nimport \"./FxHost.vue?vue&type=style&index=0&id=1dd12caa&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1dd12caa\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"toolsHost\" :style=\"this.toolsHost\">\r\n        <SpecAnalyzer />\r\n        <Oscilloscope ref=\"oscilloscope\"/>\r\n        <Meter/>\r\n    </div>\r\n</template>\r\n<!-- ./Tools/Meter.vue../Meter.vue -->\r\n<script>\r\n    import * as Tone from \"tone\";\r\n    import Meter from './Meter.vue'\r\n    import Oscilloscope from './Oscilloscope.vue'\r\n    import SpecAnalyzer from './SpecAnalyzer.vue'\r\n    export default {\r\n    name: \"ToolsHost\",\r\n    components: {\r\n        Meter,\r\n        Oscilloscope,\r\n        SpecAnalyzer\r\n    },\r\n    data() {\r\n        return {\r\n\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n    },\r\n    beforeDestroy() {\r\n    },\r\n\r\n    methods: {\r\n        setOscilloscopeTiming(note){\r\n            let mseconds = (1/Tone.Frequency(note))*1000;\r\n            this.$refs[\"oscilloscope\"].setTiming(mseconds)\r\n        }\r\n\r\n    },\r\n    computed: {\r\n        toolsHost(){\r\n            return{\r\n                background: this.colors.green.light\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .toolsHost{\r\n        display: grid;\r\n        grid-template-rows: 40% 40% 20%;\r\n    }\r\n</style>","<template>\r\n  <div class=\"meter\" :style=\"this.Meter\">\r\n    <div class=\"signalSum\">\r\n      <div ref=\"left\" class=\"signal\" :style=\"computedWidthLeft\"></div>\r\n      <div></div>\r\n      <div ref=\"right\" class=\"signal\" :style=\"computedWidthRight\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Meter } from \"tone\";\r\nimport { dbToGain, gainToDb } from \"tone\";\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      widthLeft: 0,\r\n      widthRight: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    computedWidthLeft() {\r\n      return { width: `${this.widthLeft}%` , background: this.colors.green.medium};\r\n    },\r\n    computedWidthRight() {\r\n      return { width: `${this.widthRight}%` , background: this.colors.green.medium};\r\n    },\r\n    Meter(){\r\n      return{\r\n        background: this.colors.green.glow,\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.meter = new Meter({channels: 2});\r\n    Tone.getDestination().connect(this.meter);\r\n    this.intervalId = setInterval(() => {\r\n      this.updateWidths();\r\n    }, 25);\r\n  },\r\n  \r\n  methods: {\r\n    updateWidths() {\r\n      //this.volume = this.meter.getValue();\r\n      [ this.leftVolume , this.rightVolume ] = this.meter.getValue();\r\n      if (!isFinite(this.leftVolume) && !isFinite(this.rightVolume)) return;\r\n      //console.log(this.meter.getValue()); \r\n      this.widthLeft = Math.min(dbToGain(this.leftVolume) * 100,100);\r\n      this.widthRight = Math.min(dbToGain(this.rightVolume) * 100,100);\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.meter.stop();\r\n    this.meter.dispose();\r\n    clearInterval(this.intervalId);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.meter {\r\n  grid-row: 3;\r\n  border-radius: 0.2vw;\r\n  margin: 0vw 0.3vw 0.3vw;\r\n  display: flex;\r\n  border: 0.1vw solid #334030;\r\n}\r\n.signal {\r\n  height: 100%;\r\n  border-radius: 0.05vw;\r\n}\r\n.signalSum {\r\n  margin: 0.3vw;\r\n  display: grid;\r\n  grid-template-rows: 45% 10% 45%;\r\n  width: 100%;\r\n}\r\n</style>","import { render } from \"./Meter.vue?vue&type=template&id=c5d289ba&scoped=true\"\nimport script from \"./Meter.vue?vue&type=script&lang=js\"\nexport * from \"./Meter.vue?vue&type=script&lang=js\"\n\nimport \"./Meter.vue?vue&type=style&index=0&id=c5d289ba&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c5d289ba\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"oscilloscope\">\r\n    <canvas ref=\"canvas\" class=\"oscilloscopeCanvas\" :style=\"this.oscilloscopeCanvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      oscilloscopeData: [],\r\n      timing: 10,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.oscilloscope = new Tone.Waveform();\r\n    Tone.getDestination().connect(this.oscilloscope);\r\n    this.startOscilloscope();\r\n\r\n    // use the ref to get the canvas element\r\n    this.canvas = this.$refs.canvas;\r\n\r\n    // set the canvas width and height to 100%\r\n    this.canvas.width = 4*this.canvas.offsetWidth;\r\n    this.canvas.height = 4*this.canvas.offsetHeight;\r\n\r\n    // get the canvas context\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n  },\r\n  methods: {\r\n    setTiming(timing) {\r\n      this.timing = timing;\r\n      clearInterval(this.intervalId);\r\n      this.startOscilloscope();\r\n    },\r\n    startOscilloscope() {\r\n        //console.log(\"avviando oscilloscope con timer \"+this.timing)\r\n      this.intervalId = setInterval(() => {\r\n        this.updateOscilloscopeData();\r\n      }, this.timing);\r\n    },\r\n    draw(data) {\r\n      // clear the canvas\r\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n      // draw the data on the canvas\r\n      // set the line color\r\n      this.ctx.strokeStyle = \"#658060\";\r\n      // set the line width\r\n      this.ctx.lineWidth = 6;\r\n      this.ctx.beginPath();\r\n\r\n      // loop through the data and plot it on the canvas\r\n      for (let i = 0; i < data.length; i++) {\r\n        // calculate the x and y position of the point\r\n        let x = i * (this.canvas.width / data.length);\r\n        let y = (this.canvas.height / 2) * (1 - data[i]);\r\n\r\n        // move to the x and y position\r\n        this.ctx.moveTo(x, y);\r\n        // draw a line to the next point\r\n        this.ctx.lineTo(x + this.canvas.width / data.length, y);\r\n      }\r\n      // draw the line\r\n      this.ctx.stroke();\r\n      this.ctx.moveTo(0, 0);\r\n    },\r\n    updateOscilloscopeData() {\r\n      this.oscilloscopeData = this.oscilloscope.getValue();\r\n      this.draw(this.oscilloscopeData);\r\n      //console.log(this.oscilloscopeData);\r\n    },\r\n  },\r\n  computed: {\r\n    oscilloscopeCanvas(){\r\n      return{\r\n        background: this.colors.green.glow,\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.oscilloscope.dispose();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.oscilloscope {\r\n  grid-row: 2;\r\n  margin: 0.15vw 0.3vw 0.3vw;\r\n  box-sizing: border-box;\r\n  \r\n}\r\n.oscilloscopeCanvas {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #caffbf;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./Oscilloscope.vue?vue&type=template&id=127e937a\"\nimport script from \"./Oscilloscope.vue?vue&type=script&lang=js\"\nexport * from \"./Oscilloscope.vue?vue&type=script&lang=js\"\n\nimport \"./Oscilloscope.vue?vue&type=style&index=0&id=127e937a&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"spectral-analyzer\">\r\n    <canvas class=\"analyzerCanvas\" ref=\"canvas\" :style=\"this.analyzerCanvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport { dbToGain, gainToDb } from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      timing: 10,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.analyser = new Tone.Analyser(\"fft\", 2048);\r\n    this.canvasCtx = this.$refs.canvas.getContext(\"2d\");\r\n    Tone.getDestination().connect(this.analyser);\r\n    this.startAnalyzer()\r\n  },\r\n  methods: {\r\n    draw() {\r\n      //requestAnimationFrame(this.draw);\r\n\r\n      this.data = this.analyser.getValue();\r\n      this.canvasCtx.strokeStyle = \"#658060\";\r\n      //console.log(this.data)\r\n\r\n      // clear the canvas\r\n      this.canvasCtx.clearRect(\r\n        0,\r\n        0,\r\n        this.$refs.canvas.width,\r\n        this.$refs.canvas.height\r\n      );\r\n        let x\r\n\r\n        \r\n\r\n      // render the analysis on the canvas\r\n      for (let i = 0; i < this.data.length; i++) {\r\n        \r\n        this.value = 6*dbToGain(this.data[i])*this.$refs.canvas.height;\r\n        //console.log(this.value)\r\n        x = (Math.log10(i) / Math.log10(2048)) * this.$refs.canvas.width\r\n        this.canvasCtx.fillStyle = \"black\";\r\n        this.canvasCtx.fillRect(x, this.$refs.canvas.height - this.value, 1, this.value);\r\n      }\r\n    },\r\n    startAnalyzer() {\r\n      //console.log(this.$refs.canvas.height)\r\n        //console.log(\"avviando analyzer con timer \"+this.timing)\r\n      this.intervalId = setInterval(() => {\r\n        this.draw();\r\n      }, 10);\r\n    },\r\n  },\r\n  computed: {\r\n    analyzerCanvas(){\r\n      return{\r\n        background: this.colors.green.glow\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {},\r\n};\r\n</script>\r\n\r\n<style>\r\n.spectral-analyzer{\r\n  grid-row: 1;\r\n  margin: 0.3vw 0.3vw 0.15vw;\r\n  box-sizing: border-box;\r\n}\r\n.analyzerCanvas {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./SpecAnalyzer.vue?vue&type=template&id=3db195fc\"\nimport script from \"./SpecAnalyzer.vue?vue&type=script&lang=js\"\nexport * from \"./SpecAnalyzer.vue?vue&type=script&lang=js\"\n\nimport \"./SpecAnalyzer.vue?vue&type=style&index=0&id=3db195fc&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ToolsHost.vue?vue&type=template&id=082c9148\"\nimport script from \"./ToolsHost.vue?vue&type=script&lang=js\"\nexport * from \"./ToolsHost.vue?vue&type=script&lang=js\"\n\nimport \"./ToolsHost.vue?vue&type=style&index=0&id=082c9148&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"modHost\" :style=\"modHost\">\r\n     <VolEnvelope ref=\"volEnvelope\"/>\r\n    <template\r\n      v-for=\"modulator in envList\"\r\n      :key=\"modulator.id\">\r\n\r\n       <Envelope\r\n        :id=\"modulator.id\"\r\n        ref=\"envelopes\"\r\n      @isDraggableUpdate=\"handleDraggableUpdate\"/>\r\n    </template>\r\n    <template\r\n        v-for=\"modulator in lfoList\"\r\n        :key=\"modulator.id\">\r\n\r\n\r\n       <Lfo\r\n          :id=\"modulator.id\"\r\n          ref=\"lfos\"/>\r\n    </template>\r\n    <ModSelector\r\n      @selection=\"changeSelection\"\r\n      ref=\"modSelector\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport Envelope from \"./Envelope.vue\";\r\nimport Lfo from \"./Lfo.vue\";\r\nimport VolEnvelope from \"./VolEnvelope.vue\";\r\nimport ModSelector from \"./ModSelector.vue\";\r\nimport { isProxy, toRaw } from 'vue';\r\n\r\nexport default {\r\n  components: {\r\n    VolEnvelope,\r\n    Envelope,\r\n    Lfo,\r\n    ModSelector,\r\n  },\r\n  data() {\r\n    return {\r\n      name: \"modHost\",\r\n      //number of total modulators\r\n\r\n      //visible modulator\r\n      selection: 'volEnvelope',\r\n      selectionType: null,\r\n\r\n      //list of modulators\r\n      envList: [],\r\n      lfoList: [],\r\n    };\r\n  },\r\n  created() {\r\n    //create arrays of modulators\r\n    for (let i = 1; i < this.nEnvelopes+1; i++) {\r\n      this.envList.push({ id: i, ref: i });\r\n    }\r\n    for (let i = 1; i < this.nLfo+1; i++) {\r\n      this.lfoList.push({ id: i, ref: i });\r\n    }\r\n    //console.log(toRaw(this.modulatorList));\r\n  },\r\n  mounted() {\r\n    //unhide main volume modulator\r\n    this.$refs.volEnvelope.unHide();\r\n    console.log(this.$refs.volEnvelope)\r\n\r\n    //listens to link and unlink events\r\n    document.addEventListener(\"link\", this.handleLink)\r\n    document.addEventListener(\"unLink\", this.handleUnlink)\r\n  },\r\n  computed: {\r\n    modHost() {\r\n      return{\r\n        background: this.colors.gray.glow,\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleDraggableUpdate(isDraggable){\r\n      this.$refs.modSelector.isDraggableUpdate(isDraggable)\r\n    },\r\n    handleNewOsc(){\r\n      //initialize volEnvelope on all synth when a new oscillator is added\r\n      this.$refs.volEnvelope.handleNewOsc();\r\n    },\r\n    handleMouseUp(e){\r\n      if(this.selection==='volEnvelope'){\r\n        this.$refs.volEnvelope.handleMouseUp(e)\r\n      }else{\r\n        if(this.selectionType===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[this.selection-1]).handleMouseUp(e);\r\n        }\r\n        if(this.selectionType===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).handleMouseUp(e);\r\n        }\r\n      }\r\n    },\r\n    handleMouseMove(e){\r\n      if(this.selection==='volEnvelope'){\r\n        this.$refs.volEnvelope.handleMouseMove(e)\r\n      }else{\r\n        if(this.selectionType===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[this.selection-1]).handleMouseMove(e);\r\n        }\r\n        if(this.selectionType===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).handleMouseMove(e);\r\n        }\r\n      }\r\n    },\r\n    changeSelection(id, type) {\r\n      console.log(\"selected \"+id)\r\n      console.log(this.$refs)\r\n\r\n      //hide old modulator\r\n      if(this.selection==='volEnvelope'){\r\n        this.$refs.volEnvelope.hide()\r\n      }else{\r\n        if(this.selectionType===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[this.selection-1]).hide();\r\n        }\r\n        if(this.selectionType===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).hide();\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).stopOscilloscope();\r\n        }\r\n      }\r\n\r\n\r\n      //show new modulator\r\n      if(id==='volEnvelope'){\r\n        this.$refs.volEnvelope.unHide()\r\n      }else{\r\n        if(type===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[id-1]).unHide();\r\n        }\r\n        if(type===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[id-1]).unHide();\r\n        }\r\n      }\r\n\r\n\r\n      this.selection = id;\r\n      this.selectionType = type;\r\n      \r\n    },\r\n\r\n    //handlers for drag and drop\r\n    handleLink(event){\r\n      console.log(\"link\")\r\n      let data = event.detail\r\n      //console.log(data)\r\n      //console.log(this.synths)\r\n      this.$refs[data.modulator.type+\"s\"][data.modulator.id-1].link(data.object, data.target, data.color)\r\n    },\r\n    handleUnlink(event){\r\n      console.log(\"unLink\")\r\n      let data = event.detail\r\n      this.$refs[data.modulator.type+\"s\"][data.modulator.id-1].unLink(data.object, data.target)\r\n\r\n    }\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modHost {\r\n  grid-column: span 2; /* takes 2 spaces horizontally*/\r\n  position: relative;\r\n  display: grid;\r\n  grid-template-rows: 80% 20%;\r\n  grid-template-columns: 100%;\r\n}\r\n</style>","<template>\r\n  <div ref=\"container\" class=\"container hidden\" :style=\"this.container\">\r\n    <div class=\"border\" :style=\"this.border\">\r\n      <EnvelopeVisualizer ref=\"visualizer\" :is_volume=\"false\" @paramRefresh=\"handleRefresh\"/>\r\n      <Knobs ref=\"knobs\" type=\"envelope\" :id=\"this.id\" :parameters=\"this.parameters\"\r\n             @isDraggableUpdate=\"handleDraggableUpdate\"/>\r\n      <div> </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {transcode} from \"buffer\";\r\nimport * as Tone from \"tone\";\r\nimport ToolsHost from \"../Tools/ToolsHost.vue\";\r\nimport Knobs from \"./Knobs.vue\";\r\nimport VolEnvelope from \"@/views/Synth/Modulators/VolEnvelope.vue\";\r\nimport Lfo from \"@/views/Synth/Modulators/Lfo.vue\";\r\nimport ModSelector from \"@/views/Synth/Modulators/ModSelector.vue\";\r\nimport EnvelopeVisualizer from \"./EnvelopeVisualizer.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    EnvelopeVisualizer, Knobs,\r\n  },\r\n  props: [\"id\"],\r\n  data() {\r\n    return {\r\n      parameters: {\r\n        attack: 0.01 * 2.5,\r\n        attackCurve: \"linear\",\r\n        decay: 0.1 * 2.5,\r\n        decayCurve: \"linear\",\r\n        releaseCurve: \"linear\",\r\n        release: 0.1 * 2.5,\r\n        sustain: 0.5,\r\n      },\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    //UPDATE PARAMS CHANGED IN ENVELOPE VISUALIZER\r\n    handleRefresh(parameters) {\r\n      this.parameters = parameters\r\n      this.$refs.knobs.updateParameters(this.parameters)\r\n    },\r\n    //-------------METHODS TO LINK WHEN DROPPING\r\n    link(object, target, color) {\r\n      //console.log(\"THINGS HAPPENING \"+section+\" \"+target)\r\n      this.$refs.knobs.addLink(object, target, color)\r\n\r\n    },\r\n    unLink(object, target) {\r\n      //console.log(\"THINGS HAPPENING \")\r\n      //console.log(object)\r\n      //console.log(target)\r\n      this.$refs.knobs.removeLink(object, target)\r\n    },\r\n    handleDraggableUpdate(isDraggable) {\r\n      this.$emit(\"isDraggableUpdate\", isDraggable)\r\n    },\r\n    //--------------METHODS TO SHOW/HIDE------------\r\n    unHide() {\r\n      this.$refs.container.classList.remove(\"hidden\");\r\n    },\r\n    hide() {\r\n      this.$refs.container.classList.add(\"hidden\");\r\n    },\r\n    //----------------------------------------------\r\n    handleMouseMove(e) {\r\n      this.$refs.visualizer.handleMouseMove(e);\r\n      this.$refs.knobs.handleMouseMove(e);\r\n    },\r\n    handleMouseUp(e) {\r\n      this.$refs.visualizer.handleMouseUp(e);\r\n      this.$refs.knobs.handleMouseUp(e);\r\n    }\r\n  },\r\n  computed: {\r\n    border(){\r\n      return{\r\n        background: '#ceeae7'\r\n      }\r\n    },\r\n    container(){\r\n      return{\r\n        background: this.colors.azure.medium\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.border {\r\n  grid-template-columns: calc(6 / 8 * 100%) calc(2 / 8 * 100%);\r\n  grid-template-rows: 100% ;\r\n\r\n  position: relative;\r\n  display: grid;\r\n  width: calc(100% - 0.6vw);\r\n  height: calc(100% - 0.6vw);\r\n  box-sizing: border-box;\r\n  margin: 0.3vw;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n}\r\n\r\n.container {\r\n  grid-column: span 2;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.envelope {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: transparent;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.centering {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>","<template>\r\n  <div class=\"knobs\">\r\n    <div v-for=\"knob in knobList\" :key=\"knob.id\" :ref=\"knob.ref\" class=\"knob\" @mousedown=\"mouseDown(knob.id)\">\r\n      <div class=\"knob_fader_background\"></div>\r\n      <div v-if=\"knob.isOn===true\" class=\"knob_fader\" :style=\"computedFaderStyle(knob.id)\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { isProxy, toRaw } from 'vue';\r\nexport default {\r\n  props: [\"type\", \"id\", \"parameters\"],\r\n  name: \"Knobs\",\r\n  data() {\r\n    return {\r\n      knobList: [],\r\n      freeKnobs: this.nKnobs,\r\n      isMouseDown: false,\r\n      selectedKnobId: \"\",\r\n    }\r\n  },\r\n  mounted() {\r\n    for (let i = 0; i < this.nKnobs; i++) {\r\n      this.knobList.push({id: i, ref: \"knob\" + i, isOn:false, amount: 0, object: null, target: null});\r\n    }\r\n\r\n    //Set available state (isDraggable)\r\n    this.isDraggable[this.type][this.id] = true\r\n\r\n  },\r\n  methods: {\r\n    updateParameters(parameters=this.parameters){\r\n     // console.log(\"UPDATING PARAMETERS\", parameters)\r\n      for(let i=0; i<this.nKnobs; i++){\r\n        if(this.knobList[i].isOn) {\r\n          this.knobList[i].object.setModulatorParameters(this.type, this.knobList[i].target, parameters)\r\n          break\r\n        }\r\n      }\r\n    },\r\n\r\n    knobText(id){\r\n      if(this.knobList[id].isOn===true){\r\n        return this.knobList[id].amount\r\n      }else{\r\n        return \"yo\"\r\n      }\r\n    },\r\n\r\n    addLink(object, target, color, parameters=this.parameters){\r\n      for(let i=0; i<this.nKnobs; i++){\r\n        if(!this.knobList[i].isOn) {\r\n          this.knobList[i].color = color\r\n          this.knobList[i].isOn = true;\r\n          this.knobList[i].amount= 0.5;\r\n          this.knobList[i].object = object\r\n          this.knobList[i].target = target\r\n          this.freeKnobs -= 1;\r\n\r\n          //set modulator amount at object\r\n          console.log(\"ADDING LINK\")\r\n          console.log(parameters)\r\n          object.setModulatorParameters(this.type, target, parameters)\r\n          object.setModulatorAmount(this.type, target, this.knobList[i].amount)\r\n          break;\r\n        }\r\n      }\r\n      if (this.freeKnobs === 0) this.isDraggable[this.type][this.id] = false\r\n      this.$emit(\"isDraggableUpdate\", this.isDraggable)\r\n      //todo: event to set isDraggable inside modSelector NOT WORKING\r\n    },\r\n\r\n    removeLink(object, target){\r\n      //console.log(\"REMOVING LINK TO\"+target)\r\n      //console.log(object)\r\n\r\n      this.knobList.forEach((knob) => {\r\n        knob.amount = knob.amount+0.01\r\n        knob.amount = knob.amount-0.01\r\n        knob = toRaw(knob)\r\n        if (knob.object === object && knob.target === target) {\r\n          knob.object.setModulatorAmount(this.type, target, 0)\r\n          //remove info from knob\r\n          knob.amount = 0\r\n          knob.isOn = false\r\n          knob.object = null\r\n          knob.target = null\r\n        }\r\n      })\r\n      this.freeKnobs++;\r\n      this.isDraggable[this.type][this.id] = true\r\n    },\r\n\r\n    handleMouseMove(e) {\r\n\r\n      if(this.isMouseDown &&  this.knobList[this.selectedKnobId].isOn){\r\n        this.knobList[this.selectedKnobId].amount = this.knobList[this.selectedKnobId].amount - Math.floor(e.movementY) / 100;\r\n        this.knobList[this.selectedKnobId].amount = Math.max(this.knobList[this.selectedKnobId].amount, 0)\r\n        this.knobList[this.selectedKnobId].amount = Math.min(this.knobList[this.selectedKnobId].amount, 1)\r\n        this.knobList[this.selectedKnobId].object.setModulatorAmount(this.type, this.knobList[this.selectedKnobId].target, this.knobList[this.selectedKnobId].amount)\r\n\r\n      }\r\n\r\n    },\r\n\r\n    mouseDown(knobId){\r\n      this.isMouseDown = true;\r\n      this.selectedKnobId = knobId;\r\n    },\r\n\r\n    computedFaderStyle(id) {\r\n      let rawKnobAmount = this.knobList[id].amount\r\n        return {\r\n          backgroundColor: this.knobList[id].color,\r\n          height: (rawKnobAmount * 100).toString() + \"%\"\r\n        }\r\n    },\r\n\r\n    handleMouseUp() {\r\n      this.isMouseDown = false;\r\n    },\r\n  },\r\n  computed: {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.knobs {\r\n  margin: 2%;\r\n  border-radius: 0.3vw;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  display: grid;\r\n  grid-template-rows: repeat(3, 1fr);\r\n  column-gap: 1vw;\r\n  row-gap: 1vw;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  align-content: center;\r\n  justify-content: center;\r\n  align-items: stretch;\r\n  justify-items: center;\r\n  padding: 4%;\r\n  border: 0.06vw solid black;\r\n}\r\n\r\n.knob {\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  position: relative;\r\n  vertical-align: bottom;\r\n  background-color: whitesmoke;\r\n  display: grid;\r\n}\r\n\r\n.knob_fader {\r\n  position: absolute;\r\n  height: 0%;\r\n  box-sizing: border-box;\r\n  align-self: end;\r\n  width: 100%;\r\n  background-color: transparent;\r\n  border-bottom-left-radius: 0.4vw;\r\n  border-bottom-right-radius: 0.4vw;\r\n  background-clip: content-box;\r\n  padding: 0.1vw;\r\n  z-index: 101;\r\n}\r\n\r\n.knob_fader_background {\r\n  clip-path: circle(50%);\r\n  box-sizing: border-box;\r\n  aspect-ratio: 1/1;\r\n  height: 100%;\r\n  background-color: transparent;\r\n  border: 0.1vw solid black;\r\n  border-radius: 50%;\r\n  z-index: 102;\r\n}\r\n</style>","import { render } from \"./Knobs.vue?vue&type=template&id=245c68f8&scoped=true\"\nimport script from \"./Knobs.vue?vue&type=script&lang=js\"\nexport * from \"./Knobs.vue?vue&type=script&lang=js\"\n\nimport \"./Knobs.vue?vue&type=style&index=0&id=245c68f8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-245c68f8\"]])\n\nexport default __exports__","<template>\r\n  <div ref=\"container\" class=\"container hidden\" :style=\"this.container\">\r\n    <div class=\"border\" :style=\"this.border\">\r\n      <EnvelopeVisualizer ref=\"visualizer\" :is_volume=\"true\" @paramRefresh=\"handleRefresh\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { transcode } from \"buffer\";\r\nimport * as Tone from \"tone\";\r\nimport ToolsHost from \"../Tools/ToolsHost.vue\";\r\nimport EnvelopeVisualizer from \"./EnvelopeVisualizer.vue\";\r\nexport default {\r\n  props: [\"id\"],\r\n  components: {\r\n    EnvelopeVisualizer\r\n  },\r\n  data() {\r\n    return {\r\n      tempEvent: null,\r\n      type: \"envelope\",\r\n      parameters: {\r\n      },\r\n      knobList: [],\r\n      is_attack_down: false,\r\n      is_decay_down: false,\r\n      is_sustain_down: false,\r\n      is_release_down: false,\r\n    };\r\n  },\r\n  mounted() {\r\n     this.parameters = {\r\n      attack: 0.1,\r\n      attackCurve: \"linear\",\r\n      decay: 0.5,\r\n      decayCurve: \"linear\",\r\n      sustain: 0.5,\r\n      releaseCurve: \"linear\",\r\n      release: 1,\r\n      scale: 1,\r\n    }; \r\n    for (let i = 0; i < 9; i++) {\r\n      this.knobList.push({ id: i, ref: \"knob\" + i });\r\n    }\r\n  },\r\n  methods: {\r\n    handleRefresh(parameters) {\r\n      this.parameters = parameters\r\n      this.synths.list.forEach((synth) => {\r\n        synth.setModulatorParameters(\"envelope\", \"vol\", this.parameters);\r\n      });\r\n    },\r\n    handleNewOsc() {\r\n      //called when a new osc is created to set default values\r\n      this.synths.list.forEach((synth) => {\r\n        synth.setModulatorParameters(\"envelope\", \"vol\", this.parameters);\r\n      })\r\n    },\r\n    unHide() {\r\n      this.$refs.container.classList.remove(\"hidden\");\r\n    },\r\n    hide() {\r\n      this.$refs.container.classList.add(\"hidden\");\r\n    },\r\n    handleMouseMove(e) {\r\n      this.$refs.visualizer.handleMouseMove(e);\r\n    },\r\n    handleMouseUp(e) {\r\n      this.$refs.visualizer.handleMouseUp(e);\r\n    }\r\n  },\r\n  computed: {\r\n    border() {\r\n      return {\r\n        background: '#f8e7e6',\r\n        opacity: '100%'\r\n      }\r\n    },\r\n    container() {\r\n      return {\r\n        background: this.colors.pink.medium\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.border {\r\n  grid-template-columns: 1fr;\r\n  grid-template-rows: 1fr;\r\n\r\n  position: relative;\r\n  display: grid;\r\n  width: calc(100% - 0.6vw);\r\n  height: calc(100% - 0.6vw);\r\n  box-sizing: border-box;\r\n  margin: 0.3vw;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n}\r\n\r\n.container {\r\n  position: relative;\r\n  display: grid;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n</style>","<template>\r\n    <div class=\"envelope_container\" :style=\"this.envelope_container\">\r\n        <div class=\"envelope\" ref=\"envelope\" :style=\"this.adsr\">\r\n            <div class=\"attack_area\" :style=\"attack_area\" @mousedown=\"attack_down()\"></div>\r\n            <div class=\"decay_area\" :style=\"decay_area\" @mousedown=\"decay_down()\"></div>\r\n            <div class=\"sustain_area\" :style=\"sustain_area\" @mousedown=\"sustain_down()\"></div>\r\n            <div class=\"release_area\" :style=\"release_area\" @mousedown=\"release_down()\"></div>\r\n            <div class=\"attack_dot\" :style=\"attack_dot\" @mousedown=\"attack_down()\"></div>\r\n            <div class=\"decay_dot\" :style=\"decay_dot\" @mousedown=\"decay_down()\"></div>\r\n            <div class=\"release_dot\" :style=\"release_dot\" @mousedown=\"release_down()\"></div>\r\n\r\n            <div class=\"attack\" :style=\"this.attack\">\r\n                <div class=\"attack_color\" :style=\"this.attack_Color\"></div>\r\n            </div>\r\n            <div class=\"decay\" :style=\"this.decay\">\r\n                <div class=\"decay_head\" :style=\"this.decay_head\"></div>\r\n                <div class=\"decay_color\" :style=\"this.decay_Color\"></div>\r\n            </div>\r\n            <div class=\"sustain\" :style=\"this.sustain\">\r\n                <div class=\"sustain_head\" :style=\"this.sustain_head\"></div>\r\n                <div class=\"sustain_color\" :style=\"this.sustain_Color\"></div>\r\n            </div>\r\n            <div class=\"release\" :style=\"this.release\">\r\n                <div class=\"release_color\" :style=\"this.release_Color\"></div>\r\n            </div>\r\n\r\n            <div class=\"space\" :style=\"this.space\"></div>\r\n\r\n            <!--<div class=\"time_strech\" :style=\"this.time_Stretch\"></div>-->\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: ['is_volume'],\r\n    data() {\r\n        return {\r\n            //tempEvent: null,\r\n            type: \"envelope\",\r\n            parameters: {\r\n                attack: 0.01,\r\n                attackCurve: \"linear\",\r\n                decay: 0.1,\r\n                decayCurve: \"linear\",\r\n                sustain: 0.1,\r\n                releaseCurve: \"linear\",\r\n                release: 0.1,\r\n                sustain_lev: 0.5,\r\n                duration: 4,\r\n            },\r\n            is_attack_down: false,\r\n            is_decay_down: false,\r\n            is_sustain_down: false,\r\n            is_release_down: false,\r\n            test: 10,\r\n        };\r\n    },\r\n    mounted() {\r\n        \r\n    },\r\n    methods: {\r\n\r\n        handleMouseMove(e) {\r\n            //console.log(e)\r\n            //NOT NECESSAARY, FOR DEBUGGING\r\n            if (this.isDragging) {\r\n                this.tempEvent = e;\r\n            }\r\n            let p = this.parameters;\r\n            if (this.is_attack_down) { // attack\r\n                if (e.movementX > 0) {\r\n                    /* console.log(p.attack,); */\r\n                    p.attack = Math.min(p.attack + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.decay + p.sustain + p.release));\r\n                }\r\n                if (e.movementX < 0) {\r\n                   /*  console.log(p.attack); */\r\n                    p.attack = Math.max(p.attack + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n            }\r\n            if (this.is_decay_down) { // decay\r\n                if (e.movementX > 0) {\r\n                   /*  console.log(p.attack,); */\r\n                    p.decay = Math.min(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.attack + p.sustain + p.release));\r\n                }\r\n                if (e.movementX < 0) {\r\n                    /* console.log(p.attack); */\r\n                    p.decay = Math.max(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n                if (e.movementY > 0) {\r\n                    p.sustain_lev = Math.max(p.sustain_lev - e.movementY / 100, 0);\r\n                } else if (e.movementY < 0) {\r\n                    p.sustain_lev = Math.min(p.sustain_lev - e.movementY / 100, 1);\r\n                }\r\n                /* console.log(p.sustain_lev); */\r\n            }\r\n            if (this.is_sustain_down) { // sustain\r\n                if (e.movementX > 0) {\r\n                    /* console.log(p.attack,); */\r\n                    p.decay = Math.min(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.attack + p.sustain + p.release));\r\n                }\r\n                if (e.movementX < 0) {\r\n                    /* console.log(p.attack); */\r\n                    p.decay = Math.max(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n                if (e.movementY > 0) {\r\n                    p.sustain_lev = Math.max(p.sustain_lev - e.movementY / 100, 0);\r\n                } else if (e.movementY < 0) {\r\n                    p.sustain_lev = Math.min(p.sustain_lev - e.movementY / 100, 1);\r\n                }\r\n                /* console.log(p.sustain_lev); */\r\n            }\r\n            if (this.is_release_down) { // release\r\n                if (e.movementX > 0) {\r\n                    /* console.log(p.attack,); */\r\n                    p.release = Math.min(p.release + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.decay + p.sustain + p.attack));\r\n                }\r\n                if (e.movementX < 0) {\r\n                    /* console.log(p.attack); */\r\n                    p.release = Math.max(p.release + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n            }\r\n            if (this.is_attack_down || this.is_decay_down || this.is_sustain_down || this.is_release_down) {\r\n\r\n                let parameters = {\r\n                    attack: this.parameters.attack * this.parameters.duration,\r\n                    decay: this.parameters.decay * this.parameters.duration,\r\n                    sustain: this.parameters.sustain_lev,\r\n                    release: this.parameters.release * this.parameters.duration,\r\n                }\r\n                this.$emit(\"paramRefresh\", parameters)\r\n            }\r\n\r\n\r\n        },\r\n        handleMouseUp() {\r\n            /*if (this.isDragging) {\r\n              console.log(this.tempEvent.target)\r\n              this.isDragging = false\r\n            }*/\r\n            //console.log(\"mouseUp\");\r\n            this.is_attack_down = false;\r\n            this.is_decay_down = false;\r\n            this.is_sustain_down = false;\r\n            this.is_release_down = false;\r\n        },\r\n        attack_down() {\r\n            if (!this.is_attack_down) this.is_attack_down = true;\r\n        },\r\n        decay_down() {\r\n            if (!this.is_decay_down) this.is_decay_down = true;\r\n        },\r\n        sustain_down() {\r\n            if (!this.is_sustain_down) this.is_sustain_down = true;\r\n        },\r\n        release_down() {\r\n            if (!this.is_release_down) this.is_release_down = true;\r\n        }\r\n    },\r\n    computed: {\r\n        envelope_container() {\r\n            let color = '';\r\n            if (this.$props['is_volume']) color = this.colors.pink.medium\r\n            else color = this.colors.azure.medium\r\n            return {\r\n                background: color\r\n            }\r\n        },\r\n        adsr() {\r\n            /* console.log(((this.parameters.attack - this.parameters.sustain) * 100).toFixed(2)) */\r\n            let color = '';\r\n            if (this.$props['is_volume']) color = '#f8e7e6'\r\n            else color = '#ceeae7'\r\n            return {\r\n                display: \"grid\",\r\n                opacity: '100%',\r\n                background: color,\r\n                gridTemplateColumns: this.parameters.attack * 100 + '% '\r\n                    + Math.ceil(this.parameters.decay * 100) + '% '\r\n                    + Math.ceil(this.parameters.sustain * 100) + '% '\r\n                    + Math.ceil(this.parameters.release * 100) + '% '\r\n                    + '10% '\r\n            };\r\n        },\r\n        attack() {\r\n            return {\r\n                height: \"100%\",\r\n                width: \"100%\",\r\n                clipPath: \"polygon(0% 100%, 100% 0%, 100% 100%)\",\r\n            };\r\n        },\r\n        decay() {\r\n            return {\r\n                height: \"100%\",\r\n            };\r\n        },\r\n        sustain() {\r\n            return {\r\n                display: \"grid\",\r\n                gridTemplateRows:\r\n                    (1 - this.parameters.sustain_lev) * 100 +\r\n                    \"% \" +\r\n                    this.parameters.sustain_lev * 100 +\r\n                    \"%\",\r\n                height: \"100%\",\r\n            };\r\n        },\r\n        release() {\r\n            return {\r\n                height: \"100%\",\r\n                clipPath:\r\n                    \"polygon(0% \" +\r\n                    (1 - this.parameters.sustain_lev) * 100 +\r\n                    \"%, 0% 100%, 100% 100%)\",\r\n            };\r\n        },\r\n        attack_Color() {\r\n            let color = '';\r\n            if (this.$props['is_volume']) color = this.colors.pink.dark\r\n            else color = this.colors.azure.dark\r\n            return {\r\n                height: \"100%\",\r\n                background: color,\r\n            };\r\n        },\r\n        decay_Color() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= this.colors.pink.medium\r\n            else color = this.colors.azure.medium\r\n            return {\r\n                position: 'relative',\r\n                height: \"100%\",\r\n                background: color,\r\n                top: (this.parameters.sustain_lev - 1) * 100 + \"%\",\r\n            };\r\n        },\r\n        sustain_Color() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= this.colors.pink.light\r\n            else color = this.colors.azure.light\r\n            return {\r\n                zIndex: '1',\r\n                height: \"100%\",\r\n                background: color,\r\n            };\r\n        },\r\n        release_Color() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= this.colors.pink.light\r\n            else color = this.colors.azure.light\r\n            return {\r\n                height: \"100%\",\r\n                background: color,\r\n                opacity: '60%'\r\n            };\r\n        },\r\n        decay_head() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= '#f8e7e6'\r\n            else color = '#ceeae7'\r\n            return {\r\n                position: 'relative',\r\n                zIndex: '3',\r\n                background: color,\r\n                opacity:'100%',\r\n                top:'-1%',\r\n                clipPath: \"polygon(0% 0%, 100% 100%, 100% 0%)\",\r\n                height: (1 - this.parameters.sustain_lev) * 100 + \"%\",\r\n                width: \"102%\",\r\n            };\r\n        },\r\n        sustain_head() {\r\n            return {\r\n                background: \"transparent\",\r\n            };\r\n        },\r\n\r\n        attack_dot() {\r\n            let color ='';\r\n            let borderColor='';\r\n            if(this.$props['is_volume']){ \r\n                color= this.colors.pink.dark\r\n                borderColor = this.colors.pink.glow\r\n                }\r\n            else {\r\n                color = this.colors.azure.dark\r\n                borderColor = this.colors.azure.glow\r\n            }\r\n            return {\r\n                border: '.1vw solid ' + borderColor,\r\n                background: color,\r\n                aspectRatio: \"1/1\",\r\n                height: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: this.parameters.attack * 100 - 1 + \"%\",\r\n                top: \"-2%\",\r\n            };\r\n        },\r\n        decay_dot() {\r\n            let color ='';\r\n            let borderColor='';\r\n            if(this.$props['is_volume']){ \r\n                color= this.colors.pink.medium\r\n                borderColor = this.colors.pink.dark\r\n                }\r\n            else {\r\n                color = this.colors.azure.medium\r\n                borderColor = this.colors.azure.dark\r\n            }\r\n            return {\r\n                border: '.1vw solid ' + borderColor,\r\n                background: color,\r\n                aspectRatio: \"1/1\",\r\n                height: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"5\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.decay + this.parameters.attack) * 100 - .9 + \"%\",\r\n                top: (1 - this.parameters.sustain_lev) * 100 - 5 + \"%\",\r\n            };\r\n        },\r\n        release_dot() {\r\n            let color ='';\r\n            let borderColor='';\r\n            if(this.$props['is_volume']){ \r\n                color= this.colors.pink.glow\r\n                borderColor = this.colors.pink.dark\r\n                }\r\n            else {\r\n                color = this.colors.azure.glow\r\n                borderColor = this.colors.azure.dark\r\n            }\r\n            return {\r\n                border: '.1vw solid ' + borderColor,\r\n                opacity: '60%',\r\n                background: color,\r\n                aspectRatio: \"1/1\",\r\n                height: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"2\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.attack + this.parameters.decay + this.parameters.sustain + this.parameters.release) * 100 - 1 + \"%\",\r\n                top: \"95%\",\r\n            };\r\n        },\r\n        space() {\r\n            return {\r\n                background: \"transparent\",\r\n            };\r\n        },\r\n\r\n        attack_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"1/1\",\r\n                width: \"10%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: this.parameters.attack * 100 - 5 + \"%\",\r\n            };\r\n        },\r\n        decay_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"1/1\",\r\n                width: \"10%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.decay + this.parameters.attack) * 100 - 5 + \"%\",\r\n                top: (1 - this.parameters.sustain_lev) * 100 - 20 + \"%\",\r\n            };\r\n        },\r\n        sustain_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"16/9\",\r\n                width: \"10%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.attack + this.parameters.decay + this.parameters.sustain) * 100 - 10 + \"%\",\r\n                top: (1 - this.parameters.sustain_lev) * 100 - 12 + \"%\",\r\n            };\r\n        },\r\n        release_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"1/1\",\r\n                width: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.attack + this.parameters.decay + this.parameters.sustain + this.parameters.release) * 100 - 5 + '%',\r\n                top: '80%'\r\n            };\r\n        },\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.envelope_container {\r\n    position: relative;\r\n    margin: 0.5vw 1vw 0.5vw 1vw;\r\n}\r\n\r\n.envelope {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: transparent;\r\n    box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./EnvelopeVisualizer.vue?vue&type=template&id=2cbd9afd&scoped=true\"\nimport script from \"./EnvelopeVisualizer.vue?vue&type=script&lang=js\"\nexport * from \"./EnvelopeVisualizer.vue?vue&type=script&lang=js\"\n\nimport \"./EnvelopeVisualizer.vue?vue&type=style&index=0&id=2cbd9afd&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2cbd9afd\"]])\n\nexport default __exports__","import { render } from \"./VolEnvelope.vue?vue&type=template&id=480d7e20&scoped=true\"\nimport script from \"./VolEnvelope.vue?vue&type=script&lang=js\"\nexport * from \"./VolEnvelope.vue?vue&type=script&lang=js\"\n\nimport \"./VolEnvelope.vue?vue&type=style&index=0&id=480d7e20&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-480d7e20\"]])\n\nexport default __exports__","<template>\r\n  <div ref=\"container\" class=\"container hidden\" :style=\"this.container\">\r\n    <div class=\"border\" :style=\"this.border\">\r\n      <div class=\"lfo_elems_row\" :style=\"this.lfo_elems_row\">\r\n        <!-- MODULATION AMOUNT: REGULATES THE AMPLITUDE OF THE LFO !!!!! broken !!!!!!\r\n      <div class=\"lfoFaderBase volFaderBase\" @mousedown=\"isDepthFaderDown=true\">\r\n        <div class=\"lfoDepthFaderLevel\" :style=\"this.lfoDepthFaderLevel\"></div>\r\n      </div> -->\r\n      <LfoVisualizer ref=\"visualizer\" :freq=\"this.freq\" :depth=\"this.depth\" :wave=\"this.waveform\"></LfoVisualizer>\r\n      <div class=\"lfo_controls_column\" >\r\n        <div class=\"lfoFaderBase freqFader\" :style=\"this.lfoFaderBase\" @mousedown=\"isFreqFaderDown=true\">\r\n          <div class=\"lfoFreqFaderLevel\" :style=\"this.lfoFreqFaderLevel\"></div>\r\n        </div>\r\n        <div class=\"lfo_waveform-btn-selector\" :style=\"lfo_waveform_btn_selector\" @click=\"nextWaveType\">\r\n          <img v-if=\"this.waveform==='sine'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/sine.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.waveform==='triangle'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/triangle.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.waveform==='square'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/square.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.waveform==='sawtooth'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/saw.svg\" alt=\"\" draggable=\"false\">\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <Knobs ref=\"knobs\" type=\"lfo\" :id=\"this.id\" :parameters=\"this.parameters\"/>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport LfoVisualizer from \"@/views/Synth/Modulators/LfoVisualizer\";\r\nimport * as Tone from \"tone\";\r\nimport Knobs from \"./Knobs.vue\";\r\nimport { toRaw } from \"vue\";\r\n\r\nconst waveforms = ['sine', 'triangle', 'square', 'sawtooth']\r\nexport default {\r\n  components: { LfoVisualizer, Knobs },\r\n  props: [\"id\"],\r\n\r\n  data() {\r\n    return {\r\n      freq: 10,\r\n      depth: 0.8,\r\n      isDepthFaderDown: false,\r\n      isFreqFaderDown: false,\r\n      waveform: waveforms[0],\r\n      waveformId: 0,\r\n      parameters: {}\r\n\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    //document.addEventListener(\"mousemove\", this.onMouseMove); // todo: remove this\r\n    //console.log(\"mounted - this.waveformId: \" + this.waveformId + \" - this.waveform: \" + this.waveform)\r\n\r\n    this.parameters = {\r\n      frequency: this.freq,\r\n      waveform: this.waveform\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    lfoDepthFaderLevel() {\r\n      //console.log(\"lfoDepthFaderLevel\")\r\n      return {\r\n        top: ((1 - this.depth) * 85).toString() + \"%\"\r\n      }\r\n    },\r\n    lfo_elems_row() {\r\n      return {\r\n        background: this.colors.purple.medium\r\n      }\r\n    },\r\n    lfoFaderBase() {\r\n      return {\r\n        background: this.colors.purple.glow\r\n      }\r\n    },\r\n    lfoFreqFaderLevel() {\r\n      return {\r\n        top: ((20 - this.freq) / 20 * 85).toString() + \"%\",\r\n        background: this.colors.purple.light,\r\n        borderColor: this.colors.purple.dark\r\n      }\r\n    },\r\n    lfo_waveform_btn_selector() {\r\n      return {\r\n        borderColor: this.colors.purple.dark,\r\n        background: this.colors.purple.light,\r\n        color: this.colors.gray.dark\r\n      }\r\n    },\r\n    container(){\r\n      return {\r\n        background: this.colors.purple.glow\r\n      }\r\n    },\r\n    border(){\r\n      return{\r\n        background: this.colors.purple.glow\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    setParams({ freq = this.freq, depth = this.depth, waveform = this.waveform}) {\r\n      if (freq <= 20) {\r\n        this.freq = freq;\r\n      } else {\r\n        this.freq = 20\r\n      }\r\n      if(typeof waveform === 'number') {\r\n        this.waveformId = waveform;\r\n        if(this.waveformId === 0 || this.waveformId === 1) {\r\n          this.waveform = waveforms[this.waveformId]\r\n        } else {\r\n          console.log(\"ERROR: Called Non existing lfo wave type Id\")\r\n        }\r\n      } else if(typeof waveform === 'string'){\r\n        this.waveform = waveform;\r\n        waveforms.forEach( (waveformNameString, index) => {\r\n          if(waveformNameString === this.waveform) this.waveformId = index;\r\n        })\r\n      }\r\n      this.parameters.waveform = this.waveform;\r\n      this.depth = depth;\r\n      this.$refs.visualizer.updateParams({freq: this.freq, depth: this.depth})\r\n      this.$refs.knobs.updateParameters(this.parameters)\r\n\r\n    },\r\n\r\n    nextWaveType(){\r\n      this.waveformId++;\r\n      if(this.waveformId > waveforms.length-1) this.waveformId = 0;\r\n      this.waveform = waveforms[this.waveformId]\r\n      this.parameters.waveform = this.waveform;\r\n      // console.log(\"nextWaveType - this.waveformId: \" + this.waveformId + \" - this.waveform: \" + this.waveform)\r\n\r\n      console.log(\"CHANGING WAVE TYPE TO: \" + this.waveform)\r\n      this.$refs.knobs.updateParameters(this.parameters)\r\n      this.$refs.visualizer.updateParams({ waveform: this.waveform, frequency: this.freq })\r\n    },\r\n\r\n    startOscilloscope() {\r\n      console.log(\"start LFO graphics\")\r\n      this.$refs.visualizer.startOscilloscope();\r\n    },\r\n    stopOscilloscope() {\r\n      console.log(\"stop LFO graphics\")\r\n      this.$refs.visualizer.stopOscilloscope();\r\n    },\r\n    resetOscilloscope() {\r\n      this.$refs.visualizer.stopOscilloscope();\r\n      this.$refs.visualizer.startOscilloscope();\r\n\r\n    },\r\n    // ---------- USER GESTURE ----------\r\n\r\n    depthFaderSelected() {\r\n      console.log(\"depthFaderSelected\")\r\n      this.isDepthFaderDown = true;\r\n    },\r\n    freqFaderSelected() {\r\n      console.log(\"freqFaderSelected\")\r\n      this.isFreqFaderDown = true;\r\n    },\r\n\r\n    handleMouseMove(event) {\r\n      //console.log(\"lfo - handleMouseMove\")\r\n     this.$refs.knobs.handleMouseMove(event)\r\n      if (this.isDepthFaderDown) {\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving dowm\r\n          this.depth = this.depth - event.movementY / 100;\r\n          console.log(\"moving up\");\r\n        } else {\r\n          // Mouse is moving up\r\n          this.depth = this.depth - event.movementY / 100;\r\n          console.log(\"moving down\");\r\n        }\r\n        this.depth = Math.max(this.depth, 0);\r\n        this.depth = Math.min(this.depth, 1);\r\n\r\n        console.log(\"lfo depth: \" + this.depth)\r\n        this.$refs.visualizer.updateParams({depth: this.depth})\r\n      }\r\n      if (this.isFreqFaderDown) {\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving dowm\r\n          this.freq = this.freq - 20 * (event.movementY / 100);\r\n          console.log(\"moving up\");\r\n        } else {\r\n          // Mouse is moving up\r\n          this.freq = this.freq - 20 * (event.movementY / 100);\r\n        }\r\n        this.freq = Math.max(this.freq, 1);\r\n        this.freq = Math.min(this.freq, 20);\r\n\r\n        console.log(\"lfo freq: \" + this.freq)\r\n        this.parameters.frequency = this.freq\r\n        this.$refs.visualizer.updateParams({freq: this.freq})\r\n        this.$refs.knobs.updateParameters(this.parameters)\r\n      }\r\n    },\r\n    handleMouseUp() {\r\n      if (this.isFreqFaderDown) this.isFreqFaderDown = false\r\n      if (this.isDepthFaderDown) this.isDepthFaderDown = false\r\n\r\n      this.$refs.knobs.handleMouseUp()\r\n    },\r\n\r\n    unHide() {\r\n      this.$refs.container.classList.remove(\"hidden\");\r\n      this.startOscilloscope()\r\n    },\r\n    hide() {\r\n      this.$refs.container.classList.add(\"hidden\");\r\n    },\r\n\r\n    //-------------METHODS TO LINK WHEN DROPPING\r\n    link(object, target, color) {\r\n      //console.log(\"THINGS HAPPENING \"+section+\" \"+target)\r\n      this.$refs.knobs.addLink(object, target, color)\r\n\r\n    },\r\n    unLink(object, target) {\r\n      //console.log(\"THINGS HAPPENING \")\r\n      //console.log(object)\r\n      //console.log(target)\r\n      this.$refs.knobs.removeLink(object, target)\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.border {\r\n  grid-template-columns: calc(6 / 8 * 100%) calc(2 / 8 * 100%);\r\n  grid-template-rows: 100% ;\r\n\r\n  position: relative;\r\n  display: grid;\r\n  width: calc(100% - 0.6vw);\r\n  height: calc(100% - 0.6vw);\r\n  box-sizing: border-box;\r\n  margin: 0.3vw;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n}\r\n.container {\r\n  grid-column: span 2;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.lfo_elems_row {\r\n  margin: 0;\r\n  padding: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 100%;\r\n  align-items: center;\r\n  justify-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.lfoFaderBase {\r\n  position: absolute;\r\n  top: 5%;\r\n  left: 30%;\r\n  aspect-ratio: 1/10;\r\n  border-radius: 5vw;\r\n  height: 70%;\r\n}\r\n\r\n.lfoDepthFaderLevel {\r\n  position: relative;\r\n  width: 100%;\r\n  border-radius: 5vw;\r\n  height: 15%;\r\n  background-color: white;\r\n  top: 80%\r\n}\r\n\r\n.lfoFreqFaderLevel {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 20%;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-radius: 5vw;\r\n  top: 80%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.lfo_controls_column {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex: 0.9;\r\n  flex-direction: column;\r\n  align-content: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.lfo_waveform-btn-selector {\r\n  position: absolute;\r\n  left: 5%;\r\n  bottom: 5%;\r\n  aspect-ratio: 7/4;\r\n  width: 80%;\r\n  border-radius: 0.3vw;\r\n  border-style: solid;\r\n  border-width: 1px;\r\n  text-align: center;\r\n}\r\n\r\n\r\n.lfo_waveform_btn_icon {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  bottom: 0;\r\n  place-self: center;\r\n  align-self: center;\r\n  margin: 0;\r\n  padding: 0;\r\n  clip-path: circle(9%);\r\n  transform: scale(3.25);\r\n}\r\n</style>","<template>\r\n  <div class=\"lfoOscilloscope\">\r\n    <canvas ref=\"canvas\" class=\"lfoOscilloscopeCanvas\" :style=\"this.oscilloscopeCanvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {nextTick} from \"vue\";\r\n\r\nconst qualFactor = 50\r\nconst sinValsBuffer = new Array(qualFactor).fill(0);\r\nconst triValsBuffer = new Array(qualFactor).fill(0);\r\nconst sqValsBuffer = new Array(qualFactor).fill(0);\r\nconst sawValsBuffer = new Array(qualFactor).fill(0);\r\n\r\n//todo: rmv real audio\r\n// todo: remap dept in -0.5 + 0.5 range\r\n// todo: start only when needs to be visualized\r\n\r\nexport default {\r\n  components: {},\r\n  props: [\"freq\", \"depth\", \"wave\"],\r\n  data() {\r\n    return {\r\n      timing: 10,\r\n      //freq: this.freq,\r\n      //depth: this.depth,\r\n      intervalId: \"\",\r\n      waveform: this.wave\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    console.log(\"mounted LfoVisual\")\r\n    this.timing = 1000 / (qualFactor * this.$props.freq);\r\n    for (let i = 0; i < qualFactor; i++) {\r\n      sinValsBuffer[i] = Math.sin(Math.PI*2/qualFactor * i) * this.$props.depth;\r\n      triValsBuffer[i] = this.$props.depth - 2*Math.abs(2*(i - qualFactor/2)/qualFactor) * this.$props.depth\r\n      i >= qualFactor/2? sqValsBuffer[i] = this.$props.depth : sqValsBuffer[i] = - this.$props.depth\r\n      sawValsBuffer[i] = this.depth * (2*i/qualFactor -1)\r\n    }\r\n\r\n    switch (this.waveform) {\r\n      case 'sine':\r\n        this.oscilloscopeData = sinValsBuffer\r\n        break;\r\n      case 'triangle':\r\n        this.oscilloscopeData = triValsBuffer\r\n        break;\r\n      case 'square':\r\n        this.oscilloscopeData = sqValsBuffer;\r\n        break;\r\n      case 'sawtooth':\r\n        this.oscilloscopeData = sawValsBuffer;\r\n        break;\r\n      default:\r\n        console.log(\"ERROR - waveform not recognised\")\r\n    }\r\n\r\n    // --------- GRAPHICS INIT --------\r\n    // use the ref to get the canvas element\r\n    this.canvas = this.$refs.canvas;\r\n\r\n    // set the canvas width and height to 100%\r\n    this.canvas.width = 4*this.canvas.offsetWidth;\r\n    this.canvas.height = 4*this.canvas.offsetHeight;\r\n    // get the canvas context\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n  },\r\n\r\n  methods: {\r\n    updateParams({ freq = this.$props.freq, depth = this.$props.depth, waveform = this.waveform }) {\r\n      //this.$props.freq = freq;\r\n      //this.$props.depth = depth;\r\n      this.waveform = waveform;\r\n      console.log(\"this.wave: \" + waveform);\r\n\r\n      this.timing = 1000 / (qualFactor * this.$props.freq);\r\n      switch (this.waveform) {\r\n        case 'sine':\r\n          this.oscilloscopeData = sinValsBuffer\r\n          break;\r\n        case 'triangle':\r\n          this.oscilloscopeData = triValsBuffer\r\n          break;\r\n        case 'square':\r\n          this.oscilloscopeData = sqValsBuffer;\r\n          break;\r\n        case 'sawtooth':\r\n          this.oscilloscopeData = sawValsBuffer;\r\n          break;\r\n        default:\r\n          console.log(\"ERROR - waveform not recognised\")\r\n      }\r\n\r\n      if(this.intervalId){ clearInterval(this.intervalId) }\r\n      this.stopOscilloscope();\r\n      console.log(\"end - this.wave: \" + waveform)\r\n\r\n      nextTick(() => {\r\n        this.startOscilloscope()\r\n      })\r\n    },\r\n\r\n    startOscilloscope() {\r\n      this.canvas.width = 4*this.canvas.offsetWidth;\r\n      this.canvas.height = 4*this.canvas.offsetHeight;\r\n      console.log(\"start - this.waveform: \" + this.waveform)\r\n\r\n     // console.log(\"this.timing: \" + this.timing)\r\n     // console.log(\"avviando oscilloscope con timer \" + this.timing)\r\n      this.intervalId = setInterval(() => {\r\n        let t = this.oscilloscopeData.shift();\r\n        this.oscilloscopeData.push(t);\r\n        this.draw(this.oscilloscopeData);\r\n      }, this.timing);\r\n      //console.log(\"this.timing:  \" + this.intervalId);\r\n    },\r\n\r\n    stopOscilloscope(){\r\n      if(this.intervalId){ clearInterval(this.intervalId) }\r\n    },\r\n\r\n    draw(data) {\r\n      // clear the canvas\r\n      //console.log(\"drawing\")\r\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n      let x, y, y_next;\r\n\r\n      // draw the data on the canvas\r\n      // set the line color\r\n      this.ctx.strokeStyle = \"black\";\r\n      // set the line width\r\n      this.ctx.lineWidth = 2;\r\n      this.ctx.beginPath();\r\n\r\n      y_next = (this.canvas.height / 2) * (1 - data[0]).toFixed(3);\r\n      // loop through the data and plot it on the canvas\r\n      for (let i = 1; i < data.length; i++) {\r\n        y = y_next;\r\n        // calculate the x and y position of the point\r\n        x = i * (this.canvas.width / data.length).toFixed(3);\r\n        y_next = (this.canvas.height / 2) * (1 - data[i]).toFixed(3);\r\n        // move to the x and y position\r\n        this.ctx.moveTo(x, y);\r\n        // draw a line to the next point\r\n        this.ctx.lineTo(x + this.canvas.width / data.length, y_next );\r\n        // console.log(x, y)\r\n      }\r\n      // draw the line\r\n      this.ctx.stroke();\r\n      this.ctx.moveTo(0, 0);\r\n    },\r\n\r\n    beforeDestroy() {\r\n      if (this.oscilloscope) {\r\n        this.oscilloscope.disconnect();\r\n        this.oscilloscope.dispose();\r\n      }\r\n    },\r\n  }, \r\n  computed: {\r\n    oscilloscopeCanvas(){\r\n      return {\r\n        background: this.colors.purple.glow\r\n      } \r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.lfoOscilloscope {\r\n  margin: 0.4vw;\r\n  margin-right: 0.1vw;;\r\n  height: 90%;\r\n  width: 90%;\r\n  border: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n}\r\n\r\n.lfoOscilloscopeCanvas {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 0.2vw;\r\n  border: 0.06vw solid #334030;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n</style>","import { render } from \"./LfoVisualizer.vue?vue&type=template&id=5e00fb0b\"\nimport script from \"./LfoVisualizer.vue?vue&type=script&lang=js\"\nexport * from \"./LfoVisualizer.vue?vue&type=script&lang=js\"\n\nimport \"./LfoVisualizer.vue?vue&type=style&index=0&id=5e00fb0b&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Lfo.vue?vue&type=template&id=54138dca&scoped=true\"\nimport script from \"./Lfo.vue?vue&type=script&lang=js\"\nexport * from \"./Lfo.vue?vue&type=script&lang=js\"\n\nimport \"./Lfo.vue?vue&type=style&index=0&id=54138dca&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-54138dca\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"buttonList\" :style=\"this.buttonList\">\r\n    <div class=\"identifierVol\" :style=\"buttonColor('mainEnv')\" @click=\"handleClick(null, 'volEnvelope')\">\r\n      <img src=\"@/icons/ADSR.svg\" alt=\"\" draggable=\"false\">\r\n    </div>\r\n    <template v-for=\"button in buttonListEnv\" :key=\"button.id\" :ref=\"button.ref\">\r\n      <div class=\"button\" :style=\"buttonColor('envelope')\">\r\n        <div :style=\"textId\"> {{ button.id }} </div>\r\n        <div class=\"identifier\" @click=\"handleClick(button.id, button.type)\">\r\n\r\n          <img src=\"@/icons/ADSR.svg\" alt=\"\" draggable=\"false\">\r\n        </div>\r\n        <div class=\"draggableArea\" :draggable=\"draggability('envelope', button.id)\"\r\n          @dragstart=\"startDrag($event, button.id, button.type)\">\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <template v-for=\"button in buttonListLfo\" :key=\"button.id\" :ref=\"button.ref\">\r\n      <div class=\"button\" :style=\"buttonColor('lfo')\">\r\n        <div :style=\"textId\"> {{ button.id }} </div>\r\n        <div class=\"identifier\" @click=\"handleClick(button.id, button.type)\"><!-- {{ button.id }} -->\r\n\r\n          <img src=\"@/icons/LFO.svg\" alt=\"\" draggable=\"false\">\r\n        </div>\r\n        <div class=\"draggableArea\" :draggable=\"draggability('lfo', button.id)\"\r\n          @dragstart=\"startDrag($event, button.id, button.type)\">\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport { watch } from 'vue';\r\n\r\nexport default {\r\n  inject: ['dropFeedback'],\r\n  props: [],\r\n  data() {\r\n    return {\r\n      color: {\r\n        mainEnv: this.colors.pink.glow,\r\n        envelope: this.colors.azure.glow,\r\n        lfo: this.colors.purple.glow,\r\n      },\r\n      type: \"volEnvelope\",\r\n\r\n      isDraggable: this.isDraggable,\r\n      buttonListEnv: [],\r\n      buttonListLfo: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    for (let i = 1; i < this.nEnvelopes + 1; i++) {\r\n      this.buttonListEnv.push({ id: i, ref: \"button\" + i, type: \"envelope\" });\r\n    }\r\n    for (let i = 1; i < this.nLfo + 1; i++) {\r\n      this.buttonListLfo.push({ id: i, ref: \"button\" + i, type: \"lfo\" });\r\n    }\r\n    //console.log(this.isDraggable)\r\n\r\n\r\n    //console.log(this.buttonListEnv)\r\n    //console.log(this.buttonListLfo)\r\n\r\n    /*\r\n    this.$on(\"unLink\", (data) => {\r\n          console.log(\"ModSelector disconnecting link from \"+data.modulator.type+\" \"+data.modulator.id+\" to \"+data.section+data.target)})\r\n\r\n     */\r\n\r\n  },\r\n  computed: {\r\n    textId(){\r\n      return {\r\n        fontWeight: \"bold\",\r\n        opacity: \"80%\",\r\n        position: 'absolute',\r\n        fontSize:'.8vw'\r\n      }\r\n    },\r\n    buttonList() {\r\n      switch (this.type) {\r\n        case \"volEnvelope\":\r\n          return{\r\n            backgroundColor: this.colors.pink.medium\r\n          }\r\n          case \"envelope\":\r\n          return{\r\n            backgroundColor: this.colors.azure.medium\r\n          }\r\n          case \"lfo\":\r\n          return{\r\n            backgroundColor: this.colors.purple.glow\r\n          }\r\n      }\r\n      \r\n    } \r\n\r\n  },\r\n  methods: {\r\n    draggability(type, id) {\r\n      //console.log(this.isDraggable)\r\n      //console.log(\"checking draggability of \" + type + \" \" + id)\r\n      return this.isDraggable[type][id]\r\n    },\r\n    isDraggableUpdate(isDraggable) {\r\n      //console.log(\"UPDATE ISDRAGGABLE\")\r\n      //console.log(this.isDraggable)\r\n      this.isDraggable = isDraggable\r\n    },\r\n    buttonColor(type) {\r\n      return {\r\n        backgroundColor: this.color[type]\r\n      }\r\n    },\r\n\r\n    startDrag(event, id, type) {\r\n      //console.log(\"dragging \" + type + \" \" + id)\r\n      event.dataTransfer.dropEffect = \"move\"\r\n      event.dataTransfer.effectAllowed = \"move\"\r\n      let data = { type: type, id: id, color: this.color[type] }\r\n      event.dataTransfer.setData(\"data\", JSON.stringify(data));\r\n      //console.log(data)\r\n    },\r\n    handleClick(id, type) {\r\n      this.type = type\r\n      if (type === \"volEnvelope\") {\r\n        //console.log(\"Selected \" + id)\r\n        this.$emit(\"selection\", type, null);\r\n      } else {\r\n        //console.log(\"Selected \" + type + \" \" + id)\r\n        this.$emit(\"selection\", id, type);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.button {\r\n  display: grid;\r\n  grid-template-columns: 80% 18%;\r\n  flex: 1;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 0.06vw solid black; \r\n  border-radius: 0.2vw;\r\n  padding: 1%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  align-content: center;\r\n  justify-items: stretch;\r\n\r\n}\r\n\r\n.buttonList {\r\n  padding-left: 0.3vw;\r\n  padding-right:  0.3vw;\r\n  padding-bottom: 0.3vw;\r\n  position: relative;\r\n  grid-row: 2;\r\n  display: flex;\r\n  flex-basis: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.identifier {\r\n  height: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  /* border: 0.1vw solid black; */\r\n  display: flex;\r\n\r\n}\r\n\r\n.identifierVol {\r\n  border: 0.06vw solid black; \r\n  border-radius: 0.2vw;\r\n  flex: 1;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  height: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.draggableArea {\r\n  border-radius: 50%;\r\n  display: flex;\r\n  border: 0.1vw solid black;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  font-size: .9vw;\r\n  align-items: flex-end;\r\n  justify-content: center;\r\n}.draggableArea:hover {\r\n  opacity: 40%;\r\n}\r\n.identifier img {\r\n  position: relative;\r\n  opacity: 60%;\r\n  width: 4vw;\r\n  aspect-ratio: 1/1;\r\n}\r\n.identifierVol img {\r\n  position: relative;\r\n  opacity: 60%;\r\n  width: 4vw;\r\n  aspect-ratio: 1/1;\r\n}\r\n.identifier img:hover {\r\n  opacity: 40%;\r\n}\r\n.identifierVol img:hover {\r\n  opacity: 40%;\r\n}\r\n</style>","import { render } from \"./ModSelector.vue?vue&type=template&id=0ef4a2a4&scoped=true\"\nimport script from \"./ModSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ModSelector.vue?vue&type=script&lang=js\"\n\nimport \"./ModSelector.vue?vue&type=style&index=0&id=0ef4a2a4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0ef4a2a4\"]])\n\nexport default __exports__","import { render } from \"./Envelope.vue?vue&type=template&id=24c79e62&scoped=true\"\nimport script from \"./Envelope.vue?vue&type=script&lang=js\"\nexport * from \"./Envelope.vue?vue&type=script&lang=js\"\n\nimport \"./Envelope.vue?vue&type=style&index=0&id=24c79e62&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-24c79e62\"]])\n\nexport default __exports__","import { render } from \"./ModHost.vue?vue&type=template&id=1227fc83&scoped=true\"\nimport script from \"./ModHost.vue?vue&type=script&lang=js\"\nexport * from \"./ModHost.vue?vue&type=script&lang=js\"\n\nimport \"./ModHost.vue?vue&type=style&index=0&id=1227fc83&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1227fc83\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"span\" @mouseleave=\"handleMouseLeave\">\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct1\"\r\n        :octaveNumber=\"1\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct2\"\r\n        :octaveNumber=\"2\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct3\"\r\n        :octaveNumber=\"3\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <MIDIKeyboard @MIDIDown=\"handleMIDIDown\" @MIDIUp=\"handleMIDIUp\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MIDIKeyboard from \"./MIDIKeyboard.vue\";\r\nimport Octave from \"./Octave.vue\";\r\nimport * as Tone from \"tone\";\r\n\r\n\r\nexport default {\r\n  name: \"PianoKeyboard\",\r\n  components: {\r\n    Octave,\r\n    MIDIKeyboard,\r\n  },\r\n  data() {\r\n    return {\r\n      //From here we can transpose the whole keyboard by octaves\r\n      ocTranspose: 1,\r\n      // Object to track which keys are currently being held down\r\n      keysDown: {},\r\n      keys: \"awsedftgyhujkolp\",\r\n      notes: [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"],\r\n      //Transposition amount (in octaves) for the computer keyboard\r\n      keyboardTranspose: 0,\r\n      mouseDown: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    // Add keydown and keyup event listeners to the window object\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n    window.addEventListener(\"keyup\", this.handleKeyUp);\r\n  },\r\n  beforeDestroy() {\r\n    // Remove keydown and keyup event listeners from the window object\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n    window.removeEventListener(\"keyup\", this.handleKeyUp);\r\n  },\r\n\r\n  methods: {\r\n    handleMouseUp(){\r\n      this.mouseDown = false\r\n    },\r\n    handleKeyDown(event) {\r\n      // If the key is not currently being held down, handle the keydown event\r\n      if (!this.keysDown[event.key] && this.keys.includes(event.key)) {\r\n        let note = this.notes[this.keys.indexOf(event.key) % 12];\r\n        let octave = parseInt(this.keys.indexOf(event.key) / 12, 10);\r\n        this.handleNoteDown(note, 2 + octave + this.keyboardTranspose, 100);\r\n        // Set keyDown flag to true\r\n        this.keysDown[event.key] = true;\r\n        // Change color on keyboard\r\n        if (\r\n          2 + octave + this.keyboardTranspose > 0 &&\r\n          2 + octave + this.keyboardTranspose < 4\r\n        )\r\n          this.$refs[\r\n            \"oct\" + (2 + octave + this.keyboardTranspose)\r\n          ].switchColorPress(note);\r\n      }\r\n      // Change octave of computer keyboard with z or x\r\n      if (!this.keysDown[event.key] && event.key == \"z\") {\r\n        this.keyboardTranspose = this.keyboardTranspose - 1;\r\n      }\r\n      if (!this.keysDown[event.key] && event.key == \"x\") {\r\n        this.keyboardTranspose = this.keyboardTranspose + 1;\r\n      }\r\n    },\r\n    handleKeyUp(event) {\r\n      // If the key is currently being held down, handle the keyup event\r\n      if (this.keysDown[event.key]) {\r\n        let note = this.notes[this.keys.indexOf(event.key) % 12];\r\n        let octave = parseInt(this.keys.indexOf(event.key) / 12, 10);\r\n        this.handleNoteUp(note, 2 + octave + this.keyboardTranspose);\r\n        // Set keyDown flag to false\r\n        this.keysDown[event.key] = false;\r\n        // Change color on keyboard\r\n        if (\r\n          2 + octave + this.keyboardTranspose > 0 &&\r\n          2 + octave + this.keyboardTranspose < 4\r\n        )\r\n          this.$refs[\r\n            \"oct\" + (2 + octave + this.keyboardTranspose)\r\n          ].switchColorRelease(note);\r\n      }\r\n    },\r\n    handleMIDIDown(note, octave, velocity) {\r\n      if (octave > 0 && octave < 4)\r\n        this.$refs[\"oct\" + octave].switchColorPress(note);\r\n      this.synths.list.forEach(synth => {\r\n        //console.log(\"Play note: \"+(note+octave)+\" at velocity: \"+velocity+\" from MIDI\")\r\n        synth.playNote(note+octave, velocity);\r\n      });\r\n      //play filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].playNote()\r\n        }\r\n      }\r\n      this.$emit(\"noteDown\", note)\r\n    },\r\n    handleMIDIUp(note, octave) {\r\n      //console.log(\"MIDI released \"+note+octave)\r\n      if (octave > 0 && octave < 4)\r\n        this.$refs[\"oct\" + octave].switchColorRelease(note);\r\n      this.synths.list.forEach(synth => {\r\n        synth.stopNote(note+octave);\r\n      });\r\n      //stop filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].stopNote()\r\n        }\r\n      }\r\n    },\r\n\r\n    handleNoteDown(note, octave, velocity = 100) {\r\n      let finalOctave = parseInt(octave) + this.ocTranspose;\r\n      //console.log(note+finalOctave+\" pressed\")\r\n      this.synths.list.forEach(synth => {\r\n        synth.playNote(note+finalOctave, velocity);\r\n        //console.log(synth)\r\n      });\r\n      \r\n      //play filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].playNote()\r\n        }\r\n      }\r\n      this.$emit(\"noteDown\", note+finalOctave)\r\n    },\r\n    handleNoteUp(note, octave) {\r\n      let finalOctave = parseInt(octave) + this.ocTranspose;\r\n      //console.log(note+finalOctave+\" released\")\r\n      this.synths.list.forEach(synth => {\r\n        synth.stopNote(note+finalOctave);\r\n      });\r\n      //stop filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].stopNote()\r\n        }\r\n      }\r\n    },\r\n  }\r\n  \r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  background-color: white;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  border-top: .1vw solid gray\r\n}\r\n\r\n.span {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  grid-row: 3;\r\n  grid-column: span 3;\r\n}\r\n</style>","<template>\r\n</template>\r\n\r\n<script>\r\nexport default ({\r\n  data() {\r\n    return {\r\n      midiAccess: null,\r\n      midiInput: null,\r\n      notes: [ \"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\" ],\r\n      lowestOctave: -2,\r\n    };\r\n  },\r\n  mounted() {\r\n    navigator.requestMIDIAccess()\r\n      .then((midiAccess) => {\r\n        if(midiAccess.inputs.size>0){\r\n            this.midiAccess = midiAccess;\r\n            this.midiInput = midiAccess.inputs.values().next().value;\r\n            //console.log(this.midiInput);\r\n            this.midiInput.addEventListener('midimessage', this.handleMidiMessage)\r\n        }else{\r\n            //console.log('There are no MIDI inputs available, if you need MIDI, reload the page with a MIDI keyboard connected');\r\n        }\r\n        \r\n      });\r\n  },\r\n  methods: {\r\n    handleMidiMessage(event){\r\n        let [status, note, velocity] = event.data;\r\n        let label = this.notes[note%12]\r\n        let octave = (this.lowestOctave+parseInt(note/12,10))\r\n        if (status == 144) {\r\n            //console.log(`Keydown: note=${label}, velocity=${velocity}`);\r\n            this.$emit(\"MIDIDown\", label, octave, velocity);\r\n        } else if (status == 128) {\r\n            //console.log(`Keyup: note=${label}, velocity=${velocity}`);\r\n            this.$emit(\"MIDIUp\", label, octave);\r\n        }\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./MIDIKeyboard.vue?vue&type=template&id=6a1c7ae9\"\nimport script from \"./MIDIKeyboard.vue?vue&type=script&lang=js\"\nexport * from \"./MIDIKeyboard.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <div class=\"octave\" @mousedown=\"handleMouseDown\" @mouseup=\"handleMouseUp\"  @mouseover=\"handleMouseOver\">\r\n        <div class=\"woctave\">\r\n            <div id=\"C\" ref=\"C\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"D\" ref=\"D\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"E\" ref=\"E\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"F\" ref=\"F\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"G\" ref=\"G\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"A\" ref=\"A\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"B\" ref=\"B\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n        </div>\r\n        <div class=\"boctave\">\r\n            <div id=\"C#\" ref=\"Cs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 3 / 5\"></div>\r\n            <div id=\"D#\" ref=\"Ds\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 6 / 8\"></div>\r\n            <div id=\"F#\" ref=\"Fs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 12 / 14\"></div>\r\n            <div id=\"G#\" ref=\"Gs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 15 / 17\"></div>\r\n            <div id=\"A#\" ref=\"As\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 18 / 20\"></div>\r\n        </div>   \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Octave\",\r\n    props: {\r\n        octaveNumber: Number,\r\n    },\r\n        data() {\r\n        return {\r\n        }\r\n    },\r\n    methods: {\r\n        handleMouseLeave(e){\r\n            if(this.$parent.mouseDown){\r\n                this.notifyUp(e.currentTarget)\r\n            }    \r\n        },\r\n        handleMouseUp(e) {\r\n            this.$parent.mouseDown= false;\r\n            this.notifyUp(e.target)\r\n            //console.log(\"mouse is now up\")\r\n        },\r\n        handleMouseDown(e) {\r\n            this.$parent.mouseDown= true;\r\n            this.notifyDown(e.target)\r\n            //console.log(\"mouse is now down\")\r\n        },\r\n        handleMouseOver(e){\r\n            if(this.$parent.mouseDown){\r\n                //console.log(e.target)\r\n                this.notifyDown(e.target)\r\n\r\n            }\r\n            //console.log(\"mouseDown is \"+this.$parent.mouseDown+\" and is moving\")\r\n        },\r\n        notifyDown(key){\r\n            //emitting cusom event \"keyDown\"\r\n            this.$emit(\"virtualKeyDown\",key.id,this.octaveNumber)\r\n            this.switchColorPress(key.id)\r\n        },\r\n        switchColorPress(note){\r\n            if(note.includes(\"#\")){\r\n                note = note.replace(\"#\",\"s\")\r\n            }\r\n            let key = this.$refs[note];\r\n            //change color of key when pressed\r\n            if (key.classList.contains('wkey')){\r\n                key.classList.remove(\"wUnpressed\")\r\n                key.classList.add(\"pressed\")\r\n            }else{\r\n                key.classList.remove(\"bUnpressed\")\r\n                key.classList.add(\"pressed\")\r\n            }     \r\n        },\r\n        notifyUp(key){\r\n            //emitting cusom event \"keyUp\"\r\n            this.$emit(\"virtualKeyUp\",key.id,this.octaveNumber)\r\n            this.switchColorRelease(key.id)\r\n            //not needed, called in PianoKeyboard (when clicking with the mouse on keyboard all keys are released (color))\r\n        },\r\n        switchColorRelease(note){\r\n            if(note === \"all\"){\r\n                for (const ref of Object.values(this.$refs)) {\r\n                    if (ref.classList.contains('wkey')){\r\n                        ref.classList.add(\"wUnpressed\")\r\n                        ref.classList.remove(\"pressed\")\r\n                    }else{\r\n                        ref.classList.add(\"bUnpressed\")\r\n                        ref.classList.remove(\"pressed\")\r\n                    }\r\n                }  \r\n            }else{\r\n                if(note.includes(\"#\")){\r\n                note = note.replace(\"#\",\"s\")\r\n                }\r\n                let key = this.$refs[note];\r\n                //change color of key when released\r\n                if (key.classList.contains('wkey')){\r\n                    key.classList.add(\"wUnpressed\")\r\n                    key.classList.remove(\"pressed\")\r\n                }else{\r\n                    key.classList.add(\"bUnpressed\")\r\n                    key.classList.remove(\"pressed\")\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n    .octave{\r\n        width: 100%;\r\n        height: 100%;\r\n        box-sizing: border-box;\r\n        position:relative;   \r\n    }\r\n    .woctave{\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;      \r\n    }\r\n    .boctave{\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        display: grid;\r\n        grid-template-columns: repeat(21, 1fr);  \r\n        grid-template-rows: 100%;  \r\n    }\r\n    .wkey{\r\n        width: 100%;\r\n        height: 100%;\r\n        border: solid black 0.06vw;\r\n        box-sizing: border-box;\r\n        border-radius: 0.2vw;\r\n        z-index: 1;\r\n    }\r\n    .wUnpressed{\r\n        background-color:#f8e7e6;\r\n        opacity: 40%;\r\n    }\r\n    .bUnpressed{\r\n        background-color:#645352;\r\n    }\r\n    .pressed{\r\n        background-color:#f3a59a;\r\n    }\r\n    .bkey{\r\n        width: 100%;\r\n        height: 60%;\r\n        border: solid black 0.06vw;\r\n        box-sizing: border-box;\r\n        border-radius: 0.2vw;\r\n        position: relative;\r\n        z-index: 1;\r\n    }\r\n    \r\n\r\n</style>","import { render } from \"./Octave.vue?vue&type=template&id=79bc0415\"\nimport script from \"./Octave.vue?vue&type=script&lang=js\"\nexport * from \"./Octave.vue?vue&type=script&lang=js\"\n\nimport \"./Octave.vue?vue&type=style&index=0&id=79bc0415&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PianoKeyboard.vue?vue&type=template&id=083b757d&scoped=true\"\nimport script from \"./PianoKeyboard.vue?vue&type=script&lang=js\"\nexport * from \"./PianoKeyboard.vue?vue&type=script&lang=js\"\n\nimport \"./PianoKeyboard.vue?vue&type=style&index=0&id=083b757d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-083b757d\"]])\n\nexport default __exports__","import { render } from \"./MainHost.vue?vue&type=template&id=69cbefb2\"\nimport script from \"./MainHost.vue?vue&type=script&lang=js\"\nexport * from \"./MainHost.vue?vue&type=script&lang=js\"\n\nimport \"./MainHost.vue?vue&type=style&index=0&id=69cbefb2&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router'\r\nimport MainHost from '../views/MainHost.vue'\r\nimport AboutView from \"@/views/AboutView\";\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'synth',\r\n    component: MainHost\r\n  },\r\n  {\r\n    path: '/about',\r\n    name: 'about',\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/AboutView.vue')\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nconst app = createApp(App).use(router)\r\n//global properties\r\n\r\n//audio\r\napp.config.globalProperties.synths = {\r\n    list: [],\r\n}\r\n\r\napp.config.globalProperties.nFilterChains = 3\r\napp.config.globalProperties.nFiltersXchain = 3\r\napp.config.globalProperties.areFiltersMounted = false\r\n\r\napp.config.globalProperties.nFxChains = 3 //DO NOT CHANGE WITHOUT CHANGING GRID STYLE IN FX\r\napp.config.globalProperties.nFxXchain = 5\r\napp.config.globalProperties.nNodesXfxChain = 7\r\napp.config.globalProperties.areFxMounted = false\r\n\r\napp.config.globalProperties.nModulators = 6\r\napp.config.globalProperties.nEnvelopes = 3\r\napp.config.globalProperties.nLfo = 2\r\napp.config.globalProperties.nKnobs = 9      //DO NOT CHANGE WITHOUT CHANGING GRID STYLE IN KNOBS\r\napp.config.globalProperties.polyphonyVoices = 4\r\n\r\n// init filters global matrix\r\napp.config.globalProperties.filterChains = Array(app.config.globalProperties.nFilterChains)\r\nfor (let i = 0; i < app.config.globalProperties.nFilterChains; i++) {\r\n    app.config.globalProperties.filterChains[i] = Array(app.config.globalProperties.nFiltersXchain)\r\n}\r\n\r\n// init fx global matrix\r\napp.config.globalProperties.fxChains = Array(app.config.globalProperties.nFxChains)\r\nfor (let i = 0; i < app.config.globalProperties.nFxChains; i++) {\r\n    app.config.globalProperties.fxChains[i] = Array(app.config.globalProperties.nNodesXfxChain) // gain nodes at start and end\r\n}\r\n//console.log(app.config.globalProperties.fxChains)\r\n\r\napp.config.globalProperties.colors = {\r\n    green: {light: '#7fe2a6', medium: '#599e74', dark: '#335a42', glow: '#b2eeca'},\r\n    yellow: {light: '#fee573', medium: '#e5ce68', dark: '#b2a051', glow: '#feefab'},\r\n    azure: {light: '#8fe1d8', medium: '#81cbc2', dark: '#649e97', glow: '#b1eae4'},\r\n    purple: {light: '#cdadc4', medium: '#b99cb0', dark: '#a48a9d', glow: '#e1cedc'},\r\n    pink: {light: '#f3a59a', medium: '#db958b', dark: '#c2847b', glow: '#f9d2cd'},\r\n    orange: {light: '#ffc16c', medium: '#e6ae61', dark: '#cc9a56', glow: '#ffd498'},\r\n    gray: {light: '#a8a8a8', medium: '#868686', dark: '#111111', glow: '#f6f6f6'},\r\n}\r\n\r\n//To communicate from dropzone module to dragzone module\r\napp.config.globalProperties.dropFeedback = null\r\napp.provide('dropFeedback', app.config.globalProperties.dropFeedback)\r\n\r\napp.config.globalProperties.isDraggable = {\r\n    envelope: {},\r\n    lfo: {}\r\n}\r\n\r\n\r\napp.mount('#app')","<template>\r\n  <div class=\"about\">\r\n    <h1 :style=\"titleComputedStyle\">Controls</h1>\r\n    <div class=\"controls_section\">\r\n      <div class=\"controls_section_column controls_section_col_1 \" :style=\"controls_section_col_1_style\">\r\n        <h3>Available Controls</h3>\r\n        <ul>\r\n          <li>Oscillator: <br>\r\n            <ul>\r\n              <li>\r\n                Faders:\r\n                <ul>\r\n                  <li>[red]: osc gain</li>\r\n                  <li>[green]: 48 steps pitch shift</li>\r\n                  <li>[azure]: pink noise gain</li>\r\n                </ul>\r\n              </li>\r\n              <li>\r\n                Buttons\r\n                <ul>\r\n                  <li>Activate routing to corresponding filter chain</li>\r\n                </ul>\r\n              </li>\r\n            </ul>\r\n          </li>\r\n\r\n          <br>\r\n\r\n          <li>Filters: <br>\r\n            <ul>\r\n              <li>\r\n                [first] highpass:\r\n                <ul>\r\n                  <li>[horizontal]: cutoff</li>\r\n                  <li>[vertical]: resonance</li>\r\n                </ul>\r\n              </li>\r\n              <li>\r\n                [second] peaking:\r\n                <ul>\r\n                  <li>[horizontal]: frequency</li>\r\n                  <li>[vertical]: Q</li>\r\n                </ul>\r\n              </li>\r\n              <li>\r\n                [third] lowpass:\r\n                <ul>\r\n                  <li>[horizontal]: cutoff</li>\r\n                  <li>[vertical]: resonance</li>\r\n                </ul>\r\n              </li>\r\n              <li>\r\n                Buttons\r\n                <ul>\r\n                  <li>Activate routing to corresponding effects chain</li>\r\n                </ul>\r\n              </li>\r\n            </ul>\r\n          </li>\r\n\r\n          <br>\r\n\r\n          <li>Effects: <br>\r\n            <ul>\r\n              <li>Six effects and bypass:\r\n                <ul>\r\n                  <li>Reverb</li>\r\n                  <li>Delay</li>\r\n                  <li>Distortion</li>\r\n                  <li>Vibrato</li>\r\n                  <li>Pan</li>\r\n                  <li>Chorus</li>\r\n                </ul>\r\n              </li>\r\n              <li>\r\n                Chain volume:\r\n                <ul>\r\n                  <li>Post-effects gain control</li>\r\n                </ul>\r\n              </li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n        <ul>\r\n\r\n        </ul>\r\n      </div>\r\n      <img class=\"controls_section_column controls_section_col_2\" src=\"@/img/synth_controls_legend.png\" alt=\"\">\r\n      <div class=\"controls_section_column controls_section_col_3\" :style=\"controls_section_col_3_style\">\r\n        <h3>Keyboard shortcuts</h3>\r\n        <ul>\r\n          <li>White notes mapping: <br>\r\n            [C, D, E, F, G, A, B, C, D, E, F] <br>\r\n            [A, S, D, F, G, H, J, K, L, , ]\r\n          </li>\r\n        </ul>\r\n        <ul>\r\n          <li>Black notes mapping: <br>\r\n            [C#, D#, _, F#, G#, A#, _, C#, D#] <br>\r\n            [W , E , _, T , Y , U , _, O , P ]\r\n          </li>\r\n        </ul>\r\n        <ul>\r\n          <li>\r\n            <pre>Octave Up:    [X] key</pre>\r\n          </li>\r\n          <li>\r\n            <pre>Octave Down:  [Z] key</pre>\r\n          </li>\r\n        </ul>\r\n        <ul>\r\n          <li>Shift-Click disable:\r\n            <ul>\r\n              <li>Oscillators are removed</li>\r\n              <li>Effects are set to bypass</li>\r\n              <li>Envelope connections are removed</li>\r\n            </ul>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n    <h1 :style=\"titleComputedStyle\">Demo</h1>\r\n    <div class=\"demo_section\">\r\n      <div class=\"controls_section_col_1\" :style=\"controls_section_col_1_style\"></div>\r\n      <div class=\"demo_section_col_2\">\r\n        Song demo create using exclusively signature sounds from ZenytPolisint available <a href=\"https://www.youtube.com/watch?v=cjMXcdHnGRU\">here</a>    </div>\r\n      <div class=\"controls_section_col_3\" :style=\"controls_section_col_3_style\"></div>\r\n    </div>\r\n\r\n    <h1 :style=\"titleComputedStyle\">Routing</h1>\r\n    <div class=\"routing_section\">\r\n      <div class=\"routing_description\" :style=\"routing_description_style\">\r\n        <br>\r\n        Rerouting of the following elements is permitted:\r\n        <ul>\r\n          <li>\r\n            Any of the Envelopes and lfo can be activated or turned off trough the UI. Tonejs polyphony is not able to\r\n            support that, so we implemented our own polyphony.\r\n          </li>\r\n          <li>\r\n            The damp node at the end of each osc can be connected or disconnected from each filter chain using the UI.\r\n            This allows each osc to be routed into any or all the filter chains.\r\n          </li>\r\n          <li>\r\n            The last filter of each filter chain can be connected or disconnected from each effect chain using the UI.\r\n            This allows each filter chain to be routed into any or all the effects chains.\r\n          </li>\r\n        </ul>\r\n        <br>\r\n        Below we provide the Tonejs objects entire routing which is a complete representation of the initial synth\r\n        state.\r\n        <br>\r\n      </div>\r\n      <img class=\"routing_complete_img\" src=\"@/img/tone_routing.png\" alt=\"\">\r\n      <div class =\"osc_routing\">\r\n        <div class=\"routing_osc_description\" :style=\"routing_description_style\">\r\n          <ul>\r\n            <li>\r\n              We implemented polyphony from scratch in order o be able to work with evelopes.<br>\r\n            </li>\r\n            <li>\r\n              Since each voice needs its own modulators, we create and connect them directly in initialization.\r\n              The amount of modulation is initially set to zero and is changed when envelopes are connected trough the UI.\r\n            </li>\r\n            <li>\r\n              When a modulator is connected, a slot in the connection matrix is filled and the amount becomes settable trough the same interface.\r\n              Each modulator can be connected up to nine parameters.\r\n            </li>\r\n            <li>\r\n              The only modulator that can't be rerouted is the first one in the UI, which is the adsr associated with the gain of each voice and its relative noise\r\n            </li>\r\n          </ul>\r\n          <br>\r\n          On the right we provide the voice routing in detail.\r\n          <br>\r\n        </div>\r\n        <img class=\"routing_osc_img\" src=\"@/img/osc_routing.png\" alt=\"\">\r\n      </div>\r\n    </div>\r\n    <h1 :style=\"titleComputedStyle\">Repository</h1>\r\n    <div class=\"repo_description\">\r\n      A live demo of the PolisinT is available <a href=\"https://furiocolombo.github.io/\">here</a>, hosting provided by\r\n      GitHub.<br>\r\n      All code is free and available <a href=\"https://github.com/FurioColombo/FurioColombo.github.io\">here</a>. Feel free to fork\r\n      the repository and play with it!\r\n    </div>\r\n\r\n    <h1 :style=\"titleComputedStyle\">Authors</h1>\r\n    <div class=\"author\">\r\n      <button class=\"author_name\">Colombo Marco Furio</button>\r\n      <br>\r\n      <button class=\"author_code\">10537094</button>\r\n      <button class=\"author_mail\" @click=\"copyText('marcofurio.colombo@polimi.it')\">| marcofurio.colombo@polimi.it |\r\n      </button>\r\n      <button class=\"author_github\" @click=\"openLink('https://github.com/FurioColombo')\">GitHub</button>\r\n    </div>\r\n    <div class=\"author\">\r\n      <button class=\"author_name\">Fratticioli Guglielmo</button>\r\n      <br>\r\n      <button class=\"author_code\">10821800</button>\r\n      <button class=\"author_mail\" @click=\"copyText('guglielmo.fratticioli@mail.polimi.it')\">|\r\n        guglielmo.fratticioli@mail.polimi.it |\r\n      </button>\r\n      <button class=\"author_github\" @click=\"openLink('https://github.com/guglielmofratticioli')\">GitHub</button>\r\n    </div>\r\n    <div class=\"author\">\r\n      <button class=\"author_name\">Pirrello Elia</button>\r\n      <br>\r\n      <button class=\"author_code\">10897020</button>\r\n      <button class=\"author_mail\" @click=\"copyText('elia.pirrello@mail.polimi.it')\">| elia.pirrello@mail.polimi.it |\r\n      </button>\r\n      <button class=\"author_github\" @click=\"openLink('https://github.com/00sconosciuto00')\">GitHub</button>\r\n    </div>\r\n    <div style=\"height: 15%; width: 100%\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nexport default {\r\n\r\n  computed: {\r\n    titleComputedStyle() {\r\n      return {\r\n        backgroundColor: this.colors.orange.glow,\r\n      }\r\n    },\r\n    controls_section_col_1_style() {\r\n      return {\r\n        backgroundColor: this.colors.azure.glow,\r\n      }\r\n    },\r\n    controls_section_col_3_style() {\r\n      return {\r\n        backgroundColor: this.colors.green.glow,\r\n      }\r\n    },\r\n    routing_description_style() {\r\n      return {\r\n        backgroundColor: this.colors.yellow.glow,\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  methods: {\r\n    openLink(url) {\r\n      window.open(url)\r\n    },\r\n\r\n    async copyText(mytext) {\r\n      try {\r\n        await navigator.clipboard.writeText(mytext);\r\n        alert('Copied');\r\n      } catch ($e) {\r\n        alert('Cannot copy');\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style>\r\n.about {\r\n  height: 100%;\r\n  width: 100%;\r\n  margin: 0;\r\n}\r\n\r\nh1 {\r\n  position: sticky;\r\n  top: 0;\r\n  align-self: self-start;\r\n  justify-self: self-start;\r\n  padding: 1vw;\r\n  font-size: 1.8vw;\r\n  margin-top: 2vw;\r\n  z-index: 101;\r\n}\r\n\r\n.controls_section {\r\n  position: relative;\r\n  display: inline-grid;\r\n  grid-template-columns: 1.8fr 5fr 1.8fr;\r\n  height: 80%;\r\n  width: 100%;\r\n  font-family: monospace;\r\n}\r\n\r\n.controls_section_column {\r\n  margin: 1vw;\r\n  padding: 0.5vw;\r\n  text-align: left;\r\n}\r\n\r\n.controls_section_col_1 {\r\n  margin-bottom: 5vw;\r\n  height: 95%;\r\n}\r\n\r\n.controls_section_col_2 {\r\n  margin-top: -1vw;\r\n  align-self: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: scale-down;\r\n  scale: 95%;\r\n}\r\n\r\n.controls_section_col_3 {\r\n  height: 95%;\r\n  margin-bottom: 5vw;\r\n}\r\n\r\n\r\n.demo_section {\r\n  position: relative;\r\n  display: inline-grid;\r\n  grid-template-columns: 1.8fr 5fr 1.8fr;\r\n  height: 20%;\r\n  width: 100%;\r\n  font-family: monospace;\r\n  font-size: 1vw;\r\n}\r\n\r\n.demo_section_col_2 {\r\n  position: relative;\r\n  top: 40%;\r\n  margin-top: -1vw;\r\n  align-self: center;\r\n  text-align: center;\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: scale-down;\r\n  scale: 95%;\r\n  font-size: 1vw;\r\n}\r\n\r\n.ul {\r\n  list-style-type: circle;\r\n}\r\n\r\n.routing_section {\r\n  display: inline-grid;\r\n  grid-template-rows: 0.12fr 2fr 2fr;\r\n  width: 100%;\r\n  height: 185%;\r\n}\r\n\r\n.routing_description {\r\n  font-size: 1vw;\r\n  text-align: left;\r\n  width: 90%;\r\n  margin: 2vw;\r\n  margin-left: 4vw;\r\n  padding: 1vw;\r\n}\r\n\r\n.osc_routing {\r\n  display: inline-grid;\r\n  grid-template-columns: 1fr 2fr;\r\n  vertical-align: center;\r\n}\r\n\r\n.routing_complete_img {\r\n  width: 100%;\r\n  align-self: center;\r\n  object-fit: scale-down;\r\n  scale: 98%;\r\n}\r\n\r\n.routing_osc_description {\r\n  font-size: 1vw;\r\n  text-align: left;\r\n  width: 90%;\r\n  margin-left: 4vw;\r\n  padding: 2vw;\r\n  align-self: center;\r\n}\r\n\r\n.routing_osc_img {\r\n  width: 100%;\r\n  align-self: center;\r\n  object-fit: scale-down;\r\n  scale: 90%;\r\n  margin-top: -10vw;\r\n  margin-left: 2vw;\r\n}\r\n\r\n.repo_description {\r\n  font-size: 1.3vw;\r\n  padding: 2vw;\r\n}\r\n\r\n.author {\r\n  margin: 2vw;\r\n}\r\n\r\n.author_name {\r\n  font-size: 1.3vw;\r\n  background-color: transparent;\r\n  border: none;\r\n  font-weight: bold;\r\n  width: auto;\r\n}\r\n\r\n.author_code {\r\n  font-size: 1.25vw;\r\n  background-color: transparent;\r\n  border: none;\r\n}\r\n\r\n.author_mail {\r\n  font-size: 1.3vw;\r\n  background-color: transparent;\r\n  border: none;\r\n}\r\n\r\n.author_github {\r\n  font-size: 1.3vw;\r\n  background-color: transparent;\r\n  border: none;\r\n}\r\n\r\n\r\n</style>","import { render } from \"./AboutView.vue?vue&type=template&id=f17ae4e0\"\nimport script from \"./AboutView.vue?vue&type=script&lang=js\"\nexport * from \"./AboutView.vue?vue&type=script&lang=js\"\n\nimport \"./AboutView.vue?vue&type=style&index=0&id=f17ae4e0&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\zenythPolisinT\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkactam\"] = self[\"webpackChunkactam\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(1100); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createElementVNode","_createVNode","_component_router_link","to","className","src","_imports_0","alt","onClick","$options","_component_router_view","mounted","methods","openAbout","routeData","this","$router","resolve","path","query","window","open","href","__exports__","render","class","_createElementBlock","onMouseup","onMousemove","_hoisted_1","_component_OscHost","ref","onNewOsc","_component_FilterHost","onFilterInitialized","_component_FxHost","_component_ToolHost","_component_ModHost","_component_PianoKeyboard","onNoteDown","onNoteUp","_createBlock","_component_LFO","key","_hoisted_2","_hoisted_4","_hoisted_6","style","oscHost","_Fragment","oscList","osc","_component_Osc","id","onDisposed","length","draggable","_imports_1","_imports_2","_imports_3","type_button","type_text","$data","oscTypeIndex","mod_area","volume_area","pitch_slider","_hoisted_3","mod_slider","volume_slider","pitch_area","pitch_hand","lineL","lineU","lineR","onDragenter","onDragleave","onDragover","onDrop","$event","onMousedown","_toDisplayString","osc_wave","oscWaveIndex","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","onChainclick","_hoisted_13","vol_damp_factor","MyPolySynth","constructor","synthType","destination","nVoices","modulatorsData","envelope","vol","amount","parameters","attack","decay","sustain","release","mod","pitch","lfo","frequency","waveform","min","max","synthPreset","type","transpose","partials","pan","dampNode","Gain","gainNode","allVoices","freeVoices","busyVoices","lastNotes","Array","console","log","initVoices","connect","index","modulators","signal","scale","lfoGain","gain","synth","createSynth","oscillator","disconnect","dispose","noiseAdsrGain","noiseGain","noise","Tone","voice","target","tempMod","createModulator","createScale","connectModulator","push","initialized","updateModulators","playNote","note","velocity","lastNote","shift","toRaw","cancel","triggerAttack","stop","start","stopNote","triggerRelease","Synth","nextTick","set","Envelope","LFO","forEach","scaleSetter","modulatorSetter","updateSynths","modulator","Math","chain","detune","setModulatorParameters","setModulatorAmount","setParameters","volume","modulation","route","disconnectDispose","wave_types","osc_types","components","SineIcon","SquareIcon","TriangleIcon","SawtoothIcon","data","color","colors","pink","azure","green","maxPitch","minPitch","waveform_btn_style","wave_icon_size","is_modulationDown","is_volumeDown","is_pitchDown","isFilterChainRouteActive","props","document","addEventListener","onMouseMove","onMouseUp","resizeGraphics","polyphonyVoices","gainToDb","synths","list","initConnections","$emit","computed","osc_container","background","fontSize","glow","gray","dark","medium","transform","opacity","backgroundColor","borderLeft","border","chain_buttons","button_1","purple","light","button_2","button_3","handleDrop","event","JSON","parse","dataTransfer","getData","dispatchEvent","CustomEvent","detail","object","handleDragEnter","handleDragLeave","unlinkMod","computedModulation","width","height","borderRadius","position","right","display","left","bottom","computedModText","splice","indexOf","filterChains","getToneFilter","body","clientWidth","e","movementY","movementX","floor","modulationDown","volumeDown","pitchDown","nextOscType","nextWaveform","unmounted","removeEventListener","Osc","name","i","addOsc","handleNewOsc","$refs","removeOsc","voidBorder","filterHost","chainList","_component_FilterChain","chainLine","chainDot","filterList","filter","_component_Filter","chainId","filter_type","chainColor","onFiltersMounted","handleFiltersMounted","_hoisted_5","filter_logo","resonance","toFixed","logo_text_back","MyFilter","cutoff","activeNotes","initFilterParams","getCutoff","getResonance","self","cutoffLogMapping","pow","log10","setCutoff","setResonance","resonanceRangeNormalizer","Q","err","x","error","yellow","is_logoDown","nFiltersXchain","nFilterChains","zIndex","top","cursor","logoDown","getMyFilter","computedHeadStyle","computedGlow","computedLP","computedHP","computedBDMaks","clip","clipPath","computedBD","computedBDCircle","logo","filterTypes","Filter","nFilters","isFxChainRouteActive","fx_chain_1","fx_chain_2","fx_chain_3","$props","aspectRatio","fxChains","setRouting","FilterChain","chain_colors","fxBack","fxHost","chainHead1","chainHead2","chainHead3","fx","_component_FxCell","item","onFxMounted","initFxConnections","gainList","_imports_4","_imports_5","typeId","iconDiv","onMouseover","onIconEnter","onMouseout","_hoisted_7","MyEffect","effect","generateToneFx","modulatorsPreset","getToneReference","createReverb","createDelay","createDistortion","createVibrato","createPan","createChorus","setFxParams","wet","delayTime","feedback","distortion","depth","coeff","spread","toString","Reverb","PingPongDelay","Distortion","Vibrato","Panner","Chorus","types","Fx_colors","is_down","startX","startY","endX","endY","threshold","nFxChains","nFxXchain","computedGlowStyle","iconDivBlack","onIconLeave","isSVGTag","nextFx","distance","sqrt","generateNextTypeIndex","fxType","changeFxType","generateRandomTypeIndex","round","random","setToBypass","fxDown","clientX","clientY","FxCell","Fx_chain1","Fx_chain2","Fx_chain3","isGainSelected","chainsGains","fill","nNodesXfxChain","j","getDestination","setChainVolume","gainMouseDown","gainId","handleMouseUp","handleMouseMove","isSelected","computedFxGainKnobStyle","channelGain","orange","boxSizing","borderTop","toolsHost","_component_SpecAnalyzer","_component_Oscilloscope","_component_Meter","Meter","widthLeft","widthRight","computedWidthLeft","computedWidthRight","meter","channels","intervalId","setInterval","updateWidths","leftVolume","rightVolume","getValue","isFinite","dbToGain","beforeDestroy","clearInterval","oscilloscopeCanvas","oscilloscopeData","timing","oscilloscope","startOscilloscope","canvas","offsetWidth","offsetHeight","ctx","getContext","setTiming","updateOscilloscopeData","draw","clearRect","strokeStyle","lineWidth","beginPath","y","moveTo","lineTo","stroke","analyzerCanvas","analyser","canvasCtx","startAnalyzer","value","fillStyle","fillRect","Oscilloscope","SpecAnalyzer","setOscilloscopeTiming","mseconds","_component_VolEnvelope","_component_Envelope","onIsDraggableUpdate","_component_Lfo","_component_ModSelector","onSelection","container","_component_EnvelopeVisualizer","is_volume","onParamRefresh","_component_Knobs","knob","isOn","knobList","freeKnobs","nKnobs","isMouseDown","selectedKnobId","isDraggable","updateParameters","knobText","addLink","removeLink","mouseDown","knobId","computedFaderStyle","rawKnobAmount","envelope_container","adsr","attack_Color","decay_head","decay_Color","sustain_head","sustain_Color","release_Color","space","attackCurve","decayCurve","releaseCurve","sustain_lev","duration","is_attack_down","is_decay_down","is_sustain_down","is_release_down","test","isDragging","tempEvent","p","attack_down","decay_down","sustain_down","release_down","gridTemplateColumns","ceil","gridTemplateRows","attack_dot","borderColor","decay_dot","release_dot","attack_area","decay_area","sustain_area","release_area","EnvelopeVisualizer","handleRefresh","unHide","classList","remove","hide","add","visualizer","lfo_elems_row","_component_LfoVisualizer","freq","wave","lfoFaderBase","lfoFreqFaderLevel","qualFactor","sinValsBuffer","triValsBuffer","sqValsBuffer","sawValsBuffer","sin","PI","abs","updateParams","stopOscilloscope","t","y_next","waveforms","LfoVisualizer","Knobs","isDepthFaderDown","isFreqFaderDown","waveformId","lfoDepthFaderLevel","lfo_waveform_btn_selector","setParams","waveformNameString","knobs","nextWaveType","resetOscilloscope","depthFaderSelected","freqFaderSelected","link","unLink","buttonList","button","onDragstart","inject","mainEnv","buttonListEnv","buttonListLfo","nEnvelopes","nLfo","textId","fontWeight","draggability","isDraggableUpdate","buttonColor","startDrag","dropEffect","effectAllowed","setData","stringify","handleClick","handleDraggableUpdate","VolEnvelope","Lfo","ModSelector","selection","selectionType","envList","lfoList","created","volEnvelope","handleLink","handleUnlink","modHost","modSelector","envelopes","lfos","changeSelection","onMouseleave","_ctx","_component_Octave","octaveNumber","onVirtualKeyDown","onVirtualKeyUp","_component_MIDIKeyboard","onMIDIDown","onMIDIUp","midiAccess","midiInput","notes","lowestOctave","navigator","requestMIDIAccess","then","inputs","size","values","next","handleMidiMessage","status","label","octave","parseInt","Number","handleMouseLeave","$parent","notifyUp","currentTarget","handleMouseDown","notifyDown","handleMouseOver","switchColorPress","includes","replace","contains","switchColorRelease","Object","Octave","MIDIKeyboard","ocTranspose","keysDown","keys","keyboardTranspose","handleKeyDown","handleKeyUp","handleNoteDown","handleNoteUp","handleMIDIDown","handleMIDIUp","finalOctave","OscHost","FilterHost","FxHost","ToolHost","ModHost","PianoKeyboard","draggedInfo","initOscConnections","initFilterConnections","pianoKeyboard","setTimeout","deleteDraggedInfo","noteDownHandle","noteUpHandle","routes","component","MainHost","router","createRouter","history","createWebHistory","process","app","createApp","App","use","config","globalProperties","areFiltersMounted","areFxMounted","nModulators","dropFeedback","provide","mount","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_19","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","titleComputedStyle","controls_section_col_1_style","controls_section_col_3_style","routing_description_style","openLink","url","async","mytext","clipboard","writeText","alert","$e","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","bind","__webpack_exports__"],"sourceRoot":""}
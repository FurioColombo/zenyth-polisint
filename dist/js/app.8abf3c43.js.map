{"version":3,"file":"js/app.8abf3c43.js","mappings":"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","sources":["webpack://actam/./src/App.vue","webpack://actam/./src/App.vue?7ccd","webpack://actam/./src/views/MainHost.vue","webpack://actam/./src/views/Synth/Oscillators/OscHost.vue","webpack://actam/./src/views/Synth/Oscillators/Osc.vue","webpack://actam/./src/views/Synth/Oscillators/MyPolySynth.js","webpack://actam/./src/views/Synth/Oscillators/Osc.vue?83b5","webpack://actam/./src/views/Synth/Oscillators/OscHost.vue?d815","webpack://actam/./src/views/Synth/Filters/FilterHost.vue","webpack://actam/./src/views/Synth/Filters/FilterChain.vue","webpack://actam/./src/views/Synth/Filters/Filter.vue","webpack://actam/./src/views/Synth/Filters/MyFilter.js","webpack://actam/./src/views/Synth/Filters/Filter.vue?c1b3","webpack://actam/./src/views/Synth/Filters/FilterChain.vue?d0d3","webpack://actam/./src/views/Synth/Filters/FilterHost.vue?2cd0","webpack://actam/./src/views/Synth/Effects/FxHost.vue","webpack://actam/./src/views/Synth/Effects/FxCell.vue","webpack://actam/./src/views/Synth/Effects/MyFx.js","webpack://actam/./src/views/Synth/Effects/FxCell.vue?8c66","webpack://actam/./src/views/Synth/Effects/FxHost.vue?c3f2","webpack://actam/./src/views/Synth/Tools/ToolsHost.vue","webpack://actam/./src/views/Synth/Tools/Meter.vue","webpack://actam/./src/views/Synth/Tools/Meter.vue?40dd","webpack://actam/./src/views/Synth/Tools/Oscilloscope.vue","webpack://actam/./src/views/Synth/Tools/Oscilloscope.vue?f6a7","webpack://actam/./src/views/Synth/Tools/SpecAnalyzer.vue","webpack://actam/./src/views/Synth/Tools/SpecAnalyzer.vue?01c1","webpack://actam/./src/views/Synth/Tools/ToolsHost.vue?776e","webpack://actam/./src/views/Synth/Modulators/ModHost.vue","webpack://actam/./src/views/Synth/Modulators/Envelope.vue","webpack://actam/./src/views/Synth/Modulators/Knobs.vue","webpack://actam/./src/views/Synth/Modulators/Knobs.vue?22e9","webpack://actam/./src/views/Synth/Modulators/VolEnvelope.vue","webpack://actam/./src/views/Synth/Modulators/EnvelopeVisualizer.vue","webpack://actam/./src/views/Synth/Modulators/EnvelopeVisualizer.vue?6078","webpack://actam/./src/views/Synth/Modulators/VolEnvelope.vue?3e34","webpack://actam/./src/views/Synth/Modulators/Lfo.vue","webpack://actam/./src/views/Synth/Modulators/LfoVisualizer.vue","webpack://actam/./src/views/Synth/Modulators/LfoVisualizer.vue?ff68","webpack://actam/./src/views/Synth/Modulators/Lfo.vue?aca2","webpack://actam/./src/views/Synth/Modulators/ModSelector.vue","webpack://actam/./src/views/Synth/Modulators/ModSelector.vue?9635","webpack://actam/./src/views/Synth/Modulators/Envelope.vue?43eb","webpack://actam/./src/views/Synth/Modulators/ModHost.vue?a17d","webpack://actam/./src/views/Synth/Keyboard/PianoKeyboard.vue","webpack://actam/./src/views/Synth/Keyboard/MIDIKeyboard.vue","webpack://actam/./src/views/Synth/Keyboard/MIDIKeyboard.vue?854b","webpack://actam/./src/views/Synth/Keyboard/Octave.vue","webpack://actam/./src/views/Synth/Keyboard/Octave.vue?c297","webpack://actam/./src/views/Synth/Keyboard/PianoKeyboard.vue?3c01","webpack://actam/./src/views/MainHost.vue?2950","webpack://actam/./src/router/index.js","webpack://actam/./src/main.js","webpack://actam/webpack/bootstrap","webpack://actam/webpack/runtime/chunk loaded","webpack://actam/webpack/runtime/compat get default export","webpack://actam/webpack/runtime/define property getters","webpack://actam/webpack/runtime/ensure chunk","webpack://actam/webpack/runtime/get javascript chunk filename","webpack://actam/webpack/runtime/get mini-css chunk filename","webpack://actam/webpack/runtime/global","webpack://actam/webpack/runtime/hasOwnProperty shorthand","webpack://actam/webpack/runtime/load script","webpack://actam/webpack/runtime/make namespace object","webpack://actam/webpack/runtime/publicPath","webpack://actam/webpack/runtime/css loading","webpack://actam/webpack/runtime/jsonp chunk loading","webpack://actam/webpack/startup"],"sourcesContent":["<template>\r\n  <nav>\r\n    <router-link to=\"/\">\r\n      <img className=\"app_logo\" src=\"@/img/zenyth_logo.png\" alt=\"\" @click=\"openAbout\">\r\n    </router-link>\r\n  </nav>\r\n  <router-view/>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nexport default {\r\n  mounted() {\r\n\r\n  },\r\n  methods: {\r\n    openAbout() {\r\n      window.open(\"http://localhost:8080/about\")\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style>\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  width: 100%;\r\n  height: 100vh;\r\n  margin: auto;\r\n}\r\n\r\n.app_logo {\r\n  width: 10vw;\r\n  margin-bottom: 1vw;\r\n  object-fit: scale-down;\r\n}\r\n\r\nnav {\r\n  width: 100%;\r\n  aspect-ratio: 24/1;\r\n  font-size: 2vw;\r\n  padding-top: 1vw;\r\n}\r\n\r\nnav a {\r\n  font-weight: bold;\r\n  color: #2c3e50;\r\n}\r\n\r\nnav a.router-link-exact-active {\r\n  color: #42b983;\r\n}\r\n\r\ndiv {\r\n  user-select: none;\r\n}\r\n</style>\r\n","import { render } from \"./App.vue?vue&type=template&id=e92d992a\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=e92d992a&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"appContainer\" @mouseup=\"handleMouseUp\" @mousemove=\"handleMouseMove\">\r\n    <div class=\"mainHost\">\r\n      <OscHost ref=\"oscHost\" @newOsc=\"handleNewOsc\" />\r\n      <FilterHost ref=\"filterHost\" @filterInitialized=\"initOscConnections\"/>\r\n      <FxHost ref=\"fxHost\"/>\r\n      <ToolHost ref=\"toolsHost\" />\r\n      <ModHost ref=\"modHost\"/>\r\n      <PianoKeyboard\r\n        ref=\"pianoKeyboard\"\r\n        @noteDown=\"noteDownHandle\"\r\n        @noteUp=\"noteUpHandle\"\r\n      />\r\n    </div>\r\n    <LFO :key=\"1\"  ></LFO>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport OscHost from \"./Synth/Oscillators/OscHost.vue\";\r\nimport FilterHost from \"./Synth/Filters/FilterHost.vue\";\r\nimport FxHost from \"./Synth/Effects/FxHost.vue\";\r\nimport ToolHost from \"./Synth/Tools/ToolsHost.vue\";\r\nimport ModHost from \"./Synth/Modulators/ModHost.vue\"; // Envelope Strip\r\nimport LFO from \"@/views/Synth/Modulators/Lfo.vue\"; // todo: remove\r\nimport PianoKeyboard from \"./Synth/Keyboard/PianoKeyboard.vue\";\r\n\r\nexport default {\r\n  name: \"mainHost\",\r\n  components: {\r\n    LFO, // todo : delete from here\r\n    OscHost,\r\n    FilterHost,\r\n    FxHost,\r\n    ToolHost,\r\n    ModHost,\r\n    PianoKeyboard,\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      draggedInfo: null,\r\n    };\r\n  },\r\n  mounted() {\r\n    Tone.Transport.start(\"+0.1\")\r\n  },\r\n\r\n  methods: {\r\n    // -------------- INIT ROUTING (connections) ------------\r\n    initOscConnections(){\r\n      this.$refs.oscHost.initConnections()\r\n    },\r\n    initFilterConnections(){\r\n      //console.log(\"main host init filter-fx connections\")\r\n      // todo: delete this.$refs.filterHost.initConnections()\r\n    },\r\n    handleNewOsc(){\r\n      //initialize volEnvelope on all synth when a new oscillator is added\r\n      this.$refs.modHost.handleNewOsc();\r\n    },\r\n    handleMouseUp(e) {\r\n      //Actions to execute when mouseup happens on any part of the screen\r\n      this.$refs.pianoKeyboard.handleMouseUp();\r\n      this.$refs.modHost.handleMouseUp(e);\r\n      this.$refs.fxHost.handleMouseUp(e);\r\n\r\n      //If something has been dragged and not claimed after 100ms infos are deleted\r\n      if (this.draggedInfo) {\r\n        setTimeout(() => this.deleteDraggedInfo(\"MainHost\"), 100);\r\n      }\r\n    },\r\n    handleMouseMove(e){\r\n      //console.log(this.$refs.modHost)\r\n      this.$refs.modHost.handleMouseMove(e);\r\n      this.$refs.fxHost.handleMouseMove(e);\r\n\r\n    },\r\n    noteDownHandle(note) {\r\n      this.$refs[\"toolsHost\"].setOscilloscopeTiming(note);\r\n    },\r\n\r\n\r\n    noteUpHandle(note) {\r\n    },\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.mainHost {\r\n  display: grid; /* no more flex display because we need Env Strip to be longer */\r\n  grid-template-rows: 55% 30% 15%; /* grid display row sizes*/\r\n  grid-template-columns: 20% 55% 25%; /*  ...   ...   column sizes fr is like unit */\r\n  width: 100%;\r\n  justify-content: center;\r\n  aspect-ratio: 4 / 3;\r\n  background-color: transparent;\r\n}\r\n.appContainer {\r\n  text-align: center;\r\n  width: 60%;\r\n  height: 100vh;\r\n  margin: auto;\r\n}\r\n</style>","<template>\r\n  <div class=\"oscHost\" :style=\"this.oscHost\">\r\n    <div class=\"scrollable\">\r\n      <template v-for=\"(osc) in this.oscList\" :key=\"osc.id\" :item=\"osc\">\r\n        <Osc\r\n            :ref=\"osc.ref\"\r\n            :id=\"osc.id\"\r\n            @disposed=\"removeOsc\"\r\n            @newOsc=\"handleNewOsc\"\r\n        />\r\n      </template>\r\n      <div class=\"voidContainer\" @click=\"addOsc\">\r\n        <div class=\"voidBorder\" :style=\"voidBorder\">\r\n          <div class=\"oscVoid\">+</div>\r\n        </div>\r\n      </div>\r\n      <div  v-if=\"this.oscList.length <= 1\" class=\"voidContainer\" @click=\"addOsc\">\r\n        <div class=\"voidBorder\" :style=\"voidBorder\">\r\n          <div class=\"oscVoid\">+</div>\r\n        </div>\r\n      </div>\r\n      <div  v-if=\"this.oscList.length <= 0\" class=\"voidContainer\" @click=\"addOsc\">\r\n        <div class=\"voidBorder\" :style=\"voidBorder\">\r\n          <div class=\"oscVoid\" >+</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Osc from \"./Osc.vue\";\r\nimport Vue from \"vue\";\r\nimport {isProxy, toRaw} from \"vue\";\r\n\r\nexport default {\r\n  components: {\r\n    Osc,\r\n  },\r\n\r\n  data() {\r\n    // data structure oscillators list\r\n    return {\r\n      oscList: [],\r\n      name: \"oscHost\",\r\n      i: 0,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.addOsc();\r\n    this.addOsc();\r\n  },\r\n\r\n  methods: {\r\n    handleNewOsc(){\r\n      this.$emit(\"newOsc\")\r\n    },\r\n    initConnections() {\r\n      for (let key in this.$refs) {\r\n        //console.log(toRaw(this.$refs[key][0]))\r\n        toRaw(this.$refs[key][0]).initConnections()\r\n\r\n      }\r\n    },\r\n    addOsc() {\r\n      //TO-DO REWRITE\r\n      let ref = \"osc\" + this.i;\r\n      this.oscList.push({id: this.i, ref: ref});\r\n      //console.log(\"adding osc\" + this.i)\r\n      //console.log(this.oscList);\r\n      this.i += 1;\r\n    },\r\n\r\n    removeOsc(id) {\r\n      //console.log(\"removing oscillator\" + id);\r\n      // Remove the oscillator from the list\r\n      let index = 0\r\n      this.oscList.forEach(osc => {\r\n        if (osc.id === id) index = this.oscList.indexOf(osc)\r\n      });\r\n      this.oscList.splice(index, 1);\r\n    },\r\n  },\r\n  unmounted() {\r\n  },\r\n  computed: {\r\n    oscHost(){\r\n      return{\r\n        background: '#f8e7e6',\r\n      }\r\n    },\r\n    voidBorder(){\r\n      return{\r\n        background: this.colors.pink.glow,\r\n        border: '.1vw solid' + this.colors.pink.dark\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.scrollable {\r\n  font-size: 2vw;\r\n  justify-content: center;\r\n  overflow-y: scroll;\r\n  /* Add a vertical scrollbar */\r\n  overflow-x: hidden;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.voidContainer {\r\n  width: 100%;\r\n  height: calc(100% / 3);\r\n  position: relative\r\n}\r\n\r\n.voidBorder {\r\n  height: calc(100% - 0.6vw);\r\n  padding: 0.3vw;\r\n}\r\n\r\n.oscVoid {\r\n  border: 0.1vw solid #c2847b;\r\n  color: #c2847b;\r\n  background: #f8e7e6;\r\n  border-radius: 0.3vw;\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 2vw;\r\n}\r\n.oscVoid:hover {\r\n  border: 0.1vw solid #63443e;\r\n  color: #63443e;\r\n  border-radius: 0.3vw;\r\n  box-sizing: border-box;\r\n  height: 100%;\r\n  justify-content: center;\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 2vw;\r\n}\r\n\r\n/*  hide the scrollbar because cannot be resized in Chrome, Safari (breaks % layout)*/\r\n.scrollable::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n</style>","<template>\r\n  <!-- PLEASE DON'T GO CRAZY TRYING UNDERSTAND THIS DIVs LAYER STACKS XD, Look into OSC MIDDLE-->\r\n  <!-- IN \"osc_middle\" there are the movable circle slider crowns : : 'mod_slider' / 'volume_slider' -->\r\n  <div class=\"main_container\" @click.shift=\"dispose\">\r\n    <div class=\"type_button\" @click=\"nextOscType\" :style=\"this.type_button\">\r\n      <div class=\"innertext\" :style=\"this.type_text\">{{\r\n        osc_types[true] === \"\" ? 'std' : osc_types[this.oscTypeIndex]\r\n      }}\r\n      </div>\r\n    </div>\r\n    <!-- DO NOT TOUCH EVER AGAIN HTML STRUCTURE / CSS !!!!!!!!!!!!-->\r\n    <div class=\"osc_container\" :style=\"osc_container\">\r\n      <div class=\"osc\">\r\n        <div class=\"osc_back\">\r\n          <div class=\"mod_area\" :style=\"this.mod_area\"></div>\r\n          <div class=\"volume_area\" :style=\"this.volume_area\"></div>\r\n          <div class=\"pitch_slider\" :style=\"this.pitch_slider\"></div>\r\n        </div>\r\n        <div class=\"osc_middle\">\r\n\r\n          <div class=\"mod_slider\" ref=\"modulation\" :style=\"this.mod_slider\"></div>\r\n          <div class=\"volume_slider\" ref=\"volume\" :style=\"this.volume_slider\"></div>\r\n        </div>\r\n        <div class=\"osc_front\">\r\n          <div class=\"pitch_area\" :style=\"this.pitch_area\"></div>\r\n          <div class=\"pitch_hand\" ref=\"pitch\" :style=\"this.pitch_hand\"></div>\r\n          <div class=\"lineL\" :style=\"this.lineL\"></div>\r\n          <div class=\"lineU\" :style=\"this.lineU\"></div>\r\n          <div class=\"lineR\" :style=\"this.lineR\"></div>\r\n        </div>\r\n        <div class=\"draggable left\" @dragenter=\"handleDragEnter('mod')\" @dragleave=\"handleDragLeave('mod')\"\r\n          @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'mod')\" @mousedown=\"modulationDown\">\r\n          <div class=\"modDot\" :style=\"computedModulation('mod')\" @click.shift.stop=\"unlinkMod('mod')\"\r\n            v-text=\"computedModText('mod')\"></div>\r\n        </div>\r\n        <div class=\"draggable right\" @dragenter=\"handleDragEnter('vol')\" @dragleave=\"handleDragLeave('vol')\"\r\n          @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'vol')\" @mousedown=\"volumeDown\">\r\n          <div class=\"modDot\" :style=\"computedModulation('vol')\" @click.shift.stop=\"unlinkMod('vol')\"\r\n            v-text=\"computedModText('vol')\"></div>\r\n        </div>\r\n        <div class=\"draggable low\" @dragenter=\"handleDragEnter('pitch')\" @dragleave=\"handleDragLeave('pitch')\"\r\n          @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'pitch')\" @mousedown=\"pitchDown\">\r\n          <div class=\"modDot\" :style=\"computedModulation('pitch')\" @click.shift.stop=\"unlinkMod('pitch')\"\r\n            v-text=\"computedModText('pitch')\"></div>\r\n        </div>\r\n        <div class=\"osc_wave\" @click=\"nextWaveform\" :style=\"this.osc_wave\">\r\n          <img v-if=\"this.oscWaveIndex === 0\" src=\"@/icons/sine.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.oscWaveIndex === 1\" src=\"@/icons/triangle.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.oscWaveIndex === 2\" src=\"@/icons/saw.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.oscWaveIndex === 3\" src=\"@/icons/square.svg\" alt=\"\" draggable=\"false\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"chain_buttons\" :style=\"chain_buttons\">\r\n      <div></div>\r\n      <div class=\"button_1\" :style=\"button_1\" @click=\"this.onChainclick(0)\"></div>\r\n      <div class=\"button_2\" :style=\"button_2\" @click=\"this.onChainclick(1)\"></div>\r\n      <div class=\"button_3\" :style=\"button_3\" @click=\"this.onChainclick(2)\"></div>\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport SineIcon from \"vue-material-design-icons/SineWave\";\r\nimport SquareIcon from \"vue-material-design-icons/SquareWave\";\r\nimport TriangleIcon from \"vue-material-design-icons/TriangleWave\";\r\nimport SawtoothIcon from \"vue-material-design-icons/SawtoothWave\";\r\nimport {gainToDb} from \"tone\";\r\nimport MyPolySynth from \"./MyPolySynth.js\";\r\n\r\nconst wave_types = [\"sine\", \"triangle\", \"sawtooth\", \"square\"];\r\nconst osc_types = [\"\", \"fm\", \"am\", \"fat\"];\r\n\r\nexport default {\r\n  components: {\r\n    SineIcon,\r\n    SquareIcon,\r\n    TriangleIcon,\r\n    SawtoothIcon,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      // todo: UPDATE ALL COLOR DEPENDING ON THIS:\r\n      color: {\r\n        vol: this.colors.pink,\r\n        mod: this.colors.azure,\r\n        pitch: this.colors.green\r\n      },\r\n\r\n\r\n      // waveform_btn_style: osc_background_colors[0], todo: colors?\r\n      osc_types: [\"std\", \"fm\", \"am\", \"fat\"],\r\n      volume: 0.5,\r\n      modulation: 1,\r\n      pitch: 0,\r\n      pan: 0,\r\n      attack: 0.01,\r\n      decay: 0.1,\r\n      sustain: 1,\r\n      release: 0.2,\r\n      maxPitch: 24,\r\n      minPitch: -24,\r\n      partials: \"\",\r\n      oscWaveIndex: 0, // wave currently selected from  ['sine','triangle', ...]\r\n      oscTypeIndex: 0, // type of osc selected from ['std', 'fm', ...];\r\n      waveform_btn_style: \"lightblue\",\r\n      wave_icon_size: 32,\r\n      is_modulationDown: false,\r\n      is_volumeDown: false,\r\n      is_pitchDown: false,\r\n      isFilterChainRouteActive: [true, false, false],\r\n      modulators: {\r\n        vol: null,\r\n        mod: null,\r\n        pitch: null\r\n      },\r\n    };\r\n  },\r\n  props: [\"id\"],\r\n\r\n  mounted() {\r\n    document.addEventListener(\"mousemove\", this.onMouseMove);\r\n    document.addEventListener(\"mouseup\", this.onMouseUp);\r\n    window.addEventListener(\"resize\", this.resizeGraphics);\r\n\r\n    // resize graphics\r\n    this.resizeGraphics();\r\n    this.gainNode = new Tone.Gain();\r\n    console.log(this.polyphonyVoices)\r\n    this.synth = new MyPolySynth(\"\", this.gainNode, this.polyphonyVoices);\r\n    this.synth.setParameters({ volume: gainToDb(1 - this.volume) });\r\n\r\n    this.synths.list.push(this.synth)\r\n    //console.log(this.synths.list)\r\n    // we need to init connection to first filter chain\r\n    // in the first osc case we need to make sure we connect after the chain is created , so we handle that with events\r\n    // emitted from the filter chain - in all other cases we can just normally connect to the chain\r\n    if (this.id > 1) {\r\n      this.initConnections()\r\n    }\r\n    //communicate to parent that a new osc has been created (to update volEnvelope from ModHost)\r\n    this.$emit(\"newOsc\")\r\n\r\n  },\r\n\r\n  computed: {\r\n\r\n    osc_container() {\r\n      return {\r\n        background: '#f8e7e6'\r\n      }\r\n    },\r\n    /*------------ TYPE BUTTON ------------*/\r\n    type_button() {\r\n      return {\r\n        fontSize: '.5vw',\r\n        background: this.colors.pink.glow\r\n      }\r\n    },\r\n    type_text() {\r\n      return {\r\n        color: this.colors.gray.dark\r\n      }\r\n    },\r\n    /*--------------- OSC -----------------*/\r\n    volume_area() {\r\n      return {\r\n        background: this.colors.pink.dark\r\n      }\r\n    },\r\n    mod_area() {\r\n      return {\r\n        background: this.colors.azure.medium\r\n      }\r\n    },\r\n    pitch_area() {\r\n      return {\r\n        background: this.colors.green.glow\r\n      }\r\n    },\r\n    mod_slider() {\r\n      return {\r\n        transform: \"rotate(-\" + this.modulation * 111 + \"deg)\",\r\n        background: 'white',\r\n        opacity: '60%'\r\n      }\r\n    },\r\n    volume_slider() {\r\n      return {\r\n        backgroundColor: 'white',\r\n        opacity: '60%',\r\n        transform: \"rotate(\" + this.volume * 112 + \"deg)\",\r\n      }\r\n    },\r\n    pitch_slider() {\r\n      return {\r\n        background: this.colors.green.medium\r\n      }\r\n    },\r\n    pitch_hand() {\r\n      return {\r\n        transform: \"rotate(\" + (this.pitch * 50) / this.maxPitch + \"deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    osc_wave() {\r\n      return {\r\n        border: '.1vw solid ' + this.colors.green.dark,\r\n        background: this.colors.green.glow\r\n      }\r\n    },\r\n    lineL() {\r\n      return {\r\n        transform: \"rotate(66deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    lineU() {\r\n      return {\r\n        transform: \"rotate(-66deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    lineR() {\r\n      return {\r\n        transform: \"rotate(180deg)\",\r\n        borderLeft: \".1vw solid \" + this.colors.green.dark\r\n      }\r\n    },\r\n    /*------------ CHAIN BUTTONS ------------*/\r\n    chain_buttons() {\r\n      return {\r\n        background: this.colors.pink.glow\r\n      }\r\n    },\r\n    button_1() {\r\n      let color = ''\r\n      if (this.isFilterChainRouteActive[0])\r\n        color = this.colors.purple.light\r\n      else {\r\n        color = this.colors.pink.glow\r\n      }\r\n      return {\r\n        background: color, \r\n        border: '.1vw solid ' + this.colors.gray.dark \r\n      }\r\n    },\r\n    button_2() {\r\n      let color = ''\r\n      if (this.isFilterChainRouteActive[1])\r\n        color = this.colors.green.medium\r\n      else {\r\n        color = this.colors.pink.glow\r\n      }\r\n      return {\r\n        background: color, \r\n        border: '.1vw solid ' + this.colors.gray.dark \r\n      }\r\n    },\r\n    button_3() {\r\n      let color = ''\r\n      if (this.isFilterChainRouteActive[2])\r\n        color = this.colors.pink.light\r\n      else {\r\n        color = this.colors.pink.glow\r\n      }\r\n      return {\r\n        background: color, \r\n        border: '.1vw solid ' + this.colors.gray.dark \r\n      }\r\n    },\r\n  },\r\n\r\n  methods: {\r\n\r\n    //--------DRAG AND DROP METHODS--------\r\n    handleDrop(event, target) {\r\n      if (this.modulators[target] === null) {\r\n        let data = JSON.parse(event.dataTransfer.getData(\"data\"));\r\n        //if i'm not trying to link an evelope to volume\r\n        if (!(target === 'vol' && data.type === 'envelope')) {\r\n          //console.log(\"Dropping on \" + target)\r\n          //console.log(data)\r\n          this.modulators[target] = {color: data.color, id: data.id, type: data.type}\r\n          document.dispatchEvent(new CustomEvent(\"link\", {\r\n                detail: {\r\n                  object: this.synth,\r\n                  target: target,\r\n                  color: this.color[target][\"medium\"],\r\n                  modulator: {type: this.modulators[target].type, id: this.modulators[target].id}\r\n                }\r\n              }\r\n          ))\r\n        }\r\n      }\r\n\r\n    },\r\n    handleDragEnter(target) {\r\n      //todo: highlight object when dragging on it\r\n      console.log(\"Dragging over \" + target)\r\n    },\r\n    handleDragLeave(target) {\r\n      console.log(\"Dragging out of \" + target)\r\n    },\r\n    unlinkMod(target) {\r\n      //todo: CALL BACK ENVELOPS TO UNLINK\r\n      document.dispatchEvent(new CustomEvent(\"unLink\", {\r\n            detail: {\r\n              object: this.synth,\r\n              target: target,\r\n              modulator: {type: this.modulators[target].type, id: this.modulators[target].id}\r\n            }\r\n          }\r\n      ))\r\n\r\n      //re-hide link dot\r\n      this.modulators[target] = null;\r\n\r\n    },\r\n    //--------DRAG AND DROP STYLING--------\r\n    computedModulation(target) {\r\n      switch (target) {\r\n        case \"vol\":\r\n          if (this.modulators[target]) {\r\n            return {\r\n              width: \"1vw\",\r\n              height: \"1vw\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: this.modulators[target].color,\r\n              position: \"absolute\",\r\n              right: \"0%\",\r\n            };\r\n          } else {\r\n            return {\r\n              display: \"none\",\r\n              width: \"0%\",\r\n              height: \"0%\",\r\n            }\r\n          }\r\n\r\n        case \"mod\":\r\n          if (this.modulators[target]) {\r\n            return {\r\n              width: \"1vw\",\r\n              height: \"1vw\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: this.modulators[target].color,\r\n              position: \"absolute\",\r\n            };\r\n          } else {\r\n            return {\r\n              display: \"none\",\r\n              width: \"0%\",\r\n              height: \"0%\",\r\n            }\r\n          }\r\n        case \"pitch\":\r\n          if (this.modulators[target]) {\r\n            return {\r\n              width: \"1vw\",\r\n              height: \"1vw\",\r\n              borderRadius: \"50%\",\r\n              backgroundColor: this.modulators[target].color,\r\n              position: \"absolute\",\r\n              left: \"0%\",\r\n              bottom: \"0%\"\r\n            };\r\n          } else {\r\n            return {\r\n              display: \"none\",\r\n              width: \"0%\",\r\n              height: \"0%\",\r\n            }\r\n          }\r\n      }\r\n    },\r\n    computedModText(target) {\r\n      if (this.modulators[target]) {\r\n        return this.modulators[target].id\r\n      } else return \"\";\r\n    },\r\n\r\n\r\n\r\n    //-----------------\r\n    dispose() {\r\n      //unlink linked modulators\r\n      for (let key in this.modulators) {\r\n        if (this.modulators[key])\r\n          this.unlinkMod(key)\r\n      }\r\n\r\n      this.$emit(\"disposed\", this.id)\r\n      this.synth.disconnectDispose()\r\n      this.synths.list.splice(this.synths.list.indexOf(this.synth), 1)\r\n\r\n\r\n      //console.log(\"Synth to remove is at index: \" + this.synths.list.indexOf(this.synth))\r\n      //console.log(\"list of synths remaining:\")\r\n      //console.log(this.synths.list)\r\n    },\r\n    initConnections() {\r\n      this.gainNode.connect(this.filterChains[0][0].getToneFilter())\r\n    },\r\n\r\n    // ----------- GRAPHIC HELPERS -----------\r\n    resizeGraphics() {\r\n      let width = document.body.clientWidth;\r\n      if (width >= 500) {\r\n        this.wave_icon_size = (32 * width) / 1500;\r\n      } else {\r\n        this.wave_icon_size = 0;\r\n      }\r\n    },\r\n\r\n    // ---------- USER EVENTS ---------------\r\n    // Audio routing changed clicking the dots that represent the filter chains\r\n    onChainclick(id) {\r\n      //console.log(\"chain click - id: \" + id);\r\n      try {\r\n        if (this.isFilterChainRouteActive[id]) {\r\n          console.log(\r\n              \"disconnect from: \" +\r\n              this.filterChains[id][0] + \" \" + id\r\n          );\r\n          this.gainNode.disconnect(\r\n              this.filterChains[id][0].getToneFilter()\r\n          );\r\n        } else {\r\n          console.log(\r\n            \"connect to: \" +\r\n            this.filterChains[id][0] + \" \" + id\r\n          );\r\n          this.gainNode.connect(\r\n              this.filterChains[id][0].getToneFilter()\r\n          );\r\n        }\r\n      } catch (e) {\r\n        console.log(\r\n          \"error: \" + e + \"\\nCHAIN CONNECTION TO OSC UNSUCCESSFUL. Can't connect to \" + this.filterChains[id][0]\r\n        );\r\n      }\r\n      this.isFilterChainRouteActive[id] = !this.isFilterChainRouteActive[id];\r\n    },\r\n\r\n    onMouseMove(event) {\r\n      if (this.is_volumeDown) {\r\n        // RIGHT FADER - volume\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving up\r\n          this.volume = Math.max(this.volume + event.movementY / 100, 0);\r\n        } else {\r\n          // Mouse is moving down\r\n          this.volume = Math.min(this.volume + event.movementY / 100, 1);\r\n        }\r\n        // -------------- modify here synth audio ----------------\r\n        // this.synth.volume.value = gainToDb(1 - this.volume);\r\n        this.synth.setParameters({ volume: gainToDb(1 - this.volume) });\r\n        //console.log(\"synth volume: \" + this.volume.toFixed(2) + \" dB\");\r\n      } else if (this.is_modulationDown) {\r\n        // LEFT FADER - modulation\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving down\r\n          this.modulation = Math.max(this.modulation + event.movementY / 100, 0);\r\n        } else {\r\n          // Mouse is moving up\r\n          this.modulation = Math.min(this.modulation + event.movementY / 100, 1);\r\n        }\r\n        // -------------- modify here synth audio ----------------\r\n        // (1- this.modulation) needed because the graphics return a value of 1 for the minimum and 0 for the max\r\n        this.synth.setParameters({modulation: 1 - this.modulation })\r\n        //console.log(\"modulation: \" + (1 -  this.modulation.toFixed(2)));\r\n      } else if (this.is_pitchDown) {\r\n        // BOTTOM FADER - pitch shift\r\n        if (event.movementX < 0) {\r\n          // Mouse is moving right\r\n          this.pitch = Math.min(this.pitch - Math.floor(event.movementX), this.maxPitch);\r\n        } else if (event.movementX > 0) {\r\n          // Mouse is moving left\r\n          this.pitch = Math.max(this.pitch - Math.floor(event.movementX), this.minPitch);\r\n        }\r\n        // ----------- modify here synth audio -------------\r\n        // todo: pitch max a dx e min a sx - meglio il contrario, secondo me - segue possibile ma brutto fix\r\n        // console.log(\"pitch shift: \" + this.pitch * -1)\r\n        // this.synth.set({detune: this.pitch * -100});\r\n        //console.log(\"pitch shift: \" + this.pitch);\r\n        this.synth.setParameters({ transpose: this.pitch });\r\n        // -------------------------------------------------\r\n      }\r\n    },\r\n    onMouseUp(event) {\r\n      if (this.is_modulationDown) this.is_modulationDown = false;\r\n      if (this.is_volumeDown) this.is_volumeDown = false;\r\n      if (this.is_pitchDown) this.is_pitchDown = false;\r\n    },\r\n\r\n    modulationDown(event) {\r\n      if (!this.is_modulationDown) this.is_modulationDown = true;\r\n    },\r\n    volumeDown(event) {\r\n      if (!this.is_volumeDown) this.is_volumeDown = true;\r\n    },\r\n    pitchDown(event) {\r\n      if (!this.is_pitchDown) this.is_pitchDown = true;\r\n    },\r\n\r\n    // ----------- AUDIO -----------\r\n    // Update osc waveform\r\n    nextOscType() {\r\n      // go circularly on along the list osc_types list\r\n      this.oscTypeIndex++;\r\n      if (this.oscTypeIndex >= osc_types.length) this.oscTypeIndex = 0;\r\n\r\n      this.synth.setParameters({ type: osc_types[this.oscTypeIndex] })\r\n\r\n      //console.log(\"osc type: \" + osc_types[this.oscTypeIndex]);\r\n    },\r\n\r\n    nextWaveform() {\r\n      // update selected wavetype changing the current index\r\n      this.oscWaveIndex++;\r\n      if (this.oscWaveIndex >= wave_types.length) this.oscWaveIndex = 0;\r\n\r\n      //console.log(wave_types[this.oscWaveIndex])\r\n      // set new waveform\r\n      this.synth.setParameters({ waveform: wave_types[this.oscWaveIndex] })\r\n    },\r\n\r\n    // set routing\r\n    connect(route) {\r\n      this.synth.connect(route);\r\n    },\r\n  },\r\n\r\n  unmounted() {\r\n    // remove event listeners\r\n    window.removeEventListener(\"resize\", this.resizeGraphics);\r\n    document.removeEventListener(\"mousemove\", this.onMouseMove);\r\n    document.removeEventListener(\"mouseup\", this.onMouseUp);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modDot {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 0.8vw;\r\n  text-align: center;\r\n  box-sizing: border-box;\r\n  border: .06vw solid black;\r\n}\r\n\r\n.main_container {\r\n  border: .1vw solid #c2847b ;\r\n  box-sizing: border-box;\r\n  height: calc(100% / 3);\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.main_container:hover {\r\n  border: .1vw solid #63443e;\r\n  box-sizing: border-box;\r\n  height: calc(100% / 3);\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.osc_container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  flex: 4;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n/*---------- MOD TYPE BUTTON ----------*/\r\n.type_button {\r\n  border: .1vw solid #c2847b;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex: 1;\r\n  height: 100%;\r\n}\r\n.type_button:hover {\r\n  border: .1vw solid #63443e;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex: 1;\r\n  height: 100%;\r\n}\r\n\r\n.type_button .innertext {\r\n  font-size: .8vw;\r\n  writing-mode: vertical-rl;\r\n  text-orientation: upright;\r\n  text-transform: uppercase;\r\n}\r\n\r\n/*--------------- OSC -----------------*/\r\n.osc {\r\n  width: 90%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  display: flex;\r\n  position: relative;\r\n  aspect-ratio: 1/1;\r\n}\r\n\r\n.osc_back {\r\n  margin: auto;\r\n  width: 100%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 1;\r\n}\r\n\r\n.pitch_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 100%, 100% 100%, 100% 72%, 50% 50%, 0% 72%, 0% 100%);\r\n  z-index: 27;\r\n}\r\n\r\n.mod_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 0% 0%, 0% 100%, 50% 50%);\r\n  z-index: 2;\r\n}\r\n\r\n.volume_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 100% 0%, 100% 100%, 50% 50%);\r\n  z-index: 3;\r\n}\r\n\r\n.osc_middle {\r\n  margin: auto;\r\n  height: 95%;\r\n  top: 2.5%;\r\n  left: 2.5%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 25;\r\n}\r\n\r\n.mod_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 0% 0%, 0% 100%, 50% 50%);\r\n  z-index: 27;\r\n}\r\n\r\n.volume_slider {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 0%, 100% 0%, 100% 100%, 50% 50%);\r\n  z-index: 26;\r\n}\r\n\r\n.osc_front {\r\n  margin: auto;\r\n  height: 96%;\r\n  top: 2%;\r\n  left: 2%;\r\n  position: absolute;\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  z-index: 50;\r\n}\r\n\r\n.pitch_area {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  clip-path: polygon(50% 100%,\r\n      100% 100%,\r\n      100% 72%,\r\n      50% 50%,\r\n      0% 72%,\r\n      0% 100%,\r\n      50% 100%);\r\n  z-index: 10;\r\n}\r\n\r\n.pitch_hand {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 40%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n.lineL {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 100%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n\r\n.lineU {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 100%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n.lineR {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  height: 100%;\r\n  width: 100%;\r\n  transform-origin: 0 0;\r\n  z-index: 15;\r\n}\r\n\r\n\r\n.osc_wave {\r\n  display: flex;\r\n  position: relative;\r\n  aspect-ratio: 1;\r\n  width: 45%;\r\n  border-radius: 50%;\r\n  left: 0;\r\n  top: 0;\r\n  z-index: 101;\r\n}\r\n\r\n.osc_wave img {\r\n  position: relative;\r\n  aspect-ratio: 1/1;\r\n  width: 100%;\r\n  left: 0;\r\n  top: 0;\r\n  clip-path: circle(20%);\r\n  z-index: 102;\r\n}\r\n\r\n.draggable {\r\n  position: absolute;\r\n  z-index: 75;\r\n}\r\n\r\n.left {\r\n  width: 50%;\r\n  height: 70%;\r\n  left: 0;\r\n  bottom: 30%;\r\n  background-color: transparent;\r\n}\r\n\r\n.right {\r\n  width: 50%;\r\n  height: 70%;\r\n  background-color: transparent;\r\n  left: 50%;\r\n  bottom: 30%\r\n}\r\n\r\n.low {\r\n  width: 100%;\r\n  height: 30%;\r\n  top: 70%;\r\n  background-color: transparent;\r\n}\r\n\r\n/*------------ CHAIN BUTTONS ------------*/\r\n.chain_buttons {\r\n  border: .1vw solid #c2847b;\r\n  flex: .5;\r\n  display: grid;\r\n  grid-template-rows: .3fr 1fr 1fr 1fr .3fr;\r\n  height: 100%;\r\n  align-items: center;\r\n  padding-left: 3%;\r\n  padding-right: 3%;\r\n}\r\n.chain_buttons:hover {\r\n  border: .1vw solid #63443e;\r\n  flex: .5;\r\n  display: grid;\r\n  grid-template-rows: .3fr 1fr 1fr 1fr .3fr;\r\n  height: 100%;\r\n  align-items: center;\r\n  padding-left: 3%;\r\n  padding-right: 3%;\r\n}\r\n\r\n\r\n.button_1,\r\n.button_2,\r\n.button_3 {\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  border: .1vw solid black;\r\n  border-radius: 50%;\r\n}\r\n</style>","import {Synth, Envelope, Gain, Meter, Frequency, LFO} from 'tone'\r\nimport {nextTick} from 'vue';\r\nimport * as Tone from 'tone'\r\nimport {isProxy, toRaw} from 'vue';\r\n\r\nconst max_partials_num = 50;\r\nconst vol_damp_factor = 0.5;\r\n\r\nexport default class MyPolySynth {\r\n    constructor(synthType = \"\", destination = null, nVoices = 16) {\r\n        console.log(\"CONSTRUCTOR HAS BEEN CALLED\")\r\n\r\n        this.destination = destination;\r\n\r\n\r\n        //data of all modulators that could potentially be linked to the parameters of the synth\r\n        this.modulatorsData = {\r\n            envelope: {\r\n                vol: {\r\n                    amount: 1,\r\n                    parameters: {\r\n                        attack: 1,\r\n                        decay: 0.3,\r\n                        sustain: 0.8,\r\n                        release: 1\r\n                    }\r\n                },\r\n                mod: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        attack: 0.05,\r\n                        decay: 0.1,\r\n                        sustain: 1,\r\n                        release: 0.2\r\n                    }\r\n                },\r\n                pitch: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        attack: 0.05,\r\n                        decay: 0.1,\r\n                        sustain: 1,\r\n                        release: 0.2\r\n                    }\r\n                },\r\n            },\r\n            lfo: {\r\n                vol: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        waveform: \"sine\",\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n                mod: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        waveform: \"sine\",\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n                pitch: {\r\n                    amount: 0,\r\n                    parameters: {\r\n                        frequency: 10,\r\n                        waveform: \"sine\",\r\n                        min: 0,\r\n                        max: 1\r\n                    }\r\n                },\r\n            }\r\n        }\r\n\r\n        //preset with which all voices of polyphony will be created\r\n        this.synthPreset = {\r\n            type: synthType,\r\n            waveform: \"sine\",\r\n            vol: -12,\r\n            transpose: 0,\r\n            mod: 0,\r\n            partials: \"\",\r\n            pan: \"\"\r\n        }\r\n\r\n\r\n        //modulation effect\r\n        //this.crusher = new Tone.BitCrusher(3)\r\n\r\n\r\n        this.dampNode = new Gain(vol_damp_factor);\r\n        //all polyphony voices are connected here\r\n\r\n        //console.log(Tone.dbToGain(this.synthPreset.vol))\r\n        this.gainNode = new Gain(1);\r\n\r\n        //list of polyphony voices\r\n        this.allVoices = [] //always holds reference to all voices\r\n        this.freeVoices = []    //holds reference to free voices\r\n        this.busyVoices = {}    //holds reference to busy voices, key=note, value=voice\r\n        this.nVoices = nVoices  //used to initialize, taken from globalProperties\r\n        this.lastNotes = Array(this.nVoices)  //stores last nVoices played\r\n\r\n        console.log(\"COSTRUTTORE CHIAMATO\")\r\n        //INIT VOICES\r\n        this.initVoices()\r\n        // console.log(this.freeVoices)\r\n\r\n\r\n        // connect gainNode to destination\r\n            this.gainNode.connect(this.dampNode)\r\n            //this.crusher.connect(this.dampNode)\r\n            this.dampNode.connect(this.destination)\r\n    }\r\n\r\n    initVoices() {\r\n        //for each voice\r\n\r\n        for (let index = 0; index < this.nVoices; index++) {\r\n\r\n            //initializing empty modulators matrix\r\n            let modulators = {\r\n                envelope: {\r\n                    vol: {amount: 1, signal: null, scale: null},\r\n                    mod: {amount: 0, signal: null, scale: null},\r\n                    pitch: {amount: 0, signal: null, scale: null},\r\n                },\r\n                lfo: {\r\n                    vol: {amount: 0, signal: null, scale: null},\r\n                    mod: {amount: 0, signal: null, scale: null},\r\n                    pitch: {amount: 0, signal: null, scale: null},\r\n                }\r\n            }\r\n\r\n            let lfoGain = new Gain()\r\n            lfoGain.connect(this.gainNode) //USED TO CONNECT LFO TO VOICE VOLUME\r\n\r\n\r\n            //creating gain and synth\r\n            let gain = new Gain(1).connect(lfoGain)\r\n            //synth is created and initialized with preset parameters\r\n            let synth = this.createSynth()\r\n            synth.oscillator.disconnect()\r\n            synth.oscillator.connect(gain)\r\n\r\n            //disconnect and dispose synth inner envelope\r\n            synth.envelope.disconnect()\r\n            synth.envelope.dispose()\r\n\r\n            //thanks to noiseAdsrGain we can lower to zero the volume of the synth and still hear the noise, bypassing the synth volume\r\n            let noiseAdsrGain = new Gain()  //used to have the same main adsr of synth on the noise too\r\n            let noiseGain = new Gain()\r\n            let noise = new Tone.Noise(\"pink\")\r\n            noise.connect(noiseGain)\r\n            noiseGain.connect(noiseAdsrGain)\r\n            noiseAdsrGain.connect(this.dampNode)\r\n\r\n\r\n\r\n\r\n            let voice = {synth: synth, gain: gain, lfoGain: lfoGain, modulators: modulators, noise: noise, noiseGain: noiseGain, noiseAdsrGain: noiseAdsrGain}\r\n\r\n            //creating and connecting every modulator\r\n            for (let type in modulators) {\r\n                for (let target in modulators[type]) {\r\n                    let tempMod = this.createModulator(type)\r\n                    modulators[type][target].signal = tempMod\r\n                    modulators[type][target].scale = this.createScale(target)\r\n                    this.connectModulator(modulators[type][target], type, target, voice)\r\n                }\r\n            }\r\n            //pushing voice into freeVoices array\r\n            this.freeVoices.push(voice)\r\n            this.allVoices.push(voice)\r\n        }\r\n\r\n        this.initialized = false\r\n        //setting all parameters of modulators\r\n        this.updateModulators();\r\n        this.initialized = true\r\n\r\n        console.log(this.freeVoices)\r\n\r\n    }\r\n\r\n    playNote(note, velocity) {\r\n        //console.log(this.freeVoices)\r\n        if (this.initialized) {\r\n\r\n            this.lastNotes.push(note);\r\n            if (this.lastNotes.length > this.nVoices) {\r\n                this.lastNote = this.lastNotes.shift();\r\n            }\r\n\r\n            //removing first free voice from array\r\n            let voice = this.freeVoices.shift()\r\n            if (!voice) {\r\n                console.log(\"NEW NOTE OVERWRITE: \" + this.lastNote)\r\n                voice = this.busyVoices[this.lastNote]\r\n                delete this.busyVoices[this.lastNote]\r\n            }\r\n            this.busyVoices[note] = voice\r\n\r\n            //trigger attack in each modulator\r\n            for (let type in voice.modulators) {\r\n                for (let target in voice.modulators[type]) {\r\n                    if (voice.modulators[type][target].amount>0 ) {\r\n                    switch (type) {\r\n                        case \"envelope\":\r\n                            //console.log(\"TRIGGERING ATTACK IN \"+type+\" connected to \"+target)\r\n                            //console.log(voice.modulators[type][target].signal)\r\n                            toRaw(voice.modulators[type][target].signal).cancel(Tone.now())\r\n                            toRaw(voice.modulators[type][target].signal).triggerAttack(Tone.now())\r\n                            break;\r\n                        case \"lfo\":\r\n                            toRaw(voice.modulators[type][target]).signal.stop()\r\n                            toRaw(voice.modulators[type][target]).signal.start()\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    }\r\n                }\r\n            }\r\n            voice.synth.oscillator.stop(Tone.now())\r\n            voice.synth.envelope.cancel(Tone.now())\r\n            //trigger attack in synth and noise\r\n            voice.noise.start()\r\n            voice.synth.triggerAttack(note, Tone.now(), velocity / 128)\r\n        }\r\n    }\r\n\r\n    stopNote(note) {\r\n        if (this.initialized) {\r\n            if (this.busyVoices[note]) {\r\n                let voice = this.busyVoices[note]\r\n                delete this.busyVoices[note]\r\n                this.freeVoices.push(voice)\r\n\r\n                //triggerRelease on all envelopes\r\n                for (let type in voice.modulators) {\r\n                    for (let target in voice.modulators[type]) {\r\n                        if (voice.modulators[type][target].signal) {\r\n                            switch (type) {\r\n                                case \"envelope\":\r\n                                    //console.log(\"Triggering release of \"+type+\" with target \"+target)\r\n                                    voice.modulators[type][target].signal.triggerRelease(Tone.now())\r\n                                    break;\r\n                                case \"lfo\":\r\n                                    //lfos are never stopped, just diminished in amount if needed\r\n                                    //fvoice.modulators[type][target].signal.stop()\r\n                                    break;\r\n                                default:\r\n                                    break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                setTimeout(() => {\r\n                    voice.synth.triggerRelease(Tone.now())\r\n                    voice.noise.stop()\r\n                }, this.modulatorsData.envelope.vol.parameters.release * 1000)\r\n            }\r\n        }\r\n    }\r\n\r\n    createSynth() {\r\n        let synth = new Synth()\r\n        //Setting parameters\r\n        nextTick(() => {\r\n            synth.set({\r\n                \"volume\": this.synthPreset.vol,\r\n                \"detune\": this.synthPreset.transpose * 100,\r\n                \"oscillator\": {\r\n                    \"type\": this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials\r\n                }\r\n            })\r\n        })\r\n        //console.log(this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials)\r\n\r\n        return synth\r\n    }\r\n\r\n    createModulator(type) {\r\n        //console.log(\"creating modulator of type: \"+type)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                return new Envelope\r\n            case \"lfo\":\r\n                return new LFO\r\n            default:\r\n                console.log(\"Error creating modulator\")\r\n                return null\r\n        }\r\n    }\r\n\r\n    createScale(target) {\r\n        switch (target) {\r\n            case \"vol\":\r\n                return new Tone.Scale(0, 1);\r\n            case \"mod\":\r\n                return new Tone.Scale(0, 1);\r\n            case \"pitch\":\r\n                return new Tone.Scale(0, 1);\r\n            case \"pan\":\r\n                return new Tone.Scale(0, 1);\r\n            default:\r\n                console.log(\"Error creating scale for target \"+target)\r\n                return null\r\n        }\r\n    }\r\n\r\n    updateModulators() {\r\n        this.allVoices.forEach(voice => {\r\n                for (let type in voice.modulators) {\r\n                    for (let target in voice.modulators[type]) {\r\n                        //update amount from preset\r\n                        voice.modulators[type][target].amount = this.modulatorsData[type][target].amount\r\n                        if (!toRaw(voice.modulators[type][target].signal)) {\r\n                            //IF IT'S STILL NOT CREATED\r\n                            //console.log(\"RECREATING\")\r\n                            voice.modulators[type][target].signal = this.createModulator(type)\r\n                            voice.modulators[type][target].scale = this.createScale(target)\r\n                            this.connectModulator(toRaw(voice.modulators[type][target]), type, target, toRaw(voice))\r\n                            //console.log(voice.modulators[type][target])\r\n                        }\r\n                        this.scaleSetter(voice.modulators[type][target], target)\r\n                        this.modulatorSetter(toRaw(voice.modulators[type][target].signal), type, this.modulatorsData[type][target].parameters)\r\n                    }\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    updateSynths() {\r\n        this.allVoices.forEach(voice => {\r\n            voice.synth.set({\r\n                \"detune\": this.synthPreset.transpose * 100,\r\n                \"oscillator\": {\r\n                    \"type\": this.synthPreset.type + this.synthPreset.waveform + this.synthPreset.partials\r\n                }\r\n            })\r\n            //this.gainNode.set({gain: Tone.dbToGain(this.synthPreset.vol)})\r\n            voice.noiseGain.set({\r\n                gain: this.synthPreset.mod\r\n            })\r\n        });\r\n    }\r\n\r\n    scaleSetter(modulator, target) {\r\n        switch (target) {\r\n            case \"vol\":\r\n                //ENVELOPE FOR VOL SHOULD HAVE SCALE TOO TO CENTER AROUND SELECTED FREQUENCY\r\n                toRaw(modulator.scale).set({\r\n                    min: (Math.max(Tone.dbToGain(this.synthPreset.vol) - modulator.amount,0)),\r\n                    max: (Math.min(Tone.dbToGain(this.synthPreset.vol) + modulator.amount,1)),\r\n                })\r\n\r\n\r\n                break;\r\n            case \"mod\":\r\n                toRaw(modulator.scale).set({\r\n                    min: (Math.max(this.synthPreset.mod - modulator.amount,0)),\r\n                    max: (Math.min(this.synthPreset.mod + modulator.amount,1)),\r\n                })\r\n                break;\r\n            case \"pitch\":\r\n                //TO-DO\r\n                //console.log(\"CHANGING SCALE \")\r\n                //console.log(modulator.scale)\r\n                toRaw(modulator.scale).set({\r\n                    min: ((this.synthPreset.transpose - 24 * modulator.amount) * 100),\r\n                    max: ((this.synthPreset.transpose + 24 * modulator.amount) * 100)\r\n                })\r\n                break;\r\n            case \"pan\":\r\n                //TO-DO\r\n                break;\r\n\r\n            default:\r\n                console.log(\"invalid target to connect modulator to\")\r\n                break;\r\n        }\r\n    }\r\n\r\n    modulatorSetter(modulator, type, parameters) {\r\n        // console.log(\"mypolysynth - modulator setter - parameters: \", toRaw(parameters).waveform)\r\n        if(!toRaw(parameters).waveform) toRaw(parameters).waveform = modulator.type\r\n\r\n        switch (type) {\r\n            case \"envelope\":\r\n                modulator.set({\r\n                    \"attack\": parameters.attack,\r\n                    \"decay\": parameters.decay,\r\n                    \"sustain\": parameters.sustain,\r\n                    \"release\": parameters.release + 0.001,\r\n                })\r\n                //console.log(\"JUST SET PARAMETERS OF\")\r\n                //console.log(modulator)\r\n                //console.log(\"WITH\")\r\n                //console.log(parameters)\r\n                break;\r\n            case \"lfo\":\r\n                //TO-DO\r\n                //console.log(\"PARAMETERS\")\r\n                //console.log(parameters)\r\n                modulator.set({//\r\n                    \"type\": toRaw(parameters).waveform,\r\n                    \"frequency\": toRaw(parameters).frequency\r\n                })\r\n                break;\r\n            default:\r\n                console.log(\"Error setting modulator parameters, invalid args\")\r\n                break;\r\n        }\r\n        // console.log(\"modulator.type: \", modulator.type)\r\n    }\r\n\r\n//have to pass, the modulator (tone), the type (lfo or envelope), the gain linked to the voice, the voice and the target\r\n    connectModulator(modulator, type, target, voice) {\r\n        //console.log(\"connecting\")\r\n        //console.log(modulator)\r\n        //console.log(\"to voice: \")\r\n        //console.log(voice)\r\n        //console.log(\"to target: \" + target)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                switch (target) {\r\n                    case \"vol\":\r\n                        modulator.signal.chain(modulator.scale, voice.gain.gain)\r\n                        //modulator.signal.connect(voice.gain.gain)   //SET MAIN ADSR TO SYNTH GAIN\r\n                        modulator.signal.connect(voice.noiseAdsrGain.gain)      //SET MAIN ADSR TO NOISE GAIN\r\n                        break;\r\n                    case \"mod\":\r\n                        modulator.signal.chain(modulator.scale, voice.noiseGain.gain)\r\n                        break;\r\n                    case \"pitch\":\r\n                        //TO-DO\r\n                        this.scaleSetter(modulator, target)\r\n                        modulator.signal.chain(modulator.scale, voice.synth.detune)\r\n                        break;\r\n                    case \"pan\":\r\n                        //TO-DO\r\n                        break;\r\n                    default:\r\n                        console.log(\"invalid target to connect modulator to\")\r\n                        break;\r\n                }\r\n\r\n                break;\r\n\r\n            case \"lfo\":\r\n                switch (target) {\r\n                    case \"vol\":\r\n                        this.scaleSetter(modulator, target)\r\n                        modulator.signal.chain(modulator.scale, voice.lfoGain.gain)\r\n                        break;\r\n                    case \"mod\":\r\n                        modulator.signal.chain(modulator.scale, voice.noiseGain.gain)\r\n                        break;\r\n                    case \"pitch\":\r\n                        //TO-DO\r\n                        this.scaleSetter(modulator, target)\r\n                        modulator.signal.chain(modulator.scale, voice.synth.detune)\r\n                        break;\r\n                    case \"pan\":\r\n                        //TO-DO\r\n                        break;\r\n                    default:\r\n                        console.log(\"invalid target to connect modulator to\")\r\n                        break;\r\n                }\r\n\r\n                break;\r\n\r\n            default:\r\n                console.log(\"invalid modulator type\")\r\n                break;\r\n        }\r\n    }\r\n\r\n    // setters\r\n    setModulatorParameters(type, target, parameters) {\r\n        //console.log(\"myPolysynth - setModulatorParameters\")\r\n        if (this.initialized) {\r\n            this.modulatorsData[type][target].parameters = parameters\r\n            // console.log(\"New modulatorsData for type \"+type+\" to target \"+target)\r\n            // console.log(this.modulatorsData);\r\n            // console.log(\"params: \" , this.modulatorsData[type][target].parameters,  parameters)\r\n\r\n            this.updateModulators()\r\n            //console.log(\"SETTING\")\r\n            //console.log(this.modulatorsData)\r\n        }\r\n    }\r\n\r\n    setModulatorAmount(type, target, amount) {\r\n        if (this.initialized) {\r\n            this.modulatorsData[type][target].amount = amount\r\n            //console.log(\"setting modulator amount\")\r\n            this.updateModulators()\r\n        }\r\n    }\r\n\r\n    //TO RENAME IN SET SYNTH PARAMETERS\r\n    setParameters({\r\n                      volume = this.synthPreset.vol,\r\n                      modulation = this.synthPreset.mod,\r\n                      transpose = this.synthPreset.transpose,\r\n                      pan = this.synthPreset.pan,\r\n                      type = this.synthPreset.type,\r\n                      waveform = this.synthPreset.waveform\r\n                  }) {\r\n        if (this.initialized) {\r\n            this.synthPreset.vol = volume;\r\n            this.synthPreset.mod = modulation;\r\n            this.synthPreset.transpose = transpose;\r\n            this.synthPreset.pan = pan;\r\n            this.synthPreset.type = type;\r\n            this.synthPreset.waveform = waveform;\r\n            //console.log(this.synthPreset.waveform)\r\n\r\n            this.updateSynths()\r\n            this.updateModulators()\r\n        } else {\r\n            console.log(\"Polysynth not initialized\")\r\n        }\r\n    }\r\n\r\n// connect each voice to the new routing\r\n    connect(route) {\r\n        this.gainNode.connect(route)\r\n    }\r\n\r\n    disconnectDispose() {\r\n        //for each voice\r\n        this.allVoices.forEach(voice => {\r\n            //Disconnect and dispose synth\r\n            voice = toRaw(voice)\r\n            voice.synth.disconnect()\r\n            voice.synth.dispose()\r\n            //Disconnect and dispose gain\r\n            voice.gain.disconnect()\r\n            voice.gain.dispose()\r\n            //Disconnect and dispose modulators\r\n            for (let type in voice.modulators) {\r\n                for (let target in voice.modulators[type]) {\r\n                    if (voice.modulators[type][target].signal) {\r\n                        voice.modulators[type][target].signal.disconnect()\r\n                        voice.modulators[type][target].signal.dispose()\r\n                        voice.modulators[type][target].scale.disconnect()\r\n                        voice.modulators[type][target].scale.dispose()\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        //disconnect and dispose main gainNode\r\n        this.gainNode.disconnect()\r\n        this.gainNode.dispose()\r\n\r\n        //console.log(\"MyPolySynth completely disconnected and disposed\")\r\n    }\r\n}","import { render } from \"./Osc.vue?vue&type=template&id=a2d87af4&scoped=true\"\nimport script from \"./Osc.vue?vue&type=script&lang=js\"\nexport * from \"./Osc.vue?vue&type=script&lang=js\"\n\nimport \"./Osc.vue?vue&type=style&index=0&id=a2d87af4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a2d87af4\"]])\n\nexport default __exports__","import { render } from \"./OscHost.vue?vue&type=template&id=822b82c8&scoped=true\"\nimport script from \"./OscHost.vue?vue&type=script&lang=js\"\nexport * from \"./OscHost.vue?vue&type=script&lang=js\"\n\nimport \"./OscHost.vue?vue&type=style&index=0&id=822b82c8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-822b82c8\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"filterHost\" :style=\"this.filterHost\">\r\n    <template v-for=\"(chain) in this.chainList\" :key=\"chain.id\" :item=\"chain\">\r\n        <FilterChain :ref=\"chain.ref\" :id=\"chain.id\" :color=\"chain.color\" @filterInitialized=\"initConnections()\"/>\r\n       <!-- todo: remove <FilterChain :ref=\"chain.ref\" :id=\"chain.id\" :color=\"chain.color\" @filterInitialized=\"handleFilterInitialized\" /> -->\r\n      </template>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport FilterChain from './FilterChain.vue'\r\nimport * as Tone from \"tone\";\r\nimport { isProxy, toRaw } from \"vue\";\r\n\r\nexport default {\r\n  name: \"FilterHost\",\r\n  components: {\r\n    FilterChain,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      chain_colors: [],\r\n      chainList: [],\r\n      nFilterChains: 3,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.chain_colors = [this.colors.purple.medium, this.colors.green.medium, this.colors.pink.medium]\r\n    for (let index = 0; index < this.nFilterChains; index++) {\r\n      this.chainList.push({ id: index, ref:\"chain\"+index, color: this.chain_colors[index]})\r\n    }\r\n    // console.log(this.filterChains)\r\n  },\r\n  computed: {\r\n    filterHost(){\r\n      return {\r\n        background: this.colors.yellow.glow\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    initConnections(){\r\n      //console.log(\"filter host init connections\")\r\n      for (let key in this.$refs) {\r\n        //console.log(toRaw(this.$refs[key][0]))\r\n        toRaw(this.$refs[key][0]).initConnections()\r\n      }\r\n      this.$emit('filterInitialized')\r\n      //console.log(\"filters initilised\")\r\n      //console.log(\"filters:\")\r\n      //console.log(this.filterChains)\r\n      //console.log(\"fx:\")\r\n      //console.log(this.fxChains)\r\n    }\r\n  }\r\n}\r\n\r\n// access a parameter of a vue component child from its father\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.filterHost {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>","<template>\r\n  <div class=\"filterChain\">\r\n    <div class=\"chainline\" :style=\"this.chainLine\"></div>\r\n    <div class = \"chainDot\" :style=\"this.chainDot\"></div>\r\n    <div class=\"chainHead\" ref=\"chainHead\"></div>\r\n    <template v-for=\"(filter) in this.filterList\" :key=\"filter.id\" :item=\"filter\">\r\n      <Filter :ref=\"filter.ref\" :chainId=\"this.id\" :id=\"filter.id\" :filter_type=\"filter.type\" :chainColor=\"this.color\"\r\n              @filtersMounted=\"this.handleFiltersMounted()\"/>\r\n    </template>\r\n    <div class=\"chainTail\">\r\n      <div></div>\r\n      <div class=\"routing-btn fx_chain_1\" :style=\"fx_chain_1\" @click=\"setRouting(0)\"></div>\r\n      <div class=\"routing-btn fx_chain_2\" :style=\"fx_chain_2\" @click=\"setRouting(1)\"></div>\r\n      <div class=\"routing-btn fx_chain_3\" :style=\"fx_chain_3\" @click=\"setRouting(2)\"></div>\r\n      <div></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// I want to modify a variable of a vue component from its father that is a vue component too\r\nimport Filter from './Filter.vue'\r\nimport {getDestination} from \"tone\";\r\nimport {isProxy, toRaw} from \"vue\";\r\n\r\nconst filterTypes = [\"highpass\", \"peaking\", \"lowpass\"]\r\n\r\nexport default {\r\n  ref: \"FilterChain\",\r\n  components: {\r\n    Filter,\r\n  },\r\n  props: [\"color\", \"id\"],\r\n  data() {\r\n    return {\r\n      filterList: [],\r\n      nFilters: 3,\r\n      isFxChainRouteActive: [true, false, false]\r\n    }\r\n  },\r\n  mounted() {\r\n    //console.log(\"mounting filter chain\" + this.id)\r\n    for (let index = 0; index < this.nFiltersXchain; index++) {\r\n      this.filterList.push({id: index, ref: \"filter\" + index, type: filterTypes[index]})\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    fx_chain_1() {\r\n      let color = ''\r\n      if (this.isFxChainRouteActive[0])\r\n        color = this.colors.purple.light\r\n      else\r\n        color = this.colors.yellow.glow\r\n      return {\r\n        background: color,\r\n        border: '.1vw solid' + this.colors.gray.dark\r\n      }\r\n    },\r\n    fx_chain_2() {\r\n      let color = ''\r\n      if (this.isFxChainRouteActive[1])\r\n        color = this.colors.green.medium\r\n      else\r\n        color = this.colors.yellow.glow\r\n      return {\r\n        background: color,\r\n        border: '.1vw solid' + this.colors.gray.dark\r\n      }\r\n    },\r\n    fx_chain_3() {\r\n      let color = ''\r\n      if (this.isFxChainRouteActive[2])\r\n        color = this.colors.pink.light\r\n      else\r\n        color = this.colors.yellow.glow\r\n      return {\r\n        background: color,\r\n        border: '.1vw solid' + this.colors.gray.dark\r\n      }\r\n    },\r\n    chainLine(){\r\n      return {\r\n        top: '49%',\r\n        left: '5%',\r\n        width: '88%',\r\n        height: '.2vw',\r\n        position:'absolute',\r\n        background: this.$props['color'],\r\n        zIndex:'0',\r\n        borderRadius:'10%'\r\n      }\r\n    },\r\n    chainDot(){\r\n      return {\r\n        top: '45%',\r\n        left: '3.5%',\r\n        height: '10%',\r\n        aspectRatio: '1/1',\r\n        position: 'absolute',\r\n        zIndex: '3',\r\n        background: this.$props['color'],\r\n        borderRadius: '50%',\r\n      }\r\n    }\r\n\r\n  },\r\n\r\n  methods: {\r\n    handleFiltersMounted() {\r\n      if (this.id === this.nFilterChains - 1) {\r\n        this.$emit(\"filterInitialized\")\r\n      }\r\n    },\r\n    // -------- AUDIO -------x\r\n    initConnections() {\r\n      //console.log(\"filter chain init connections\")\r\n      for (let index = 0; index < this.nFiltersXchain - 1; index++) {\r\n        this.filterChains[this.id][index].connect(this.filterChains[this.id][index + 1].getToneFilter());\r\n        //console.log(\"connected \" + this.filterChains[this.id][index] + \" to \" + this.filterChains[this.id][index + 1])\r\n      }\r\n      // connect chain of filters output to chain each chain of effects\r\n      this.filterChains[this.id][this.nFilters - 1].connect(this.fxChains[0][0]); // init connection to first fx chain\r\n      this.isFxChainRouteActive[0] = true;\r\n      /*for (let i = 0; i < this.nFxChains; i++) { // init connection to all chains\r\n        this.filterChains[this.id][this.nFilters - 1].connect(this.fxChains[i][0]);\r\n        this.isFxChainRouteActive[i] = true;\r\n      }*/\r\n    },\r\n\r\n    setRouting(id) {\r\n      console.log(\"chain click - id: \" + id);\r\n      try {\r\n        if (this.isFxChainRouteActive[id]) {\r\n          console.log(\"disconnect from: \" + this.fxChains[id][0] + \" \" + id);\r\n          this.filterChains[this.id][this.nFilters - 1].disconnect(\r\n              this.fxChains[id][0]\r\n          );\r\n        } else {\r\n          console.log(\"connect to: \" + this.fxChains[id][0] + \" \" + id);\r\n          this.filterChains[this.id][this.nFilters - 1].connect(\r\n              this.fxChains[id][0]\r\n          );\r\n        }\r\n      } catch (e) {\r\n        console.log(\r\n            \"error: \" + e + \"\\nCHAIN FILTERS CONNECTION TO FX CHAIN \" + id + \" UNSUCCESSFUL. Can't connect to \" + this.fxChains[id][0]\r\n        );\r\n      }\r\n      this.isFxChainRouteActive[id] = !this.isFxChainRouteActive[id];\r\n    },\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.filter {\r\n  flex: 4;\r\n}\r\n\r\n.filterChain {\r\n  position:relative;\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n\r\n.chainHead {\r\n  flex: 1;\r\n  background-color: transparent;\r\n}\r\n\r\n.chainTail {\r\n  flex: 1;\r\n  display: inline-grid;\r\n  align-items: center;\r\n  justify-items: center;\r\n  flex-direction: column;\r\n  background-color: transparent;\r\n}\r\n\r\n.routing-btn {\r\n  width: 50%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n}\r\n\r\n</style>","<template>\r\n  <div class=\"filter\">\r\n    <div class=\"modDot\" :style=\"computedModulation('filter')\" @click.shift.stop=\"unlinkMod('filter')\"\r\n         v-text=\"computedModText('filter')\"></div>\r\n    <div class=\"filter_back\" ref=\"filter_back\"\r\n         >\r\n\r\n    </div>\r\n    <div class=\"filter_logo\" :style=\"this.filter_logo\" @mousedown=\"logoDown\">\r\n      <div v-if=\"is_logoDown && type != 'peaking'\" class=\"logo_text\">\r\n        {{ ((1 - this.resonance) * 100).toFixed() + \"%\" }}\r\n      </div>\r\n      <div v-if=\"is_logoDown && type == 'peaking'\" class=\"logo_text\">\r\n        {{ ((1 - 2 * this.resonance) * 100).toFixed() + \"%\" }}\r\n      </div>\r\n      <!--<div v-if=\"type==='peaking'\" class=\"logo_BD_mask\" :style=\"computedBDMaks\"></div> -->\r\n      <div class=\"logo_glow\" :style=\"computedGlow\"></div>\r\n\r\n      <div class=\"logo_border\"\r\n           @dragenter=\"handleDragEnter('filter')\" @dragleave=\"handleDragLeave('filter')\"\r\n           @dragenter.prevent @dragover.prevent @drop=\"handleDrop($event, 'filter')\"\r\n      ></div>\r\n      <div class=\"logo\" :style=\"logo\">\r\n        <div v-if=\"is_logoDown\" class=\"logo_text_back\" :style=\"this.logo_text_back\"></div>\r\n        <div\r\n            v-if=\"type === 'lowpass'\"\r\n            class=\"logo_LP\"\r\n            :style=\"computedLP\"\r\n        ></div>\r\n        <div\r\n            v-if=\"type === 'highpass'\"\r\n            class=\"logo_HP\"\r\n            :style=\"computedHP\"\r\n        ></div>\r\n        <div v-if=\"type === 'peaking'\" class=\"logo_BD_back\"></div>\r\n        <div\r\n            v-if=\"type === 'peaking'\"\r\n            class=\"logo_BD_circle\"\r\n            :style=\"computedBDCircle\"\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MyFilter from \"@/views/Synth/Filters/MyFilter\";\r\n\r\nexport default {\r\n  props: [\"filter_type\", \"chainId\", \"chainColor\", \"id\"],\r\n\r\n  data() {\r\n    return {\r\n      color: this.colors.yellow,\r\n      type: this.filter_type,\r\n      cutoff: 0.5,  //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\r\n      resonance: 0.5, //DON'T CHANGE FROM HERE, CHANGE PRESET INSIDE MYFILTER\r\n      is_logoDown: false,\r\n\r\n      modulator: null,\r\n    }\r\n  },\r\n  mounted() {\r\n    // mouse event listeners\r\n    document.addEventListener(\"mousemove\", this.onMouseMove);\r\n    document.addEventListener(\"mouseup\", this.onMouseUp);\r\n\r\n    //console.log(this.$props)\r\n\r\n    // -------------- AUDIO ---------------\r\n    this.filter = new MyFilter(this.type, this.cutoff, this.resonance);\r\n\r\n    this.cutoff = this.filter.getCutoff()\r\n    this.resonance = this.filter.getResonance()\r\n\r\n\r\n    //console.log(this.chainId+\" \"+this.id)\r\n    //Inserting filter in global variable\r\n    this.filterChains[this.chainId][this.id] = this.filter;\r\n\r\n    if (this.id === this.nFiltersXchain - 1 && this.chainId === this.nFilterChains - 1) {\r\n      this.$emit(\"filtersMounted\");\r\n    }\r\n\r\n  },\r\n\r\n  methods: {\r\n    //------------DRAG AND DROP LOGIC---------\r\n    handleDrop(event, target = \"\") {\r\n      if (this.modulator === null) {\r\n        let data = JSON.parse(event.dataTransfer.getData(\"data\"));\r\n        this.modulator = {color: data.color, id: data.id, type: data.type}\r\n        //console.log(\"RECEIVED HANDLEDROP, THIS.MODULATOR=\")\r\n        //console.log(this.modulator)\r\n        document.dispatchEvent(new CustomEvent(\"link\", {\r\n          detail: {\r\n            object: this.filter,\r\n            target: target,\r\n            color: this.color[\"light\"],\r\n            modulator: {type: this.modulator.type, id: this.modulator.id}\r\n          }}\r\n        ))\r\n      }\r\n\r\n    },\r\n    handleDragEnter(target) {\r\n      //todo: highlight object when dragging on it\r\n      console.log(\"Dragging over \" + target)\r\n    },\r\n    handleDragLeave(target) {\r\n      console.log(\"Dragging out of \" + target)\r\n    },\r\n    unlinkMod(target) {\r\n      //todo: CALL BACK ENVELOPS TO UNLINK\r\n      document.dispatchEvent(new CustomEvent(\"unLink\", {\r\n            detail: {\r\n              object: this.filter,\r\n              target: target,\r\n              modulator: {type: this.modulator.type, id: this.modulator.id}\r\n            }\r\n          }\r\n      ))\r\n\r\n      //re-hide link dot\r\n      this.modulator = null;\r\n\r\n    },\r\n    //--------DRAG AND DROP STYLING--------\r\n    computedModulation(target = \"\") {\r\n      if (this.modulator) {\r\n        return {\r\n          width: \"1vw\",\r\n          height: \"1vw\",\r\n          borderRadius: \"50%\",\r\n          backgroundColor: this.modulator.color,\r\n          position: \"absolute\",\r\n          left: \"10%\",\r\n          zIndex: \"1\",\r\n          top: \"10%\",\r\n        };\r\n      } else {\r\n        return {\r\n          display: \"none\",\r\n          width: \"0%\",\r\n          height: \"0%\",\r\n        }\r\n      }\r\n    },\r\n    computedModText(target = \"\") {\r\n      if (this.modulator) {\r\n        return this.modulator.id\r\n      } else return \"\";\r\n    },\r\n\r\n    //------------------------------------\r\n\r\n    // ----------- USER EVENTS -----------\r\n    onMouseMove(event) {\r\n      if (this.is_logoDown) {\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving up\r\n          this.resonance = Math.max(this.resonance + event.movementY / 100, 0);\r\n          //console.log(\"moving up\");\r\n        } else {\r\n          // Mouse is moving down\r\n          this.resonance = Math.min(this.resonance + event.movementY / 100, 1);\r\n        }\r\n        if (event.movementX < 0) {\r\n          // Mouse is moving right\r\n          this.cutoff = Math.max(\r\n              this.cutoff + Math.floor(event.movementX) / 100,\r\n              0\r\n          );\r\n        } else if (event.movementX > 0) {\r\n          // Mouse is moving left\r\n          this.cutoff = Math.min(\r\n              this.cutoff + Math.floor(event.movementX) / 100,\r\n              1\r\n          );\r\n        }\r\n        // ----------- audio ---------\r\n        this.filter.setResonance(this.resonance);\r\n        this.filter.setCutoff(this.cutoff);\r\n      }\r\n    },\r\n\r\n    onMouseUp() {\r\n      if (this.is_logoDown) this.is_logoDown = false;\r\n      document.body.style.cursor = \"pointer\";\r\n    },\r\n    logoDown() {\r\n      if (!this.is_logoDown) {\r\n        this.is_logoDown = true;\r\n        document.body.style.cursor = \"none\";\r\n      }\r\n    },\r\n\r\n    // ----------- AUDIO SETTERS--------------\r\n    setCutoff(cutoff = this.cutoff) {\r\n      this.cutoff = cutoff;\r\n      this.filter.setCutoff(this.cutoff)\r\n    },\r\n\r\n    setResonance(resonance = this.resonance) {\r\n      this.resonance = resonance\r\n      this.filter.setResonance(this.resonance)\r\n    },\r\n\r\n    connect(destination) {\r\n      this.filter.connect(destination);\r\n    },\r\n\r\n    disconnect(destination) {\r\n      this.filter.disconnect(destination)\r\n    },\r\n\r\n    // ------------ GETTERS SETTERS -------------\r\n    getToneFilter() {\r\n      return this.filter.getToneFilter();\r\n    },\r\n\r\n    getMyFilter() {\r\n      return this.filter;\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    computedHeadStyle() {\r\n      return {\r\n        left: 0.7 * this.cutoff * 100 + 13.5 + \"%\",\r\n      };\r\n    },\r\n    computedGlow() {\r\n      if (this.filter_type === \"peaking\" && this.resonance < 0.5) {\r\n        return {\r\n          opacity: 1 - 2 * this.resonance,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      } else if (this.filter_type === \"peaking\" && this.resonance >= 0.5) {\r\n        return {\r\n          opacity: 2 * this.resonance - 1,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      } else {\r\n        return {\r\n          opacity: 1 - this.resonance,\r\n          background: this.colors.yellow.light,\r\n        };\r\n      }\r\n    },\r\n    computedLP() {\r\n      return {\r\n        transform: \"translateX(\" + (-100 + this.cutoff * 100)  + \"%)\",\r\n      };\r\n    },\r\n    computedHP() {\r\n      return {\r\n        transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\r\n      };\r\n    },\r\n    computedBDMaks() {\r\n      let clip = \"\";\r\n      if (this.resonance > 0.5)\r\n        clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\r\n      else if (this.resonance < 0.5)\r\n        clip = \"polygon(0% 50%, 0% 100%, 100% 100%, 100% 50%)\";\r\n      else clip = \"polygon(0% 0%, 100% 0%, 100% 50%, 0% 50%)\";\r\n      return {\r\n        clipPath: clip,\r\n      };\r\n    },\r\n    computedBD() {\r\n      if (1 - this.resonance >= 0.5) {\r\n        return {\r\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\r\n          height: (1 - this.resonance) * 100 + \"%\",\r\n          transform: \"translateX(\" + this.cutoff * 100 + \"%)\",\r\n        };\r\n      } else {\r\n        return {\r\n          //transform: 'translateY(' + (this.resonance > .5 ? -100 + this.resonance * 100 : this.resonance * 100) + '%)',\r\n          height: (1 - this.resonance - 0.5) * 100 + \"%\",\r\n          transform: \"translateX(\" + (this.cutoff - 0.5) * 100 + \"%)\",\r\n        };\r\n      }\r\n    },\r\n    computedBDCircle() {\r\n      return {\r\n        transform:\r\n            \"translate(\" +\r\n            (this.cutoff - 0.5) * 100 +\r\n            \"%, \" +\r\n            (this.resonance - 0.5) * 100 +\r\n            \"%)\",\r\n        //transform: 'translateX('+(this.cutoff-.5)*100+'%)'\r\n      };\r\n    },\r\n    filter_logo() {\r\n      return {\r\n        background: this.colors.yellow.glow\r\n      }\r\n    },\r\n    logo() {\r\n      return {\r\n        background: this.colors.yellow.light\r\n      }\r\n    },\r\n    logo_text_back() {\r\n      return {\r\n        background: this.colors.yellow.light,\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modDot {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 0.8vw;\r\n  text-align: center;\r\n  box-sizing: border-box;\r\n  border: .06vw solid black;\r\n}\r\n.filter {\r\n  position: relative;\r\n  flex: 1;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 4;\r\n}\r\n\r\n.filter_back {\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 80%;\r\n  height: 80%;\r\n  background-color: transparent;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.filter_logo {\r\n  position: absolute;\r\n  display: flex;\r\n  flex: 5;\r\n\r\n  height: 100%;\r\n  top: 0;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  z-index: 0;\r\n  clip-path: circle(50%);\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.logo_border {\r\n  position: absolute;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  z-index: 5;\r\n  border-radius: 50%;\r\n  border: 0.1vw solid #3b210e;\r\n}\r\n\r\n.logo {\r\n  position: absolute;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  z-index: 3;\r\n  clip-path: circle(50%);\r\n}\r\n\r\n.logo_glow {\r\n  position: absolute;\r\n  height: 90%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  z-index: 1;\r\n  filter: blur(0.3vw);\r\n}\r\n\r\n.logo_text {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1vw;\r\n  font-weight: bold;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  color: black;\r\n  opacity: 100%;\r\n  background-color: black;\r\n  z-index: 5;\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.logo_text_back {\r\n  position: absolute;\r\n  z-index: 6;\r\n  left: 15%;\r\n  top: 30%;\r\n  width: 70%;\r\n  height: 40%;\r\n  opacity: 100%;\r\n  border-radius: 10%;\r\n}\r\n\r\n.logo_LP {\r\n  opacity: 60%;\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  border: .1vw solid black;\r\n  background-color: #faf8ef;\r\n  z-index: 1;\r\n}\r\n\r\n.logo_HP {\r\n  opacity: 60%;\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  border: .1vw solid black;\r\n  background-color: #faf8ef;\r\n  z-index: 1;\r\n}\r\n.logo_BD_circle {\r\n  opacity: 60%;\r\n  position: absolute;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  border: .1vw solid black;\r\n  border-radius: 50%;\r\n  background-color: #faf8ef;\r\n  z-index: 5;\r\n}\r\n\r\n.logo_BD_mask {\r\n  opacity: 60%;\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  border: .1vw solid black;\r\n  background-color: #ffebd2;\r\n  z-index: 2;\r\n}\r\n\r\n.logo_BD {\r\n  display: flex;\r\n  position: absolute;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  background-color: white;\r\n  z-index: 1;\r\n}\r\n\r\n.logo_BD_line {\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 4%;\r\n  top: 48%;\r\n  filter: blur(0.02vw);\r\n  border-radius: 30%;\r\n  background-color: #e58138;\r\n  z-index: 5;\r\n}\r\n\r\n\r\n.logo_BD_circle {\r\n  position: absolute;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n\r\n  border-radius: 50%;\r\n  background-color: #faf8ef;\r\n  z-index: 5;\r\n}\r\n</style>","import * as Tone from \"tone\";\r\nimport {Envelope, LFO} from \"tone\";\r\nimport {toRaw} from \"vue\";\r\n\r\nexport default class MyFilter {\r\n    constructor(type = \"peaking\", cutoff = 0.5, resonance = 0.5) {\r\n\r\n        this.filter_type = type;\r\n        this.cutoff = cutoff;\r\n        this.resonance = resonance;\r\n\r\n        this.modulatorsData = {\r\n            envelope: {\r\n                amount: 0,\r\n                parameters: {\r\n                    attack: 1,\r\n                    decay: 0.3,\r\n                    sustain: 0.8,\r\n                    release: 1\r\n                }\r\n            },\r\n            lfo: {\r\n                amount: 0,\r\n                parameters: {\r\n                    frequency: 10,\r\n                    waveform: \"sine\",\r\n                    min: 0,\r\n                    max: 1\r\n                }\r\n            }\r\n        }\r\n\r\n        //to stop moduoators only when there is one left active voice and the note is released\r\n        this.activeNotes=0\r\n\r\n        this.modulators = {\r\n            envelope: {\r\n                signal: this.createModulator(\"envelope\"),\r\n                scale: new Tone.ScaleExp(0, 1, 3),\r\n                amount: 0\r\n            },\r\n            lfo: {\r\n                signal: this.createModulator(\"lfo\"),\r\n                scale: new Tone.ScaleExp(0, 1, 3),\r\n                amount: 0\r\n            }\r\n        }\r\n\r\n        this.filter = new Tone.Filter();\r\n        this.initFilterParams();\r\n\r\n\r\n    }\r\n\r\n    getCutoff() {\r\n        return this.cutoff\r\n    }\r\n\r\n    getResonance() {\r\n        return this.resonance\r\n    }\r\n\r\n    createModulator(type) {\r\n        //console.log(\"creating modulator of type: \"+type)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                return new Envelope\r\n            case \"lfo\":\r\n                return new LFO\r\n            default:\r\n                console.log(\"Error creating modulator\")\r\n                return null\r\n        }\r\n    }\r\n\r\n\r\n    // ----------- AUDIO SETTERS--------------\r\n    initFilterParams() {\r\n        let self = this;\r\n\r\n        // init switched off filters\r\n        switch (this.filter_type) {\r\n            case \"lowpass\":\r\n                this.cutoff = .9;\r\n                this.resonance = 1;\r\n                break;\r\n            case \"highpass\":\r\n                this.cutoff = 0.1;\r\n                this.resonance = 1;\r\n                break;\r\n            case \"peaking\":\r\n                this.cutoff = 0.5;\r\n                this.resonance = 0.5;\r\n                break;\r\n            case \"bandpass\":\r\n                break;\r\n            case \"lowshelf\":\r\n                break;\r\n            case \"highshelf\":\r\n                break;\r\n            case \"notch\":\r\n                break;\r\n            case \"allpass\":\r\n                break;\r\n            default:\r\n                console.log(\"Invalid filter type\");\r\n        }\r\n\r\n        this.filter.set({\r\n            frequency: self.cutoffLogMapping(this.cutoff),\r\n            type: this.filter_type,\r\n        })\r\n\r\n        this.scaleSetter(this.modulators.envelope)\r\n        this.scaleSetter(this.modulators.lfo)\r\n        this.connectModulator(this.modulators.envelope)\r\n        this.connectModulator(this.modulators.lfo)\r\n        this.updateModulators()\r\n\r\n    }\r\n\r\n\r\n    //------------MODULATORS LOGIC----------\r\n\r\n    scaleSetter(modulator, target = \"\") {\r\n        //console.log(modulator)\r\n        toRaw(modulator.scale).set({\r\n\r\n            min: (Math.pow(10, Math.log10(this.cutoffLogMapping(this.cutoff)) - 1 * modulator.amount)),\r\n            max: (Math.pow(10, Math.log10(this.cutoffLogMapping(this.cutoff)) + 1 * modulator.amount)),\r\n        })\r\n\r\n    }\r\n\r\n    connectModulator(modulator) {\r\n        modulator.signal.chain(modulator.scale, this.filter.frequency)\r\n    }\r\n\r\n    setModulatorParameters(type, target, parameters) {\r\n        this.modulatorsData[type].parameters = parameters\r\n        this.updateModulators()\r\n    }\r\n\r\n    setModulatorAmount(type, target, amount) {\r\n        this.modulatorsData[type].amount = amount\r\n        this.updateModulators()\r\n    }\r\n\r\n    updateModulators() {\r\n        for (let type in this.modulators) {\r\n            //update amount from preset\r\n            this.modulators[type].amount = this.modulatorsData[type].amount\r\n            //reset scale\r\n            this.scaleSetter(this.modulators[type])\r\n            //reset modulator\r\n            this.modulatorSetter(toRaw(this.modulators[type].signal), type, this.modulatorsData[type].parameters)\r\n        }\r\n    }\r\n\r\n    modulatorSetter(modulator, type, parameters) {\r\n        if (!toRaw(parameters).waveform) toRaw(parameters).waveform = modulator.type\r\n        switch (type) {\r\n            case \"envelope\":\r\n                modulator.set({\r\n                    \"attack\": parameters.attack,\r\n                    \"decay\": parameters.decay,\r\n                    \"sustain\": parameters.sustain,\r\n                    \"release\": parameters.release + 0.001,\r\n                })\r\n                break;\r\n            case \"lfo\":\r\n                modulator.set({\r\n                    \"type\": toRaw(parameters).waveform,\r\n                    \"frequency\": toRaw(parameters).frequency\r\n                })\r\n                break;\r\n            default:\r\n                console.log(\"Error setting modulator parameters, invalid args\")\r\n                break;\r\n        }\r\n    }\r\n\r\n    playNote(note = \"\", velocity = \"\") {\r\n        //trigger attack in modulators\r\n        this.modulators.envelope.signal.cancel(Tone.now())\r\n        this.modulators.envelope.signal.triggerAttack(Tone.now())\r\n        this.modulators.lfo.signal.stop()\r\n        this.modulators.lfo.signal.start()\r\n        //console.log(\"PLAYED FILTER MODULATORS\")\r\n        this.activeNotes++\r\n    }\r\n    stopNote(note=\"\") {\r\n        if(this.activeNotes<=1){\r\n            this.modulators.envelope.signal.triggerRelease(Tone.now())\r\n            //lfos never stopped\r\n            //this.modulators.lfo.signal.stop()\r\n            //console.log(\"STOPPED FILTER MODULATORS\")\r\n        }\r\n        this.activeNotes--\r\n    }\r\n\r\n\r\n    //--------------------\r\n\r\n\r\n    setCutoff(cutoff = this.cutoff) {\r\n        this.cutoff = cutoff;\r\n        let self = this;\r\n        this.filter.set({\r\n            frequency: self.cutoffLogMapping(this.cutoff),\r\n        });\r\n        /*\r\n        console.log(\r\n            this.filter_type +\r\n            \" cutoff: \" +\r\n            this.cutoff.toFixed(2) +\r\n            \" - \" +\r\n            this.cutoffLogMapping(this.cutoff).toFixed(0) +\r\n            \" Hz\"\r\n        );\r\n\r\n         */\r\n        this.updateModulators()\r\n    }\r\n\r\n    setResonance(resonance = this.resonance) {\r\n        this.resonance = resonance;\r\n        let self = this;\r\n\r\n        if (this.filter_type === \"lowshelf\" || this.filter_type === \"highshelf\" || this.filter_type === \"peaking\") {\r\n            // bell delta amplitude is controlled changing the 'gain' parameter\r\n            this.filter.set({\r\n                gain: self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type),\r\n            });\r\n            /*\r\n            console.log(\r\n                \"Setting Peaking Resonance: \" +\r\n                self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type)\r\n            );\r\n\r\n             */\r\n        } else if (this.filter_type === \"lowpass\" || this.filter_type === \"highpass\") {\r\n            // filter's Q is controlled changing the 'Q' parameter\r\n            this.filter.set({\r\n                Q: self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type),\r\n            });\r\n            /*\r\n            console.log(\r\n                \"Setting LowPass/HighPass Resonance: \" +\r\n                self.resonanceRangeNormalizer(1 - self.resonance, this.filter_type)\r\n            );\r\n\r\n             */\r\n        }\r\n        /*\r\n            console.log(\r\n              \"resonance: \" +\r\n                this.resonance.toFixed(2) +\r\n                \" - \" +\r\n                Math.round(this.resonanceRangeNormalizer((self.resonance), this.type)) +\r\n                \" dB\"\r\n            );\r\n        */\r\n    }\r\n\r\n    connect(destination) {\r\n        try {\r\n            this.filter.connect(destination);\r\n        } catch (err) {\r\n            console.log(\"ERROR: \" + err + \" - myfilter: \", this.filter, \" -connect to destination: \", destination);\r\n        }\r\n    }\r\n\r\n    disconnect(destination) {\r\n        if (destination) {\r\n            this.filter.disconnect(destination)\r\n        } else {\r\n            this.filter.disconnect(destination)\r\n        }\r\n    }\r\n\r\n    getToneFilter() {\r\n        return this.filter;\r\n    }\r\n\r\n    // ----------- AUDIO HELPERS--------------\r\n    // takes value in [0, 1] range and it maps it to [50, 16000] interval in a logarithmic fashion\r\n    cutoffLogMapping(x) {\r\n        if (x < 0 || x > 1) {\r\n            console.error(\"Input value must be between 0 and 1.\");\r\n            return;\r\n        }\r\n        return 20 * Math.pow(10, Math.log10(22000 / 20) * x);\r\n    }\r\n\r\n    // takes value in [0, 1] range and it maps it to [0, 10] linearly\r\n    resonanceRangeNormalizer(x, type) {\r\n        if (x < 0 || x > 1) {\r\n            console.error(\"Input value must be between 0 and 1.\");\r\n            return;\r\n        }\r\n        switch (type) {\r\n            case \"lowpass\":\r\n                return 15 * x;\r\n            case \"highpass\":\r\n                return 15 * x;\r\n            case \"peaking\":\r\n                return 30 * (x - 0.5);\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n}","import { render } from \"./Filter.vue?vue&type=template&id=48ffc09b&scoped=true\"\nimport script from \"./Filter.vue?vue&type=script&lang=js\"\nexport * from \"./Filter.vue?vue&type=script&lang=js\"\n\nimport \"./Filter.vue?vue&type=style&index=0&id=48ffc09b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-48ffc09b\"]])\n\nexport default __exports__","import { render } from \"./FilterChain.vue?vue&type=template&id=b8ee23ec&scoped=true\"\nimport script from \"./FilterChain.vue?vue&type=script&lang=js\"\nexport * from \"./FilterChain.vue?vue&type=script&lang=js\"\n\nimport \"./FilterChain.vue?vue&type=style&index=0&id=b8ee23ec&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b8ee23ec\"]])\n\nexport default __exports__","import { render } from \"./FilterHost.vue?vue&type=template&id=2c1963ee&scoped=true\"\nimport script from \"./FilterHost.vue?vue&type=script&lang=js\"\nexport * from \"./FilterHost.vue?vue&type=script&lang=js\"\n\nimport \"./FilterHost.vue?vue&type=style&index=0&id=2c1963ee&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2c1963ee\"]])\n\nexport default __exports__","<template>\r\n  <div :style=\"this.fxBack\">\r\n  <div class=\"fxHost\" :style=\"this.fxHost\">\r\n\r\n    <div class=\"chainHeadsRow\">\r\n      <div class=\"chainHead \" :style=\"this.chainHead1\"></div>\r\n      <div class=\"chainHead \" :style=\"this.chainHead2\"></div>\r\n      <div class=\"chainHead \" :style=\"this.chainHead3\"></div>\r\n    </div>\r\n    <div class=\"fxGrid\">\r\n      <FxCell v-for=\"(fx) in Fx_chain1\" ref=\"effects\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\"></FxCell>\r\n      <FxCell v-for=\"(fx) in Fx_chain2\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\"></FxCell>\r\n      <FxCell v-for=\"(fx) in Fx_chain3\" :chainId=\"fx.chainId\" :id=\"fx.id\" :item=\"fx\"\r\n              @fxMounted=\"this.initFxConnections()\"></FxCell>\r\n    </div>\r\n    <div class=\"gainList\" :style=\"this.gainList\">\r\n      <div id=\"gain1\" class=\"channelGain\" :style=\"channelGain(0)\" @mousedown=\"gainMouseDown(0)\">\r\n        <div class=\"channelGainFader\" :style=\"computedFxGainKnobStyle(0)\"></div>\r\n      </div>\r\n      <div id=\"gain2\" class=\"channelGain\" :style=\"channelGain(1)\" @mousedown=\"gainMouseDown(1)\">\r\n        <div class=\"channelGainFader\" :style=\"computedFxGainKnobStyle(1)\"></div>\r\n      </div>\r\n      <div id=\"gain3\" class=\"channelGain\" :style=\"channelGain(2)\" @mousedown=\"gainMouseDown(2)\">\r\n        <div class=\"channelGainFader\" :style=\"computedFxGainKnobStyle(2)\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport FxCell from '../Effects/FxCell.vue'\r\nimport {Gain, getDestination} from \"tone\";\r\n\r\nexport default {\r\n  name: \"FxHost\",\r\n  components: {FxCell},\r\n\r\n  data() {\r\n    return {\r\n      Fx_chain1: [],\r\n      Fx_chain2: [],\r\n      Fx_chain3: [],\r\n      isGainSelected: \"\",\r\n      chainsGains: \"\"\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.isGainSelected = Array(this.nFxChains).fill(false)\r\n    this.chainsGains = Array(this.nFxChains).fill(0);\r\n    this.chainsGains[0] = 0.8;\r\n    this.chainsGains[1] = 0.8;\r\n    this.chainsGains[2] = 0.8;\r\n    // note: refs are kept incremental through the chains, while everything else is indexed relatively to the chain\r\n    //console.log(\"creating fx\")\r\n    for (let i = 1; i <= this.nFxXchain; i++) {\r\n      this.Fx_chain1.push({id: i, ref: 'Fx' + i, chainId: 0});\r\n      this.Fx_chain2.push({id: i, ref: 'Fx' + i + this.nFxXchain, chainId: 1});\r\n      this.Fx_chain3.push({id: i, ref: 'Fx' + i + this.nFxXchain * 2, chainId: 2});\r\n      // console.log(i)\r\n    }\r\n\r\n    //console.log(this.fxChains)\r\n    for (let i = 0; i < this.nFxChains; i++) {\r\n      this.fxChains[i][0] = new Gain(1);\r\n      this.fxChains[i][this.nNodesXfxChain-1] = new Gain(+this.chainsGains[i]);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // -------------------- AUDIO -----------------------\r\n    initFxConnections() {\r\n      //console.log(this.fxChains)\r\n      for (let i = 0; i < this.nFxChains; i++) {\r\n        // structure: Gain Filter Filter Filter Filter Filter Gain [7]\r\n        for (let j = 0; j < this.nNodesXfxChain-2; j++) {\r\n          //console.log(\"i: \", i, \"j: \", j)\r\n          this.fxChains[i][j].connect(this.fxChains[i][j + 1].getToneReference())\r\n          // console.log(\"chain \", i ,\" id: \", j, \" into chain \", i , \" id: \", j+1)\r\n        }\r\n        // connect last filter to volume\r\n        this.fxChains[i][this.nNodesXfxChain-2].connect(this.fxChains[i][this.nNodesXfxChain-1])\r\n        // connect vol to destination\r\n        this.fxChains[i][this.nNodesXfxChain-1].connect(getDestination())\r\n        // console.log(\"chain \", i, \" id: \", this.nFxXchain-1, \" into getDestination()\")\r\n      }\r\n    },\r\n\r\n    // first node of each chain is a gain node - we set its volume to adjust whole chain gain\r\n    setChainVolume(chainId, volume) {\r\n      this.fxChains[chainId][this.nNodesXfxChain-1].gain = volume;\r\n\r\n    },\r\n\r\n    // --------------------  GESTURE -----------------------\r\n    gainMouseDown(gainId) {\r\n      this.isGainSelected[gainId] = true;\r\n      // console.log(\"fx gainMouseDown\")\r\n    },\r\n\r\n    handleMouseUp(e) {\r\n      //Actions to execute when mouseup happens on any part of the screen\r\n      this.isGainSelected.fill(false)\r\n      // console.log(\"fx gainMouseUP\")\r\n\r\n    },\r\n    handleMouseMove(e) {\r\n      this.isGainSelected.forEach((isSelected, index) => {\r\n        // console.log(\"fx gain vol knob mouse drag\")\r\n        if (isSelected) {\r\n          //console.log(\"fx gain vol knob mouse drag of \", isSelected);\r\n          this.chainsGains[index] = this.chainsGains[index] - Math.floor(e.movementY) / 100;\r\n          this.chainsGains[index] = Math.max(this.chainsGains[index], 0);\r\n          this.chainsGains[index] = Math.min(this.chainsGains[index], 1);\r\n          //console.log(this.chainsGains[index])\r\n          //console.log(this.fxChains[index][0])\r\n          this.fxChains[index][this.nNodesXfxChain-1].set({\r\n            gain: this.chainsGains[index]\r\n          })\r\n        }\r\n      })\r\n    },\r\n    computedFxGainKnobStyle(id) {\r\n      let color = ''; \r\n      if(id === 0) color = this.colors.purple.medium\r\n      if(id === 1) color = this.colors.green.medium\r\n      if(id === 2) color = this.colors.pink.medium\r\n      return {\r\n        height: 100 * this.chainsGains[id] + \"%\",\r\n        top: 50 * (1-this.chainsGains[id]) + \"%\",\r\n        left: 50 * (1-this.chainsGains[id]) + \"%\",\r\n      \r\n        background: color,\r\n      }\r\n    },\r\n    channelGain(id) {\r\n      let color = ''\r\n      if(id == 0) color = this.colors.purple.glow\r\n      if(id == 1) color = this.colors.green.glow\r\n      if(id == 2) color = this.colors.pink.glow\r\n      return {\r\n        background: color,\r\n      }\r\n    }\r\n  },\r\n\r\n  computed : {\r\n\r\n    fxHost(){\r\n      return {\r\n        background: this.colors.orange.glow,\r\n        border: '.1vw solid '+this.colors.orange.dark,\r\n        boxSizing: 'border-box'\r\n      }\r\n    },\r\n    gainList(){\r\n      return {\r\n        background: this.colors.orange.light,\r\n        borderTop: '.1vw solid '+this.colors.orange.dark,\r\n        boxSizing: 'border-box',\r\n        height: '100%'\r\n      }\r\n    },\r\n    chainHead1(){\r\n      return {\r\n        background: this.colors.purple.light\r\n      }\r\n    },\r\n    chainHead2(){\r\n      return {\r\n        background: this.colors.green.medium\r\n      }\r\n    },\r\n    chainHead3(){\r\n      return {\r\n        background: this.colors.pink.light\r\n      }\r\n    },\r\n    fxBack(){\r\n      return {\r\n        position: 'relative',\r\n        height: '100%',\r\n        width: '100%',\r\n        background: this.colors.orange.light\r\n      }\r\n    }\r\n    \r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n  .fxHost{\r\n    display: grid;\r\n    margin: .3vw;\r\n    height: calc(100% - .6vw);\r\n    border-radius: 1%;\r\n    opacity: 90%;\r\n    grid-template-columns: 1fr;\r\n    grid-template-rows: 10% 70% 20%;\r\n    justify-content: center;\r\n    align-items: center;\r\n  }\r\n  .fxGrid{\r\n    justify-content: center;\r\n    align-items: center;\r\n    justify-items: stretch;\r\n    height: 100%;\r\n    width: 100%;\r\n    flex: 1;\r\n    display: grid;\r\n    grid-column: auto;\r\n    grid-template-rows:  1fr 1fr 1fr 1fr 1fr ;\r\n    grid-template-columns: 1fr 1fr 1fr;\r\n    grid-auto-flow: column;\r\n    box-sizing: border-box;\r\n  }\r\n\r\n  .gainList{\r\n    width: 100%;\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    flex-direction: row;\r\n  }\r\n\r\n.channelGainFader {\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  left: 50%;\r\n  top: 50%;\r\n  aspect-ratio: 1;\r\n  border-radius: 50%;\r\n  align-self: center;\r\n}\r\n\r\n.channelGain {\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  align-content: center;\r\n  height: 70%;\r\n  aspect-ratio: 1/1;\r\n  border-radius: 50%;\r\n  border: 0.06vw solid black;\r\n}\r\n\r\n.chainHeadsRow {\r\n  height: 60%;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  align-items: center;\r\n  flex-direction: row;\r\n  background-color: transparent;\r\n  margin-top: 2%;\r\n  box-sizing: border-box;;\r\n  border: 0;\r\n}\r\n\r\n\r\n  .chainHead {\r\n    height: 50%;\r\n    aspect-ratio: 1/1;\r\n    border: 0;\r\n    clip-path: circle(50%)\r\n  }\r\n\r\n  .head1 {\r\n    background-color: red;\r\n  }\r\n  .head2 {\r\n    background-color: green;\r\n  }\r\n  .head3 {\r\n    background-color: blue;\r\n  }\r\n</style>","<template>\r\n  <div class=\"cell\" @click=\"nextFx\" @click.shift=\"setToBypass\" @mousedown=\"fxDown\">\r\n    <div class=\"icon\">\r\n      <div v-if=\"this.typeId === 0\" ref=\"plus\" :style=\"this.iconDiv\" @mouseover=\"this.onIconEnter\" @mouseout=\"onIconLeave\"> +</div>\r\n      <img v-if=\"this.typeId === 1\" src=\"@/icons/blizzard.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 2\" src=\"@/icons/drop.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 3\" src=\"@/icons/fire.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 4\" src=\"@/icons/moon.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 5\" src=\"@/icons/wind.svg\" alt=\"\">\r\n      <img v-if=\"this.typeId === 6\" src=\"@/icons/tornado.svg\" alt=\"\">\r\n    </div>\r\n    <div class=\"glow\" :style=\"computedGlowStyle\" @mousedown=\"fxDown\">\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { isSVGTag } from '@vue/shared';\r\nimport MyEffect from \"@/views/Synth/Effects/MyFx\";\r\nimport {Gain, getDestination} from \"tone\";\r\nimport { nextTick } from \"vue\";\r\n\r\nconst types = ['none', 'reverb', 'delay', 'distortion', 'vibrato', 'pan', 'chorus'];\r\nconst Fx_colors = ['transparent', 'lightblue', 'deepskyblue', 'red', 'orange', 'darkorchid', 'yellow'];\r\nexport default {\r\n  props: [\"chainId\", \"id\", \"ref\"],\r\n\r\n  data() {\r\n    return {\r\n      modulation: 0,\r\n      is_down: false,\r\n      typeId: 0,\r\n      volume: 0,\r\n\r\n      //variables to solve\r\n      //dragging and clicking interference\r\n      startX: 0,\r\n      startY: 0,\r\n      endX: 0,\r\n      endY: 0,\r\n      threshold: 2, // adjust as needed\r\n    };\r\n  },\r\n  mounted() {\r\n    // gesture listeners\r\n    document.addEventListener(\"mouseup\", this.onMouseup);\r\n    document.addEventListener(\"mousemove\", this.onMousemove);\r\n    // init effect as bypass (a gain node)\r\n    this.effect = new MyEffect({ typeId: types[this.typeId], modulation: this.modulation })\r\n    // this.effect = this.fxHelper.generateToneFx('none');\r\n    // create the effect in the global fx matrix\r\n    this.fxChains[this.chainId][this.id] = this.effect;\r\n    // console.log(\"fx chain: \" + this.chainId + \" - fx id: \" + this.id)\r\n    // console.log(this.chainId, \" \", this.id)\r\n\r\n    // notify parent that each filter has been created\r\n    if (this.chainId === this.nFxChains - 1 && this.id === this.nFxXchain) {\r\n      this.$emit(\"fxMounted\")\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    computedGlowStyle() {\r\n      return {\r\n        opacity: (this.modulation + 0.3) * 100 + \"%\",\r\n        background: Fx_colors[this.typeId]\r\n      }\r\n    },\r\n    iconDiv() {\r\n      let color = 'black'\r\n      if (this.chainId === 0) color = this.colors.purple.medium\r\n      if (this.chainId === 1) color = this.colors.green.medium\r\n      if (this.chainId === 2) color = this.colors.pink.medium\r\n      return {\r\n        color: color,\r\n      }\r\n    },\r\n    iconDivBlack(){\r\n      let color = 'black'\r\n      return {\r\n        color: color,\r\n      }\r\n    },\r\n    onIconEnter() {\r\n      this.$refs['plus'].style.color = 'black'\r\n    },\r\n    onIconLeave() {\r\n      let color = 'black'\r\n      if (this.chainId === 0) color = this.colors.purple.medium\r\n      if (this.chainId === 1) color = this.colors.green.medium\r\n      if (this.chainId === 2) color = this.colors.pink.medium\r\n      this.$refs['plus'].style.color = color\r\n    }\r\n    /*     onIconLeave(){\r\n          let color = 'black'\r\n          if(this.chainId === 0 ) color = this.colors.purple.medium\r\n          if(this.chainId === 1 ) color = this.colors.green.medium\r\n          if(this.chainId === 2 ) color = this.colors.pink.medium\r\n          this.$refs['plus'].style.color = color\r\n        } */\r\n  },\r\n\r\n  components: { isSVGTag },\r\n\r\n  methods: {\r\n    // ------------------ USER INTERACTIONS -----------------------\r\n    nextFx() {\r\n      //calculate distance between mouseDown and mouseUp, if it is more than threshold pixels, then it is a drag\r\n      const distance = Math.sqrt(\r\n        Math.pow(this.endX - this.startX, 2) +\r\n        Math.pow(this.endY - this.startY, 2)\r\n      );\r\n\r\n      if (distance <= this.threshold) {\r\n        if (!this.is_down) {\r\n          // change fx type and index\r\n          this.typeId = this.generateNextTypeIndex();\r\n          let fxType = types[this.typeId]\r\n          console.log(fxType)\r\n\r\n          this.changeFxType(fxType)\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n    changeFxType(fxType) {\r\n      // disconnect old effect\r\n      this.effect.disconnect();\r\n      this.effect.dispose();\r\n\r\n      // create new effect\r\n      this.effect = new MyEffect({ type: fxType, modulation: this.modulation })\r\n      this.effect.setFxParams({ type: fxType, mod: this.modulation })\r\n\r\n      // attach new fx in the global fx matrix\r\n      // init effect\r\n      this.fxChains[this.chainId][this.id] = this.effect;\r\n      // connect effect\r\n      this.fxChains[this.chainId][this.id-1].connect(this.fxChains[this.chainId][this.id].getToneReference());\r\n      if(this.fxChains[this.chainId][this.id+1] instanceof MyEffect) {\r\n        this.fxChains[this.chainId][this.id].connect(this.fxChains[this.chainId][this.id + 1].getToneReference())\r\n      } else if(this.fxChains[this.chainId][this.id+1] instanceof Gain){\r\n        this.fxChains[this.chainId][this.id].connect(this.fxChains[this.chainId][this.id + 1])\r\n      }\r\n      //console.log(this.fxChains)\r\n\r\n      /* // debug global fx matrix\r\n      this.fxChains.forEach((chain) => {\r\n        chain.forEach((fx) => {\r\n          if (fx instanceof MyEffect){\r\n            console.log(fx.getToneReference())\r\n          } else { console.log(fx) }\r\n        })\r\n      })*/\r\n    },\r\n\r\n    generateRandomTypeIndex() {\r\n      return Math.round(Math.random() * 10 + 1) % types.length\r\n    },\r\n\r\n    generateNextTypeIndex() {\r\n      return (this.typeId + 1) % types.length;\r\n    },\r\n\r\n    setToBypass() {\r\n      this.typeId = 0;\r\n      this.changeFxType('none')\r\n\r\n      console.log(\"set fx in position \" + this.chainId + \" - \" + this.id + \" to bypass\")\r\n    },\r\n\r\n    fxDown(e) {\r\n      //save mouseDown position\r\n      this.startX = e.clientX;\r\n      this.startY = e.clientY;\r\n\r\n      if (!this.is_down)\r\n        this.is_down = true;\r\n    },\r\n    onMouseup(e) {\r\n      //save mouseUp position\r\n      this.endX = e.clientX;\r\n      this.endY = e.clientY;\r\n      if (this.is_down)\r\n        this.is_down = false;\r\n    },\r\n    onMousemove(event) {\r\n      if (this.is_down) {\r\n        if (event.movementY < 0) {\r\n          this.modulation = Math.min(this.modulation - event.movementY / 100, 1);\r\n        } else {\r\n          this.modulation = Math.max(this.modulation - event.movementY / 100, 0);\r\n        }\r\n        this.effect.setFxParams({ fx: this.effect, typeId: this.typeId, mod: this.modulation })\r\n\r\n        // console.log(this.modulation);\r\n      }\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.cell {\r\n  position: relative;\r\n  height: 85%;\r\n  background-color: transparent;\r\n  display: flex;\r\n  margin: 10%;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.icon {\r\n  display: flex;\r\n  aspect-ratio: 1/1;\r\n  position: absolute;\r\n  z-index: 2;\r\n  background-color: transparent;\r\n}\r\n\r\n.icon div {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1.5vw;\r\n  height: 100%;\r\n  aspect-ratio: 1/1;\r\n  background-color: transparent;\r\n}\r\n\r\n.icon img {\r\n  width: 1.5vw;\r\n  aspect-ratio: 1/1;\r\n  opacity: 80%;\r\n  -webkit-user-drag: none;\r\n}\r\n\r\n.glow {\r\n  border-radius: 5%;\r\n  flex: 1;\r\n  height: 100%;\r\n  width: 100%;\r\n  position: absolute;\r\n  z-index: 1;\r\n  background-color: red;\r\n}\r\n\r\n.glow div {\r\n  height: 100%;\r\n  width: 100%;\r\n  opacity: 100%;\r\n  color: black;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 2vw;\r\n}\r\n</style>","import {Chorus, Distortion, Envelope, Gain, LFO, Panner, PingPongDelay, Reverb, Vibrato} from 'tone'\r\nimport {nextTick} from \"vue\";\r\n\r\nexport default class MyEffect {\r\n    constructor({ type = \"none\", modulation = 0 }) {\r\n        this.type = type;\r\n        this.mod = modulation;\r\n        this.effect = this.generateToneFx(type)\r\n\r\n        this.modulatorsPreset = {\r\n            envelope: {\r\n                mod: { amount: 0, signal: null },\r\n            },\r\n            lfo: {\r\n                mod: { amount: 0, signal: null },\r\n            }\r\n        }\r\n    }\r\n\r\n    // getters\r\n    getToneReference(){\r\n        return this.effect;\r\n    }\r\n\r\n    // creator\r\n    generateToneFx(type) {\r\n        let effect;\r\n        // console.log(\"fx gen type: \" + type)\r\n        switch (type) {\r\n            case 0:\r\n            case 'none':\r\n                effect = new Gain();\r\n                break;\r\n            case 1:\r\n            case 'reverb':\r\n                effect = this.createReverb()\r\n                break;\r\n            case 2:\r\n            case 'delay':\r\n                effect = this.createDelay()\r\n                break;\r\n            case 3:\r\n            case 'distortion':\r\n                effect = this.createDistortion()\r\n                break;\r\n            case 4:\r\n            case 'vibrato':\r\n                effect = this.createVibrato()\r\n                break;\r\n            case 5:\r\n            case 'pan':\r\n                effect = this.createPan()\r\n                break;\r\n            case 6:\r\n            case 'chorus':\r\n                effect = this.createChorus()\r\n                break;\r\n            default:\r\n                effect = new Gain();\r\n        }\r\n        // console.log(effect)\r\n        this.setFxParams({ effect: effect, type: type })\r\n        return effect;\r\n    }\r\n\r\n    // setters\r\n    // general setter\r\n    setFxParams({ effect = this.effect, type = this.type, mod = this.mod }) {\r\n        this.effect = effect;\r\n        this.type = type;\r\n        this.mod = mod;\r\n        // console.log(\"effect = \"+ this.effect,\" type = \" + this.type, \"mod = \" + this.mod)\r\n\r\n        switch (type) {\r\n            case 1: // reverb\r\n            case 'reverb':\r\n                this.effect.set({\r\n                    decay: 0.1 + 5*mod,\r\n                    wet: 0.3 + 0.7*mod,\r\n                })\r\n                break;\r\n            case 2: // delay\r\n            case 'delay':\r\n                this.effect.set({\r\n                    delayTime: 0.05 + 0.4*mod,\r\n                    feedback: 0.05 + 0.90*mod,\r\n                    wet: 0.3 + 0.7*mod,\r\n                })\r\n                break;\r\n            case 3: // distortion\r\n            case 'distortion':\r\n                this.effect.set({\r\n                    distortion: 0.05 + 0.95*mod,\r\n                    wet: 0.4 + 0.6*mod,\r\n                })\r\n                break;\r\n            case 4: // vibrato\r\n            case 'vibrato':\r\n                this.effect.set({\r\n                    depth: 0.5 + 0.5*mod,\r\n                    frequency: 1 + 20*mod,\r\n                    wet: 0.5 + 0.5*mod\r\n                })\r\n                break;\r\n            case 5: // pan\r\n            case 'pan':\r\n                let coeff = -1 + (2*mod)\r\n                this.effect.set({\r\n                    pan: coeff,\r\n                    wet: 1,\r\n                })\r\n                console.log(\"pan coeff: \" + coeff.toFixed(2))\r\n                break;\r\n            case 6: // chorus\r\n            case 'chorus':\r\n                this.effect.set({\r\n                    depth: 0.6 + mod*0.4,\r\n                    frequency: 30 + mod*10,\r\n                    spread: 80 * mod*8,\r\n                    wet: 1,\r\n                    feedback: 0.05 + mod*0.9,\r\n                    type: \"triangle\" + (mod*10).toFixed(0).toString(),\r\n                    delayTime: 100 + mod*90,\r\n                })\r\n                break;\r\n            default:\r\n                this.effect = new Gain();\r\n        }\r\n    }\r\n\r\n    // -------------- FX CREATION -------------\r\n    createReverb(){\r\n        return new Reverb();\r\n    }\r\n    createDelay() {\r\n        //todo: not interesting effect if used like this\r\n        return new PingPongDelay();\r\n    }\r\n    createDistortion(){\r\n        return new Distortion();\r\n    }\r\n    createVibrato(){\r\n        return new Vibrato();\r\n    }\r\n    createPan(){\r\n        // todo: create LFO modulating width\r\n        return new Panner();\r\n    }\r\n    createChorus(){\r\n        return new Chorus();\r\n    }\r\n\r\n    // TODO:  ------------- MODULATION ------------\r\n\r\n    createModulator(type) {\r\n        //console.log(\"creating modulator of type: \"+type)\r\n        switch (type) {\r\n            case \"envelope\":\r\n                return new Envelope;\r\n            case \"lfo\":\r\n                return new LFO;\r\n            default:\r\n                console.log(\"Error creating modulator\");\r\n                return null;\r\n        }\r\n    }\r\n\r\n    modulatorSetter(modulator, type, parameters) {\r\n        switch (type) {\r\n            case \"envelope\":\r\n                modulator.set({\r\n                    \"attack\": parameters.attack,\r\n                    \"decay\": parameters.decay,\r\n                    \"sustain\": parameters.sustain,\r\n                    \"release\": parameters.release\r\n                })\r\n                break;\r\n            case \"lfo\":\r\n                //TO-DO\r\n                modulator.set({\r\n\r\n                })\r\n                break;\r\n            default:\r\n                console.log(\"Error setting modulator parameters, invalid args\")\r\n                break;\r\n        }\r\n    }\r\n    setModulatorParameters(type, target, parameters) {\r\n        // console.log(\"MyFx setModulatorParameters\")\r\n        if (this.initialized) {\r\n            this.modulatorsData[type][target].parameters = parameters\r\n            this.updateModulators()\r\n        }\r\n    }\r\n\r\n    // have to pass, the modulator (tone), the type (lfo or envelope), the gain linked to the voice, the voice and the target\r\n    connectModulator(modulator, type, gain, target) {\r\n        switch (type) {\r\n            case \"envelope\":\r\n                break;\r\n\r\n            case \"lfo\":\r\n                //TO-DO\r\n                break;\r\n\r\n            default:\r\n                console.log(\"invalid modulator type\")\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    // ------------- TONE JS EXTENSIONS -----------\r\n    connect(route){\r\n        this.effect.connect(route);\r\n    }\r\n    disconnect(){\r\n        this.effect.disconnect();\r\n    }\r\n    dispose(){\r\n        this.effect.dispose();\r\n    }\r\n}\r\n","import { render } from \"./FxCell.vue?vue&type=template&id=63415296&scoped=true\"\nimport script from \"./FxCell.vue?vue&type=script&lang=js\"\nexport * from \"./FxCell.vue?vue&type=script&lang=js\"\n\nimport \"./FxCell.vue?vue&type=style&index=0&id=63415296&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-63415296\"]])\n\nexport default __exports__","import { render } from \"./FxHost.vue?vue&type=template&id=1dd12caa&scoped=true\"\nimport script from \"./FxHost.vue?vue&type=script&lang=js\"\nexport * from \"./FxHost.vue?vue&type=script&lang=js\"\n\nimport \"./FxHost.vue?vue&type=style&index=0&id=1dd12caa&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1dd12caa\"]])\n\nexport default __exports__","<template>\r\n    <div class=\"toolsHost\" :style=\"this.toolsHost\">\r\n        <SpecAnalyzer />\r\n        <Oscilloscope ref=\"oscilloscope\"/>\r\n        <Meter/>\r\n    </div>\r\n</template>\r\n<!-- ./Tools/Meter.vue../Meter.vue -->\r\n<script>\r\n    import * as Tone from \"tone\";\r\n    import Meter from './Meter.vue'\r\n    import Oscilloscope from './Oscilloscope.vue'\r\n    import SpecAnalyzer from './SpecAnalyzer.vue'\r\n    export default {\r\n    name: \"ToolsHost\",\r\n    components: {\r\n        Meter,\r\n        Oscilloscope,\r\n        SpecAnalyzer\r\n    },\r\n    data() {\r\n        return {\r\n\r\n        }\r\n    },\r\n    mounted() {\r\n\r\n    },\r\n    beforeDestroy() {\r\n    },\r\n\r\n    methods: {\r\n        setOscilloscopeTiming(note){\r\n            let mseconds = (1/Tone.Frequency(note))*1000;\r\n            this.$refs[\"oscilloscope\"].setTiming(mseconds)\r\n        }\r\n\r\n    },\r\n    computed: {\r\n        toolsHost(){\r\n            return{\r\n                background: this.colors.green.light\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    .toolsHost{\r\n        display: grid;\r\n        grid-template-rows: 40% 40% 20%;\r\n    }\r\n</style>","<template>\r\n  <div class=\"meter\" :style=\"this.Meter\">\r\n    <div class=\"signalSum\">\r\n      <div ref=\"left\" class=\"signal\" :style=\"computedWidthLeft\"></div>\r\n      <div></div>\r\n      <div ref=\"right\" class=\"signal\" :style=\"computedWidthRight\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Meter } from \"tone\";\r\nimport { dbToGain, gainToDb } from \"tone\";\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      widthLeft: 0,\r\n      widthRight: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    computedWidthLeft() {\r\n      return { width: `${this.widthLeft}%` , background: this.colors.green.medium};\r\n    },\r\n    computedWidthRight() {\r\n      return { width: `${this.widthRight}%` , background: this.colors.green.medium};\r\n    },\r\n    Meter(){\r\n      return{\r\n        background: this.colors.green.glow,\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.meter = new Meter({channels: 2});\r\n    Tone.getDestination().connect(this.meter);\r\n    this.intervalId = setInterval(() => {\r\n      this.updateWidths();\r\n    }, 25);\r\n  },\r\n  \r\n  methods: {\r\n    updateWidths() {\r\n      //this.volume = this.meter.getValue();\r\n      [ this.leftVolume , this.rightVolume ] = this.meter.getValue();\r\n      if (!isFinite(this.leftVolume) && !isFinite(this.rightVolume)) return;\r\n      //console.log(this.meter.getValue()); \r\n      this.widthLeft = Math.min(dbToGain(this.leftVolume) * 100,100);\r\n      this.widthRight = Math.min(dbToGain(this.rightVolume) * 100,100);\r\n    },\r\n  },\r\n  beforeDestroy() {\r\n    this.meter.stop();\r\n    this.meter.dispose();\r\n    clearInterval(this.intervalId);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.meter {\r\n  grid-row: 3;\r\n  border-radius: 0.2vw;\r\n  margin: 0vw 0.3vw 0.3vw;\r\n  display: flex;\r\n  border: 0.1vw solid #334030;\r\n}\r\n.signal {\r\n  height: 100%;\r\n  border-radius: 0.05vw;\r\n}\r\n.signalSum {\r\n  margin: 0.3vw;\r\n  display: grid;\r\n  grid-template-rows: 45% 10% 45%;\r\n  width: 100%;\r\n}\r\n</style>","import { render } from \"./Meter.vue?vue&type=template&id=c5d289ba&scoped=true\"\nimport script from \"./Meter.vue?vue&type=script&lang=js\"\nexport * from \"./Meter.vue?vue&type=script&lang=js\"\n\nimport \"./Meter.vue?vue&type=style&index=0&id=c5d289ba&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c5d289ba\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"oscilloscope\">\r\n    <canvas ref=\"canvas\" class=\"oscilloscopeCanvas\" :style=\"this.oscilloscopeCanvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      oscilloscopeData: [],\r\n      timing: 10,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.oscilloscope = new Tone.Waveform();\r\n    Tone.getDestination().connect(this.oscilloscope);\r\n    this.startOscilloscope();\r\n\r\n    // use the ref to get the canvas element\r\n    this.canvas = this.$refs.canvas;\r\n\r\n    // set the canvas width and height to 100%\r\n    this.canvas.width = 4*this.canvas.offsetWidth;\r\n    this.canvas.height = 4*this.canvas.offsetHeight;\r\n\r\n    // get the canvas context\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n  },\r\n  methods: {\r\n    setTiming(timing) {\r\n      this.timing = timing;\r\n      clearInterval(this.intervalId);\r\n      this.startOscilloscope();\r\n    },\r\n    startOscilloscope() {\r\n        //console.log(\"avviando oscilloscope con timer \"+this.timing)\r\n      this.intervalId = setInterval(() => {\r\n        this.updateOscilloscopeData();\r\n      }, this.timing);\r\n    },\r\n    draw(data) {\r\n      // clear the canvas\r\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n      // draw the data on the canvas\r\n      // set the line color\r\n      this.ctx.strokeStyle = \"#658060\";\r\n      // set the line width\r\n      this.ctx.lineWidth = 6;\r\n      this.ctx.beginPath();\r\n\r\n      // loop through the data and plot it on the canvas\r\n      for (let i = 0; i < data.length; i++) {\r\n        // calculate the x and y position of the point\r\n        let x = i * (this.canvas.width / data.length);\r\n        let y = (this.canvas.height / 2) * (1 - data[i]);\r\n\r\n        // move to the x and y position\r\n        this.ctx.moveTo(x, y);\r\n        // draw a line to the next point\r\n        this.ctx.lineTo(x + this.canvas.width / data.length, y);\r\n      }\r\n      // draw the line\r\n      this.ctx.stroke();\r\n      this.ctx.moveTo(0, 0);\r\n    },\r\n    updateOscilloscopeData() {\r\n      this.oscilloscopeData = this.oscilloscope.getValue();\r\n      this.draw(this.oscilloscopeData);\r\n      //console.log(this.oscilloscopeData);\r\n    },\r\n  },\r\n  computed: {\r\n    oscilloscopeCanvas(){\r\n      return{\r\n        background: this.colors.green.glow,\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    this.oscilloscope.dispose();\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.oscilloscope {\r\n  grid-row: 2;\r\n  margin: 0.15vw 0.3vw 0.3vw;\r\n  box-sizing: border-box;\r\n  \r\n}\r\n.oscilloscopeCanvas {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: #caffbf;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./Oscilloscope.vue?vue&type=template&id=127e937a\"\nimport script from \"./Oscilloscope.vue?vue&type=script&lang=js\"\nexport * from \"./Oscilloscope.vue?vue&type=script&lang=js\"\n\nimport \"./Oscilloscope.vue?vue&type=style&index=0&id=127e937a&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"spectral-analyzer\">\r\n    <canvas class=\"analyzerCanvas\" ref=\"canvas\" :style=\"this.analyzerCanvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport { dbToGain, gainToDb } from \"tone\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      timing: 10,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.analyser = new Tone.Analyser(\"fft\", 2048);\r\n    this.canvasCtx = this.$refs.canvas.getContext(\"2d\");\r\n    Tone.getDestination().connect(this.analyser);\r\n    this.startAnalyzer()\r\n  },\r\n  methods: {\r\n    draw() {\r\n      //requestAnimationFrame(this.draw);\r\n\r\n      this.data = this.analyser.getValue();\r\n      this.canvasCtx.strokeStyle = \"#658060\";\r\n      //console.log(this.data)\r\n\r\n      // clear the canvas\r\n      this.canvasCtx.clearRect(\r\n        0,\r\n        0,\r\n        this.$refs.canvas.width,\r\n        this.$refs.canvas.height\r\n      );\r\n        let x\r\n\r\n        \r\n\r\n      // render the analysis on the canvas\r\n      for (let i = 0; i < this.data.length; i++) {\r\n        \r\n        this.value = 6*dbToGain(this.data[i])*this.$refs.canvas.height;\r\n        //console.log(this.value)\r\n        x = (Math.log10(i) / Math.log10(2048)) * this.$refs.canvas.width\r\n        this.canvasCtx.fillStyle = \"black\";\r\n        this.canvasCtx.fillRect(x, this.$refs.canvas.height - this.value, 1, this.value);\r\n      }\r\n    },\r\n    startAnalyzer() {\r\n      //console.log(this.$refs.canvas.height)\r\n        //console.log(\"avviando analyzer con timer \"+this.timing)\r\n      this.intervalId = setInterval(() => {\r\n        this.draw();\r\n      }, 10);\r\n    },\r\n  },\r\n  computed: {\r\n    analyzerCanvas(){\r\n      return{\r\n        background: this.colors.green.glow\r\n      }\r\n    }\r\n  },\r\n  beforeDestroy() {},\r\n};\r\n</script>\r\n\r\n<style>\r\n.spectral-analyzer{\r\n  grid-row: 1;\r\n  margin: 0.3vw 0.3vw 0.15vw;\r\n  box-sizing: border-box;\r\n}\r\n.analyzerCanvas {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n  box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./SpecAnalyzer.vue?vue&type=template&id=3db195fc\"\nimport script from \"./SpecAnalyzer.vue?vue&type=script&lang=js\"\nexport * from \"./SpecAnalyzer.vue?vue&type=script&lang=js\"\n\nimport \"./SpecAnalyzer.vue?vue&type=style&index=0&id=3db195fc&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./ToolsHost.vue?vue&type=template&id=082c9148\"\nimport script from \"./ToolsHost.vue?vue&type=script&lang=js\"\nexport * from \"./ToolsHost.vue?vue&type=script&lang=js\"\n\nimport \"./ToolsHost.vue?vue&type=style&index=0&id=082c9148&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"modHost\" :style=\"modHost\">\r\n     <VolEnvelope ref=\"volEnvelope\"/>\r\n    <template\r\n      v-for=\"modulator in envList\"\r\n      :key=\"modulator.id\">\r\n\r\n       <Envelope\r\n        :id=\"modulator.id\"\r\n        ref=\"envelopes\"\r\n      @isDraggableUpdate=\"handleDraggableUpdate\"/>\r\n    </template>\r\n    <template\r\n        v-for=\"modulator in lfoList\"\r\n        :key=\"modulator.id\">\r\n\r\n\r\n       <Lfo\r\n          :id=\"modulator.id\"\r\n          ref=\"lfos\"/>\r\n    </template>\r\n    <ModSelector\r\n      @selection=\"changeSelection\"\r\n      ref=\"modSelector\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport Envelope from \"./Envelope.vue\";\r\nimport Lfo from \"./Lfo.vue\";\r\nimport VolEnvelope from \"./VolEnvelope.vue\";\r\nimport ModSelector from \"./ModSelector.vue\";\r\nimport { isProxy, toRaw } from 'vue';\r\n\r\nexport default {\r\n  components: {\r\n    VolEnvelope,\r\n    Envelope,\r\n    Lfo,\r\n    ModSelector,\r\n  },\r\n  data() {\r\n    return {\r\n      name: \"modHost\",\r\n      //number of total modulators\r\n\r\n      //visible modulator\r\n      selection: 'volEnvelope',\r\n      selectionType: null,\r\n\r\n      //list of modulators\r\n      envList: [],\r\n      lfoList: [],\r\n    };\r\n  },\r\n  created() {\r\n    //create arrays of modulators\r\n    for (let i = 1; i < this.nEnvelopes+1; i++) {\r\n      this.envList.push({ id: i, ref: i });\r\n    }\r\n    for (let i = 1; i < this.nLfo+1; i++) {\r\n      this.lfoList.push({ id: i, ref: i });\r\n    }\r\n    //console.log(toRaw(this.modulatorList));\r\n  },\r\n  mounted() {\r\n    //unhide main volume modulator\r\n    this.$refs.volEnvelope.unHide();\r\n    console.log(this.$refs.volEnvelope)\r\n\r\n    //listens to link and unlink events\r\n    document.addEventListener(\"link\", this.handleLink)\r\n    document.addEventListener(\"unLink\", this.handleUnlink)\r\n  },\r\n  computed: {\r\n    modHost() {\r\n      return{\r\n        background: this.colors.gray.glow,\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleDraggableUpdate(isDraggable){\r\n      this.$refs.modSelector.isDraggableUpdate(isDraggable)\r\n    },\r\n    handleNewOsc(){\r\n      //initialize volEnvelope on all synth when a new oscillator is added\r\n      this.$refs.volEnvelope.handleNewOsc();\r\n    },\r\n    handleMouseUp(e){\r\n      if(this.selection==='volEnvelope'){\r\n        this.$refs.volEnvelope.handleMouseUp(e)\r\n      }else{\r\n        if(this.selectionType===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[this.selection-1]).handleMouseUp(e);\r\n        }\r\n        if(this.selectionType===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).handleMouseUp(e);\r\n        }\r\n      }\r\n    },\r\n    handleMouseMove(e){\r\n      if(this.selection==='volEnvelope'){\r\n        this.$refs.volEnvelope.handleMouseMove(e)\r\n      }else{\r\n        if(this.selectionType===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[this.selection-1]).handleMouseMove(e);\r\n        }\r\n        if(this.selectionType===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).handleMouseMove(e);\r\n        }\r\n      }\r\n    },\r\n    changeSelection(id, type) {\r\n      console.log(\"selected \"+id)\r\n      console.log(this.$refs)\r\n\r\n      //hide old modulator\r\n      if(this.selection==='volEnvelope'){\r\n        this.$refs.volEnvelope.hide()\r\n      }else{\r\n        if(this.selectionType===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[this.selection-1]).hide();\r\n        }\r\n        if(this.selectionType===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).hide();\r\n          toRaw(toRaw(this.$refs.lfos)[this.selection-1]).stopOscilloscope();\r\n        }\r\n      }\r\n\r\n\r\n      //show new modulator\r\n      if(id==='volEnvelope'){\r\n        this.$refs.volEnvelope.unHide()\r\n      }else{\r\n        if(type===\"envelope\"){\r\n          toRaw(toRaw(this.$refs.envelopes)[id-1]).unHide();\r\n        }\r\n        if(type===\"lfo\"){\r\n          toRaw(toRaw(this.$refs.lfos)[id-1]).unHide();\r\n        }\r\n      }\r\n\r\n\r\n      this.selection = id;\r\n      this.selectionType = type;\r\n      \r\n    },\r\n\r\n    //handlers for drag and drop\r\n    handleLink(event){\r\n      console.log(\"link\")\r\n      let data = event.detail\r\n      //console.log(data)\r\n      //console.log(this.synths)\r\n      this.$refs[data.modulator.type+\"s\"][data.modulator.id-1].link(data.object, data.target, data.color)\r\n    },\r\n    handleUnlink(event){\r\n      console.log(\"unLink\")\r\n      let data = event.detail\r\n      this.$refs[data.modulator.type+\"s\"][data.modulator.id-1].unLink(data.object, data.target)\r\n\r\n    }\r\n\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.modHost {\r\n  grid-column: span 2; /* takes 2 spaces horizontally*/\r\n  position: relative;\r\n  display: grid;\r\n  grid-template-rows: 80% 20%;\r\n  grid-template-columns: 100%;\r\n}\r\n</style>","<template>\r\n  <div ref=\"container\" class=\"container hidden\" :style=\"this.container\">\r\n    <div class=\"border\" :style=\"this.border\">\r\n      <EnvelopeVisualizer ref=\"visualizer\" :is_volume=\"false\" @paramRefresh=\"handleRefresh\"/>\r\n      <Knobs ref=\"knobs\" type=\"envelope\" :id=\"this.id\" :parameters=\"this.parameters\"\r\n             @isDraggableUpdate=\"handleDraggableUpdate\"/>\r\n      <div> </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {transcode} from \"buffer\";\r\nimport * as Tone from \"tone\";\r\nimport ToolsHost from \"../Tools/ToolsHost.vue\";\r\nimport Knobs from \"./Knobs.vue\";\r\nimport VolEnvelope from \"@/views/Synth/Modulators/VolEnvelope.vue\";\r\nimport Lfo from \"@/views/Synth/Modulators/Lfo.vue\";\r\nimport ModSelector from \"@/views/Synth/Modulators/ModSelector.vue\";\r\nimport EnvelopeVisualizer from \"./EnvelopeVisualizer.vue\";\r\n\r\nexport default {\r\n  components: {\r\n    EnvelopeVisualizer, Knobs,\r\n  },\r\n  props: [\"id\"],\r\n  data() {\r\n    return {\r\n      parameters: {\r\n        attack: 0.01 * 2.5,\r\n        attackCurve: \"linear\",\r\n        decay: 0.1 * 2.5,\r\n        decayCurve: \"linear\",\r\n        releaseCurve: \"linear\",\r\n        release: 0.1 * 2.5,\r\n        sustain: 0.5,\r\n      },\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    //UPDATE PARAMS CHANGED IN ENVELOPE VISUALIZER\r\n    handleRefresh(parameters) {\r\n      this.parameters = parameters\r\n      this.$refs.knobs.updateParameters(this.parameters)\r\n    },\r\n    //-------------METHODS TO LINK WHEN DROPPING\r\n    link(object, target, color) {\r\n      //console.log(\"THINGS HAPPENING \"+section+\" \"+target)\r\n      this.$refs.knobs.addLink(object, target, color)\r\n\r\n    },\r\n    unLink(object, target) {\r\n      //console.log(\"THINGS HAPPENING \")\r\n      //console.log(object)\r\n      //console.log(target)\r\n      this.$refs.knobs.removeLink(object, target)\r\n    },\r\n    handleDraggableUpdate(isDraggable) {\r\n      this.$emit(\"isDraggableUpdate\", isDraggable)\r\n    },\r\n    //--------------METHODS TO SHOW/HIDE------------\r\n    unHide() {\r\n      this.$refs.container.classList.remove(\"hidden\");\r\n    },\r\n    hide() {\r\n      this.$refs.container.classList.add(\"hidden\");\r\n    },\r\n    //----------------------------------------------\r\n    handleMouseMove(e) {\r\n      this.$refs.visualizer.handleMouseMove(e);\r\n      this.$refs.knobs.handleMouseMove(e);\r\n    },\r\n    handleMouseUp(e) {\r\n      this.$refs.visualizer.handleMouseUp(e);\r\n      this.$refs.knobs.handleMouseUp(e);\r\n    }\r\n  },\r\n  computed: {\r\n    border(){\r\n      return{\r\n        background: '#ceeae7'\r\n      }\r\n    },\r\n    container(){\r\n      return{\r\n        background: this.colors.azure.medium\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.border {\r\n  grid-template-columns: calc(6 / 8 * 100%) calc(2 / 8 * 100%);\r\n  grid-template-rows: 100% ;\r\n\r\n  position: relative;\r\n  display: grid;\r\n  width: calc(100% - 0.6vw);\r\n  height: calc(100% - 0.6vw);\r\n  box-sizing: border-box;\r\n  margin: 0.3vw;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n}\r\n\r\n.container {\r\n  grid-column: span 2;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.envelope {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: transparent;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.centering {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>","<template>\r\n  <div class=\"knobs\">\r\n    <div v-for=\"knob in knobList\" :key=\"knob.id\" :ref=\"knob.ref\" class=\"knob\" @mousedown=\"mouseDown(knob.id)\">\r\n      <div class=\"knob_fader_background\"></div>\r\n      <div v-if=\"knob.isOn===true\" class=\"knob_fader\" :style=\"computedFaderStyle(knob.id)\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { isProxy, toRaw } from 'vue';\r\nexport default {\r\n  props: [\"type\", \"id\", \"parameters\"],\r\n  name: \"Knobs\",\r\n  data() {\r\n    return {\r\n      knobList: [],\r\n      freeKnobs: this.nKnobs,\r\n      isMouseDown: false,\r\n      selectedKnobId: \"\",\r\n    }\r\n  },\r\n  mounted() {\r\n    for (let i = 0; i < this.nKnobs; i++) {\r\n      this.knobList.push({id: i, ref: \"knob\" + i, isOn:false, amount: 0, object: null, target: null});\r\n    }\r\n\r\n    //Set available state (isDraggable)\r\n    this.isDraggable[this.type][this.id] = true\r\n\r\n  },\r\n  methods: {\r\n    updateParameters(parameters=this.parameters){\r\n     // console.log(\"UPDATING PARAMETERS\", parameters)\r\n      for(let i=0; i<this.nKnobs; i++){\r\n        if(this.knobList[i].isOn) {\r\n          this.knobList[i].object.setModulatorParameters(this.type, this.knobList[i].target, parameters)\r\n          break\r\n        }\r\n      }\r\n    },\r\n\r\n    knobText(id){\r\n      if(this.knobList[id].isOn===true){\r\n        return this.knobList[id].amount\r\n      }else{\r\n        return \"yo\"\r\n      }\r\n    },\r\n\r\n    addLink(object, target, color, parameters=this.parameters){\r\n      for(let i=0; i<this.nKnobs; i++){\r\n        if(!this.knobList[i].isOn) {\r\n          this.knobList[i].color = color\r\n          this.knobList[i].isOn = true;\r\n          this.knobList[i].amount= 0.5;\r\n          this.knobList[i].object = object\r\n          this.knobList[i].target = target\r\n          this.freeKnobs -= 1;\r\n\r\n          //set modulator amount at object\r\n          console.log(\"ADDING LINK\")\r\n          console.log(parameters)\r\n          object.setModulatorParameters(this.type, target, parameters)\r\n          object.setModulatorAmount(this.type, target, this.knobList[i].amount)\r\n          break;\r\n        }\r\n      }\r\n      if (this.freeKnobs === 0) this.isDraggable[this.type][this.id] = false\r\n      this.$emit(\"isDraggableUpdate\", this.isDraggable)\r\n      //todo: event to set isDraggable inside modSelector NOT WORKING\r\n    },\r\n\r\n    removeLink(object, target){\r\n      //console.log(\"REMOVING LINK TO\"+target)\r\n      //console.log(object)\r\n\r\n      this.knobList.forEach((knob) => {\r\n        knob.amount = knob.amount+0.01\r\n        knob.amount = knob.amount-0.01\r\n        knob = toRaw(knob)\r\n        if (knob.object === object && knob.target === target) {\r\n          knob.object.setModulatorAmount(this.type, target, 0)\r\n          //remove info from knob\r\n          knob.amount = 0\r\n          knob.isOn = false\r\n          knob.object = null\r\n          knob.target = null\r\n        }\r\n      })\r\n      this.freeKnobs++;\r\n      this.isDraggable[this.type][this.id] = true\r\n    },\r\n\r\n    handleMouseMove(e) {\r\n\r\n      if(this.isMouseDown &&  this.knobList[this.selectedKnobId].isOn){\r\n        this.knobList[this.selectedKnobId].amount = this.knobList[this.selectedKnobId].amount - Math.floor(e.movementY) / 100;\r\n        this.knobList[this.selectedKnobId].amount = Math.max(this.knobList[this.selectedKnobId].amount, 0)\r\n        this.knobList[this.selectedKnobId].amount = Math.min(this.knobList[this.selectedKnobId].amount, 1)\r\n        this.knobList[this.selectedKnobId].object.setModulatorAmount(this.type, this.knobList[this.selectedKnobId].target, this.knobList[this.selectedKnobId].amount)\r\n\r\n      }\r\n\r\n    },\r\n\r\n    mouseDown(knobId){\r\n      this.isMouseDown = true;\r\n      this.selectedKnobId = knobId;\r\n    },\r\n\r\n    computedFaderStyle(id) {\r\n      let rawKnobAmount = this.knobList[id].amount\r\n        return {\r\n          backgroundColor: this.knobList[id].color,\r\n          height: (rawKnobAmount * 100).toString() + \"%\"\r\n        }\r\n    },\r\n\r\n    handleMouseUp() {\r\n      this.isMouseDown = false;\r\n    },\r\n  },\r\n  computed: {\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.knobs {\r\n  margin: 2%;\r\n  border-radius: 0.3vw;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  display: grid;\r\n  grid-template-rows: repeat(3, 1fr);\r\n  column-gap: 1vw;\r\n  row-gap: 1vw;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  align-content: center;\r\n  justify-content: center;\r\n  align-items: stretch;\r\n  justify-items: center;\r\n  padding: 4%;\r\n  border: 0.06vw solid black;\r\n}\r\n\r\n.knob {\r\n  aspect-ratio: 1/1;\r\n  clip-path: circle(50%);\r\n  position: relative;\r\n  vertical-align: bottom;\r\n  background-color: whitesmoke;\r\n  display: grid;\r\n}\r\n\r\n.knob_fader {\r\n  position: absolute;\r\n  height: 0%;\r\n  box-sizing: border-box;\r\n  align-self: end;\r\n  width: 100%;\r\n  background-color: transparent;\r\n  border-bottom-left-radius: 0.4vw;\r\n  border-bottom-right-radius: 0.4vw;\r\n  background-clip: content-box;\r\n  padding: 0.1vw;\r\n  z-index: 101;\r\n}\r\n\r\n.knob_fader_background {\r\n  clip-path: circle(50%);\r\n  box-sizing: border-box;\r\n  aspect-ratio: 1/1;\r\n  height: 100%;\r\n  background-color: transparent;\r\n  border: 0.1vw solid black;\r\n  border-radius: 50%;\r\n  z-index: 102;\r\n}\r\n</style>","import { render } from \"./Knobs.vue?vue&type=template&id=245c68f8&scoped=true\"\nimport script from \"./Knobs.vue?vue&type=script&lang=js\"\nexport * from \"./Knobs.vue?vue&type=script&lang=js\"\n\nimport \"./Knobs.vue?vue&type=style&index=0&id=245c68f8&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-245c68f8\"]])\n\nexport default __exports__","<template>\r\n  <div ref=\"container\" class=\"container hidden\" :style=\"this.container\">\r\n    <div class=\"border\" :style=\"this.border\">\r\n      <EnvelopeVisualizer ref=\"visualizer\" :is_volume=\"true\" @paramRefresh=\"handleRefresh\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { transcode } from \"buffer\";\r\nimport * as Tone from \"tone\";\r\nimport ToolsHost from \"../Tools/ToolsHost.vue\";\r\nimport EnvelopeVisualizer from \"./EnvelopeVisualizer.vue\";\r\nexport default {\r\n  props: [\"id\"],\r\n  components: {\r\n    EnvelopeVisualizer\r\n  },\r\n  data() {\r\n    return {\r\n      tempEvent: null,\r\n      type: \"envelope\",\r\n      parameters: {\r\n      },\r\n      knobList: [],\r\n      is_attack_down: false,\r\n      is_decay_down: false,\r\n      is_sustain_down: false,\r\n      is_release_down: false,\r\n    };\r\n  },\r\n  mounted() {\r\n     this.parameters = {\r\n      attack: 0.1,\r\n      attackCurve: \"linear\",\r\n      decay: 0.5,\r\n      decayCurve: \"linear\",\r\n      sustain: 0.5,\r\n      releaseCurve: \"linear\",\r\n      release: 1,\r\n      scale: 1,\r\n    }; \r\n    for (let i = 0; i < 9; i++) {\r\n      this.knobList.push({ id: i, ref: \"knob\" + i });\r\n    }\r\n  },\r\n  methods: {\r\n    handleRefresh(parameters) {\r\n      this.parameters = parameters\r\n      this.synths.list.forEach((synth) => {\r\n        synth.setModulatorParameters(\"envelope\", \"vol\", this.parameters);\r\n      });\r\n    },\r\n    handleNewOsc() {\r\n      //called when a new osc is created to set default values\r\n      this.synths.list.forEach((synth) => {\r\n        synth.setModulatorParameters(\"envelope\", \"vol\", this.parameters);\r\n      })\r\n    },\r\n    unHide() {\r\n      this.$refs.container.classList.remove(\"hidden\");\r\n    },\r\n    hide() {\r\n      this.$refs.container.classList.add(\"hidden\");\r\n    },\r\n    handleMouseMove(e) {\r\n      this.$refs.visualizer.handleMouseMove(e);\r\n    },\r\n    handleMouseUp(e) {\r\n      this.$refs.visualizer.handleMouseUp(e);\r\n    }\r\n  },\r\n  computed: {\r\n    border() {\r\n      return {\r\n        background: '#f8e7e6',\r\n        opacity: '100%'\r\n      }\r\n    },\r\n    container() {\r\n      return {\r\n        background: this.colors.pink.medium\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.border {\r\n  grid-template-columns: 1fr;\r\n  grid-template-rows: 1fr;\r\n\r\n  position: relative;\r\n  display: grid;\r\n  width: calc(100% - 0.6vw);\r\n  height: calc(100% - 0.6vw);\r\n  box-sizing: border-box;\r\n  margin: 0.3vw;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n}\r\n\r\n.container {\r\n  position: relative;\r\n  display: grid;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n</style>","<template>\r\n    <div class=\"envelope_container\" :style=\"this.envelope_container\">\r\n        <div class=\"envelope\" ref=\"envelope\" :style=\"this.adsr\">\r\n            <div class=\"attack_area\" :style=\"attack_area\" @mousedown=\"attack_down()\"></div>\r\n            <div class=\"decay_area\" :style=\"decay_area\" @mousedown=\"decay_down()\"></div>\r\n            <div class=\"sustain_area\" :style=\"sustain_area\" @mousedown=\"sustain_down()\"></div>\r\n            <div class=\"release_area\" :style=\"release_area\" @mousedown=\"release_down()\"></div>\r\n            <div class=\"attack_dot\" :style=\"attack_dot\" @mousedown=\"attack_down()\"></div>\r\n            <div class=\"decay_dot\" :style=\"decay_dot\" @mousedown=\"decay_down()\"></div>\r\n            <div class=\"release_dot\" :style=\"release_dot\" @mousedown=\"release_down()\"></div>\r\n\r\n            <div class=\"attack\" :style=\"this.attack\">\r\n                <div class=\"attack_color\" :style=\"this.attack_Color\"></div>\r\n            </div>\r\n            <div class=\"decay\" :style=\"this.decay\">\r\n                <div class=\"decay_head\" :style=\"this.decay_head\"></div>\r\n                <div class=\"decay_color\" :style=\"this.decay_Color\"></div>\r\n            </div>\r\n            <div class=\"sustain\" :style=\"this.sustain\">\r\n                <div class=\"sustain_head\" :style=\"this.sustain_head\"></div>\r\n                <div class=\"sustain_color\" :style=\"this.sustain_Color\"></div>\r\n            </div>\r\n            <div class=\"release\" :style=\"this.release\">\r\n                <div class=\"release_color\" :style=\"this.release_Color\"></div>\r\n            </div>\r\n\r\n            <div class=\"space\" :style=\"this.space\"></div>\r\n\r\n            <!--<div class=\"time_strech\" :style=\"this.time_Stretch\"></div>-->\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: ['is_volume'],\r\n    data() {\r\n        return {\r\n            //tempEvent: null,\r\n            type: \"envelope\",\r\n            parameters: {\r\n                attack: 0.01,\r\n                attackCurve: \"linear\",\r\n                decay: 0.1,\r\n                decayCurve: \"linear\",\r\n                sustain: 0.1,\r\n                releaseCurve: \"linear\",\r\n                release: 0.1,\r\n                sustain_lev: 0.5,\r\n                duration: 4,\r\n            },\r\n            is_attack_down: false,\r\n            is_decay_down: false,\r\n            is_sustain_down: false,\r\n            is_release_down: false,\r\n            test: 10,\r\n        };\r\n    },\r\n    mounted() {\r\n        \r\n    },\r\n    methods: {\r\n\r\n        handleMouseMove(e) {\r\n            //console.log(e)\r\n            //NOT NECESSAARY, FOR DEBUGGING\r\n            if (this.isDragging) {\r\n                this.tempEvent = e;\r\n            }\r\n            let p = this.parameters;\r\n            if (this.is_attack_down) { // attack\r\n                if (e.movementX > 0) {\r\n                    /* console.log(p.attack,); */\r\n                    p.attack = Math.min(p.attack + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.decay + p.sustain + p.release));\r\n                }\r\n                if (e.movementX < 0) {\r\n                   /*  console.log(p.attack); */\r\n                    p.attack = Math.max(p.attack + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n            }\r\n            if (this.is_decay_down) { // decay\r\n                if (e.movementX > 0) {\r\n                   /*  console.log(p.attack,); */\r\n                    p.decay = Math.min(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.attack + p.sustain + p.release));\r\n                }\r\n                if (e.movementX < 0) {\r\n                    /* console.log(p.attack); */\r\n                    p.decay = Math.max(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n                if (e.movementY > 0) {\r\n                    p.sustain_lev = Math.max(p.sustain_lev - e.movementY / 100, 0);\r\n                } else if (e.movementY < 0) {\r\n                    p.sustain_lev = Math.min(p.sustain_lev - e.movementY / 100, 1);\r\n                }\r\n                /* console.log(p.sustain_lev); */\r\n            }\r\n            if (this.is_sustain_down) { // sustain\r\n                if (e.movementX > 0) {\r\n                    /* console.log(p.attack,); */\r\n                    p.decay = Math.min(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.attack + p.sustain + p.release));\r\n                }\r\n                if (e.movementX < 0) {\r\n                    /* console.log(p.attack); */\r\n                    p.decay = Math.max(p.decay + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n                if (e.movementY > 0) {\r\n                    p.sustain_lev = Math.max(p.sustain_lev - e.movementY / 100, 0);\r\n                } else if (e.movementY < 0) {\r\n                    p.sustain_lev = Math.min(p.sustain_lev - e.movementY / 100, 1);\r\n                }\r\n                /* console.log(p.sustain_lev); */\r\n            }\r\n            if (this.is_release_down) { // release\r\n                if (e.movementX > 0) {\r\n                    /* console.log(p.attack,); */\r\n                    p.release = Math.min(p.release + e.movementX / (this.$refs.envelope.offsetWidth), 1 - (p.decay + p.sustain + p.attack));\r\n                }\r\n                if (e.movementX < 0) {\r\n                    /* console.log(p.attack); */\r\n                    p.release = Math.max(p.release + e.movementX / (this.$refs.envelope.offsetWidth), 0);\r\n                }\r\n            }\r\n            if (this.is_attack_down || this.is_decay_down || this.is_sustain_down || this.is_release_down) {\r\n\r\n                let parameters = {\r\n                    attack: this.parameters.attack * this.parameters.duration,\r\n                    decay: this.parameters.decay * this.parameters.duration,\r\n                    sustain: this.parameters.sustain_lev,\r\n                    release: this.parameters.release * this.parameters.duration,\r\n                }\r\n                this.$emit(\"paramRefresh\", parameters)\r\n            }\r\n\r\n\r\n        },\r\n        handleMouseUp() {\r\n            /*if (this.isDragging) {\r\n              console.log(this.tempEvent.target)\r\n              this.isDragging = false\r\n            }*/\r\n            //console.log(\"mouseUp\");\r\n            this.is_attack_down = false;\r\n            this.is_decay_down = false;\r\n            this.is_sustain_down = false;\r\n            this.is_release_down = false;\r\n        },\r\n        attack_down() {\r\n            if (!this.is_attack_down) this.is_attack_down = true;\r\n        },\r\n        decay_down() {\r\n            if (!this.is_decay_down) this.is_decay_down = true;\r\n        },\r\n        sustain_down() {\r\n            if (!this.is_sustain_down) this.is_sustain_down = true;\r\n        },\r\n        release_down() {\r\n            if (!this.is_release_down) this.is_release_down = true;\r\n        }\r\n    },\r\n    computed: {\r\n        envelope_container() {\r\n            let color = '';\r\n            if (this.$props['is_volume']) color = this.colors.pink.medium\r\n            else color = this.colors.azure.medium\r\n            return {\r\n                background: color\r\n            }\r\n        },\r\n        adsr() {\r\n            /* console.log(((this.parameters.attack - this.parameters.sustain) * 100).toFixed(2)) */\r\n            let color = '';\r\n            if (this.$props['is_volume']) color = '#f8e7e6'\r\n            else color = '#ceeae7'\r\n            return {\r\n                display: \"grid\",\r\n                opacity: '100%',\r\n                background: color,\r\n                gridTemplateColumns: this.parameters.attack * 100 + '% '\r\n                    + Math.ceil(this.parameters.decay * 100) + '% '\r\n                    + Math.ceil(this.parameters.sustain * 100) + '% '\r\n                    + Math.ceil(this.parameters.release * 100) + '% '\r\n                    + '10% '\r\n            };\r\n        },\r\n        attack() {\r\n            return {\r\n                height: \"100%\",\r\n                width: \"100%\",\r\n                clipPath: \"polygon(0% 100%, 100% 0%, 100% 100%)\",\r\n            };\r\n        },\r\n        decay() {\r\n            return {\r\n                height: \"100%\",\r\n            };\r\n        },\r\n        sustain() {\r\n            return {\r\n                display: \"grid\",\r\n                gridTemplateRows:\r\n                    (1 - this.parameters.sustain_lev) * 100 +\r\n                    \"% \" +\r\n                    this.parameters.sustain_lev * 100 +\r\n                    \"%\",\r\n                height: \"100%\",\r\n            };\r\n        },\r\n        release() {\r\n            return {\r\n                height: \"100%\",\r\n                clipPath:\r\n                    \"polygon(0% \" +\r\n                    (1 - this.parameters.sustain_lev) * 100 +\r\n                    \"%, 0% 100%, 100% 100%)\",\r\n            };\r\n        },\r\n        attack_Color() {\r\n            let color = '';\r\n            if (this.$props['is_volume']) color = this.colors.pink.dark\r\n            else color = this.colors.azure.dark\r\n            return {\r\n                height: \"100%\",\r\n                background: color,\r\n            };\r\n        },\r\n        decay_Color() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= this.colors.pink.medium\r\n            else color = this.colors.azure.medium\r\n            return {\r\n                position: 'relative',\r\n                height: \"100%\",\r\n                background: color,\r\n                top: (this.parameters.sustain_lev - 1) * 100 + \"%\",\r\n            };\r\n        },\r\n        sustain_Color() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= this.colors.pink.light\r\n            else color = this.colors.azure.light\r\n            return {\r\n                zIndex: '1',\r\n                height: \"100%\",\r\n                background: color,\r\n            };\r\n        },\r\n        release_Color() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= this.colors.pink.light\r\n            else color = this.colors.azure.light\r\n            return {\r\n                height: \"100%\",\r\n                background: color,\r\n                opacity: '60%'\r\n            };\r\n        },\r\n        decay_head() {\r\n            let color ='';\r\n            if(this.$props['is_volume']) color= '#f8e7e6'\r\n            else color = '#ceeae7'\r\n            return {\r\n                position: 'relative',\r\n                zIndex: '3',\r\n                background: color,\r\n                opacity:'100%',\r\n                top:'-1%',\r\n                clipPath: \"polygon(0% 0%, 100% 100%, 100% 0%)\",\r\n                height: (1 - this.parameters.sustain_lev) * 100 + \"%\",\r\n                width: \"102%\",\r\n            };\r\n        },\r\n        sustain_head() {\r\n            return {\r\n                background: \"transparent\",\r\n            };\r\n        },\r\n\r\n        attack_dot() {\r\n            let color ='';\r\n            let borderColor='';\r\n            if(this.$props['is_volume']){ \r\n                color= this.colors.pink.dark\r\n                borderColor = this.colors.pink.glow\r\n                }\r\n            else {\r\n                color = this.colors.azure.dark\r\n                borderColor = this.colors.azure.glow\r\n            }\r\n            return {\r\n                border: '.1vw solid ' + borderColor,\r\n                background: color,\r\n                aspectRatio: \"1/1\",\r\n                height: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: this.parameters.attack * 100 - 1 + \"%\",\r\n                top: \"-2%\",\r\n            };\r\n        },\r\n        decay_dot() {\r\n            let color ='';\r\n            let borderColor='';\r\n            if(this.$props['is_volume']){ \r\n                color= this.colors.pink.medium\r\n                borderColor = this.colors.pink.dark\r\n                }\r\n            else {\r\n                color = this.colors.azure.medium\r\n                borderColor = this.colors.azure.dark\r\n            }\r\n            return {\r\n                border: '.1vw solid ' + borderColor,\r\n                background: color,\r\n                aspectRatio: \"1/1\",\r\n                height: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"5\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.decay + this.parameters.attack) * 100 - .9 + \"%\",\r\n                top: (1 - this.parameters.sustain_lev) * 100 - 5 + \"%\",\r\n            };\r\n        },\r\n        release_dot() {\r\n            let color ='';\r\n            let borderColor='';\r\n            if(this.$props['is_volume']){ \r\n                color= this.colors.pink.glow\r\n                borderColor = this.colors.pink.dark\r\n                }\r\n            else {\r\n                color = this.colors.azure.glow\r\n                borderColor = this.colors.azure.dark\r\n            }\r\n            return {\r\n                border: '.1vw solid ' + borderColor,\r\n                opacity: '60%',\r\n                background: color,\r\n                aspectRatio: \"1/1\",\r\n                height: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"2\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.attack + this.parameters.decay + this.parameters.sustain + this.parameters.release) * 100 - 1 + \"%\",\r\n                top: \"95%\",\r\n            };\r\n        },\r\n        space() {\r\n            return {\r\n                background: \"transparent\",\r\n            };\r\n        },\r\n\r\n        attack_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"1/1\",\r\n                width: \"10%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: this.parameters.attack * 100 - 5 + \"%\",\r\n            };\r\n        },\r\n        decay_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"1/1\",\r\n                width: \"10%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.decay + this.parameters.attack) * 100 - 5 + \"%\",\r\n                top: (1 - this.parameters.sustain_lev) * 100 - 20 + \"%\",\r\n            };\r\n        },\r\n        sustain_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"16/9\",\r\n                width: \"10%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.attack + this.parameters.decay + this.parameters.sustain) * 100 - 10 + \"%\",\r\n                top: (1 - this.parameters.sustain_lev) * 100 - 12 + \"%\",\r\n            };\r\n        },\r\n        release_area() {\r\n            return {\r\n                background: \"transparent\",\r\n                aspectRatio: \"1/1\",\r\n                width: \"7%\",\r\n                position: \"absolute\",\r\n                zIndex: \"4\",\r\n                borderRadius: \"50%\",\r\n                left: (this.parameters.attack + this.parameters.decay + this.parameters.sustain + this.parameters.release) * 100 - 5 + '%',\r\n                top: '80%'\r\n            };\r\n        },\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.envelope_container {\r\n    position: relative;\r\n    margin: 0.5vw 1vw 0.5vw 1vw;\r\n}\r\n\r\n.envelope {\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: transparent;\r\n    box-sizing: border-box;\r\n}\r\n</style>","import { render } from \"./EnvelopeVisualizer.vue?vue&type=template&id=2cbd9afd&scoped=true\"\nimport script from \"./EnvelopeVisualizer.vue?vue&type=script&lang=js\"\nexport * from \"./EnvelopeVisualizer.vue?vue&type=script&lang=js\"\n\nimport \"./EnvelopeVisualizer.vue?vue&type=style&index=0&id=2cbd9afd&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2cbd9afd\"]])\n\nexport default __exports__","import { render } from \"./VolEnvelope.vue?vue&type=template&id=480d7e20&scoped=true\"\nimport script from \"./VolEnvelope.vue?vue&type=script&lang=js\"\nexport * from \"./VolEnvelope.vue?vue&type=script&lang=js\"\n\nimport \"./VolEnvelope.vue?vue&type=style&index=0&id=480d7e20&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-480d7e20\"]])\n\nexport default __exports__","<template>\r\n  <div ref=\"container\" class=\"container hidden\" :style=\"this.container\">\r\n    <div class=\"border\" :style=\"this.border\">\r\n      <div class=\"lfo_elems_row\" :style=\"this.lfo_elems_row\">\r\n        <!-- MODULATION AMOUNT: REGULATES THE AMPLITUDE OF THE LFO !!!!! broken !!!!!!\r\n      <div class=\"lfoFaderBase volFaderBase\" @mousedown=\"isDepthFaderDown=true\">\r\n        <div class=\"lfoDepthFaderLevel\" :style=\"this.lfoDepthFaderLevel\"></div>\r\n      </div> -->\r\n      <LfoVisualizer ref=\"visualizer\" :freq=\"this.freq\" :depth=\"this.depth\" :wave=\"this.waveform\"></LfoVisualizer>\r\n      <div class=\"lfo_controls_column\" >\r\n        <div class=\"lfoFaderBase freqFader\" :style=\"this.lfoFaderBase\" @mousedown=\"isFreqFaderDown=true\">\r\n          <div class=\"lfoFreqFaderLevel\" :style=\"this.lfoFreqFaderLevel\"></div>\r\n        </div>\r\n        <div class=\"lfo_waveform-btn-selector\" :style=\"lfo_waveform_btn_selector\" @click=\"nextWaveType\">\r\n          <img v-if=\"this.waveform==='sine'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/sine.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.waveform==='triangle'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/triangle.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.waveform==='square'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/square.svg\" alt=\"\" draggable=\"false\">\r\n          <img v-if=\"this.waveform==='sawtooth'\" class=\"lfo_waveform_btn_icon\" src=\"@/icons/saw.svg\" alt=\"\" draggable=\"false\">\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <Knobs ref=\"knobs\" type=\"lfo\" :id=\"this.id\" :parameters=\"this.parameters\"/>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport LfoVisualizer from \"@/views/Synth/Modulators/LfoVisualizer\";\r\nimport * as Tone from \"tone\";\r\nimport Knobs from \"./Knobs.vue\";\r\nimport { toRaw } from \"vue\";\r\n\r\nconst waveforms = ['sine', 'triangle', 'square', 'sawtooth']\r\nexport default {\r\n  components: { LfoVisualizer, Knobs },\r\n  props: [\"id\"],\r\n\r\n  data() {\r\n    return {\r\n      freq: 10,\r\n      depth: 0.8,\r\n      isDepthFaderDown: false,\r\n      isFreqFaderDown: false,\r\n      waveform: waveforms[0],\r\n      waveformId: 0,\r\n      parameters: {}\r\n\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    //document.addEventListener(\"mousemove\", this.onMouseMove); // todo: remove this\r\n    //console.log(\"mounted - this.waveformId: \" + this.waveformId + \" - this.waveform: \" + this.waveform)\r\n\r\n    this.parameters = {\r\n      frequency: this.freq,\r\n      waveform: this.waveform\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    lfoDepthFaderLevel() {\r\n      //console.log(\"lfoDepthFaderLevel\")\r\n      return {\r\n        top: ((1 - this.depth) * 85).toString() + \"%\"\r\n      }\r\n    },\r\n    lfo_elems_row() {\r\n      return {\r\n        background: this.colors.purple.medium\r\n      }\r\n    },\r\n    lfoFaderBase() {\r\n      return {\r\n        background: this.colors.purple.glow\r\n      }\r\n    },\r\n    lfoFreqFaderLevel() {\r\n      return {\r\n        top: ((20 - this.freq) / 20 * 85).toString() + \"%\",\r\n        background: this.colors.purple.light,\r\n        borderColor: this.colors.purple.dark\r\n      }\r\n    },\r\n    lfo_waveform_btn_selector() {\r\n      return {\r\n        borderColor: this.colors.purple.dark,\r\n        background: this.colors.purple.light,\r\n        color: this.colors.gray.dark\r\n      }\r\n    },\r\n    container(){\r\n      return {\r\n        background: this.colors.purple.glow\r\n      }\r\n    },\r\n    border(){\r\n      return{\r\n        background: this.colors.purple.glow\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    setParams({ freq = this.freq, depth = this.depth, waveform = this.waveform}) {\r\n      if (freq <= 20) {\r\n        this.freq = freq;\r\n      } else {\r\n        this.freq = 20\r\n      }\r\n      if(typeof waveform === 'number') {\r\n        this.waveformId = waveform;\r\n        if(this.waveformId === 0 || this.waveformId === 1) {\r\n          this.waveform = waveforms[this.waveformId]\r\n        } else {\r\n          console.log(\"ERROR: Called Non existing lfo wave type Id\")\r\n        }\r\n      } else if(typeof waveform === 'string'){\r\n        this.waveform = waveform;\r\n        waveforms.forEach( (waveformNameString, index) => {\r\n          if(waveformNameString === this.waveform) this.waveformId = index;\r\n        })\r\n      }\r\n      this.parameters.waveform = this.waveform;\r\n      this.depth = depth;\r\n      this.$refs.visualizer.updateParams({freq: this.freq, depth: this.depth})\r\n      this.$refs.knobs.updateParameters(this.parameters)\r\n\r\n    },\r\n\r\n    nextWaveType(){\r\n      this.waveformId++;\r\n      if(this.waveformId > waveforms.length-1) this.waveformId = 0;\r\n      this.waveform = waveforms[this.waveformId]\r\n      this.parameters.waveform = this.waveform;\r\n      // console.log(\"nextWaveType - this.waveformId: \" + this.waveformId + \" - this.waveform: \" + this.waveform)\r\n\r\n      console.log(\"CHANGING WAVE TYPE TO: \" + this.waveform)\r\n      this.$refs.knobs.updateParameters(this.parameters)\r\n      this.$refs.visualizer.updateParams({ waveform: this.waveform, frequency: this.freq })\r\n    },\r\n\r\n    startOscilloscope() {\r\n      console.log(\"start LFO graphics\")\r\n      this.$refs.visualizer.startOscilloscope();\r\n    },\r\n    stopOscilloscope() {\r\n      console.log(\"stop LFO graphics\")\r\n      this.$refs.visualizer.stopOscilloscope();\r\n    },\r\n    resetOscilloscope() {\r\n      this.$refs.visualizer.stopOscilloscope();\r\n      this.$refs.visualizer.startOscilloscope();\r\n\r\n    },\r\n    // ---------- USER GESTURE ----------\r\n\r\n    depthFaderSelected() {\r\n      console.log(\"depthFaderSelected\")\r\n      this.isDepthFaderDown = true;\r\n    },\r\n    freqFaderSelected() {\r\n      console.log(\"freqFaderSelected\")\r\n      this.isFreqFaderDown = true;\r\n    },\r\n\r\n    handleMouseMove(event) {\r\n      //console.log(\"lfo - handleMouseMove\")\r\n     this.$refs.knobs.handleMouseMove(event)\r\n      if (this.isDepthFaderDown) {\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving dowm\r\n          this.depth = this.depth - event.movementY / 100;\r\n          console.log(\"moving up\");\r\n        } else {\r\n          // Mouse is moving up\r\n          this.depth = this.depth - event.movementY / 100;\r\n          console.log(\"moving down\");\r\n        }\r\n        this.depth = Math.max(this.depth, 0);\r\n        this.depth = Math.min(this.depth, 1);\r\n\r\n        console.log(\"lfo depth: \" + this.depth)\r\n        this.$refs.visualizer.updateParams({depth: this.depth})\r\n      }\r\n      if (this.isFreqFaderDown) {\r\n        if (event.movementY < 0) {\r\n          // Mouse is moving dowm\r\n          this.freq = this.freq - 20 * (event.movementY / 100);\r\n          console.log(\"moving up\");\r\n        } else {\r\n          // Mouse is moving up\r\n          this.freq = this.freq - 20 * (event.movementY / 100);\r\n        }\r\n        this.freq = Math.max(this.freq, 1);\r\n        this.freq = Math.min(this.freq, 20);\r\n\r\n        console.log(\"lfo freq: \" + this.freq)\r\n        this.parameters.frequency = this.freq\r\n        this.$refs.visualizer.updateParams({freq: this.freq})\r\n        this.$refs.knobs.updateParameters(this.parameters)\r\n      }\r\n    },\r\n    handleMouseUp() {\r\n      if (this.isFreqFaderDown) this.isFreqFaderDown = false\r\n      if (this.isDepthFaderDown) this.isDepthFaderDown = false\r\n\r\n      this.$refs.knobs.handleMouseUp()\r\n    },\r\n\r\n    unHide() {\r\n      this.$refs.container.classList.remove(\"hidden\");\r\n      this.startOscilloscope()\r\n    },\r\n    hide() {\r\n      this.$refs.container.classList.add(\"hidden\");\r\n    },\r\n\r\n    //-------------METHODS TO LINK WHEN DROPPING\r\n    link(object, target, color) {\r\n      //console.log(\"THINGS HAPPENING \"+section+\" \"+target)\r\n      this.$refs.knobs.addLink(object, target, color)\r\n\r\n    },\r\n    unLink(object, target) {\r\n      //console.log(\"THINGS HAPPENING \")\r\n      //console.log(object)\r\n      //console.log(target)\r\n      this.$refs.knobs.removeLink(object, target)\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.border {\r\n  grid-template-columns: calc(6 / 8 * 100%) calc(2 / 8 * 100%);\r\n  grid-template-rows: 100% ;\r\n\r\n  position: relative;\r\n  display: grid;\r\n  width: calc(100% - 0.6vw);\r\n  height: calc(100% - 0.6vw);\r\n  box-sizing: border-box;\r\n  margin: 0.3vw;\r\n  border-radius: 0.2vw;\r\n  border: 0.1vw solid #334030;\r\n}\r\n.container {\r\n  grid-column: span 2;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n\r\n.hidden {\r\n  display: none;\r\n}\r\n\r\n.lfo_elems_row {\r\n  margin: 0;\r\n  padding: 0;\r\n  display: flex;\r\n  flex-direction: row;\r\n  height: 100%;\r\n  align-items: center;\r\n  justify-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.lfoFaderBase {\r\n  position: absolute;\r\n  top: 5%;\r\n  left: 30%;\r\n  aspect-ratio: 1/10;\r\n  border-radius: 5vw;\r\n  height: 70%;\r\n}\r\n\r\n.lfoDepthFaderLevel {\r\n  position: relative;\r\n  width: 100%;\r\n  border-radius: 5vw;\r\n  height: 15%;\r\n  background-color: white;\r\n  top: 80%\r\n}\r\n\r\n.lfoFreqFaderLevel {\r\n  position: relative;\r\n  width: 100%;\r\n  height: 20%;\r\n  border-width: 1px;\r\n  border-style: solid;\r\n  border-radius: 5vw;\r\n  top: 80%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.lfo_controls_column {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  flex: 0.9;\r\n  flex-direction: column;\r\n  align-content: center;\r\n  justify-content: center;\r\n  position: relative;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n.lfo_waveform-btn-selector {\r\n  position: absolute;\r\n  left: 5%;\r\n  bottom: 5%;\r\n  aspect-ratio: 7/4;\r\n  width: 80%;\r\n  border-radius: 0.3vw;\r\n  border-style: solid;\r\n  border-width: 1px;\r\n  text-align: center;\r\n}\r\n\r\n\r\n.lfo_waveform_btn_icon {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  bottom: 0;\r\n  place-self: center;\r\n  align-self: center;\r\n  margin: 0;\r\n  padding: 0;\r\n  clip-path: circle(9%);\r\n  transform: scale(3.25);\r\n}\r\n</style>","<template>\r\n  <div class=\"lfoOscilloscope\">\r\n    <canvas ref=\"canvas\" class=\"lfoOscilloscopeCanvas\" :style=\"this.oscilloscopeCanvas\"></canvas>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {nextTick} from \"vue\";\r\n\r\nconst qualFactor = 50\r\nconst sinValsBuffer = new Array(qualFactor).fill(0);\r\nconst triValsBuffer = new Array(qualFactor).fill(0);\r\nconst sqValsBuffer = new Array(qualFactor).fill(0);\r\nconst sawValsBuffer = new Array(qualFactor).fill(0);\r\n\r\n//todo: rmv real audio\r\n// todo: remap dept in -0.5 + 0.5 range\r\n// todo: start only when needs to be visualized\r\n\r\nexport default {\r\n  components: {},\r\n  props: [\"freq\", \"depth\", \"wave\"],\r\n  data() {\r\n    return {\r\n      timing: 10,\r\n      //freq: this.freq,\r\n      //depth: this.depth,\r\n      intervalId: \"\",\r\n      waveform: this.wave\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    console.log(\"mounted LfoVisual\")\r\n    this.timing = 1000 / (qualFactor * this.$props.freq);\r\n    for (let i = 0; i < qualFactor; i++) {\r\n      sinValsBuffer[i] = Math.sin(Math.PI*2/qualFactor * i) * this.$props.depth;\r\n      triValsBuffer[i] = this.$props.depth - 2*Math.abs(2*(i - qualFactor/2)/qualFactor) * this.$props.depth\r\n      i >= qualFactor/2? sqValsBuffer[i] = this.$props.depth : sqValsBuffer[i] = - this.$props.depth\r\n      sawValsBuffer[i] = this.depth * (2*i/qualFactor -1)\r\n    }\r\n\r\n    switch (this.waveform) {\r\n      case 'sine':\r\n        this.oscilloscopeData = sinValsBuffer\r\n        break;\r\n      case 'triangle':\r\n        this.oscilloscopeData = triValsBuffer\r\n        break;\r\n      case 'square':\r\n        this.oscilloscopeData = sqValsBuffer;\r\n        break;\r\n      case 'sawtooth':\r\n        this.oscilloscopeData = sawValsBuffer;\r\n        break;\r\n      default:\r\n        console.log(\"ERROR - waveform not recognised\")\r\n    }\r\n\r\n    // --------- GRAPHICS INIT --------\r\n    // use the ref to get the canvas element\r\n    this.canvas = this.$refs.canvas;\r\n\r\n    // set the canvas width and height to 100%\r\n    this.canvas.width = 4*this.canvas.offsetWidth;\r\n    this.canvas.height = 4*this.canvas.offsetHeight;\r\n    // get the canvas context\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n  },\r\n\r\n  methods: {\r\n    updateParams({ freq = this.$props.freq, depth = this.$props.depth, waveform = this.waveform }) {\r\n      //this.$props.freq = freq;\r\n      //this.$props.depth = depth;\r\n      this.waveform = waveform;\r\n      console.log(\"this.wave: \" + waveform);\r\n\r\n      this.timing = 1000 / (qualFactor * this.$props.freq);\r\n      switch (this.waveform) {\r\n        case 'sine':\r\n          this.oscilloscopeData = sinValsBuffer\r\n          break;\r\n        case 'triangle':\r\n          this.oscilloscopeData = triValsBuffer\r\n          break;\r\n        case 'square':\r\n          this.oscilloscopeData = sqValsBuffer;\r\n          break;\r\n        case 'sawtooth':\r\n          this.oscilloscopeData = sawValsBuffer;\r\n          break;\r\n        default:\r\n          console.log(\"ERROR - waveform not recognised\")\r\n      }\r\n\r\n      if(this.intervalId){ clearInterval(this.intervalId) }\r\n      this.stopOscilloscope();\r\n      console.log(\"end - this.wave: \" + waveform)\r\n\r\n      nextTick(() => {\r\n        this.startOscilloscope()\r\n      })\r\n    },\r\n\r\n    startOscilloscope() {\r\n      this.canvas.width = 4*this.canvas.offsetWidth;\r\n      this.canvas.height = 4*this.canvas.offsetHeight;\r\n      console.log(\"start - this.waveform: \" + this.waveform)\r\n\r\n     // console.log(\"this.timing: \" + this.timing)\r\n     // console.log(\"avviando oscilloscope con timer \" + this.timing)\r\n      this.intervalId = setInterval(() => {\r\n        let t = this.oscilloscopeData.shift();\r\n        this.oscilloscopeData.push(t);\r\n        this.draw(this.oscilloscopeData);\r\n      }, this.timing);\r\n      //console.log(\"this.timing:  \" + this.intervalId);\r\n    },\r\n\r\n    stopOscilloscope(){\r\n      if(this.intervalId){ clearInterval(this.intervalId) }\r\n    },\r\n\r\n    draw(data) {\r\n      // clear the canvas\r\n      //console.log(\"drawing\")\r\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n      let x, y, y_next;\r\n\r\n      // draw the data on the canvas\r\n      // set the line color\r\n      this.ctx.strokeStyle = \"black\";\r\n      // set the line width\r\n      this.ctx.lineWidth = 2;\r\n      this.ctx.beginPath();\r\n\r\n      y_next = (this.canvas.height / 2) * (1 - data[0]).toFixed(3);\r\n      // loop through the data and plot it on the canvas\r\n      for (let i = 1; i < data.length; i++) {\r\n        y = y_next;\r\n        // calculate the x and y position of the point\r\n        x = i * (this.canvas.width / data.length).toFixed(3);\r\n        y_next = (this.canvas.height / 2) * (1 - data[i]).toFixed(3);\r\n        // move to the x and y position\r\n        this.ctx.moveTo(x, y);\r\n        // draw a line to the next point\r\n        this.ctx.lineTo(x + this.canvas.width / data.length, y_next );\r\n        // console.log(x, y)\r\n      }\r\n      // draw the line\r\n      this.ctx.stroke();\r\n      this.ctx.moveTo(0, 0);\r\n    },\r\n\r\n    beforeDestroy() {\r\n      if (this.oscilloscope) {\r\n        this.oscilloscope.disconnect();\r\n        this.oscilloscope.dispose();\r\n      }\r\n    },\r\n  }, \r\n  computed: {\r\n    oscilloscopeCanvas(){\r\n      return {\r\n        background: this.colors.purple.glow\r\n      } \r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.lfoOscilloscope {\r\n  margin: 0.4vw;\r\n  margin-right: 0.1vw;;\r\n  height: 90%;\r\n  width: 90%;\r\n  border: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n}\r\n\r\n.lfoOscilloscopeCanvas {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 0.2vw;\r\n  border: 0.06vw solid #334030;\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n</style>","import { render } from \"./LfoVisualizer.vue?vue&type=template&id=5e00fb0b\"\nimport script from \"./LfoVisualizer.vue?vue&type=script&lang=js\"\nexport * from \"./LfoVisualizer.vue?vue&type=script&lang=js\"\n\nimport \"./LfoVisualizer.vue?vue&type=style&index=0&id=5e00fb0b&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Lfo.vue?vue&type=template&id=54138dca&scoped=true\"\nimport script from \"./Lfo.vue?vue&type=script&lang=js\"\nexport * from \"./Lfo.vue?vue&type=script&lang=js\"\n\nimport \"./Lfo.vue?vue&type=style&index=0&id=54138dca&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-54138dca\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"buttonList\" :style=\"this.buttonList\">\r\n    <div class=\"identifierVol\" :style=\"buttonColor('mainEnv')\" @click=\"handleClick(null, 'volEnvelope')\">\r\n      <img src=\"@/icons/ADSR.svg\" alt=\"\" draggable=\"false\">\r\n    </div>\r\n    <template v-for=\"button in buttonListEnv\" :key=\"button.id\" :ref=\"button.ref\">\r\n      <div class=\"button\" :style=\"buttonColor('envelope')\">\r\n        <div :style=\"textId\"> {{ button.id }} </div>\r\n        <div class=\"identifier\" @click=\"handleClick(button.id, button.type)\">\r\n\r\n          <img src=\"@/icons/ADSR.svg\" alt=\"\" draggable=\"false\">\r\n        </div>\r\n        <div class=\"draggableArea\" :draggable=\"draggability('envelope', button.id)\"\r\n          @dragstart=\"startDrag($event, button.id, button.type)\">ϟ\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <template v-for=\"button in buttonListLfo\" :key=\"button.id\" :ref=\"button.ref\">\r\n      <div class=\"button\" :style=\"buttonColor('lfo')\">\r\n        <div :style=\"textId\"> {{ button.id }} </div>\r\n        <div class=\"identifier\" @click=\"handleClick(button.id, button.type)\"><!-- {{ button.id }} -->\r\n\r\n          <img src=\"@/icons/LFO.svg\" alt=\"\" draggable=\"false\">\r\n        </div>\r\n        <div class=\"draggableArea\" :draggable=\"draggability('lfo', button.id)\"\r\n          @dragstart=\"startDrag($event, button.id, button.type)\">ϟ\r\n        </div>\r\n      </div>\r\n    </template>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport * as Tone from \"tone\";\r\nimport { watch } from 'vue';\r\n\r\nexport default {\r\n  inject: ['dropFeedback'],\r\n  props: [],\r\n  data() {\r\n    return {\r\n      color: {\r\n        mainEnv: this.colors.pink.glow,\r\n        envelope: this.colors.azure.glow,\r\n        lfo: this.colors.purple.glow,\r\n      },\r\n      type: \"volEnvelope\",\r\n\r\n      isDraggable: this.isDraggable,\r\n      buttonListEnv: [],\r\n      buttonListLfo: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    for (let i = 1; i < this.nEnvelopes + 1; i++) {\r\n      this.buttonListEnv.push({ id: i, ref: \"button\" + i, type: \"envelope\" });\r\n    }\r\n    for (let i = 1; i < this.nLfo + 1; i++) {\r\n      this.buttonListLfo.push({ id: i, ref: \"button\" + i, type: \"lfo\" });\r\n    }\r\n    //console.log(this.isDraggable)\r\n\r\n\r\n    //console.log(this.buttonListEnv)\r\n    //console.log(this.buttonListLfo)\r\n\r\n    /*\r\n    this.$on(\"unLink\", (data) => {\r\n          console.log(\"ModSelector disconnecting link from \"+data.modulator.type+\" \"+data.modulator.id+\" to \"+data.section+data.target)})\r\n\r\n     */\r\n\r\n  },\r\n  computed: {\r\n    textId(){\r\n      return {\r\n        fontWeight: \"bold\",\r\n        opacity: \"80%\",\r\n        position: 'absolute',\r\n        fontSize:'.8vw'\r\n      }\r\n    },\r\n    buttonList() {\r\n      switch (this.type) {\r\n        case \"volEnvelope\":\r\n          return{\r\n            backgroundColor: this.colors.pink.medium\r\n          }\r\n          case \"envelope\":\r\n          return{\r\n            backgroundColor: this.colors.azure.medium\r\n          }\r\n          case \"lfo\":\r\n          return{\r\n            backgroundColor: this.colors.purple.glow\r\n          }\r\n      }\r\n      \r\n    } \r\n\r\n  },\r\n  methods: {\r\n    draggability(type, id) {\r\n      //console.log(this.isDraggable)\r\n      //console.log(\"checking draggability of \" + type + \" \" + id)\r\n      return this.isDraggable[type][id]\r\n    },\r\n    isDraggableUpdate(isDraggable) {\r\n      //console.log(\"UPDATE ISDRAGGABLE\")\r\n      //console.log(this.isDraggable)\r\n      this.isDraggable = isDraggable\r\n    },\r\n    buttonColor(type) {\r\n      return {\r\n        backgroundColor: this.color[type]\r\n      }\r\n    },\r\n\r\n    startDrag(event, id, type) {\r\n      //console.log(\"dragging \" + type + \" \" + id)\r\n      event.dataTransfer.dropEffect = \"move\"\r\n      event.dataTransfer.effectAllowed = \"move\"\r\n      let data = { type: type, id: id, color: this.color[type] }\r\n      event.dataTransfer.setData(\"data\", JSON.stringify(data));\r\n      //console.log(data)\r\n    },\r\n    handleClick(id, type) {\r\n      this.type = type\r\n      if (type === \"volEnvelope\") {\r\n        //console.log(\"Selected \" + id)\r\n        this.$emit(\"selection\", type, null);\r\n      } else {\r\n        //console.log(\"Selected \" + type + \" \" + id)\r\n        this.$emit(\"selection\", id, type);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.button {\r\n  display: grid;\r\n  grid-template-columns: 80% 18%;\r\n  flex: 1;\r\n  width: 100%;\r\n  height: 100%;\r\n  border: 0.06vw solid black; \r\n  border-radius: 0.2vw;\r\n  padding: 1%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  box-sizing: border-box;\r\n  align-content: center;\r\n  justify-items: stretch;\r\n\r\n}\r\n\r\n.buttonList {\r\n  padding-left: 0.3vw;\r\n  padding-right:  0.3vw;\r\n  padding-bottom: 0.3vw;\r\n  position: relative;\r\n  grid-row: 2;\r\n  display: flex;\r\n  flex-basis: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.identifier {\r\n  height: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n  /* border: 0.1vw solid black; */\r\n  display: flex;\r\n\r\n}\r\n\r\n.identifierVol {\r\n  border: 0.06vw solid black; \r\n  border-radius: 0.2vw;\r\n  flex: 1;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  height: 100%;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.draggableArea {\r\n  border-radius: 50%;\r\n  display: flex;\r\n  border: 0.1vw solid black;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  width: 100%;\r\n  aspect-ratio: 1/1;\r\n  font-size: .9vw;\r\n  align-items: flex-end;\r\n  justify-content: center;\r\n}.draggableArea:hover {\r\n  opacity: 40%;\r\n}\r\n.identifier img {\r\n  position: relative;\r\n  opacity: 60%;\r\n  width: 4vw;\r\n  aspect-ratio: 1/1;\r\n}\r\n.identifierVol img {\r\n  position: relative;\r\n  opacity: 60%;\r\n  width: 4vw;\r\n  aspect-ratio: 1/1;\r\n}\r\n.identifier img:hover {\r\n  opacity: 40%;\r\n}\r\n.identifierVol img:hover {\r\n  opacity: 40%;\r\n}\r\n</style>","import { render } from \"./ModSelector.vue?vue&type=template&id=0ef4a2a4&scoped=true\"\nimport script from \"./ModSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ModSelector.vue?vue&type=script&lang=js\"\n\nimport \"./ModSelector.vue?vue&type=style&index=0&id=0ef4a2a4&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0ef4a2a4\"]])\n\nexport default __exports__","import { render } from \"./Envelope.vue?vue&type=template&id=24c79e62&scoped=true\"\nimport script from \"./Envelope.vue?vue&type=script&lang=js\"\nexport * from \"./Envelope.vue?vue&type=script&lang=js\"\n\nimport \"./Envelope.vue?vue&type=style&index=0&id=24c79e62&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-24c79e62\"]])\n\nexport default __exports__","import { render } from \"./ModHost.vue?vue&type=template&id=1227fc83&scoped=true\"\nimport script from \"./ModHost.vue?vue&type=script&lang=js\"\nexport * from \"./ModHost.vue?vue&type=script&lang=js\"\n\nimport \"./ModHost.vue?vue&type=style&index=0&id=1227fc83&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1227fc83\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"span\" @mouseleave=\"handleMouseLeave\">\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct1\"\r\n        :octaveNumber=\"1\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct2\"\r\n        :octaveNumber=\"2\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <div class=\"container\">\r\n      <Octave\r\n        ref=\"oct3\"\r\n        :octaveNumber=\"3\"\r\n        @virtualKeyDown=\"handleNoteDown\"\r\n        @virtualKeyUp=\"handleNoteUp\"\r\n      />\r\n    </div>\r\n    <MIDIKeyboard @MIDIDown=\"handleMIDIDown\" @MIDIUp=\"handleMIDIUp\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MIDIKeyboard from \"./MIDIKeyboard.vue\";\r\nimport Octave from \"./Octave.vue\";\r\nimport * as Tone from \"tone\";\r\n\r\n\r\nexport default {\r\n  name: \"PianoKeyboard\",\r\n  components: {\r\n    Octave,\r\n    MIDIKeyboard,\r\n  },\r\n  data() {\r\n    return {\r\n      //From here we can transpose the whole keyboard by octaves\r\n      ocTranspose: 1,\r\n      // Object to track which keys are currently being held down\r\n      keysDown: {},\r\n      keys: \"awsedftgyhujkolpòà\",\r\n      notes: [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"],\r\n      //Transposition amount (in octaves) for the computer keyboard\r\n      keyboardTranspose: 0,\r\n      mouseDown: false,\r\n    };\r\n  },\r\n  mounted() {\r\n    // Add keydown and keyup event listeners to the window object\r\n    window.addEventListener(\"keydown\", this.handleKeyDown);\r\n    window.addEventListener(\"keyup\", this.handleKeyUp);\r\n  },\r\n  beforeDestroy() {\r\n    // Remove keydown and keyup event listeners from the window object\r\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\r\n    window.removeEventListener(\"keyup\", this.handleKeyUp);\r\n  },\r\n\r\n  methods: {\r\n    handleMouseUp(){\r\n      this.mouseDown = false\r\n    },\r\n    handleKeyDown(event) {\r\n      // If the key is not currently being held down, handle the keydown event\r\n      if (!this.keysDown[event.key] && this.keys.includes(event.key)) {\r\n        let note = this.notes[this.keys.indexOf(event.key) % 12];\r\n        let octave = parseInt(this.keys.indexOf(event.key) / 12, 10);\r\n        this.handleNoteDown(note, 2 + octave + this.keyboardTranspose, 100);\r\n        // Set keyDown flag to true\r\n        this.keysDown[event.key] = true;\r\n        // Change color on keyboard\r\n        if (\r\n          2 + octave + this.keyboardTranspose > 0 &&\r\n          2 + octave + this.keyboardTranspose < 4\r\n        )\r\n          this.$refs[\r\n            \"oct\" + (2 + octave + this.keyboardTranspose)\r\n          ].switchColorPress(note);\r\n      }\r\n      // Change octave of computer keyboard with z or x\r\n      if (!this.keysDown[event.key] && event.key == \"z\") {\r\n        this.keyboardTranspose = this.keyboardTranspose - 1;\r\n      }\r\n      if (!this.keysDown[event.key] && event.key == \"x\") {\r\n        this.keyboardTranspose = this.keyboardTranspose + 1;\r\n      }\r\n    },\r\n    handleKeyUp(event) {\r\n      // If the key is currently being held down, handle the keyup event\r\n      if (this.keysDown[event.key]) {\r\n        let note = this.notes[this.keys.indexOf(event.key) % 12];\r\n        let octave = parseInt(this.keys.indexOf(event.key) / 12, 10);\r\n        this.handleNoteUp(note, 2 + octave + this.keyboardTranspose);\r\n        // Set keyDown flag to false\r\n        this.keysDown[event.key] = false;\r\n        // Change color on keyboard\r\n        if (\r\n          2 + octave + this.keyboardTranspose > 0 &&\r\n          2 + octave + this.keyboardTranspose < 4\r\n        )\r\n          this.$refs[\r\n            \"oct\" + (2 + octave + this.keyboardTranspose)\r\n          ].switchColorRelease(note);\r\n      }\r\n    },\r\n    handleMIDIDown(note, octave, velocity) {\r\n      if (octave > 0 && octave < 4)\r\n        this.$refs[\"oct\" + octave].switchColorPress(note);\r\n      this.synths.list.forEach(synth => {\r\n        //console.log(\"Play note: \"+(note+octave)+\" at velocity: \"+velocity+\" from MIDI\")\r\n        synth.playNote(note+octave, velocity);\r\n      });\r\n      //play filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].playNote()\r\n        }\r\n      }\r\n      this.$emit(\"noteDown\", note)\r\n    },\r\n    handleMIDIUp(note, octave) {\r\n      //console.log(\"MIDI released \"+note+octave)\r\n      if (octave > 0 && octave < 4)\r\n        this.$refs[\"oct\" + octave].switchColorRelease(note);\r\n      this.synths.list.forEach(synth => {\r\n        synth.stopNote(note+octave);\r\n      });\r\n      //stop filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].stopNote()\r\n        }\r\n      }\r\n    },\r\n\r\n    handleNoteDown(note, octave, velocity = 100) {\r\n      let finalOctave = parseInt(octave) + this.ocTranspose;\r\n      //console.log(note+finalOctave+\" pressed\")\r\n      this.synths.list.forEach(synth => {\r\n        synth.playNote(note+finalOctave, velocity);\r\n        //console.log(synth)\r\n      });\r\n      \r\n      //play filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].playNote()\r\n        }\r\n      }\r\n      this.$emit(\"noteDown\", note+finalOctave)\r\n    },\r\n    handleNoteUp(note, octave) {\r\n      let finalOctave = parseInt(octave) + this.ocTranspose;\r\n      //console.log(note+finalOctave+\" released\")\r\n      this.synths.list.forEach(synth => {\r\n        synth.stopNote(note+finalOctave);\r\n      });\r\n      //stop filter envelopes\r\n      for(let chain in this.filterChains){\r\n        for( let filter in this.filterChains[chain]){\r\n          this.filterChains[chain][filter].stopNote()\r\n        }\r\n      }\r\n    },\r\n  }\r\n  \r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  background-color: white;\r\n  width: 100%;\r\n  height: 100%;\r\n  box-sizing: border-box;\r\n  position: relative;\r\n  border-top: .1vw solid gray\r\n}\r\n\r\n.span {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  grid-row: 3;\r\n  grid-column: span 3;\r\n}\r\n</style>","<template>\r\n</template>\r\n\r\n<script>\r\nexport default ({\r\n  data() {\r\n    return {\r\n      midiAccess: null,\r\n      midiInput: null,\r\n      notes: [ \"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\" ],\r\n      lowestOctave: -2,\r\n    };\r\n  },\r\n  mounted() {\r\n    navigator.requestMIDIAccess()\r\n      .then((midiAccess) => {\r\n        if(midiAccess.inputs.size>0){\r\n            this.midiAccess = midiAccess;\r\n            this.midiInput = midiAccess.inputs.values().next().value;\r\n            //console.log(this.midiInput);\r\n            this.midiInput.addEventListener('midimessage', this.handleMidiMessage)\r\n        }else{\r\n            //console.log('There are no MIDI inputs available, if you need MIDI, reload the page with a MIDI keyboard connected');\r\n        }\r\n        \r\n      });\r\n  },\r\n  methods: {\r\n    handleMidiMessage(event){\r\n        let [status, note, velocity] = event.data;\r\n        let label = this.notes[note%12]\r\n        let octave = (this.lowestOctave+parseInt(note/12,10))\r\n        if (status == 144) {\r\n            //console.log(`Keydown: note=${label}, velocity=${velocity}`);\r\n            this.$emit(\"MIDIDown\", label, octave, velocity);\r\n        } else if (status == 128) {\r\n            //console.log(`Keyup: note=${label}, velocity=${velocity}`);\r\n            this.$emit(\"MIDIUp\", label, octave);\r\n        }\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./MIDIKeyboard.vue?vue&type=template&id=6a1c7ae9\"\nimport script from \"./MIDIKeyboard.vue?vue&type=script&lang=js\"\nexport * from \"./MIDIKeyboard.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <div class=\"octave\" @mousedown=\"handleMouseDown\" @mouseup=\"handleMouseUp\"  @mouseover=\"handleMouseOver\">\r\n        <div class=\"woctave\">\r\n            <div id=\"C\" ref=\"C\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"D\" ref=\"D\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"E\" ref=\"E\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"F\" ref=\"F\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"G\" ref=\"G\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"A\" ref=\"A\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n            <div id=\"B\" ref=\"B\" @mouseleave=\"handleMouseLeave\" class=\"wkey wUnpressed\"></div>\r\n        </div>\r\n        <div class=\"boctave\">\r\n            <div id=\"C#\" ref=\"Cs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 3 / 5\"></div>\r\n            <div id=\"D#\" ref=\"Ds\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 6 / 8\"></div>\r\n            <div id=\"F#\" ref=\"Fs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 12 / 14\"></div>\r\n            <div id=\"G#\" ref=\"Gs\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 15 / 17\"></div>\r\n            <div id=\"A#\" ref=\"As\" @mouseleave=\"handleMouseLeave\" class=\"bkey bUnpressed\" style=\"grid-column: 18 / 20\"></div>\r\n        </div>   \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: \"Octave\",\r\n    props: {\r\n        octaveNumber: Number,\r\n    },\r\n        data() {\r\n        return {\r\n        }\r\n    },\r\n    methods: {\r\n        handleMouseLeave(e){\r\n            if(this.$parent.mouseDown){\r\n                this.notifyUp(e.currentTarget)\r\n            }    \r\n        },\r\n        handleMouseUp(e) {\r\n            this.$parent.mouseDown= false;\r\n            this.notifyUp(e.target)\r\n            //console.log(\"mouse is now up\")\r\n        },\r\n        handleMouseDown(e) {\r\n            this.$parent.mouseDown= true;\r\n            this.notifyDown(e.target)\r\n            //console.log(\"mouse is now down\")\r\n        },\r\n        handleMouseOver(e){\r\n            if(this.$parent.mouseDown){\r\n                //console.log(e.target)\r\n                this.notifyDown(e.target)\r\n\r\n            }\r\n            //console.log(\"mouseDown is \"+this.$parent.mouseDown+\" and is moving\")\r\n        },\r\n        notifyDown(key){\r\n            //emitting cusom event \"keyDown\"\r\n            this.$emit(\"virtualKeyDown\",key.id,this.octaveNumber)\r\n            this.switchColorPress(key.id)\r\n        },\r\n        switchColorPress(note){\r\n            if(note.includes(\"#\")){\r\n                note = note.replace(\"#\",\"s\")\r\n            }\r\n            let key = this.$refs[note];\r\n            //change color of key when pressed\r\n            if (key.classList.contains('wkey')){\r\n                key.classList.remove(\"wUnpressed\")\r\n                key.classList.add(\"pressed\")\r\n            }else{\r\n                key.classList.remove(\"bUnpressed\")\r\n                key.classList.add(\"pressed\")\r\n            }     \r\n        },\r\n        notifyUp(key){\r\n            //emitting cusom event \"keyUp\"\r\n            this.$emit(\"virtualKeyUp\",key.id,this.octaveNumber)\r\n            this.switchColorRelease(key.id)\r\n            //not needed, called in PianoKeyboard (when clicking with the mouse on keyboard all keys are released (color))\r\n        },\r\n        switchColorRelease(note){\r\n            if(note === \"all\"){\r\n                for (const ref of Object.values(this.$refs)) {\r\n                    if (ref.classList.contains('wkey')){\r\n                        ref.classList.add(\"wUnpressed\")\r\n                        ref.classList.remove(\"pressed\")\r\n                    }else{\r\n                        ref.classList.add(\"bUnpressed\")\r\n                        ref.classList.remove(\"pressed\")\r\n                    }\r\n                }  \r\n            }else{\r\n                if(note.includes(\"#\")){\r\n                note = note.replace(\"#\",\"s\")\r\n                }\r\n                let key = this.$refs[note];\r\n                //change color of key when released\r\n                if (key.classList.contains('wkey')){\r\n                    key.classList.add(\"wUnpressed\")\r\n                    key.classList.remove(\"pressed\")\r\n                }else{\r\n                    key.classList.add(\"bUnpressed\")\r\n                    key.classList.remove(\"pressed\")\r\n                }\r\n            }\r\n            \r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n    .octave{\r\n        width: 100%;\r\n        height: 100%;\r\n        box-sizing: border-box;\r\n        position:relative;   \r\n    }\r\n    .woctave{\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        display: flex;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;      \r\n    }\r\n    .boctave{\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        display: grid;\r\n        grid-template-columns: repeat(21, 1fr);  \r\n        grid-template-rows: 100%;  \r\n    }\r\n    .wkey{\r\n        width: 100%;\r\n        height: 100%;\r\n        border: solid black 0.06vw;\r\n        box-sizing: border-box;\r\n        border-radius: 0.2vw;\r\n        z-index: 1;\r\n    }\r\n    .wUnpressed{\r\n        background-color:#f8e7e6;\r\n        opacity: 40%;\r\n    }\r\n    .bUnpressed{\r\n        background-color:#645352;\r\n    }\r\n    .pressed{\r\n        background-color:#f3a59a;\r\n    }\r\n    .bkey{\r\n        width: 100%;\r\n        height: 60%;\r\n        border: solid black 0.06vw;\r\n        box-sizing: border-box;\r\n        border-radius: 0.2vw;\r\n        position: relative;\r\n        z-index: 1;\r\n    }\r\n    \r\n\r\n</style>","import { render } from \"./Octave.vue?vue&type=template&id=79bc0415\"\nimport script from \"./Octave.vue?vue&type=script&lang=js\"\nexport * from \"./Octave.vue?vue&type=script&lang=js\"\n\nimport \"./Octave.vue?vue&type=style&index=0&id=79bc0415&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./PianoKeyboard.vue?vue&type=template&id=083b757d&scoped=true\"\nimport script from \"./PianoKeyboard.vue?vue&type=script&lang=js\"\nexport * from \"./PianoKeyboard.vue?vue&type=script&lang=js\"\n\nimport \"./PianoKeyboard.vue?vue&type=style&index=0&id=083b757d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-083b757d\"]])\n\nexport default __exports__","import { render } from \"./MainHost.vue?vue&type=template&id=69cbefb2\"\nimport script from \"./MainHost.vue?vue&type=script&lang=js\"\nexport * from \"./MainHost.vue?vue&type=script&lang=js\"\n\nimport \"./MainHost.vue?vue&type=style&index=0&id=69cbefb2&lang=css\"\n\nimport exportComponent from \"C:\\\\Home\\\\Projects\\\\Programmazione\\\\WebStorm\\\\actam_final\\\\FurioColombo.github.io\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router'\r\nimport MainHost from '../views/MainHost.vue'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    name: 'synth',\r\n    component: MainHost\r\n  },\r\n  {\r\n    path: '/about',\r\n    name: 'about',\r\n    // route level code-splitting\r\n    // this generates a separate chunk (about.[hash].js) for this route\r\n    // which is lazy-loaded when the route is visited.\r\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/AboutView.vue')\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nconst app = createApp(App).use(router)\r\n//global properties\r\n\r\n//audio\r\napp.config.globalProperties.synths = {\r\n    list: [],\r\n}\r\n\r\napp.config.globalProperties.nFilterChains = 3\r\napp.config.globalProperties.nFiltersXchain = 3\r\napp.config.globalProperties.areFiltersMounted = false\r\n\r\napp.config.globalProperties.nFxChains = 3 //DO NOT CHANGE WITHOUT CHANGING GRID STYLE IN FX\r\napp.config.globalProperties.nFxXchain = 5\r\napp.config.globalProperties.nNodesXfxChain = 7\r\napp.config.globalProperties.areFxMounted = false\r\n\r\napp.config.globalProperties.nModulators = 6\r\napp.config.globalProperties.nEnvelopes = 3\r\napp.config.globalProperties.nLfo = 2\r\napp.config.globalProperties.nKnobs = 9      //DO NOT CHANGE WITHOUT CHANGING GRID STYLE IN KNOBS\r\napp.config.globalProperties.polyphonyVoices = 4\r\n\r\n// init filters global matrix\r\napp.config.globalProperties.filterChains = Array(app.config.globalProperties.nFilterChains)\r\nfor (let i = 0; i < app.config.globalProperties.nFilterChains; i++) {\r\n    app.config.globalProperties.filterChains[i] = Array(app.config.globalProperties.nFiltersXchain)\r\n}\r\n\r\n// init fx global matrix\r\napp.config.globalProperties.fxChains = Array(app.config.globalProperties.nFxChains)\r\nfor (let i = 0; i < app.config.globalProperties.nFxChains; i++) {\r\n    app.config.globalProperties.fxChains[i] = Array(app.config.globalProperties.nNodesXfxChain) // gain nodes at start and end\r\n}\r\n//console.log(app.config.globalProperties.fxChains)\r\n\r\napp.config.globalProperties.colors = {\r\n    green: {light: '#7fe2a6', medium: '#599e74', dark: '#335a42', glow: '#b2eeca'},\r\n    yellow: {light: '#fee573', medium: '#e5ce68', dark: '#b2a051', glow: '#feefab'},\r\n    azure: {light: '#8fe1d8', medium: '#81cbc2', dark: '#649e97', glow: '#b1eae4'},\r\n    purple: {light: '#cdadc4', medium: '#b99cb0', dark: '#a48a9d', glow: '#e1cedc'},\r\n    pink: {light: '#f3a59a', medium: '#db958b', dark: '#c2847b', glow: '#f9d2cd'},\r\n    orange: {light: '#ffc16c', medium: '#e6ae61', dark: '#cc9a56', glow: '#ffd498'},\r\n    gray: {light: '#a8a8a8', medium: '#868686', dark: '#111111', glow: '#f6f6f6'},\r\n}\r\n\r\n//To communicate from dropzone module to dragzone module\r\napp.config.globalProperties.dropFeedback = null\r\napp.provide('dropFeedback', app.config.globalProperties.dropFeedback)\r\n\r\napp.config.globalProperties.isDraggable = {\r\n    envelope: {},\r\n    lfo: {}\r\n}\r\n\r\n\r\napp.mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"js/\" + \"about\" + \".\" + \"deef0cfd\" + \".js\";\n};","// This function allow to reference async chunks\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"css/\" + \"about\" + \".\" + \"c08e986a\" + \".css\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","var inProgress = {};\nvar dataWebpackPrefix = \"actam:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t};\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/\";","if (typeof document === \"undefined\") return;\nvar createStylesheet = function(chunkId, fullhref, oldTag, resolve, reject) {\n\tvar linkTag = document.createElement(\"link\");\n\n\tlinkTag.rel = \"stylesheet\";\n\tlinkTag.type = \"text/css\";\n\tvar onLinkComplete = function(event) {\n\t\t// avoid mem leaks.\n\t\tlinkTag.onerror = linkTag.onload = null;\n\t\tif (event.type === 'load') {\n\t\t\tresolve();\n\t\t} else {\n\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\tvar realHref = event && event.target && event.target.href || fullhref;\n\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + realHref + \")\");\n\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n\t\t\terr.type = errorType;\n\t\t\terr.request = realHref;\n\t\t\tlinkTag.parentNode.removeChild(linkTag)\n\t\t\treject(err);\n\t\t}\n\t}\n\tlinkTag.onerror = linkTag.onload = onLinkComplete;\n\tlinkTag.href = fullhref;\n\n\tif (oldTag) {\n\t\toldTag.parentNode.insertBefore(linkTag, oldTag.nextSibling);\n\t} else {\n\t\tdocument.head.appendChild(linkTag);\n\t}\n\treturn linkTag;\n};\nvar findStylesheet = function(href, fullhref) {\n\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n\tfor(var i = 0; i < existingLinkTags.length; i++) {\n\t\tvar tag = existingLinkTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return tag;\n\t}\n\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n\tfor(var i = 0; i < existingStyleTags.length; i++) {\n\t\tvar tag = existingStyleTags[i];\n\t\tvar dataHref = tag.getAttribute(\"data-href\");\n\t\tif(dataHref === href || dataHref === fullhref) return tag;\n\t}\n};\nvar loadStylesheet = function(chunkId) {\n\treturn new Promise(function(resolve, reject) {\n\t\tvar href = __webpack_require__.miniCssF(chunkId);\n\t\tvar fullhref = __webpack_require__.p + href;\n\t\tif(findStylesheet(href, fullhref)) return resolve();\n\t\tcreateStylesheet(chunkId, fullhref, null, resolve, reject);\n\t});\n}\n// object to store loaded CSS chunks\nvar installedCssChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.miniCss = function(chunkId, promises) {\n\tvar cssChunks = {\"443\":1};\n\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n\t\tpromises.push(installedCssChunks[chunkId] = loadStylesheet(chunkId).then(function() {\n\t\t\tinstalledCssChunks[chunkId] = 0;\n\t\t}, function(e) {\n\t\t\tdelete installedCssChunks[chunkId];\n\t\t\tthrow e;\n\t\t}));\n\t}\n};\n\n// no hmr","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkactam\"] = self[\"webpackChunkactam\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(6226); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_createElementVNode","_createVNode","_component_router_link","to","className","src","_imports_0","alt","onClick","$options","_component_router_view","mounted","methods","openAbout","window","open","__exports__","render","class","_createElementBlock","onMouseup","onMousemove","_hoisted_1","_component_OscHost","ref","onNewOsc","_component_FilterHost","onFilterInitialized","_component_FxHost","_component_ToolHost","_component_ModHost","_component_PianoKeyboard","onNoteDown","onNoteUp","_createBlock","_component_LFO","key","_hoisted_2","_hoisted_4","_hoisted_6","style","oscHost","_Fragment","oscList","osc","_component_Osc","id","onDisposed","length","draggable","_imports_1","_imports_2","_imports_3","type_button","type_text","$data","this","oscTypeIndex","mod_area","volume_area","pitch_slider","_hoisted_3","mod_slider","volume_slider","pitch_area","pitch_hand","lineL","lineU","lineR","onDragenter","onDragleave","onDragover","onDrop","$event","onMousedown","_toDisplayString","osc_wave","oscWaveIndex","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","onChainclick","_hoisted_13","vol_damp_factor","MyPolySynth","constructor","synthType","destination","nVoices","console","log","modulatorsData","envelope","vol","amount","parameters","attack","decay","sustain","release","mod","pitch","lfo","frequency","waveform","min","max","synthPreset","type","transpose","partials","pan","dampNode","Gain","gainNode","allVoices","freeVoices","busyVoices","lastNotes","Array","initVoices","connect","index","modulators","signal","scale","lfoGain","gain","synth","createSynth","oscillator","disconnect","dispose","noiseAdsrGain","noiseGain","noise","Tone","voice","target","tempMod","createModulator","createScale","connectModulator","push","initialized","updateModulators","playNote","note","velocity","lastNote","shift","toRaw","cancel","triggerAttack","stop","start","stopNote","triggerRelease","setTimeout","Synth","nextTick","set","Envelope","LFO","forEach","scaleSetter","modulatorSetter","updateSynths","modulator","Math","chain","detune","setModulatorParameters","setModulatorAmount","setParameters","volume","modulation","route","disconnectDispose","wave_types","osc_types","components","SineIcon","SquareIcon","TriangleIcon","SawtoothIcon","data","color","colors","pink","azure","green","maxPitch","minPitch","waveform_btn_style","wave_icon_size","is_modulationDown","is_volumeDown","is_pitchDown","isFilterChainRouteActive","props","document","addEventListener","onMouseMove","onMouseUp","resizeGraphics","polyphonyVoices","gainToDb","synths","list","initConnections","$emit","computed","osc_container","background","fontSize","glow","gray","dark","medium","transform","opacity","backgroundColor","borderLeft","border","chain_buttons","button_1","purple","light","button_2","button_3","handleDrop","event","JSON","parse","dataTransfer","getData","dispatchEvent","CustomEvent","detail","object","handleDragEnter","handleDragLeave","unlinkMod","computedModulation","width","height","borderRadius","position","right","display","left","bottom","computedModText","splice","indexOf","filterChains","getToneFilter","body","clientWidth","e","movementY","movementX","floor","modulationDown","volumeDown","pitchDown","nextOscType","nextWaveform","unmounted","removeEventListener","Osc","name","i","addOsc","handleNewOsc","$refs","removeOsc","voidBorder","filterHost","chainList","_component_FilterChain","chainLine","chainDot","filterList","filter","_component_Filter","chainId","filter_type","chainColor","onFiltersMounted","handleFiltersMounted","_hoisted_5","filter_logo","resonance","toFixed","logo_text_back","MyFilter","cutoff","activeNotes","initFilterParams","getCutoff","getResonance","self","cutoffLogMapping","pow","log10","setCutoff","setResonance","resonanceRangeNormalizer","Q","err","x","error","yellow","is_logoDown","nFiltersXchain","nFilterChains","zIndex","top","cursor","logoDown","getMyFilter","computedHeadStyle","computedGlow","computedLP","computedHP","computedBDMaks","clip","clipPath","computedBD","computedBDCircle","logo","filterTypes","Filter","nFilters","isFxChainRouteActive","fx_chain_1","fx_chain_2","fx_chain_3","$props","aspectRatio","fxChains","setRouting","FilterChain","chain_colors","fxBack","fxHost","chainHead1","chainHead2","chainHead3","fx","_component_FxCell","item","onFxMounted","initFxConnections","gainList","_imports_4","_imports_5","typeId","iconDiv","onMouseover","onIconEnter","onMouseout","_hoisted_7","MyEffect","effect","generateToneFx","modulatorsPreset","getToneReference","createReverb","createDelay","createDistortion","createVibrato","createPan","createChorus","setFxParams","wet","delayTime","feedback","distortion","depth","coeff","spread","toString","Reverb","PingPongDelay","Distortion","Vibrato","Panner","Chorus","types","Fx_colors","is_down","startX","startY","endX","endY","threshold","nFxChains","nFxXchain","computedGlowStyle","iconDivBlack","onIconLeave","isSVGTag","nextFx","distance","sqrt","generateNextTypeIndex","fxType","changeFxType","generateRandomTypeIndex","round","random","setToBypass","fxDown","clientX","clientY","FxCell","Fx_chain1","Fx_chain2","Fx_chain3","isGainSelected","chainsGains","fill","nNodesXfxChain","j","getDestination","setChainVolume","gainMouseDown","gainId","handleMouseUp","handleMouseMove","isSelected","computedFxGainKnobStyle","channelGain","orange","boxSizing","borderTop","toolsHost","_component_SpecAnalyzer","_component_Oscilloscope","_component_Meter","Meter","widthLeft","widthRight","computedWidthLeft","computedWidthRight","meter","channels","intervalId","setInterval","updateWidths","leftVolume","rightVolume","getValue","isFinite","dbToGain","beforeDestroy","clearInterval","oscilloscopeCanvas","oscilloscopeData","timing","oscilloscope","startOscilloscope","canvas","offsetWidth","offsetHeight","ctx","getContext","setTiming","updateOscilloscopeData","draw","clearRect","strokeStyle","lineWidth","beginPath","y","moveTo","lineTo","stroke","analyzerCanvas","analyser","canvasCtx","startAnalyzer","value","fillStyle","fillRect","Oscilloscope","SpecAnalyzer","setOscilloscopeTiming","mseconds","_component_VolEnvelope","_component_Envelope","onIsDraggableUpdate","_component_Lfo","_component_ModSelector","onSelection","container","_component_EnvelopeVisualizer","is_volume","onParamRefresh","_component_Knobs","knob","isOn","knobList","freeKnobs","nKnobs","isMouseDown","selectedKnobId","isDraggable","updateParameters","knobText","addLink","removeLink","mouseDown","knobId","computedFaderStyle","rawKnobAmount","envelope_container","adsr","attack_Color","decay_head","decay_Color","sustain_head","sustain_Color","release_Color","space","attackCurve","decayCurve","releaseCurve","sustain_lev","duration","is_attack_down","is_decay_down","is_sustain_down","is_release_down","test","isDragging","tempEvent","p","attack_down","decay_down","sustain_down","release_down","gridTemplateColumns","ceil","gridTemplateRows","attack_dot","borderColor","decay_dot","release_dot","attack_area","decay_area","sustain_area","release_area","EnvelopeVisualizer","handleRefresh","unHide","classList","remove","hide","add","visualizer","lfo_elems_row","_component_LfoVisualizer","freq","wave","lfoFaderBase","lfoFreqFaderLevel","qualFactor","sinValsBuffer","triValsBuffer","sqValsBuffer","sawValsBuffer","sin","PI","abs","updateParams","stopOscilloscope","t","y_next","waveforms","LfoVisualizer","Knobs","isDepthFaderDown","isFreqFaderDown","waveformId","lfoDepthFaderLevel","lfo_waveform_btn_selector","setParams","waveformNameString","knobs","nextWaveType","resetOscilloscope","depthFaderSelected","freqFaderSelected","link","unLink","buttonList","button","onDragstart","inject","mainEnv","buttonListEnv","buttonListLfo","nEnvelopes","nLfo","textId","fontWeight","draggability","isDraggableUpdate","buttonColor","startDrag","dropEffect","effectAllowed","setData","stringify","handleClick","handleDraggableUpdate","VolEnvelope","Lfo","ModSelector","selection","selectionType","envList","lfoList","created","volEnvelope","handleLink","handleUnlink","modHost","modSelector","envelopes","lfos","changeSelection","onMouseleave","_ctx","_component_Octave","octaveNumber","onVirtualKeyDown","onVirtualKeyUp","_component_MIDIKeyboard","onMIDIDown","onMIDIUp","midiAccess","midiInput","notes","lowestOctave","navigator","requestMIDIAccess","then","inputs","size","values","next","handleMidiMessage","status","label","octave","parseInt","Number","handleMouseLeave","$parent","notifyUp","currentTarget","handleMouseDown","notifyDown","handleMouseOver","switchColorPress","includes","replace","contains","switchColorRelease","Object","Octave","MIDIKeyboard","ocTranspose","keysDown","keys","keyboardTranspose","handleKeyDown","handleKeyUp","handleNoteDown","handleNoteUp","handleMIDIDown","handleMIDIUp","finalOctave","OscHost","FilterHost","FxHost","ToolHost","ModHost","PianoKeyboard","draggedInfo","initOscConnections","initFilterConnections","pianoKeyboard","deleteDraggedInfo","noteDownHandle","noteUpHandle","routes","path","component","MainHost","router","createRouter","history","createWebHistory","process","app","createApp","App","use","config","globalProperties","areFiltersMounted","areFxMounted","nModulators","dropFeedback","provide","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","f","chunkId","Promise","all","reduce","promises","u","miniCssF","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","inProgress","dataWebpackPrefix","l","url","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","createElement","charset","timeout","nc","setAttribute","onScriptComplete","prev","onerror","onload","clearTimeout","doneFns","parentNode","removeChild","bind","head","appendChild","Symbol","toStringTag","createStylesheet","fullhref","oldTag","resolve","reject","linkTag","rel","onLinkComplete","errorType","realHref","href","Error","code","request","insertBefore","nextSibling","findStylesheet","existingLinkTags","tag","dataHref","existingStyleTags","loadStylesheet","installedCssChunks","miniCss","cssChunks","installedChunks","installedChunkData","promise","loadingEnded","realSrc","message","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}